(function(){
shadow$provide[585]=function(va,V,Ta,E){function q(w,B,C){var a,G={},p=null,h=null;void 0!==C&&(p=""+C);void 0!==B.key&&(p=""+B.key);void 0!==B.ref&&(h=B.ref);for(a in B)r.call(B,a)&&!d.hasOwnProperty(a)&&(G[a]=B[a]);if(w&&w.defaultProps)for(a in B=w.defaultProps,B)void 0===G[a]&&(G[a]=B[a]);return{$$typeof:S,type:w,key:p,ref:h,props:G,_owner:A.current}}V(19);va=V(22);var S=60103;E.Fragment=60107;"function"===typeof Symbol&&Symbol.for&&(V=Symbol.for,S=V("react.element"),E.Fragment=V("react.fragment"));
var A=va.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,r=Object.prototype.hasOwnProperty,d={key:!0,ref:!0,__self:!0,__source:!0};E.jsx=q;E.jsxs=q};
shadow$provide[587]=function(va,V,Ta,E){Ta.exports=V(585)};
shadow$provide[588]=function(va,V,Ta,E){function q(pc){for(var Dd="https://reactjs.org/docs/error-decoder.html?invariant\x3d"+pc,vd=1;vd<arguments.length;vd++)Dd+="\x26args[]\x3d"+encodeURIComponent(arguments[vd]);return"Minified React error #"+pc+"; visit "+Dd+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function S(pc){if(null==pc)return null;if("function"===typeof pc)return pc.displayName||pc.name||null;if("string"===typeof pc)return pc;
switch(pc){case M:return"Fragment";case aa:return"Portal";case D:return"Profiler";case Q:return"StrictMode";case X:return"Suspense";case F:return"SuspenseList"}if("object"===typeof pc)switch(pc.$$typeof){case P:return(pc.displayName||"Context")+".Consumer";case N:return(pc._context.displayName||"Context")+".Provider";case ba:var Dd=pc.render;Dd=Dd.displayName||Dd.name||"";return pc.displayName||(""!==Dd?"ForwardRef("+Dd+")":"ForwardRef");case ha:return S(pc.type);case Z:return S(pc._render);case K:Dd=
pc._payload;pc=pc._init;try{return S(pc(Dd))}catch(vd){}}return null}function A(pc,Dd){for(var vd=pc._threadCount|0;vd<=Dd;vd++)pc[vd]=pc._currentValue2,pc._threadCount=vd+1}function r(pc,Dd,vd,Yd){if(Yd&&(Yd=pc.contextType,"object"===typeof Yd&&null!==Yd))return A(Yd,vd),Yd[vd];if(pc=pc.contextTypes){vd={};for(var ud in pc)vd[ud]=Dd[ud];Dd=vd}else Dd=ya;return Dd}function d(pc){if(Ea.call(Ya,pc))return!0;if(Ea.call(Pa,pc))return!1;if(Ua.test(pc))return Ya[pc]=!0;Pa[pc]=!0;return!1}function w(pc,
Dd,vd,Yd){if(null!==vd&&0===vd.type)return!1;switch(typeof Dd){case "function":case "symbol":return!0;case "boolean":if(Yd)return!1;if(null!==vd)return!vd.acceptsBooleans;pc=pc.toLowerCase().slice(0,5);return"data-"!==pc&&"aria-"!==pc;default:return!1}}function B(pc,Dd,vd,Yd){if(null===Dd||"undefined"===typeof Dd||w(pc,Dd,vd,Yd))return!0;if(Yd)return!1;if(null!==vd)switch(vd.type){case 3:return!Dd;case 4:return!1===Dd;case 5:return isNaN(Dd);case 6:return isNaN(Dd)||1>Dd}return!1}function C(pc,Dd,
vd,Yd,ud,Od,pd){this.acceptsBooleans=2===Dd||3===Dd||4===Dd;this.attributeName=Yd;this.attributeNamespace=ud;this.mustUseProperty=vd;this.propertyName=pc;this.type=Dd;this.sanitizeURL=Od;this.removeEmptyString=pd}function a(pc){return pc[1].toUpperCase()}function G(pc){if("boolean"===typeof pc||"number"===typeof pc)return""+pc;pc=""+pc;var Dd=fb.exec(pc);if(Dd){var vd="",Yd,ud=0;for(Yd=Dd.index;Yd<pc.length;Yd++){switch(pc.charCodeAt(Yd)){case 34:Dd="\x26quot;";break;case 38:Dd="\x26amp;";break;case 39:Dd=
"\x26#x27;";break;case 60:Dd="\x26lt;";break;case 62:Dd="\x26gt;";break;default:continue}ud!==Yd&&(vd+=pc.substring(ud,Yd));ud=Yd+1;vd+=Dd}pc=ud!==Yd?vd+pc.substring(ud,Yd):vd}return pc}function p(pc,Dd){var vd=Na.hasOwnProperty(pc)?Na[pc]:null,Yd;if(Yd="style"!==pc)Yd=null!==vd?0===vd.type:!(2<pc.length)||"o"!==pc[0]&&"O"!==pc[0]||"n"!==pc[1]&&"N"!==pc[1]?!1:!0;if(Yd||B(pc,Dd,vd,!1))return"";if(null!==vd){pc=vd.attributeName;Yd=vd.type;if(3===Yd||4===Yd&&!0===Dd)return pc+'\x3d""';vd.sanitizeURL&&
(Dd=""+Dd);return pc+'\x3d"'+(G(Dd)+'"')}return d(pc)?pc+'\x3d"'+(G(Dd)+'"'):""}function h(pc,Dd){return pc===Dd&&(0!==pc||1/pc===1/Dd)||pc!==pc&&Dd!==Dd}function k(){if(null===oa)throw Error(q(321));return oa}function f(){if(0<Bb)throw Error(q(312));return{memoizedState:null,queue:null,next:null}}function v(){null===ra?null===Ca?(Aa=!1,Ca=ra=f()):(Aa=!0,ra=Ca):null===ra.next?(Aa=!1,ra=ra.next=f()):(Aa=!0,ra=ra.next);return ra}function x(pc,Dd,vd,Yd){for(;Ja;)Ja=!1,Bb+=1,ra=null,vd=pc(Dd,Yd);J();
return vd}function J(){oa=null;Ja=!1;Ca=null;Bb=0;ra=Sa=null}function z(pc,Dd){return"function"===typeof Dd?Dd(pc):Dd}function u(pc,Dd,vd){oa=k();ra=v();if(Aa){var Yd=ra.queue;Dd=Yd.dispatch;if(null!==Sa&&(vd=Sa.get(Yd),void 0!==vd)){Sa.delete(Yd);Yd=ra.memoizedState;do Yd=pc(Yd,vd.action),vd=vd.next;while(null!==vd);ra.memoizedState=Yd;return[Yd,Dd]}return[ra.memoizedState,Dd]}pc=pc===z?"function"===typeof Dd?Dd():Dd:void 0!==vd?vd(Dd):Dd;ra.memoizedState=pc;pc=ra.queue={last:null,dispatch:null};
pc=pc.dispatch=m.bind(null,oa,pc);return[ra.memoizedState,pc]}function t(pc,Dd){oa=k();ra=v();Dd=void 0===Dd?null:Dd;if(null!==ra){var vd=ra.memoizedState;if(null!==vd&&null!==Dd){var Yd=vd[1];a:if(null===Yd)Yd=!1;else{for(var ud=0;ud<Yd.length&&ud<Dd.length;ud++)if(!Oa(Dd[ud],Yd[ud])){Yd=!1;break a}Yd=!0}if(Yd)return vd[0]}}pc=pc();ra.memoizedState=[pc,Dd];return pc}function m(pc,Dd,vd){if(!(25>Bb))throw Error(q(301));if(pc===oa)if(Ja=!0,pc={action:vd,next:null},null===Sa&&(Sa=new Map),vd=Sa.get(Dd),
void 0===vd)Sa.set(Dd,pc);else{for(Dd=vd;null!==Dd.next;)Dd=Dd.next;Dd.next=pc}}function R(){}function ka(pc){switch(pc){case "svg":return"http://www.w3.org/2000/svg";case "math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function L(pc){if(void 0===pc||null===pc)return pc;var Dd="";H.Children.forEach(pc,function(vd){null!=vd&&(Dd+=vd)});return Dd}function ma(pc,Dd){if(void 0===pc)throw Error(q(152,S(Dd)||"Component"));}function Y(pc,Dd,vd){function Yd(pd,
Rd){var Mb=Rd.prototype&&Rd.prototype.isReactComponent,fc=r(Rd,Dd,vd,Mb),Xb=[],sb=!1,nb={isMounted:function(){return!1},enqueueForceUpdate:function(){if(null===Xb)return null},enqueueReplaceState:function(qe,td){sb=!0;Xb=[td]},enqueueSetState:function(qe,td){if(null===Xb)return null;Xb.push(td)}};if(Mb){if(Mb=new Rd(pd.props,fc,nb),"function"===typeof Rd.getDerivedStateFromProps){var bc=Rd.getDerivedStateFromProps.call(null,pd.props,Mb.state);null!=bc&&(Mb.state=fa({},Mb.state,bc))}}else if(oa={},
Mb=Rd(pd.props,fc,nb),Mb=x(Rd,pd.props,Mb,fc),null==Mb||null==Mb.render){pc=Mb;ma(pc,Rd);return}Mb.props=pd.props;Mb.context=fc;Mb.updater=nb;nb=Mb.state;void 0===nb&&(Mb.state=nb=null);if("function"===typeof Mb.UNSAFE_componentWillMount||"function"===typeof Mb.componentWillMount)if("function"===typeof Mb.componentWillMount&&"function"!==typeof Rd.getDerivedStateFromProps&&Mb.componentWillMount(),"function"===typeof Mb.UNSAFE_componentWillMount&&"function"!==typeof Rd.getDerivedStateFromProps&&Mb.UNSAFE_componentWillMount(),
Xb.length){nb=Xb;var tc=sb;Xb=null;sb=!1;if(tc&&1===nb.length)Mb.state=nb[0];else{bc=tc?nb[0]:Mb.state;var Tc=!0;for(tc=tc?1:0;tc<nb.length;tc++){var cd=nb[tc];cd="function"===typeof cd?cd.call(Mb,bc,pd.props,fc):cd;null!=cd&&(Tc?(Tc=!1,bc=fa({},bc,cd)):fa(bc,cd))}Mb.state=bc}}else Xb=null;pc=Mb.render();ma(pc,Rd);if("function"===typeof Mb.getChildContext&&(pd=Rd.childContextTypes,"object"===typeof pd)){var Ld=Mb.getChildContext(),ae;for(ae in Ld)if(!(ae in pd))throw Error(q(108,S(Rd)||"Unknown",
ae));}Ld&&(Dd=fa({},Dd,Ld))}for(;H.isValidElement(pc);){var ud=pc,Od=ud.type;if("function"!==typeof Od)break;Yd(ud,Od)}return{child:pc,context:Dd}}var fa=V(19),H=V(22),aa=60106,M=60107,Q=60108,D=60114,N=60109,P=60110,ba=60112,X=60113,F=60120,ha=60115,K=60116,Z=60121,ea=60117,ca=60119,pa=60129,za=60131;"function"===typeof Symbol&&Symbol.for&&(va=Symbol.for,aa=va("react.portal"),M=va("react.fragment"),Q=va("react.strict_mode"),D=va("react.profiler"),N=va("react.provider"),P=va("react.context"),ba=va("react.forward_ref"),
X=va("react.suspense"),F=va("react.suspense_list"),ha=va("react.memo"),K=va("react.lazy"),Z=va("react.block"),ea=va("react.fundamental"),ca=va("react.scope"),pa=va("react.debug_trace_mode"),za=va("react.legacy_hidden"));va=H.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;var ya={},Ga=new Uint16Array(16);for(V=0;15>V;V++)Ga[V]=V+1;Ga[15]=0;var Ua=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,
Ea=Object.prototype.hasOwnProperty,Pa={},Ya={},Na={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(pc){Na[pc]=new C(pc,0,!1,pc,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(pc){var Dd=pc[0];Na[Dd]=new C(Dd,1,!1,pc[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(pc){Na[pc]=
new C(pc,2,!1,pc.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(pc){Na[pc]=new C(pc,2,!1,pc,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(pc){Na[pc]=new C(pc,3,!1,pc.toLowerCase(),null,!1,!1)});["checked",
"multiple","muted","selected"].forEach(function(pc){Na[pc]=new C(pc,3,!0,pc,null,!1,!1)});["capture","download"].forEach(function(pc){Na[pc]=new C(pc,4,!1,pc,null,!1,!1)});["cols","rows","size","span"].forEach(function(pc){Na[pc]=new C(pc,6,!1,pc,null,!1,!1)});["rowSpan","start"].forEach(function(pc){Na[pc]=new C(pc,5,!1,pc.toLowerCase(),null,!1,!1)});var gb=/[\-:]([a-z])/g;"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(pc){var Dd=
pc.replace(gb,a);Na[Dd]=new C(Dd,1,!1,pc,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(pc){var Dd=pc.replace(gb,a);Na[Dd]=new C(Dd,1,!1,pc,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(pc){var Dd=pc.replace(gb,a);Na[Dd]=new C(Dd,1,!1,pc,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(pc){Na[pc]=new C(pc,1,!1,pc.toLowerCase(),null,!1,!1)});
Na.xlinkHref=new C("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(pc){Na[pc]=new C(pc,1,!1,pc.toLowerCase(),null,!0,!0)});var fb=/["'&<>]/,Oa="function"===typeof Object.is?Object.is:h,oa=null,Ca=null,ra=null,Aa=!1,Ja=!1,Sa=null,Bb=0,ib=null,Nb={readContext:function(pc){var Dd=ib.threadID;A(pc,Dd);return pc[Dd]},useContext:function(pc){k();var Dd=ib.threadID;A(pc,Dd);return pc[Dd]},useMemo:t,useReducer:u,useRef:function(pc){oa=
k();ra=v();var Dd=ra.memoizedState;return null===Dd?(pc={current:pc},ra.memoizedState=pc):Dd},useState:function(pc){return u(z,pc)},useLayoutEffect:function(){},useCallback:function(pc,Dd){return t(function(){return pc},Dd)},useImperativeHandle:R,useEffect:R,useDebugValue:R,useDeferredValue:function(pc){k();return pc},useTransition:function(){k();return[function(pc){pc()},!1]},useOpaqueIdentifier:function(){return(ib.identifierPrefix||"")+"R:"+(ib.uniqueID++).toString(36)},useMutableSource:function(pc,
Dd){k();return Dd(pc._source)}},Wb={area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0},hc=fa({menuitem:!0},Wb),Qa={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,
gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ob=["Webkit","ms","Moz","O"];Object.keys(Qa).forEach(function(pc){ob.forEach(function(Dd){Dd=Dd+pc.charAt(0).toUpperCase()+pc.substring(1);Qa[Dd]=Qa[pc]})});var qb=/([A-Z])/g,Yb=/^ms-/,Ic=H.Children.toArray,
ad=va.ReactCurrentDispatcher,Mc={listing:!0,pre:!0,textarea:!0},Gb=/^[a-zA-Z][a-zA-Z:_\.\-\d]*$/,wc={},Wc={},id=Object.prototype.hasOwnProperty,Kd={children:null,dangerouslySetInnerHTML:null,suppressContentEditableWarning:null,suppressHydrationWarning:null},Jd=function(){function pc(vd,Yd,ud){H.isValidElement(vd)?vd.type!==M?vd=[vd]:(vd=vd.props.children,vd=H.isValidElement(vd)?[vd]:Ic(vd)):vd=Ic(vd);vd={type:null,domNamespace:"http://www.w3.org/1999/xhtml",children:vd,childIndex:0,context:ya,footer:""};
var Od=Ga[0];if(0===Od){var pd=Ga;Od=pd.length;var Rd=2*Od;if(!(65536>=Rd))throw Error(q(304));var Mb=new Uint16Array(Rd);Mb.set(pd);Ga=Mb;Ga[0]=Od+1;for(pd=Od;pd<Rd-1;pd++)Ga[pd]=pd+1;Ga[Rd-1]=0}else Ga[0]=Ga[Od];this.threadID=Od;this.stack=[vd];this.exhausted=!1;this.currentSelectValue=null;this.previousWasTextNode=!1;this.makeStaticMarkup=Yd;this.suspenseDepth=0;this.contextIndex=-1;this.contextStack=[];this.contextValueStack=[];this.uniqueID=0;this.identifierPrefix=ud&&ud.identifierPrefix||""}
var Dd=pc.prototype;Dd.destroy=function(){if(!this.exhausted){this.exhausted=!0;this.clearProviders();var vd=this.threadID;Ga[vd]=Ga[0];Ga[0]=vd}};Dd.pushProvider=function(vd){var Yd=++this.contextIndex,ud=vd.type._context,Od=this.threadID;A(ud,Od);var pd=ud[Od];this.contextStack[Yd]=ud;this.contextValueStack[Yd]=pd;ud[Od]=vd.props.value};Dd.popProvider=function(){var vd=this.contextIndex,Yd=this.contextStack[vd],ud=this.contextValueStack[vd];this.contextStack[vd]=null;this.contextValueStack[vd]=
null;this.contextIndex--;Yd[this.threadID]=ud};Dd.clearProviders=function(){for(var vd=this.contextIndex;0<=vd;vd--)this.contextStack[vd][this.threadID]=this.contextValueStack[vd]};Dd.read=function(vd){if(this.exhausted)return null;var Yd=ib;ib=this;var ud=ad.current;ad.current=Nb;try{for(var Od=[""],pd=!1;Od[0].length<vd;){if(0===this.stack.length){this.exhausted=!0;var Rd=this.threadID;Ga[Rd]=Ga[0];Ga[0]=Rd;break}var Mb=this.stack[this.stack.length-1];if(pd||Mb.childIndex>=Mb.children.length){var fc=
Mb.footer;""!==fc&&(this.previousWasTextNode=!1);this.stack.pop();if("select"===Mb.type)this.currentSelectValue=null;else if(null!=Mb.type&&null!=Mb.type.type&&Mb.type.type.$$typeof===N)this.popProvider(Mb.type);else if(Mb.type===X){this.suspenseDepth--;var Xb=Od.pop();if(pd){pd=!1;var sb=Mb.fallbackFrame;if(!sb)throw Error(q(303));this.stack.push(sb);Od[this.suspenseDepth]+="\x3c!--$!--\x3e";continue}else Od[this.suspenseDepth]+=Xb}Od[this.suspenseDepth]+=fc}else{var nb=Mb.children[Mb.childIndex++],
bc="";try{bc+=this.render(nb,Mb.context,Mb.domNamespace)}catch(tc){if(null!=tc&&"function"===typeof tc.then)throw Error(q(294));throw tc;}finally{}Od.length<=this.suspenseDepth&&Od.push("");Od[this.suspenseDepth]+=bc}}return Od[0]}finally{ad.current=ud,ib=Yd,J()}};Dd.render=function(vd,Yd,ud){if("string"===typeof vd||"number"===typeof vd){ud=""+vd;if(""===ud)return"";if(this.makeStaticMarkup)return G(ud);if(this.previousWasTextNode)return"\x3c!-- --\x3e"+G(ud);this.previousWasTextNode=!0;return G(ud)}Yd=
Y(vd,Yd,this.threadID);vd=Yd.child;Yd=Yd.context;if(null===vd||!1===vd)return"";if(!H.isValidElement(vd)){if(null!=vd&&null!=vd.$$typeof){ud=vd.$$typeof;if(ud===aa)throw Error(q(257));throw Error(q(258,ud.toString()));}vd=Ic(vd);this.stack.push({type:null,domNamespace:ud,children:vd,childIndex:0,context:Yd,footer:""});return""}var Od=vd.type;if("string"===typeof Od)return this.renderDOM(vd,Yd,ud);switch(Od){case za:case pa:case Q:case D:case F:case M:return vd=Ic(vd.props.children),this.stack.push({type:null,
domNamespace:ud,children:vd,childIndex:0,context:Yd,footer:""}),"";case X:throw Error(q(294));case ca:throw Error(q(343));}if("object"===typeof Od&&null!==Od)switch(Od.$$typeof){case ba:oa={};var pd=Od.render(vd.props,vd.ref);pd=x(Od.render,vd.props,pd,vd.ref);pd=Ic(pd);this.stack.push({type:null,domNamespace:ud,children:pd,childIndex:0,context:Yd,footer:""});return"";case ha:return vd=[H.createElement(Od.type,fa({ref:vd.ref},vd.props))],this.stack.push({type:null,domNamespace:ud,children:vd,childIndex:0,
context:Yd,footer:""}),"";case N:return Od=Ic(vd.props.children),ud={type:vd,domNamespace:ud,children:Od,childIndex:0,context:Yd,footer:""},this.pushProvider(vd),this.stack.push(ud),"";case P:Od=vd.type;pd=vd.props;var Rd=this.threadID;A(Od,Rd);Od=Ic(pd.children(Od[Rd]));this.stack.push({type:vd,domNamespace:ud,children:Od,childIndex:0,context:Yd,footer:""});return"";case ea:throw Error(q(338));case K:return Od=vd.type,pd=Od._init,Od=pd(Od._payload),vd=[H.createElement(Od,fa({ref:vd.ref},vd.props))],
this.stack.push({type:null,domNamespace:ud,children:vd,childIndex:0,context:Yd,footer:""}),""}throw Error(q(130,null==Od?Od:typeof Od,""));};Dd.renderDOM=function(vd,Yd,ud){var Od=vd.type.toLowerCase();"http://www.w3.org/1999/xhtml"===ud&&ka(Od);if(!wc.hasOwnProperty(Od)){if(!Gb.test(Od))throw Error(q(65,Od));wc[Od]=!0}var pd=vd.props;if("input"===Od)pd=fa({type:void 0},pd,{defaultChecked:void 0,defaultValue:void 0,value:null!=pd.value?pd.value:pd.defaultValue,checked:null!=pd.checked?pd.checked:
pd.defaultChecked});else if("textarea"===Od){var Rd=pd.value;if(null==Rd){Rd=pd.defaultValue;var Mb=pd.children;if(null!=Mb){if(null!=Rd)throw Error(q(92));if(Array.isArray(Mb)){if(!(1>=Mb.length))throw Error(q(93));Mb=Mb[0]}Rd=""+Mb}null==Rd&&(Rd="")}pd=fa({},pd,{value:void 0,children:""+Rd})}else if("select"===Od)this.currentSelectValue=null!=pd.value?pd.value:pd.defaultValue,pd=fa({},pd,{value:void 0});else if("option"===Od){Mb=this.currentSelectValue;var fc=L(pd.children);if(null!=Mb){var Xb=
null!=pd.value?pd.value+"":fc;Rd=!1;if(Array.isArray(Mb))for(var sb=0;sb<Mb.length;sb++){if(""+Mb[sb]===Xb){Rd=!0;break}}else Rd=""+Mb===Xb;pd=fa({selected:void 0,children:void 0},pd,{selected:Rd,children:fc})}}if(Rd=pd){if(hc[Od]&&(null!=Rd.children||null!=Rd.dangerouslySetInnerHTML))throw Error(q(137,Od));if(null!=Rd.dangerouslySetInnerHTML){if(null!=Rd.children)throw Error(q(60));if(!("object"===typeof Rd.dangerouslySetInnerHTML&&"__html"in Rd.dangerouslySetInnerHTML))throw Error(q(61));}if(null!=
Rd.style&&"object"!==typeof Rd.style)throw Error(q(62));}Rd=pd;Mb=this.makeStaticMarkup;fc=1===this.stack.length;Xb="\x3c"+vd.type;a:if(-1===Od.indexOf("-"))sb="string"===typeof Rd.is;else switch(Od){case "annotation-xml":case "color-profile":case "font-face":case "font-face-src":case "font-face-uri":case "font-face-format":case "font-face-name":case "missing-glyph":sb=!1;break a;default:sb=!0}for(td in Rd)if(id.call(Rd,td)){var nb=Rd[td];if(null!=nb){if("style"===td){var bc=void 0,tc="",Tc="";for(bc in nb)if(nb.hasOwnProperty(bc)){var cd=
0===bc.indexOf("--"),Ld=nb[bc];if(null!=Ld){if(cd)var ae=bc;else if(ae=bc,Wc.hasOwnProperty(ae))ae=Wc[ae];else{var qe=ae.replace(qb,"-$1").toLowerCase().replace(Yb,"-ms-");ae=Wc[ae]=qe}tc+=Tc+ae+":";Tc=bc;cd=null==Ld||"boolean"===typeof Ld||""===Ld?"":cd||"number"!==typeof Ld||0===Ld||Qa.hasOwnProperty(Tc)&&Qa[Tc]?(""+Ld).trim():Ld+"px";tc+=cd;Tc=";"}}nb=tc||null}bc=null;sb?Kd.hasOwnProperty(td)||(bc=td,bc=d(bc)&&null!=nb?bc+'\x3d"'+(G(nb)+'"'):""):bc=p(td,nb);bc&&(Xb+=" "+bc)}}Mb||fc&&(Xb+=' data-reactroot\x3d""');
var td=Xb;Rd="";Wb.hasOwnProperty(Od)?td+="/\x3e":(td+="\x3e",Rd="\x3c/"+vd.type+"\x3e");a:{Mb=pd.dangerouslySetInnerHTML;if(null!=Mb){if(null!=Mb.__html){Mb=Mb.__html;break a}}else if(Mb=pd.children,"string"===typeof Mb||"number"===typeof Mb){Mb=G(Mb);break a}Mb=null}null!=Mb?(pd=[],Mc.hasOwnProperty(Od)&&"\n"===Mb.charAt(0)&&(td+="\n"),td+=Mb):pd=Ic(pd.children);vd=vd.type;ud=null==ud||"http://www.w3.org/1999/xhtml"===ud?ka(vd):"http://www.w3.org/2000/svg"===ud&&"foreignObject"===vd?"http://www.w3.org/1999/xhtml":
ud;this.stack.push({domNamespace:ud,type:Od,children:pd,childIndex:0,context:Yd,footer:Rd});this.previousWasTextNode=!1;return td};return pc}();E.renderToNodeStream=function(){throw Error(q(207));};E.renderToStaticMarkup=function(pc,Dd){pc=new Jd(pc,!0,Dd);try{return pc.read(Infinity)}finally{pc.destroy()}};E.renderToStaticNodeStream=function(){throw Error(q(208));};E.renderToString=function(pc,Dd){pc=new Jd(pc,!1,Dd);try{return pc.read(Infinity)}finally{pc.destroy()}};E.version="17.0.2"};
shadow$provide[590]=function(va,V,Ta,E){Ta.exports=V(588)};
shadow$provide[591]=function(va,V,Ta,E){function q(){if(!ac&&(ac="undefined"!==typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!ac))throw Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return ac(vc)}function S(b,g=0){return(kd[b[g+0]]+kd[b[g+1]]+kd[b[g+2]]+kd[b[g+3]]+"-"+kd[b[g+4]]+kd[b[g+5]]+"-"+kd[b[g+6]]+kd[b[g+7]]+"-"+kd[b[g+8]]+kd[b[g+9]]+"-"+kd[b[g+10]]+kd[b[g+11]]+kd[b[g+12]]+kd[b[g+13]]+kd[b[g+14]]+
kd[b[g+15]]).toLowerCase()}function A(b){let g=0;var n=0;for(var I of b)g+=I.w*I.h,n=Math.max(n,I.w);b.sort((sa,Ka)=>Ka.h-sa.h);n=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(g/.95)),n),h:Infinity}];let W=I=0;for(const sa of b)for(b=n.length-1;0<=b;b--){var ia=n[b];if(!(sa.w>ia.w||sa.h>ia.h)){sa.x=ia.x;sa.y=ia.y;W=Math.max(W,sa.y+sa.h);I=Math.max(I,sa.x+sa.w);sa.w===ia.w&&sa.h===ia.h?(ia=n.pop(),b<n.length&&(n[b]=ia)):sa.h===ia.h?(ia.x+=sa.w,ia.w-=sa.w):(sa.w!==ia.w&&n.push({x:ia.x+sa.w,y:ia.y,w:ia.w-
sa.w,h:sa.h}),ia.y+=sa.h,ia.h-=sa.h);break}}return{w:I,h:W,fill:g/(I*W)||0}}function r(b,...g){return{didIntersect:0<g.length,message:b,points:g}}function d(b,g,n=0){const I=[b[0]+g[0]/2,b[1]+g[1]/2],W=gd.rotWith(b,I,n),ia=gd.rotWith(gd.add(b,[g[0],0]),I,n),sa=gd.rotWith(gd.add(b,g),I,n);b=gd.rotWith(gd.add(b,[0,g[1]]),I,n);return[["top",[W,ia]],["right",[ia,sa]],["bottom",[sa,b]],["left",[b,W]]]}function w(b,g,n,I){const [W,ia]=b,[sa,Ka]=g,[Va,Za]=n,[lb,vb]=I;return Ka/sa!==(vb-Za)/(lb-Va)&&(g=sa*
(vb-Za)-Ka*(lb-Va),0!==g&&(b=((ia-Za)*(lb-Va)-(W-Va)*(vb-Za))/g,g=((ia-Za)*sa-(W-Va)*Ka)/g,0<=b&&0<=g&&1>=g))?r("intersection",[W+b*sa,ia+b*Ka]):r("no intersection")}function B(b,g,n,I,W=0){return k(n,I,W,b,g)}function C(b,g,n,I=0){const {minX:W,minY:ia,width:sa,height:Ka}=n;return B(b,g,[W,ia],[sa,Ka],I)}function a(b,g,n,I){var W=gd.sub(b,n);n=gd.sub(I,n);g=gd.sub(g,b);I=n[0]*W[1]-n[1]*W[0];W=g[0]*W[1]-g[1]*W[0];n=n[1]*g[0]-n[0]*g[1];return 0===I||0===W?r("coincident"):0===n?r("parallel"):0!==n&&
(I/=n,W/=n,0<=I&&1>=I&&0<=W&&1>=W)?r("intersection",gd.add(b,gd.mul(g,I))):r("no intersection")}function G(b,g,n,I){var W=(g[0]-b[0])*(g[0]-b[0])+(g[1]-b[1])*(g[1]-b[1]),ia=2*((g[0]-b[0])*(b[0]-n[0])+(g[1]-b[1])*(b[1]-n[1]));n=ia*ia-4*W*(n[0]*n[0]+n[1]*n[1]+b[0]*b[0]+b[1]*b[1]-2*(n[0]*b[0]+n[1]*b[1])-I*I);if(0>n)return r("outside");if(0===n)return r("tangent");I=Math.sqrt(n);n=(-ia+I)/(2*W);W=(-ia-I)/(2*W);if((0>n||1<n)&&(0>W||1<W))return 0>n&&0>W||1<n&&1<W?r("outside"):r("inside");ia=[];0<=n&&1>=
n&&ia.push(gd.lrp(b,g,n));0<=W&&1>=W&&ia.push(gd.lrp(b,g,W));return r("intersection",...ia)}function p(b,g,n,I,W,ia=0){if(0===I||0===W||gd.isEqual(b,g))return r("no intersection");I=0>I?I:-I;W=0>W?W:-W;b=gd.sub(gd.rotWith(b,n,-ia),n);g=gd.sub(gd.rotWith(g,n,-ia),n);var sa=gd.sub(g,b),Ka=sa[0]*sa[0]/I/I+sa[1]*sa[1]/W/W;sa=2*b[0]*sa[0]/I/I+2*b[1]*sa[1]/W/W;const Va=[];I=sa*sa-4*Ka*(b[0]*b[0]/I/I+b[1]*b[1]/W/W-1);0===I?Va.push(-sa/2/Ka):0<I&&(I=Math.sqrt(I),Va.push((-sa+I)/2/Ka),Va.push((-sa-I)/2/Ka));
Ka=Va.filter(Za=>0<=Za&&1>=Za).map(Za=>gd.add(n,gd.add(b,gd.mul(gd.sub(g,b),Za)))).map(Za=>gd.rotWith(Za,n,ia));return r("intersection",...Ka)}function h(b,g,n){const I=[];for(let W=1;W<n.length;W++){const ia=a(b,g,n[W-1],n[W]);ia&&I.push(...ia.points)}return 0===I.length?r("no intersection"):r("intersection",...n)}function k(b,g,n,I,W){return d(b,g,n).reduce((ia,[sa,[Ka,Va]])=>{(Ka=w(I,W,Ka,Va))&&ia.push(r(sa,...Ka.points));return ia},[]).filter(ia=>ia.didIntersect)}function f(b,g,n,I){return d(b,
g).reduce((W,[ia,[sa,Ka]])=>{(sa=a(n,I,sa,Ka))&&W.push(r(ia,...sa.points));return W},[]).filter(W=>W.didIntersect)}function v(b,g,n,I){return d(b,g).reduce((W,[ia,[sa,Ka]])=>{(sa=G(sa,Ka,n,I))&&W.push(xf(te({},sa),{message:ia}));return W},[]).filter(W=>W.didIntersect)}function x(b,g,n,I,W,ia=0){return d(b,g).reduce((sa,[Ka,[Va,Za]])=>{(Va=p(Va,Za,n,I,W,ia))&&sa.push(xf(te({},Va),{message:Ka}));return sa},[]).filter(sa=>sa.didIntersect)}function J(b,g,n){return d(b,g).reduce((I,[W,[ia,sa]])=>{ia=h(ia,
sa,n);ia.didIntersect&&I.push(r(W,...ia.points));return I},[]).filter(I=>I.didIntersect)}function z(b,g,n){return d(b,g).reduce((I,[W,[ia,sa]])=>{{const Ka=[];for(let Va=1;Va<n.length+1;Va++){const Za=a(ia,sa,n[Va-1],n[Va%n.length]);Za&&Ka.push(...Za.points)}ia=0===Ka.length?r("no intersection"):r("intersection",...n)}ia.didIntersect&&I.push(r(W,...ia.points));return I},[]).filter(I=>I.didIntersect)}function u(b,g,n,I=0,W,ia){return g===n?v(W,ia,b,g):x(W,ia,b,g,n,I)}function t(b,g,n){const {minX:I,
minY:W,width:ia,height:sa}=b;return f([I,W],[ia,sa],g,n)}function m(b){for(var g=arguments.length,n=Array(1<g?g-1:0),I=1;I<g;I++)n[I-1]=arguments[I];throw Error("number"===typeof b?"[MobX] minified error nr: "+b+(n.length?" "+n.map(String).join(","):"")+". Find the full error at: https://github.com/mobxjs/mobx/blob/main/packages/mobx/src/errors.ts":"[MobX] "+b);}function R(){return"undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof va?va:"undefined"!==
typeof self?self:ps}function ka(){os||m("Proxy not available")}function L(b){var g=!1;return function(){if(!g)return g=!0,b.apply(this,arguments)}}function ma(b){return"function"===typeof b}function Y(b){switch(typeof b){case "string":case "symbol":case "number":return!0}return!1}function fa(b){return null!==b&&"object"===typeof b}function H(b){if(!fa(b))return!1;b=Object.getPrototypeOf(b);if(null==b)return!0;b=Object.hasOwnProperty.call(b,"constructor")&&b.constructor;return"function"===typeof b&&
b.toString()===ns}function aa(b){return(b=null==b?void 0:b.constructor)?"GeneratorFunction"===b.name||"GeneratorFunction"===b.displayName?!0:!1:!1}function M(b,g,n){Om(b,g,{enumerable:!1,writable:!0,configurable:!0,value:n})}function Q(b,g,n){Om(b,g,{enumerable:!1,writable:!1,configurable:!0,value:n})}function D(b,g){var n="isMobX"+b;g.prototype[n]=!0;return function(I){return fa(I)&&!0===I[n]}}function N(b){return b instanceof Map}function P(b){return b instanceof Set}function ba(b){var g=Object.keys(b);
if(!mg)return g;var n=Object.getOwnPropertySymbols(b);return n.length?[].concat(g,n.filter(function(I){return ko.propertyIsEnumerable.call(b,I)})):g}function X(b){return null===b?null:"object"===typeof b?""+b:b}function F(b,g){return ko.hasOwnProperty.call(b,g)}function ha(b,g){for(var n=0;n<g.length;n++){var I=g[n];I.enumerable=I.enumerable||!1;I.configurable=!0;"value"in I&&(I.writable=!0);Object.defineProperty(b,I.key,I)}}function K(b,g,n){g&&ha(b.prototype,g);n&&ha(b,n);Object.defineProperty(b,
"prototype",{writable:!1});return b}function Z(){Z=Object.assign||function(b){for(var g=1;g<arguments.length;g++){var n=arguments[g],I;for(I in n)Object.prototype.hasOwnProperty.call(n,I)&&(b[I]=n[I])}return b};return Z.apply(this,arguments)}function ea(b,g){b.prototype=Object.create(g.prototype);b.prototype.constructor=b;ca(b,g)}function ca(b,g){ca=Object.setPrototypeOf||function(n,I){n.__proto__=I;return n};return ca(b,g)}function pa(b){if(void 0===b)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
return b}function za(b,g){if(b){if("string"===typeof b)return ya(b,g);var n=Object.prototype.toString.call(b).slice(8,-1);"Object"===n&&b.constructor&&(n=b.constructor.name);if("Map"===n||"Set"===n)return Array.from(b);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ya(b,g)}}function ya(b,g){if(null==g||g>b.length)g=b.length;for(var n=0,I=Array(g);n<g;n++)I[n]=b[n];return I}function Ga(b,g){var n="undefined"!==typeof Symbol&&b[Symbol.iterator]||b["@@iterator"];if(n)return(n=
n.call(b)).next.bind(n);if(Array.isArray(b)||(n=za(b))||g&&b&&"number"===typeof b.length){n&&(b=n);var I=0;return function(){return I>=b.length?{done:!0}:{done:!1,value:b[I++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}function Ua(b){return Object.assign(function(g,n){Ea(g,n,b)},b)}function Ea(b,g,n){F(b,ol)||M(b,ol,Z({},b[ol]));n.annotationType_!==qs&&(b[ol][g]=n)}function Pa(b){F(b,
ol)||M(b,ol,Z({},b[ol]));return b[ol]}function Ya(b,g,n){void 0===g&&(g=No);void 0===n&&(n=No);b=new qo(b);g!==No&&Lc(Lo,b,g,void 0);n!==No&&uc(b,n);return b}function Na(b,g,n){return Tb(b)?b:Array.isArray(b)?Bg.array(b,{name:n}):H(b)?Bg.object(b,void 0,{name:n}):N(b)?Bg.map(b,{name:n}):P(b)?Bg.set(b,{name:n}):"function"!==typeof b||cd(b)||Kc(b)?b:aa(b)?us(b):Kh(n,b)}function gb(b){return b}function fb(b,g){return{annotationType_:b,options_:g,make_:Oa,extend_:oa}}function Oa(b,g,n,I){var W;if(null!=
(W=this.options_)&&W.bound)return null===this.extend_(b,g,n,!1)?0:1;if(I===b.target_)return null===this.extend_(b,g,n,!1)?0:2;if(cd(n.value))return 1;b=Ca(b,this,g,n,!1);Om(I,g,b);return 2}function oa(b,g,n,I){n=Ca(b,this,g,n);return b.defineProperty_(g,n,I)}function Ca(b,g,n,I,W){var ia,sa,Ka,Va,Za,lb,vb;void 0===W&&(W=ve.safeDescriptors);I=I.value;if(null!=(ia=g.options_)&&ia.bound){var Qb;I=I.bind(null!=(Qb=b.proxy_)?Qb:b.target_)}return{value:Mc(null!=(sa=null==(Ka=g.options_)?void 0:Ka.name)?
sa:n.toString(),I,null!=(Va=null==(Za=g.options_)?void 0:Za.autoAction)?Va:!1,null!=(lb=g.options_)&&lb.bound?null!=(vb=b.proxy_)?vb:b.target_:void 0),configurable:W?b.isPlainObject_:!0,enumerable:!1,writable:W?!1:!0}}function ra(b,g){return{annotationType_:b,options_:g,make_:Aa,extend_:Ja}}function Aa(b,g,n,I){var W;if(I===b.target_)return null===this.extend_(b,g,n,!1)?0:2;if(null!=(W=this.options_)&&W.bound&&(!F(b.target_,g)||!Kc(b.target_[g]))&&null===this.extend_(b,g,n,!1))return 0;if(Kc(n.value))return 1;
b=Sa(b,this,g,n,!1,!1);Om(I,g,b);return 2}function Ja(b,g,n,I){var W;n=Sa(b,this,g,n,null==(W=this.options_)?void 0:W.bound);return b.defineProperty_(g,n,I)}function Sa(b,g,n,I,W,ia){void 0===ia&&(ia=ve.safeDescriptors);g=I.value;Kc(g)||(g=us(g));if(W){var sa;g=g.bind(null!=(sa=b.proxy_)?sa:b.target_);g.isMobXFlow=!0}return{value:g,configurable:ia?b.isPlainObject_:!0,enumerable:!1,writable:ia?!1:!0}}function Bb(b,g){return{annotationType_:b,options_:g,make_:ib,extend_:Nb}}function ib(b,g,n){return null===
this.extend_(b,g,n,!1)?0:1}function Nb(b,g,n,I){return b.defineComputedProperty_(g,Z({},this.options_,{get:n.get,set:n.set}),I)}function Wb(b,g){return{annotationType_:b,options_:g,make_:hc,extend_:Qa}}function hc(b,g,n){return null===this.extend_(b,g,n,!1)?0:1}function Qa(b,g,n,I){var W,ia;return b.defineObservableProperty_(g,n.value,null!=(W=null==(ia=this.options_)?void 0:ia.enhancer)?W:Na,I)}function ob(b){return{annotationType_:"true",options_:b,make_:qb,extend_:Yb}}function qb(b,g,n,I){var W,
ia;if(n.get)return Eg.make_(b,g,n,I);if(n.set){n=Mc(g.toString(),n.set);if(I===b.target_)return null===b.defineProperty_(g,{configurable:ve.safeDescriptors?b.isPlainObject_:!0,set:n})?0:2;Om(I,g,{configurable:!0,set:n});return 2}if(I!==b.target_&&"function"===typeof n.value){var sa;if(aa(n.value)){var Ka;return(null!=(Ka=this.options_)&&Ka.autoBind?us.bound:us).make_(b,g,n,I)}return(null!=(sa=this.options_)&&sa.autoBind?Kh.bound:Kh).make_(b,g,n,I)}sa=!1===(null==(W=this.options_)?void 0:W.deep)?Bg.ref:
Bg;if("function"===typeof n.value&&null!=(ia=this.options_)&&ia.autoBind){var Va;n.value=n.value.bind(null!=(Va=b.proxy_)?Va:b.target_)}return sa.make_(b,g,n,I)}function Yb(b,g,n,I){var W,ia;if(n.get)return Eg.extend_(b,g,n,I);if(n.set)return b.defineProperty_(g,{configurable:ve.safeDescriptors?b.isPlainObject_:!0,set:Mc(g.toString(),n.set)},I);if("function"===typeof n.value&&null!=(W=this.options_)&&W.autoBind){var sa;n.value=n.value.bind(null!=(sa=b.proxy_)?sa:b.target_)}return(!1===(null==(ia=
this.options_)?void 0:ia.deep)?Bg.ref:Bg).extend_(b,g,n,I)}function Ic(b){if(!0===b.deep)var g=Na;else{if(!1===b.deep)b=gb;else{b=b.defaultDecorator;var n;b=b?null!=(g=null==(n=b.options_)?void 0:n.enhancer)?g:Na:Na}g=b}return g}function ad(b,g,n){if(Y(g))Ea(b,g,br);else return Tb(b)?b:H(b)?Bg.object(b,g,n):Array.isArray(b)?Bg.array(b,g):N(b)?Bg.map(b,g):P(b)?Bg.set(b,g):"object"===typeof b&&null!==b?b:Bg.box(b,g)}function Mc(b,g,n,I){function W(){a:{var ia=I||this,sa=arguments,Ka=ve.trackingDerivation,
Va=!n||!Ka;pd();var Za=ve.allowStateChanges;Va&&(pc(),Za=wc(!0));var lb=Dd(!0),vb=hv++,Qb=So;So=vb;try{var cc=g.apply(ia,sa);break a}catch(rc){var Ub=rc;throw rc;}finally{So!==vb&&m(30),So=Qb,void 0!==Ub&&(ve.suppressReactionErrors=!0),ve.allowStateChanges=Za,ve.allowStateReads=lb,Rd(),Va&&(ve.trackingDerivation=Ka),ve.suppressReactionErrors=!1}cc=void 0}return cc}void 0===n&&(n=!1);W.isMobxAction=!0;dr&&(T.value=b,Object.defineProperty(W,"name",T));return W}function Gb(b,g){b=wc(b);try{return g()}finally{ve.allowStateChanges=
b}}function wc(b){var g=ve.allowStateChanges;ve.allowStateChanges=b;return g}function Wc(b){switch(b.dependenciesState_){case Uc.UP_TO_DATE_:return!1;case Uc.NOT_TRACKING_:case Uc.STALE_:return!0;case Uc.POSSIBLY_STALE_:for(var g=Dd(!0),n=pc(),I=b.observing_,W=I.length,ia=0;ia<W;ia++){var sa=I[ia];if(Hc(sa)){if(ve.disableErrorBoundaries)sa.get();else try{sa.get()}catch(Ka){return ve.trackingDerivation=n,ve.allowStateReads=g,!0}if(b.dependenciesState_===Uc.STALE_)return ve.trackingDerivation=n,ve.allowStateReads=
g,!0}}vd(b);ve.trackingDerivation=n;ve.allowStateReads=g;return!1}}function id(b,g,n){var I=Dd(!0);vd(b);b.newObserving_=Array(b.observing_.length+100);b.unboundDepsCount_=0;b.runId_=++ve.runId;var W=ve.trackingDerivation;ve.trackingDerivation=b;ve.inBatch++;if(!0===ve.disableErrorBoundaries)var ia=g.call(n);else try{ia=g.call(n)}catch(lb){ia=new Ce(lb)}ve.inBatch--;ve.trackingDerivation=W;var sa=b.observing_;g=b.observing_=b.newObserving_;n=Uc.UP_TO_DATE_;W=0;for(var Ka=b.unboundDepsCount_,Va=0;Va<
Ka;Va++){var Za=g[Va];0===Za.diffValue_&&(Za.diffValue_=1,W!==Va&&(g[W]=Za),W++);Za.dependenciesState_>n&&(n=Za.dependenciesState_)}g.length=W;b.newObserving_=null;for(Ka=sa.length;Ka--;)Va=sa[Ka],0===Va.diffValue_&&ud(Va,b),Va.diffValue_=0;for(;W--;)sa=g[W],1===sa.diffValue_&&(sa.diffValue_=0,Ka=b,sa.observers_.add(Ka),sa.lowestObserverState_>Ka.dependenciesState_&&(sa.lowestObserverState_=Ka.dependenciesState_));n!==Uc.UP_TO_DATE_&&(b.dependenciesState_=n,b.onBecomeStale_());ve.allowStateReads=
I;return ia}function Kd(b){var g=b.observing_;b.observing_=[];for(var n=g.length;n--;)ud(g[n],b);b.dependenciesState_=Uc.NOT_TRACKING_}function Jd(b){var g=pc();try{return b()}finally{ve.trackingDerivation=g}}function pc(){var b=ve.trackingDerivation;ve.trackingDerivation=null;return b}function Dd(b){var g=ve.allowStateReads;ve.allowStateReads=b;return g}function vd(b){if(b.dependenciesState_!==Uc.UP_TO_DATE_){b.dependenciesState_=Uc.UP_TO_DATE_;b=b.observing_;for(var g=b.length;g--;)b[g].lowestObserverState_=
Uc.UP_TO_DATE_}}function Yd(){(ve.pendingReactions.length||ve.inBatch||ve.isRunningReactions)&&m(36);pf=!0;if(oh){var b=R();0===--b.__mobxInstanceCount&&(b.__mobxGlobals=void 0);ve=new bg}}function ud(b,g){b.observers_["delete"](g);0===b.observers_.size&&Od(b)}function Od(b){!1===b.isPendingUnobservation_&&(b.isPendingUnobservation_=!0,ve.pendingUnobservations.push(b))}function pd(){ve.inBatch++}function Rd(){if(0===--ve.inBatch){0<ve.inBatch||ve.isRunningReactions||me(nb);for(var b=ve.pendingUnobservations,
g=0;g<b.length;g++){var n=b[g];n.isPendingUnobservation_=!1;0===n.observers_.size&&(n.isBeingObserved_&&(n.isBeingObserved_=!1,n.onBUO()),n instanceof oc&&n.suspend_())}ve.pendingUnobservations=[]}}function Mb(b){var g=ve.trackingDerivation;if(null!==g)return g.runId_!==b.lastAccessedBy_&&(b.lastAccessedBy_=g.runId_,g.newObserving_[g.unboundDepsCount_++]=b,!b.isBeingObserved_&&ve.trackingContext&&(b.isBeingObserved_=!0,b.onBO())),b.isBeingObserved_;0===b.observers_.size&&0<ve.inBatch&&Od(b);return!1}
function fc(b){b.lowestObserverState_!==Uc.STALE_&&(b.lowestObserverState_=Uc.STALE_,b.observers_.forEach(function(g){if(g.dependenciesState_===Uc.UP_TO_DATE_)g.onBecomeStale_();g.dependenciesState_=Uc.STALE_}))}function Xb(b){b.lowestObserverState_!==Uc.STALE_&&(b.lowestObserverState_=Uc.STALE_,b.observers_.forEach(function(g){g.dependenciesState_===Uc.POSSIBLY_STALE_?g.dependenciesState_=Uc.STALE_:g.dependenciesState_===Uc.UP_TO_DATE_&&(b.lowestObserverState_=Uc.UP_TO_DATE_)}))}function sb(b){b.lowestObserverState_===
Uc.UP_TO_DATE_&&(b.lowestObserverState_=Uc.POSSIBLY_STALE_,b.observers_.forEach(function(g){g.dependenciesState_===Uc.UP_TO_DATE_&&(g.dependenciesState_=Uc.POSSIBLY_STALE_,g.onBecomeStale_())}))}function nb(){ve.isRunningReactions=!0;for(var b=ve.pendingReactions,g=0;0<b.length;){++g===kh&&(console.error("[mobx] cycle in reaction: "+b[0]),b.splice(0));for(var n=b.splice(0),I=0,W=n.length;I<W;I++)n[I].runReaction_()}ve.isRunningReactions=!1}function bc(b){var g=me;me=function(n){return b(function(){return g(n)})}}
function tc(b){console.warn("[mobx.spy] Is a no-op in production builds");return function(){}}function Tc(b){return function(g,n){if(ma(g))return Mc(g.name||"\x3cunnamed action\x3e",g,b);if(ma(n))return Mc(g,n,b);if(Y(n))return Ea(g,n,b?Ah:cf);if(Y(g))return Ua(fb(b?"autoAction":ke,{name:g,autoAction:b}))}}function cd(b){return ma(b)&&!0===b.isMobxAction}function Ld(b,g){function n(){b(Va)}var I,W;void 0===g&&(g=oq);var ia=null!=(I=null==(W=g)?void 0:W.name)?I:"Autorun";if(g.scheduler||g.delay){var sa=
ae(g),Ka=!1;var Va=new eh(ia,function(){Ka||(Ka=!0,sa(function(){Ka=!1;Va.isDisposed_||Va.track(n)}))},g.onError,g.requiresObservable)}else Va=new eh(ia,function(){this.track(n)},g.onError,g.requiresObservable);Va.schedule_();return Va.getDisposer_()}function ae(b){return b.scheduler?b.scheduler:b.delay?function(g){return setTimeout(g,b.delay)}:Oh}function qe(b,g,n){function I(){lb=!1;if(!Ub.isDisposed_){var rc=!1;Ub.track(function(){var lc=Gb(!1,function(){return b(Ub)});rc=Za||!cc(vb,lc);Qb=vb;
vb=lc});Za&&n.fireImmediately?sa(vb,Qb,Ub):!Za&&rc&&sa(vb,Qb,Ub);Za=!1}}var W;void 0===n&&(n=oq);var ia=null!=(W=n.name)?W:"Reaction",sa=af(ia,n.onError?td(n.onError,g):g),Ka=!n.scheduler&&!n.delay,Va=ae(n),Za=!0,lb=!1,vb,Qb,cc=n.compareStructural?Po.structural:n.equals||Po["default"],Ub=new eh(ia,function(){Za||Ka?I():lb||(lb=!0,Va(I))},n.onError,n.requiresObservable);Ub.schedule_();return Ub.getDisposer_()}function td(b,g){return function(){try{return g.apply(this,arguments)}catch(n){b.call(this,
n)}}}function uc(b,g,n){return Lc(gv,b,g,n)}function Lc(b,g,n,I){var W="function"===typeof I?wg(g,n):wg(g),ia=ma(I)?I:n,sa=b+"L";W[sa]?W[sa].add(ia):W[sa]=new Set([ia]);return function(){var Ka=W[sa];Ka&&(Ka["delete"](ia),0===Ka.size&&delete W[sa])}}function Le(b){!0===b.isolateGlobalState&&Yd();var g=b.useProxies,n=b.enforceActions;void 0!==g&&(ve.useProxies="always"===g?!0:"never"===g?!1:"undefined"!==typeof Proxy);"ifavailable"===g&&(ve.verifyProxies=!0);void 0!==n&&(g="always"===n?"always":"observed"===
n,ve.enforceActions=g,ve.allowStateChanges=!0===g||"always"===g?!1:!0);["computedRequiresReaction","reactionRequiresObservable","observableRequiresReaction","disableErrorBoundaries","safeDescriptors"].forEach(function(I){I in b&&(ve[I]=!!b[I])});ve.allowStateReads=!ve.observableRequiresReaction;b.reactionScheduler&&bc(b.reactionScheduler)}function qc(b,g,n,I){var W=ms(g),ia=Cd(b,I)[Sg];pd();try{cp(W).forEach(function(sa){ia.extend_(sa,W[sa],n?sa in n?n[sa]:!0:!0)})}finally{Rd()}return b}function Ke(b){var g=
{name:b.name_};b.observing_&&0<b.observing_.length&&(g.dependencies=Array.from(new Set(b.observing_)).map(Ke));return g}function Rb(){this.message="FLOW_CANCELLED"}function Kc(b){return!0===(null==b?void 0:b.isMobXFlow)}function Tb(b,g){return b?void 0!==g?Xd(b)?b[Sg].values_.has(g):!1:Xd(b)||!!b[Sg]||fp(b)||Wd(b)||Hc(b):!1}function dd(b){if(Xd(b))return b[Sg].ownKeys_();m(38)}function re(b,g,n){b.set(g,n);return n}function ie(b,g){if(null==b||"object"!==typeof b||b instanceof Date||!Tb(b))return b;
if(hb(b)||Hc(b))return ie(b.get(),g);if(g.has(b))return g.get(b);if(jb(b)){var n=re(g,b,Array(b.length));b.forEach(function(sa,Ka){n[Ka]=ie(sa,g)});return n}if(Dq(b)){var I=re(g,b,new Set);b.forEach(function(sa){I.add(ie(sa,g))});return I}if(Lp(b)){var W=re(g,b,new Map);b.forEach(function(sa,Ka){W.set(Ka,ie(sa,g))});return W}var ia=re(g,b,{});dd(b).forEach(function(sa){ko.propertyIsEnumerable.call(b,sa)&&(ia[sa]=ie(b[sa],g))});return ia}function Cc(b,g){return ie(b,new Map)}function Cb(){m("trace() is not available in production builds");
for(var b=!1,g=arguments.length,n=Array(g),I=0;I<g;I++)n[I]=arguments[I];"boolean"===typeof n[n.length-1]&&(b=n.pop());a:{switch(n.length){case 0:g=ve.trackingDerivation;break a;case 1:g=wg(n[0]);break a;case 2:g=wg(n[0],n[1]);break a}g=void 0}if(!g)return m("'trace(break?)' can only be used inside a tracked computed value or a Reaction. Consider passing in the computed value or reaction explicitly");g.isTracing_===Pd.NONE&&console.log("[mobx.trace] '"+g.name_+"' tracing enabled");g.isTracing_=b?
Pd.BREAK:Pd.LOG}function Hd(b,g){void 0===g&&(g=void 0);pd();try{return b.apply(g)}finally{Rd()}}function be(b){return void 0!==b.interceptors_&&0<b.interceptors_.length}function rd(b,g){var n=b.interceptors_||(b.interceptors_=[]);n.push(g);return L(function(){var I=n.indexOf(g);-1!==I&&n.splice(I,1)})}function mc(b,g){var n=pc();try{var I=[].concat(b.interceptors_||[]);b=0;for(var W=I.length;b<W&&((g=I[b](g))&&!g.type&&m(14),g);b++);return g}finally{ve.trackingDerivation=n}}function Me(b){return void 0!==
b.changeListeners_&&0<b.changeListeners_.length}function Yf(b,g){var n=b.changeListeners_||(b.changeListeners_=[]);n.push(g);return L(function(){var I=n.indexOf(g);-1!==I&&n.splice(I,1)})}function ef(b,g){var n=pc();if(b=b.changeListeners_){b=b.slice();for(var I=0,W=b.length;I<W;I++)b[I](g);ve.trackingDerivation=n}}function rg(b,g,n){var I=Cd(b,n)[Sg];pd();try{var W;null!=(W=g)?W:g=Pa(b);cp(g).forEach(function(ia){return I.make_(ia,g[ia])})}finally{Rd()}return b}function bb(b,g,n,I){void 0===n&&(n=
"ObservableArray");void 0===I&&(I=!1);ka();g=new qv(n,g,I,!1);Q(g.values_,Sg,g);n=new Proxy(g.values_,lC);g.proxy_=n;b&&b.length&&(I=wc(!0),g.spliceWithArray_(0,0,b),ve.allowStateChanges=I);return n}function Db(b,g){"function"===typeof Array.prototype[b]&&(It[b]=g(b))}function eb(b){return function(){var g=this[Sg];g.atom_.reportObserved();g=g.dehanceValues_(g.values_);return g[b].apply(g,arguments)}}function Eb(b){return function(g,n){var I=this,W=this[Sg];W.atom_.reportObserved();return W.dehanceValues_(W.values_)[b](function(ia,
sa){return g.call(n,ia,sa,I)})}}function gc(b){return function(){var g=this,n=this[Sg];n.atom_.reportObserved();n=n.dehanceValues_(n.values_);var I=arguments[0];arguments[0]=function(W,ia,sa){return I(W,ia,sa,g)};return n[b].apply(n,arguments)}}function jb(b){return fa(b)&&pC(b[Sg])}function hd(b){if(N(b)||Lp(b))return b;if(Array.isArray(b))return new Map(b);if(H(b)){var g=new Map,n;for(n in b)g.set(n,b[n]);return g}return m(21,b)}function Cd(b,g){var n;if(F(b,Sg))return b;var I=null!=(n=null==g?
void 0:g.name)?n:"ObservableObject";n=fy;var W=new Map;I=String(I);var ia;var sa=g?null!=(ia=g.defaultDecorator)?ia:ob(g):void 0;g=new n(b,W,I,sa);M(b,Sg,g);return b}function he(b){return ey[b]||(ey[b]={get:function(){return this[Sg].getObservablePropValue_(b)},set:function(g){return this[Sg].setObservablePropValue_(b,g)}})}function Xd(b){return fa(b)?wC(b[Sg]):!1}function Xe(b){return{enumerable:!1,configurable:!0,get:function(){return this[Sg].get_(b)},set:function(g){this[Sg].set_(b,g)}}}function se(b){if(b>
rv){for(var g=rv;g<b+100;g++)Om(mv.prototype,""+g,Xe(g));rv=b}}function jf(b,g,n){return new mv(b,g,n)}function wg(b,g){if("object"===typeof b&&null!==b){if(jb(b))return void 0!==g&&m(23),b[Sg].atom_;if(Dq(b))return b[Sg];if(Lp(b)){if(void 0===g)return b.keysAtom_;var n=b.data_.get(g)||b.hasMap_.get(g);n||m(25,g,Ab(b));return n}if(Xd(b)){if(!g)return m(26);(n=b[Sg].values_.get(g))||m(27,g,Ab(b));return n}if(fp(b)||Hc(b)||Wd(b))return b}else if(ma(b)&&Wd(b[Sg]))return b[Sg];m(28)}function vf(b,g){b||
m(29);if(void 0!==g)return vf(wg(b,g));if(fp(b)||Hc(b)||Wd(b)||Lp(b)||Dq(b))return b;if(b[Sg])return b[Sg];m(24,b)}function Ab(b,g){if(void 0!==g)b=wg(b,g);else{if(cd(b))return b.name;b=Xd(b)||Lp(b)||Dq(b)?vf(b):wg(b)}return b.name_}function ta(b,g,n){void 0===n&&(n=-1);return qa(b,g,n)}function qa(b,g,n,I,W){if(b===g)return 0!==b||1/b===1/g;if(null==b||null==g)return!1;if(b!==b)return g!==g;var ia=typeof b;if("function"!==ia&&"object"!==ia&&"object"!=typeof g)return!1;ia=Zx.call(b);if(ia!==Zx.call(g))return!1;
switch(ia){case "[object RegExp]":case "[object String]":return""+b===""+g;case "[object Number]":return+b!==+b?+g!==+g:0===+b?1/+b===1/g:+b===+g;case "[object Date]":case "[object Boolean]":return+b===+g;case "[object Symbol]":return"undefined"!==typeof Symbol&&Symbol.valueOf.call(b)===Symbol.valueOf.call(g);case "[object Map]":case "[object Set]":0<=n&&n++}b=Ha(b);g=Ha(g);ia="[object Array]"===ia;if(!ia){if("object"!=typeof b||"object"!=typeof g)return!1;var sa=b.constructor,Ka=g.constructor;if(sa!==
Ka&&!(ma(sa)&&sa instanceof sa&&ma(Ka)&&Ka instanceof Ka)&&"constructor"in b&&"constructor"in g)return!1}if(0===n)return!1;0>n&&(n=-1);I=I||[];W=W||[];for(sa=I.length;sa--;)if(I[sa]===b)return W[sa]===g;I.push(b);W.push(g);if(ia){sa=b.length;if(sa!==g.length)return!1;for(;sa--;)if(!qa(b[sa],g[sa],n-1,I,W))return!1}else{ia=Object.keys(b);sa=ia.length;if(Object.keys(g).length!==sa)return!1;for(;sa--;)if(Ka=ia[sa],!F(g,Ka)||!qa(b[Ka],g[Ka],n-1,I,W))return!1}I.pop();W.pop();return!0}function Ha(b){return jb(b)?
b.slice():N(b)||Lp(b)||P(b)||Dq(b)?Array.from(b.entries()):b}function db(b){b[Symbol.iterator]=Jb;return b}function Jb(){return this}function kc(b,g){const n=new Set(g),I=Object.values(b),W=new Set(I.filter(ia=>n.has(ia.toId)||n.has(ia.fromId)));b=W.size;for(g=-1;0!==g;)W.forEach(ia=>{ia=ia.fromId;for(const sa of I)sa.fromId===ia&&W.add(sa),sa.toId===ia&&W.add(sa)}),g=W.size-b,b=W.size;return Array.from(W.values())}function Rc(b,g,n,I,W,ia,sa,Ka){if(W=g.getBindingPoint(W,ia,sa,Ka))return{id:I,type:"line",
fromId:b.id,toId:g.id,handleId:n,point:Ud.toFixed(W.point),distance:W.distance}}function od(b,g){const n=b.getCenter(),I=g.getCenter();var W=$e();W=xf(te({},ws.defaultProps),{id:W,type:ws.id,parentId:b.props.parentId,point:n});b=Rc(W,b,"start",$e(),n,n,Ud.uni(Ud.sub(I,n)),!1);g=Rc(W,g,"end",$e(),I,I,Ud.uni(Ud.sub(n,I)),!1);return b&&g?(W.handles.start.point=[0,0],W.handles.end.point=Ud.sub(I,n),W.handles.start.bindingId=b.id,W.handles.end.bindingId=g.id,[W,[b,g]]):null}function we(){return new eC}
function Ue(){return new WeakMap}function Lf(b){if(!b)return iv(null);var g=b.constructor;if(g===Object)return b===Object.prototype?{}:iv(b);if(~cC.call(g).indexOf("[native code]"))try{return new g}catch(n){}return iv(b)}function dg(b){var g="";b.global&&(g+="g");b.ignoreCase&&(g+="i");b.multiline&&(g+="m");b.unicode&&(g+="u");b.sticky&&(g+="y");return g}function If(b){return b.flags}function Af(b){b=dC.call(b);return b.substring(8,b.length-1)}function Sf(b){return b[Symbol.toStringTag]||Af(b)}function Qg(b){return hy(b).concat(tv(b))}
function fi(b,g,n){for(var I=DC(b),W=0,ia=I.length,sa,Ka;W<ia;++W)if(sa=I[W],"callee"!==sa&&"caller"!==sa)if(Ka=AC(b,sa)){Ka.get||Ka.set||(Ka.value=n.copier(Ka.value,n));try{xD(g,sa,Ka)}catch(Va){g[sa]=Ka.value}}else g[sa]=n.copier(b[sa],n);return g}function rh(b,g){var n=new g.Constructor;g.cache.set(b,n);b.forEach(function(I,W){n.set(W,g.copier(I,g))});return n}function ki(b,g){var n=Lf(g.prototype);g.cache.set(b,n);for(var I in b)jy.call(b,I)&&(n[I]=g.copier(b[I],g));return n}function Yh(b,g){var n=
Lf(g.prototype);g.cache.set(b,n);for(var I in b)jy.call(b,I)&&(n[I]=g.copier(b[I],g));I=tv(b);for(var W=0,ia=I.length,sa;W<ia;++W)sa=I[W],CC.call(b,sa)&&(n[sa]=g.copier(b[sa],g));return n}function sg(b,g){return new g.Constructor(b.valueOf())}function Lh(b,g){return b}function hf(b,g){var n=new g.Constructor;g.cache.set(b,n);b.forEach(function(I){n.add(g.copier(I,g))});return n}function Mh(b){function g(ia,sa){sa.prototype=sa.Constructor=void 0;if(!ia||"object"!==typeof ia)return ia;if(sa.cache.has(ia))return sa.cache.get(ia);
sa.prototype=ia.__proto__||FC(ia);sa.Constructor=sa.prototype&&sa.prototype.constructor;if(!sa.Constructor||sa.Constructor===Object)return W(ia,sa);if(EC(ia))return I(ia,sa);var Ka=n[bC(ia)];return Ka?Ka(ia,sa):"function"===typeof ia.then?ia:W(ia,sa)}b=uv({},gy,b);var n={Arguments:b.object,Array:b.array,ArrayBuffer:b.arrayBuffer,Blob:b.blob,Boolean:sg,DataView:b.dataView,Date:b.date,Error:b.error,Float32Array:b.arrayBuffer,Float64Array:b.arrayBuffer,Int8Array:b.arrayBuffer,Int16Array:b.arrayBuffer,
Int32Array:b.arrayBuffer,Map:b.map,Number:sg,Object:b.object,Promise:Lh,RegExp:b.regExp,Set:b.set,String:sg,WeakMap:Lh,WeakSet:Lh,Uint8Array:b.arrayBuffer,Uint8ClampedArray:b.arrayBuffer,Uint16Array:b.arrayBuffer,Uint32Array:b.arrayBuffer,Uint64Array:b.arrayBuffer},I=n.Array,W=n.Object;return function(ia){return g(ia,{Constructor:void 0,cache:fC(),copier:g,prototype:void 0})}}function zi(b,g){return(0,yD.default)(b,g,{arrayMerge:(n,I,W)=>I})}function Fl(b,g,n,I=!1){const [W,ia]=g,[sa,Ka]=n;b=sa+(b-
W)/(ia-W)*(Ka-sa);return I?sa<Ka?Math.max(Math.min(b,Ka),sa):Math.max(Math.min(b,sa),Ka):b}function Cj(b,g){return new Promise((n,I)=>{if(g){const W=document.createElement("video");W.addEventListener("loadedmetadata",function(){n([this.videoWidth,this.videoHeight])},!1);W.src=b}else{const W=new Image;W.onload=()=>n([W.width,W.height]);W.src=b;W.onerror=ia=>I(ia)}})}function Bf(b,g){return Object.values(yb).includes(b)||null==b?`var(--ls-wb-${g}-color-${b?b:"default"})`:b}function Mj(){var b;null==
(b=document.getElementById("__textLabelMeasure"))?void 0:b.remove();b=document.createElement("pre");b.id="__textLabelMeasure";Object.assign(b.style,{whiteSpace:"pre",width:"auto",borderLeft:"2px solid transparent",borderRight:"1px solid transparent",borderBottom:"2px solid transparent",padding:"0px",margin:"0px",opacity:"0",position:"absolute",top:"-500px",left:"0px",zIndex:"9999",userSelect:"none",pointerEvents:"none",font:"var(--ls-font-family)"});b.tabIndex=-1;document.body.appendChild(b);return b}
function rj(b,g,n=0){var I,W,ia;if(!b)return[16,32];let sa;sa="string"===typeof g?g:`${null!=(I=g.fontStyle)?I:"normal"} ${null!=(W=g.fontVariant)?W:"normal"} ${null!=(ia=g.fontWeight)?ia:"normal"} ${g.fontSize}px/${g.fontSize*g.lineHeight}px ${g.fontFamily}`;if(!Dv.has(`${b}-${sa}-${n}`)){if(!Mp)return[10,10];Mp.parentNode||document.body.appendChild(Mp);Mp.innerHTML=`${b}&#8203;`;Mp.style.font=sa;Mp.style.padding=n+"px";g=Mp.getBoundingClientRect();Dv.set(`${b}-${sa}-${n}`,[Math.ceil(g.width||1),
Math.ceil(g.height||1)])}return Dv.get(`${b}-${sa}-${n}`)}function Th(b){try{if("string"!==typeof b||!Xc.test(b))throw TypeError("Invalid UUID");let g;const n=new Uint8Array(16);n[0]=(g=parseInt(b.slice(0,8),16))>>>24;n[1]=g>>>16&255;n[2]=g>>>8&255;n[3]=g&255;n[4]=(g=parseInt(b.slice(9,13),16))>>>8;n[5]=g&255;n[6]=(g=parseInt(b.slice(14,18),16))>>>8;n[7]=g&255;n[8]=(g=parseInt(b.slice(19,23),16))>>>8;n[9]=g&255;n[10]=(g=parseInt(b.slice(24,36),16))/1099511627776&255;n[11]=g/4294967296&255;n[12]=g>>>
24&255;n[13]=g>>>16&255;n[14]=g>>>8&255;n[15]=g&255;return!0}catch(g){return!1}}function il(b,g=0,n){let I;return function(...W){null==n?void 0:n(...W);clearTimeout(I);I=setTimeout(()=>b.apply(W),g)}}function pk(){return/Mac|iPod|iPhone|iPad/.test(window.navigator.platform)}function Ii(b){return!!b}function sh(b=0){return new Promise(g=>setTimeout(g,b))}function fk(b="noid"){xv[b]||(xv[b]=py.createContext({}));return xv[b]}function Gh(b="noid"){return py.useContext(fk(b))}function jl(b){const {callbacks:g}=
Gh(),n=qy.useRef(-1);return qy.useMemo(()=>{const I=W=>{var ia,sa;const {order:Ka=0}=W;if(!Ka){var Va=W.target;Va.removeEventListener("pointerup",I);Va.releasePointerCapture(W.pointerId);null==(ia=g.onPointerUp)?void 0:ia.call(g,{type:"selection",handle:b,order:Ka},W);ia=Date.now();Va=ia-n.current;300<Va?n.current=ia:300>=Va&&(null==(sa=g.onDoubleClick)?void 0:sa.call(g,{type:"selection",handle:b,order:Ka},W),n.current=-1);W.order=Ka+1}};return{onPointerDown:W=>{var ia;const {order:sa=0}=W;if(!sa){var Ka=
cl(W.currentTarget);Ka.setPointerCapture(W.pointerId);Ka.addEventListener("pointerup",I);null==(ia=g.onPointerDown)?void 0:ia.call(g,{type:"selection",handle:b,order:sa},W);W.order=sa+1}},onPointerMove:W=>{var ia;const {order:sa=0}=W;sa||(null==(ia=g.onPointerMove)?void 0:ia.call(g,{type:"selection",handle:b,order:sa},W),W.order=sa+1)},onPointerEnter:W=>{var ia;const {order:sa=0}=W;sa||(null==(ia=g.onPointerEnter)?void 0:ia.call(g,{type:"selection",handle:b,order:sa},W),W.order=sa+1)},onPointerLeave:W=>
{var ia;const {order:sa=0}=W;sa||(null==(ia=g.onPointerLeave)?void 0:ia.call(g,{type:"selection",handle:b,order:sa},W),W.order=sa+1)},onKeyDown:W=>{var ia;null==(ia=g.onKeyDown)?void 0:ia.call(g,{type:"selection",handle:b,order:-1},W)},onKeyUp:W=>{var ia;null==(ia=g.onKeyUp)?void 0:ia.call(g,{type:"selection",handle:b,order:-1},W)}}},[g])}function cl(b){var g;if(null==(g=b.namespaceURI)?0:g.endsWith("svg")){if(b.parentElement)return cl(b.parentElement);throw Error("Could not find a parent element of an HTML type!");
}return b}function qk(b,g,n){const I=Gs.useRef(!1),W=Gs.useCallback(()=>{var ia;if(I.current){const sa=null==(ia=b.current)?void 0:ia.getBoundingClientRect();sa&&(ia={minX:sa.left,maxX:sa.left+sa.width,minY:sa.top,maxY:sa.top+sa.height,width:sa.width,height:sa.height},g.updateBounds(ia),null==n?void 0:n(ia))}else I.current=!0},[b,n]);Gs.useEffect(()=>{const ia=b.current?IC(b.current):document,sa=il(W,100);ia.addEventListener("scroll",sa);window.addEventListener("resize",sa);return()=>{ia.removeEventListener("scroll",
sa);window.removeEventListener("resize",sa)}},[]);Gs.useLayoutEffect(()=>{const ia=new ResizeObserver(sa=>{sa[0].contentRect&&W()});b.current&&ia.observe(b.current);return()=>{ia.disconnect()}},[b]);Gs.useEffect(()=>{W();setTimeout(()=>{var ia,sa;null==(sa=null==(ia=b.current)?void 0:ia.querySelector(".tl-canvas"))?void 0:sa.focus()})},[b])}function Wj(b,g){return Object.keys(g).reduce((n,I)=>{const W=g[I];return W?n+`${`--${b}-${I}`}: ${W};
`:n},"")}function kl(b,g,n=".logseq-tldraw"){wv.useLayoutEffect(()=>{const I=document.createElement("style"),W=Wj(b,g);I.setAttribute("id",`${b}-theme`);I.setAttribute("data-selector",n);I.innerHTML=`
        ${n} {
          ${W}
        }
      `;document.head.appendChild(I);return()=>{I&&document.head.contains(I)&&document.head.removeChild(I)}},[b,g,n])}function dl(b,g){wv.useLayoutEffect(()=>{if(yv.get(b))return()=>{};const n=document.createElement("style");n.innerHTML=g;n.setAttribute("id",b);document.head.appendChild(n);yv.set(b,n);return()=>{n&&document.head.contains(n)&&(document.head.removeChild(n),yv.delete(b))}},[b,g])}function Gl(b,g){const n=wv.useMemo(()=>te(te({},HC),b),[b]);kl("tl",n,g);dl("tl-canvas",GC)}function Xj(b=
"noid"){vv[b]||(vv[b]=oy.createContext({}));return vv[b]}function pg(b="noid"){return oy.useContext(Xj(b))}function Fk(){const b=pg(),{callbacks:g}=Gh(),n=ny.useRef(-1);return ny.useMemo(()=>({onPointerDown:I=>{var W,ia,sa;const {order:Ka=0}=I;Ka||(null==(W=I.currentTarget)?void 0:W.setPointerCapture(I.pointerId));I.isPrimary&&(null==(ia=g.onPointerDown)?void 0:ia.call(g,{type:"canvas",order:Ka},I),W=Date.now(),ia=W-n.current,300<ia?n.current=W:300>=ia&&(null==(sa=g.onDoubleClick)?void 0:sa.call(g,
{type:"canvas",order:Ka},I),n.current=-1))},onPointerMove:I=>{var W;const {order:ia=0}=I;null==(W=g.onPointerMove)?void 0:W.call(g,{type:"canvas",order:ia},I)},onPointerUp:I=>{var W,ia;const {order:sa=0}=I;sa||(null==(W=I.currentTarget)?void 0:W.releasePointerCapture(I.pointerId));null==(ia=g.onPointerUp)?void 0:ia.call(g,{type:"canvas",order:sa},I)},onPointerEnter:I=>{var W;const {order:ia=0}=I;null==(W=g.onPointerEnter)?void 0:W.call(g,{type:"canvas",order:ia},I)},onPointerLeave:I=>{var W;const {order:ia=
0}=I;null==(W=g.onPointerLeave)?void 0:W.call(g,{type:"canvas",order:ia},I)},onDrop:I=>Pc(this,null,function*(){I.preventDefault();b.drop(I.dataTransfer,[I.clientX,I.clientY])}),onDragOver:I=>{I.preventDefault()},onTouchEnd:I=>{let W=b.selectedTool.id;"pencil"!==W&&"highlighter"!==W||I.preventDefault()}}),[g])}function ig(b,g,n){return 0===g||Infinity===Math.abs(g)?Math.pow(b,5*n):b*g*n/(g+n*b)}function lg(b,g,n,I=.15){return 0===I?Math.max(g,Math.min(b,n)):b<g?-ig(g-b,n-g,I)+g:b>n?+ig(b-n,n-g,I)+
n:b}function sj(b,[g,n],[I,W]){const [[ia,sa],[Ka,Va]]=b;return[lg(g,ia,sa,I),lg(n,Ka,Va,W)]}function yg(b,g,n){g in b?Object.defineProperty(b,g,{value:n,enumerable:!0,configurable:!0,writable:!0}):b[g]=n;return b}function vi(b,g){var n=Object.keys(b);if(Object.getOwnPropertySymbols){var I=Object.getOwnPropertySymbols(b);g&&(I=I.filter(function(W){return Object.getOwnPropertyDescriptor(b,W).enumerable}));n.push.apply(n,I)}return n}function zh(b){for(var g=1;g<arguments.length;g++){var n=null!=arguments[g]?
arguments[g]:{};g%2?vi(Object(n),!0).forEach(function(I){yg(b,I,n[I])}):Object.getOwnPropertyDescriptors?Object.defineProperties(b,Object.getOwnPropertyDescriptors(n)):vi(Object(n)).forEach(function(I){Object.defineProperty(b,I,Object.getOwnPropertyDescriptor(n,I))})}return b}function Zh(b){return b?b[0].toUpperCase()+b.slice(1):""}function Uh(b=!1,g){return b&&!zD.includes(g)}function rk(b,g="",n=!1){const I=my[b];g=I?I[g]||g:g;return"on"+Zh(b)+Zh(g)+(Uh(n,g)?"Capture":"")}function Gk(b){b=b.substring(2).toLowerCase();
const g=!!~b.indexOf("passive");g&&(b=b.replace("passive",""));var n=eD.includes(b)?"capturecapture":"capture";(n=!!~b.indexOf(n))&&(b=b.replace("capture",""));return{device:b,capture:n,passive:g}}function Hh(b,g=""){const n=my[b];return b+(n?n[g]||g:g)}function Ai(b){return"touches"in b?"touch":"pointerType"in b?b.pointerType:"mouse"}function Ph(b){return Array.from(b.touches).filter(g=>{var n,I;return g.target===b.currentTarget||(null===(n=b.currentTarget)||void 0===n?void 0:null===(I=n.contains)||
void 0===I?void 0:I.call(n,g.target))})}function Pk(b){return"touches"in b?("touchend"===b.type||"touchcancel"===b.type?b.changedTouches:b.targetTouches)[0]:b}function Yj(b,g){const n=g.clientX-b.clientX,I=g.clientY-b.clientY;return{angle:-(180*Math.atan2(n,I))/Math.PI,distance:Math.hypot(n,I),origin:[(g.clientX+b.clientX)/2,(g.clientY+b.clientY)/2]}}function Zj(b){return Ph(b).map(g=>g.identifier)}function ml(b,g){const [n,I]=Array.from(b.touches).filter(W=>g.includes(W.identifier));return Yj(n,
I)}function nm(b){const g=Pk(b);return"touches"in b?g.identifier:g.pointerId}function uj(b){b=Pk(b);return[b.clientX,b.clientY]}function Bi(b){let {deltaX:g,deltaY:n,deltaMode:I}=b;1===I?(g*=40,n*=40):2===I&&(g*=800,n*=800);return[g,n]}function Dj(b,...g){return"function"===typeof b?b(...g):b}function $h(){}function gj(...b){return 0===b.length?$h:1===b.length?b[0]:function(){let g;for(const n of b)g=n.apply(this,arguments)||g;return g}}function Ih([b,g],n){b=Math.abs(b);g=Math.abs(g);if(b>g&&b>n)return"x";
if(g>b&&g>n)return"y"}function Ti(b){const [g,n]=b.overflow,[I,W]=b._delta,[ia,sa]=b._direction;if(0>g&&0<I&&0>ia||0<g&&0>I&&0<ia)b._movement[0]=b._movementBound[0];if(0>n&&0<W&&0>sa||0<n&&0>W&&0<sa)b._movement[1]=b._movementBound[1]}function pi(b){zv.set(b.key,b.engine);Av.set(b.key,b.resolver)}function sk(b={},g){const n={};for(const [I,W]of Object.entries(g))switch(typeof W){case "function":n[I]=W.call(n,b[I],I,b);break;case "object":n[I]=sk(b[I],W);break;case "boolean":W&&(n[I]=b[I])}return n}
function Qk(b,g,n={}){const {target:I,eventOptions:W,window:ia,enabled:sa,transform:Ka}=b;var Va=aD;if(null==b)b={};else{if(null==b)var Za={};else{Za={};var lb=Object.keys(b),vb;for(vb=0;vb<lb.length;vb++){var Qb=lb[vb];0<=Va.indexOf(Qb)||(Za[Qb]=b[Qb])}}if(Object.getOwnPropertySymbols)for(vb=Object.getOwnPropertySymbols(b),Qb=0;Qb<vb.length;Qb++)lb=vb[Qb],0<=Va.indexOf(lb)||Object.prototype.propertyIsEnumerable.call(b,lb)&&(Za[lb]=b[lb]);b=Za}n.shared=sk({target:I,eventOptions:W,window:ia,enabled:sa,
transform:Ka},yo);if(g){var cc=Av.get(g);n[g]=sk(zh({shared:n.shared},b),cc)}else for(cc in b)(g=Av.get(cc))&&(n[cc]=sk(zh({shared:n.shared},b[cc]),g));return n}function Ci(b,g){b.gestures.add(g);b.gestureEventStores[g]=new ry(b,g);b.gestureTimeoutStores[g]=new MC}function zg(b,g,n,I,W,ia){if(b.has(n)&&zv.has(I)){var sa=n+"Start",Ka=n+"End";W[I]=Va=>{let Za=void 0;if(Va.first&&sa in g)g[sa](Va);n in g&&(Za=g[n](Va));if(Va.last&&Ka in g)g[Ka](Va);return Za};ia[I]=ia[I]||{}}}function tj(b,g={},n,I){const W=
xo.default.useMemo(()=>new AD(b),[]);W.applyHandlers(b,I);W.applyConfig(g,n);xo.default.useEffect(W.effect.bind(W));xo.default.useEffect(()=>W.clean.bind(W),[]);if(void 0===g.target)return W.bind.bind(W)}function li(b){b.forEach(pi);return function(g,n){n=n||{};const I={},W={},ia=new Set;for(let Qb in g)sy.test(Qb)?(ia.add(RegExp.lastMatch),W[Qb]=g[Qb]):I[Qb]=g[Qb];const [sa,Ka,Va]=[W,I,ia];g={};zg(Va,sa,"onDrag","drag",g,n);zg(Va,sa,"onWheel","wheel",g,n);zg(Va,sa,"onScroll","scroll",g,n);zg(Va,
sa,"onPinch","pinch",g,n);zg(Va,sa,"onMove","move",g,n);zg(Va,sa,"onHover","hover",g,n);const {handlers:Za,nativeHandlers:lb,config:vb}={handlers:g,config:n,nativeHandlers:Ka};return tj(Za,vb,void 0,lb)}}function Oj(b,g){return li([TC,PC,QC,NC,OC,RC])(b,g||{})}function Ch(b){const {viewport:g,inputs:n,callbacks:I}=Gh(),W=Hs.useRef(void 0),ia=Hs.useRef([0,0]),sa=Hs.useRef(0),Ka=Hs.useMemo(()=>({onWheel:Va=>{var Za;({event:Va}=Va);Va.preventDefault();const {deltaY:lb,deltaX:vb}=Va;var Qb=0;if(Va.ctrlKey||
Va.metaKey){Qb=Math.sign(Va.deltaY);let lc=lb;10<Math.abs(Va.deltaY)&&(lc=10*Qb);Qb=lc}const [cc,Ub,rc]=[vb,lb,Qb];"pinching"===n.state||sa.current>=Va.timeStamp||(sa.current=Va.timeStamp,(Va.altKey||Va.ctrlKey||Va.metaKey)&&0===Va.buttons?(Qb=g.bounds,Va=null!=(Za=n.currentScreenPoint)?Za:[Qb.width/2,Qb.height/2],Za=g.camera.zoom,g.onZoom(Va,Za-rc/100*Za)):(Za=Ud.mul(Va.shiftKey&&!pk()?[Ub,0]:[cc,Ub],.8),Ud.isEqual(Za,[0,0])||g.panCamera(Za)))},onPinchStart:({event:Va,delta:Za,offset:lb,origin:vb})=>
{var Qb;const cc=b.current;Va instanceof WheelEvent||!(Va.target===cc||null!=cc&&cc.contains(Va.target))||(null==(Qb=I.onPinchStart)?void 0:Qb.call(I,{type:"canvas",order:0,delta:[...Za,lb[0]],offset:lb,point:Ud.sub(vb,n.containerOffset)},Va),W.current=vb,ia.current=[0,0])},onPinchEnd:({event:Va,offset:Za,origin:lb})=>{var vb;const Qb=b.current;Va instanceof WheelEvent||!(Va.target===Qb||null!=Qb&&Qb.contains(Va.target))||"pinching"!==n.state||(null==(vb=I.onPinchEnd)?void 0:vb.call(I,{type:"canvas",
order:0,delta:[0,0,Za[0]],offset:Za,point:Ud.sub(lb,n.containerOffset)},Va),ia.current=[0,0])},onPinch:({event:Va,offset:Za,origin:lb})=>{var vb,Qb=b.current;if(!(Va instanceof WheelEvent)&&(Va.target===Qb||null!=Qb&&Qb.contains(Va.target))){W.current||(W.current=lb);Qb=Ud.sub(W.current,lb);var cc=Ud.sub(Qb,ia.current);null==(vb=I.onPinch)?void 0:vb.call(I,{type:"canvas",order:0,delta:[...cc,Za[0]],offset:Za,point:Ud.sub(lb,n.containerOffset)},Va);ia.current=Qb}}}),[I]);Oj(Ka,{target:b,eventOptions:{passive:!1},
pinch:{from:[g.camera.zoom,g.camera.zoom],scaleBounds:()=>({from:g.camera.zoom,max:so.maxZoom,min:so.minZoom})}})}function wi(b,g,n,I){Bv.useLayoutEffect(()=>{b.current.style.transform=`translate(
        calc(${g.minX}px - var(--tl-padding)),
        calc(${g.minY}px - var(--tl-padding)))
        scale(var(--tl-scale))`},[g.minX,g.minY,n,g.rotation]);Bv.useLayoutEffect(()=>{const W=b.current;W.style.width=`calc(${Math.floor(g.width)}px + (var(--tl-padding) * 2))`;W.style.height=`calc(${Math.floor(g.height)}px + (var(--tl-padding) * 2))`},[g.width,g.height]);Bv.useLayoutEffect(()=>{const W=b.current;void 0!==I&&(W.style.zIndex=I.toString())},[I])}function Hk(b,g){const {onPersist:n,onSave:I,onSaveAs:W,onError:ia,onMount:sa,onCreateAssets:Ka,onCreateShapes:Va,onDeleteAssets:Za,onDeleteShapes:lb,
onDrop:vb,onPaste:Qb,onCanvasDBClick:cc}=g;Mt.useLayoutEffect(()=>{const Ub=[];if(b)return window.tlapps=window.tlapps||{},window.tlapps[b.uuid]=b,sa&&sa(b,null),()=>{Ub.forEach(rc=>rc());window.tlapps&&delete window.tlapps[b.uuid]}},[b]);Mt.useLayoutEffect(()=>{const Ub=[];n&&Ub.push(b.subscribe("persist",n));I&&Ub.push(b.subscribe("save",I));W&&Ub.push(b.subscribe("saveAs",W));ia&&Ub.push(b.subscribe("error",ia));Va&&Ub.push(b.subscribe("create-shapes",Va));Ka&&Ub.push(b.subscribe("create-assets",
Ka));lb&&Ub.push(b.subscribe("delete-shapes",lb));Za&&Ub.push(b.subscribe("delete-assets",Za));vb&&Ub.push(b.subscribe("drop",vb));Qb&&Ub.push(b.subscribe("paste",Qb));cc&&Ub.push(b.subscribe("canvas-dbclick",cc));return()=>Ub.forEach(rc=>rc())},[b,n,I,W,ia])}function hj(b){if("app"in b)return b.app;const [g]=Is.useState(()=>new KC(b.model,b.Shapes,b.Tools));Is.useLayoutEffect(()=>{g.initKeyboardShortcuts();return()=>{g.dispose()}},[g]);return g}function wj(b,g){kD.useEffect(()=>{"model"in g&&g.model&&
b.loadDocumentModel(g.model)},[g.model])}function bn(b){const g=Gh(),{viewport:{bounds:n}}=g;BD.useEffect(()=>{const I=sa=>{sa.preventDefault()},W=sa=>{if(0!==sa.touches.length){var Ka=sa.touches[0].pageX,Va=sa.touches[0].radiusX||0;(10>Ka-Va||Ka+Va>n.width-10)&&sa.preventDefault()}},ia=b.current;if(!ia)return()=>{};ia.addEventListener("touchstart",I,{passive:!0});ia.addEventListener("gestureend",I,{passive:!0});ia.addEventListener("gesturechange",I,{passive:!0});ia.addEventListener("gesturestart",
I,{passive:!0});ia.addEventListener("touchstart",W,{passive:!0});return()=>{ia&&(ia.removeEventListener("touchstart",I),ia.removeEventListener("gestureend",I),ia.removeEventListener("gesturechange",I),ia.removeEventListener("gesturestart",I),ia.removeEventListener("touchstart",W))}},[b,n.width])}function Ik(b,g){const {inputs:n,callbacks:I}=Gh();return sD.useMemo(()=>({onPointerDown:W=>{var ia,sa;const {order:Ka=0}=W;Ka||(null==(ia=W.currentTarget)?void 0:ia.setPointerCapture(W.pointerId));ia=b.props.handles[g];
null==(sa=I.onPointerDown)?void 0:sa.call(I,{type:"handle",shape:b,handle:ia,id:g,order:Ka},W);W.order=Ka+1},onPointerMove:W=>{var ia;const {order:sa=0}=W,Ka=b.props.handles[g];null==(ia=I.onPointerMove)?void 0:ia.call(I,{type:"handle",shape:b,handle:Ka,id:g,order:sa},W);W.order=sa+1},onPointerUp:W=>{var ia,sa;const {order:Ka=0}=W;Ka||(null==(ia=W.currentTarget)?void 0:ia.releasePointerCapture(W.pointerId));ia=b.props.handles[g];null==(sa=I.onPointerUp)?void 0:sa.call(I,{type:"handle",shape:b,handle:ia,
id:g,order:Ka},W);W.order=Ka+1},onPointerEnter:W=>{var ia;const {order:sa=0}=W,Ka=b.props.handles[g];null==(ia=I.onPointerEnter)?void 0:ia.call(I,{type:"handle",shape:b,handle:Ka,id:g,order:sa},W);W.order=sa+1},onPointerLeave:W=>{var ia;const {order:sa=0}=W,Ka=b.props.handles[g];null==(ia=I.onPointerLeave)?void 0:ia.call(I,{type:"handle",shape:b,handle:Ka,id:g,order:sa},W);W.order=sa+1},onKeyUp:W=>{var ia;const sa=b.props.handles[g];null==(ia=I.onKeyUp)?void 0:ia.call(I,{type:"handle",shape:b,handle:sa,
id:g,order:-1},W)},onKeyDown:W=>{var ia;const sa=b.props.handles[g];null==(ia=I.onKeyDown)?void 0:ia.call(I,{type:"handle",shape:b,handle:sa,id:g,order:-1},W)}}),[b.id,n,I])}function Oi(b,g,n=!1){return`url("data:image/svg+xml,<svg height='32' width='32' viewBox='0 0 35 35' xmlns='http://www.w3.org/2000/svg'><g fill='none' style='transform-origin:center center' transform='rotate(${g})${n?" scale(-1,-1) translate(0, -32)":""}'>`+b.replaceAll('"',"'")+'\x3c/g\x3e\x3c/svg\x3e") 16 16, pointer'}function om(b,
g,n=0){CD.useEffect(()=>{const I=b.current;I&&(I.style.cursor=DD[g](Ei.radiansToDegrees(n)))},[g,n])}function Ql(b){const {viewport:g}=Gh(),n=pg();ED.useLayoutEffect(()=>Ld(()=>{var I;const W=g.camera.zoom;"pinching"!==n.inputs.state&&null!=W&&(null==(I=b.current)?void 0:I.style.setProperty("--tl-zoom",W.toString()))}),[])}function pm(b,g=0){const [n,I]=(0,Py.useState)(b);(0,Py.useEffect)(()=>{let W=!1;const ia=setTimeout(()=>{W||I(b)},g);return()=>{W=!0;clearTimeout(ia)}},[b,g]);return n}function Rl(){const b=
pg();Qy.useEffect(()=>{qe(()=>te({},b.viewport.camera),()=>{window.sessionStorage.setItem("logseq.tldraw.camera:"+b.currentPageId,JSON.stringify(b.viewport.camera))})},[b.viewport.camera]);Qy.useEffect(()=>{var g;const n=JSON.parse(null!=(g=window.sessionStorage.getItem("logseq.tldraw.camera:"+b.currentPageId))?g:"null");n?b.viewport.update(n):b.selectedIds.size?b.api.zoomToSelection():b.api.zoomToFit()},[b])}function uk(b){b()}function ak(b){return Ke(wg(b,void 0))}function Hl(b){return{reaction:b,
mounted:!1,changedBeforeMount:!1,cleanAt:Date.now()+GD}}function tk(b){var g=new Map,n=1,I=new b(function(W){var ia=g.get(W);ia&&(ia.reaction.dispose(),g.delete(W))});return{addReactionToTrack:function(W,ia,sa){var Ka=n++;I.register(sa,Ka,W);W.current=Hl(ia);W.current.finalizationRegistryCleanupToken=Ka;g.set(Ka,W.current);return W.current},recordReactionAsCommitted:function(W){I.unregister(W);W.current&&W.current.finalizationRegistryCleanupToken&&g.delete(W.current.finalizationRegistryCleanupToken)},
forceCleanupTimerToRunNowForTests:function(){},resetCleanupScheduleForTests:function(){}}}function tg(){function b(){void 0===I&&(I=setTimeout(g,1E4))}function g(){I=void 0;var W=Date.now();n.forEach(function(ia){var sa=ia.current;sa&&W>=sa.cleanAt&&(sa.reaction.dispose(),ia.current=null,n.delete(ia))});0<n.size&&b()}var n=new Set,I;return{addReactionToTrack:function(W,ia,sa){W.current=Hl(ia);n.add(W);b();return W.current},recordReactionAsCommitted:function(W){n.delete(W)},forceCleanupTimerToRunNowForTests:function(){I&&
(clearTimeout(I),g())},resetCleanupScheduleForTests:function(){var W;if(0<n.size){try{for(var ia=HD(n),sa=ia.next();!sa.done;sa=ia.next()){var Ka=sa.value,Va=Ka.current;Va&&(Va.reaction.dispose(),Ka.current=null)}}catch(lb){var Za={error:lb}}finally{try{sa&&!sa.done&&(W=ia.return)&&W.call(ia)}finally{if(Za)throw Za.error;}}n.clear()}I&&(clearTimeout(I),I=void 0)}}}function $l(){return new rD}function lh(b,g){void 0===g&&(g="observed");var n=Hy(Ms.default.useState($l),1)[0],I=Hy(Ms.default.useState(),
2)[1],W=Ms.default.useRef(null);if(!W.current)var ia=new eh("observer".concat(g),function(){sa.mounted?I([]):sa.changedBeforeMount=!0}),sa=ID(W,ia,n);n=W.current.reaction;Ms.default.useDebugValue(n,ak);Ms.default.useEffect(function(){qD(W);W.current?(W.current.mounted=!0,W.current.changedBeforeMount&&(W.current.changedBeforeMount=!1,I([]))):(W.current={reaction:new eh("observer".concat(g),function(){I([])}),mounted:!0,changedBeforeMount:!1,cleanAt:Infinity},I([]));return function(){W.current.reaction.dispose();
W.current=null}},[]);var Ka,Va;n.track(function(){try{Ka=b()}catch(Za){Va=Za}});if(Va)throw Va;return Ka}function bf(b,g){var n;if(Gy&&b.$$typeof===Gy)throw Error("[mobx-react-lite] You are trying to use `observer` on a function component wrapped in either another `observer` or `React.memo`. The observer already applies 'React.memo' for you.");g=null!==(n=null===g||void 0===g?void 0:g.forwardRef)&&void 0!==n?n:!1;var I=b,W=b.displayName||b.name;if(Fy&&b.$$typeof===Fy&&(g=!0,I=b.render,"function"!==
typeof I))throw Error("[mobx-react-lite] `render` property of ForwardRef was not a function");n=function(ia,sa){return lh(function(){return I(ia,sa)},W)};""!==W&&(n.displayName=W);b.contextTypes&&(n.contextTypes=b.contextTypes);g&&(n=(0,xr.forwardRef)(n));n=(0,xr.memo)(n);Rk(b,n);return n}function Rk(b,g){Object.keys(b).forEach(function(n){nD[n]||Object.defineProperty(g,n,Object.getOwnPropertyDescriptor(b,n))})}function ij(b){var g=b.render;b=b.children||g;return"function"!==typeof b?null:lh(b)}function $i(b){const g=
pg(),{callbacks:n}=Gh(),I=Dy.useRef(!1);Dy.useEffect(()=>{const W=Va=>{var Za,lb;if(null==(Za=b.current)?0:Za.contains(document.activeElement))null==(lb=n.onKeyDown)?void 0:lb.call(n,{type:"canvas",order:-1},Va),I.current=Va.shiftKey},ia=Va=>{var Za,lb;if(null==(Za=b.current)?0:Za.contains(document.activeElement))null==(lb=n.onKeyUp)?void 0:lb.call(n,{type:"canvas",order:-1},Va),I.current=Va.shiftKey},sa=Va=>{var Za,lb,vb;!g.editingShape&&(null==(Za=b.current)?0:Za.contains(document.activeElement))&&
!["INPUT","TEXTAREA"].includes(null!=(vb=null==(lb=document.activeElement)?void 0:lb.tagName)?vb:"")&&(Va.preventDefault(),g.paste(Va,I.current))},Ka=Va=>{var Za,lb,vb;!g.editingShape&&0<g.selectedShapes.size&&(null==(Za=b.current)?0:Za.contains(document.activeElement))&&!["INPUT","TEXTAREA"].includes(null!=(vb=null==(lb=document.activeElement)?void 0:lb.tagName)?vb:"")&&(Va.preventDefault(),g.copy())};window.addEventListener("keydown",W);window.addEventListener("keyup",ia);document.addEventListener("paste",
sa);document.addEventListener("copy",Ka);return()=>{window.removeEventListener("keydown",W);window.removeEventListener("keyup",ia);document.removeEventListener("paste",sa);document.removeEventListener("copy",Ka)}},[])}function vk(b){const {inputs:g,callbacks:n}=Gh(),I=Vy.useRef(-1);return Vy.useMemo(()=>({onPointerDown:W=>{var ia,sa;const {order:Ka=0}=W;Ka||(null==(ia=W.currentTarget)?void 0:ia.setPointerCapture(W.pointerId));null==(sa=n.onPointerDown)?void 0:sa.call(n,{type:"shape",shape:b,order:Ka},
W);W.order=Ka+1},onPointerMove:W=>{var ia;const {order:sa=0}=W;null==(ia=n.onPointerMove)?void 0:ia.call(n,{type:"shape",shape:b,order:sa},W);W.order=sa+1},onPointerUp:W=>{var ia,sa,Ka;const {order:Va=0}=W;Va||(null==(ia=W.currentTarget)?void 0:ia.releasePointerCapture(W.pointerId));null==(sa=n.onPointerUp)?void 0:sa.call(n,{type:"shape",shape:b,order:Va},W);ia=Date.now();sa=ia-I.current;300<sa?I.current=ia:300>=sa&&(null==(Ka=n.onDoubleClick)?void 0:Ka.call(n,{type:"shape",shape:b,order:Va},W),I.current=
-1);W.order=Va+1},onPointerEnter:W=>{var ia;const {order:sa=0}=W;null==(ia=n.onPointerEnter)?void 0:ia.call(n,{type:"shape",shape:b,order:sa},W);W.order=sa+1},onPointerLeave:W=>{var ia;const {order:sa=0}=W;null==(ia=n.onPointerLeave)?void 0:ia.call(n,{type:"shape",shape:b,order:sa},W);W.order=sa+1},onKeyUp:W=>{var ia;null==(ia=n.onKeyUp)?void 0:ia.call(n,{type:"shape",shape:b,order:-1},W)},onKeyDown:W=>{var ia;null==(ia=n.onKeyDown)?void 0:ia.call(n,{type:"shape",shape:b,order:-1},W)}}),[b.id,g,n])}
function wk(b){var {viewport:g,inputs:n,callbacks:I,components:W}=b;b=Ia(b,["viewport","inputs","callbacks","components"]);return(0,pb.jsx)(vD,{id:b.id,viewport:g,inputs:n,callbacks:I,components:W,meta:b.meta,children:(0,pb.jsx)(uD,te({},b))})}function yf(){yf=Object.assign?Object.assign.bind():function(b){for(var g=1;g<arguments.length;g++){var n=arguments[g],I;for(I in n)Object.prototype.hasOwnProperty.call(n,I)&&(b[I]=n[I])}return b};return yf.apply(this,arguments)}function Je(b,g,{checkForDefaultPrevented:n=
!0}={}){return function(I){null===b||void 0===b||b(I);if(!1===n||!I.defaultPrevented)return null===g||void 0===g?void 0:g(I)}}function Sl(...b){return g=>b.forEach(n=>{"function"===typeof n?n(g):null!==n&&void 0!==n&&(n.current=g)})}function Lg(...b){return(0,SD.useCallback)(Sl(...b),b)}function Ui(b,g=[]){let n=[];const I=()=>{const W=n.map(ia=>(0,Hq.createContext)(ia));return function(ia){const sa=(null===ia||void 0===ia?void 0:ia[b])||W;return(0,Hq.useMemo)(()=>({[`__scope${b}`]:xf(te({},ia),{[b]:sa})}),
[ia,sa])}};I.scopeName=b;return[function(W,ia){function sa(Za){const {scope:lb,children:vb}=Za,Qb=Ia(Za,["scope","children"]);Za=(null===lb||void 0===lb?void 0:lb[b][Va])||Ka;const cc=(0,Hq.useMemo)(()=>Qb,Object.values(Qb));return(0,Hq.createElement)(Za.Provider,{value:cc},vb)}const Ka=(0,Hq.createContext)(ia),Va=n.length;n=[...n,ia];sa.displayName=W+"Provider";return[sa,function(Za,lb){if(lb=(0,Hq.useContext)((null===lb||void 0===lb?void 0:lb[b][Va])||Ka))return lb;if(void 0!==ia)return ia;throw Error(`\`${Za}\` must be used within \`${W}\``);
}]},Ng(I,...g)]}function Ng(...b){const g=b[0];if(1===b.length)return g;const n=()=>{const I=b.map(W=>({useScope:W(),scopeName:W.scopeName}));return function(W){const ia=I.reduce((sa,{useScope:Ka,scopeName:Va})=>{Ka=Ka(W)[`__scope${Va}`];return te(te({},sa),Ka)},{});return(0,Hq.useMemo)(()=>({[`__scope${g.scopeName}`]:ia}),[ia])}};n.scopeName=g.scopeName;return n}function bm(b){return(0,Jm.isValidElement)(b)&&b.type===$y}function Sk(b,g){const n=te({},g);for(const I in g){const W=b[I],ia=g[I];/^on[A-Z]/.test(I)?
W&&ia?n[I]=(...sa)=>{ia(...sa);W(...sa)}:W&&(n[I]=W):"style"===I?n[I]=te(te({},W),ia):"className"===I&&(n[I]=[W,ia].filter(Boolean).join(" "))}return te(te({},b),n)}function kg(b,g){b&&(0,TD.flushSync)(()=>b.dispatchEvent(g))}function Vh(b){const g=(0,Gv.useRef)(b);(0,Gv.useEffect)(()=>{g.current=b});return(0,Gv.useMemo)(()=>(...n)=>{var I;return null===(I=g.current)||void 0===I?void 0:I.call(g,...n)},[])}function pl(b,g=null===globalThis||void 0===globalThis?void 0:globalThis.document){const n=Vh(b);
(0,UD.useEffect)(()=>{const I=W=>{"Escape"===W.key&&n(W)};g.addEventListener("keydown",I);return()=>g.removeEventListener("keydown",I)},[n,g])}function Jf(b,g=null===globalThis||void 0===globalThis?void 0:globalThis.document){const n=Vh(b),I=(0,yn.useRef)(!1),W=(0,yn.useRef)(()=>{});(0,yn.useEffect)(()=>{const ia=Ka=>{if(Ka.target&&!I.current){let Va=function(){ll("dismissableLayer.pointerDownOutside",n,Za,{discrete:!0})};const Za={originalEvent:Ka};"touch"===Ka.pointerType?(g.removeEventListener("click",
W.current),W.current=Va,g.addEventListener("click",W.current,{once:!0})):Va()}I.current=!1},sa=window.setTimeout(()=>{g.addEventListener("pointerdown",ia)},0);return()=>{window.clearTimeout(sa);g.removeEventListener("pointerdown",ia);g.removeEventListener("click",W.current)}},[g,n]);return{onPointerDownCapture:()=>I.current=!0}}function yk(b,g=null===globalThis||void 0===globalThis?void 0:globalThis.document){const n=Vh(b),I=(0,yn.useRef)(!1);(0,yn.useEffect)(()=>{const W=ia=>{ia.target&&!I.current&&
ll("dismissableLayer.focusOutside",n,{originalEvent:ia},{discrete:!1})};g.addEventListener("focusin",W);return()=>g.removeEventListener("focusin",W)},[g,n]);return{onFocusCapture:()=>I.current=!0,onBlurCapture:()=>I.current=!1}}function Ej(){const b=new CustomEvent("dismissableLayer.update");document.dispatchEvent(b)}function ll(b,g,n,{discrete:I}){const W=n.originalEvent.target;n=new CustomEvent(b,{bubbles:!1,cancelable:!0,detail:n});g&&W.addEventListener(b,g,{once:!0});I?kg(W,n):W.dispatchEvent(n)}
function Fj(b){const [g,n]=bz.useState(XD());zn(()=>{b||n(I=>null!==I&&void 0!==I?I:String(YD++))},[b]);return b||(g?`radix-${g}`:"")}function Il(b){return b.split("-")[0]}function xi(b){return["top","bottom"].includes(Il(b))?"x":"y"}function yj(b){return"y"===b?"height":"width"}function nl(b,g,n){let {reference:I,floating:W}=b;var ia=I.x+I.width/2-W.width/2;const sa=I.y+I.height/2-W.height/2;b=xi(g);var Ka=yj(b);Ka=I[Ka]/2-W[Ka]/2;const Va="x"===b;switch(Il(g)){case "top":ia={x:ia,y:I.y-W.height};
break;case "bottom":ia={x:ia,y:I.y+I.height};break;case "right":ia={x:I.x+I.width,y:sa};break;case "left":ia={x:I.x-W.width,y:sa};break;default:ia={x:I.x,y:I.y}}switch(g.split("-")[1]){case "start":ia[b]-=Ka*(n&&Va?-1:1);break;case "end":ia[b]+=Ka*(n&&Va?-1:1)}return ia}function zk(b){return"number"!=typeof b?te({top:0,right:0,bottom:0,left:0},b):{top:b,right:b,bottom:b,left:b}}function Jk(b){return xf(te({},b),{top:b.y,left:b.x,right:b.x+b.width,bottom:b.y+b.height})}function sm(b,g){return Pc(this,
null,function*(){var n;void 0===g&&(g={});const {x:I,y:W,platform:ia,rects:sa,elements:Ka,strategy:Va}=b,{boundary:Za="clippingAncestors",rootBoundary:lb="viewport",elementContext:vb="floating",altBoundary:Qb=!1,padding:cc=0}=g,Ub=zk(cc),rc=Ka[Qb?"floating"===vb?"reference":"floating":vb],lc=Jk(yield ia.getClippingRect({element:null==(n=yield null==ia.isElement?void 0:ia.isElement(rc))||n?rc:rc.contextElement||(yield null==ia.getDocumentElement?void 0:ia.getDocumentElement(Ka.floating)),boundary:Za,
rootBoundary:lb,strategy:Va}));n=Jk(ia.convertOffsetParentRelativeRectToViewportRelativeRect?yield ia.convertOffsetParentRelativeRectToViewportRelativeRect({rect:"floating"===vb?xf(te({},sa.floating),{x:I,y:W}):sa.reference,offsetParent:yield null==ia.getOffsetParent?void 0:ia.getOffsetParent(Ka.floating),strategy:Va}):sa[vb]);return{top:lc.top-n.top+Ub.top,bottom:n.bottom-lc.bottom+Ub.bottom,left:lc.left-n.left+Ub.left,right:n.right-lc.right+Ub.right}})}function Fm(b){return b.replace(/left|right|bottom|top/g,
g=>$D[g])}function Zl(b,g,n){void 0===n&&(n=!1);const I=b.split("-")[1],W=xi(b);b=yj(W);n="x"===W?I===(n?"end":"start")?"right":"left":"start"===I?"bottom":"top";return g.reference[b]>g.floating[b]&&(n=Fm(n)),{main:n,cross:Fm(n)}}function Dm(b){return b.replace(/start|end/g,g=>aE[g])}function Tk(b,g){return{top:b.top-g.height,right:b.right-g.width,bottom:b.bottom-g.height,left:b.left-g.width}}function Qj(b){return dz.some(g=>0<=b[g])}function jj(b){return null==b?window:b&&b.document&&b.location&&
b.alert&&b.setInterval?b:(b=b.ownerDocument)&&b.defaultView||window}function Gj(b){return jj(b).getComputedStyle(b)}function ck(b){return b&&b.document&&b.location&&b.alert&&b.setInterval?"":b?(b.nodeName||"").toLowerCase():""}function sl(){const b=navigator.userAgentData;return null!=b&&b.brands?b.brands.map(g=>g.brand+"/"+g.version).join(" "):navigator.userAgent}function kj(b){return b instanceof jj(b).HTMLElement}function ik(b){return b instanceof jj(b).Element}function fl(b){return"undefined"==
typeof ShadowRoot?!1:b instanceof jj(b).ShadowRoot||b instanceof ShadowRoot}function hk(b){const {overflow:g,overflowX:n,overflowY:I}=Gj(b);return/auto|scroll|overlay|hidden/.test(g+I+n)}function bk(b){const g=/firefox/i.test(sl());b=Gj(b);return"none"!==b.transform||"none"!==b.perspective||"paint"===b.contain||["transform","perspective"].includes(b.willChange)||g&&"filter"===b.willChange||g&&!!b.filter&&"none"!==b.filter}function qm(){return!/^((?!chrome|android).)*safari/i.test(sl())}function jk(b,
g,n){var I,W,ia,sa;void 0===g&&(g=!1);void 0===n&&(n=!1);var Ka=b.getBoundingClientRect();let Va=1,Za=1;g&&kj(b)&&(Va=0<b.offsetWidth&&Tt(Ka.width)/b.offsetWidth||1,Za=0<b.offsetHeight&&Tt(Ka.height)/b.offsetHeight||1);b=ik(b)?jj(b):window;g=!qm()&&n;n=(Ka.left+(g&&null!=(I=null==(W=b.visualViewport)?void 0:W.offsetLeft)?I:0))/Va;I=(Ka.top+(g&&null!=(ia=null==(sa=b.visualViewport)?void 0:sa.offsetTop)?ia:0))/Za;ia=Ka.width/Va;Ka=Ka.height/Za;return{width:ia,height:Ka,top:I,right:n+ia,bottom:I+Ka,
left:n,x:n,y:I}}function Hj(b){return(g=b,(g instanceof jj(g).Node?b.ownerDocument:b.document)||window.document).documentElement;var g}function gk(b){return ik(b)?{scrollLeft:b.scrollLeft,scrollTop:b.scrollTop}:{scrollLeft:b.pageXOffset,scrollTop:b.pageYOffset}}function Gm(b){return jk(Hj(b)).left+gk(b).scrollLeft}function xk(b){return"html"===ck(b)?b:b.assignedSlot||b.parentNode||(fl(b)?b.host:null)||Hj(b)}function kk(b){return kj(b)&&"fixed"!==getComputedStyle(b).position?b.offsetParent:null}function Bh(b){for(var g=
jj(b),n=kk(b);n&&["table","td","th"].includes(ck(n))&&"static"===getComputedStyle(n).position;)n=kk(n);if(!n||"html"!==ck(n)&&("body"!==ck(n)||"static"!==getComputedStyle(n).position||bk(n))){if(!n)a:{b=xk(b);for(fl(b)&&(b=b.host);kj(b)&&!["html","body"].includes(ck(b));){if(bk(b)){n=b;break a}b=b.parentNode}n=null}g=n||g}return g}function vj(b){if(kj(b))return{width:b.offsetWidth,height:b.offsetHeight};b=jk(b);return{width:b.width,height:b.height}}function Ck(b){const g=xk(b);return["html","body",
"#document"].includes(ck(g))?b.ownerDocument.body:kj(g)&&hk(g)?g:Ck(g)}function Vj(b,g){var n;void 0===g&&(g=[]);var I=Ck(b);b=I===(null==(n=b.ownerDocument)?void 0:n.body);n=jj(I);I=b?[n].concat(n.visualViewport||[],hk(I)?I:[]):I;g=g.concat(I);return b?g:g.concat(Vj(I))}function yh(b,g,n){return"viewport"===g?Jk(function(I,W){var ia=jj(I),sa=Hj(I);ia=ia.visualViewport;I=sa.clientWidth;sa=sa.clientHeight;let Ka=0,Va=0;if(ia){I=ia.width;sa=ia.height;const Za=qm();(Za||!Za&&"fixed"===W)&&(Ka=ia.offsetLeft,
Va=ia.offsetTop)}return{width:I,height:sa,x:Ka,y:Va}}(b,n)):ik(g)?function(I,W){var ia=jk(I,!1,"fixed"===W);W=ia.top+I.clientTop;ia=ia.left+I.clientLeft;return{top:W,left:ia,x:ia,y:W,right:ia+I.clientWidth,bottom:W+I.clientHeight,width:I.clientWidth,height:I.clientHeight}}(g,n):Jk(function(I){var W;const ia=Hj(I);var sa=gk(I);const Ka=null==(W=I.ownerDocument)?void 0:W.body;W=Ns(ia.scrollWidth,ia.clientWidth,Ka?Ka.scrollWidth:0,Ka?Ka.clientWidth:0);const Va=Ns(ia.scrollHeight,ia.clientHeight,Ka?Ka.scrollHeight:
0,Ka?Ka.clientHeight:0);I=-sa.scrollLeft+Gm(I);sa=-sa.scrollTop;return"rtl"===Gj(Ka||ia).direction&&(I+=Ns(ia.clientWidth,Ka?Ka.clientWidth:0)-W),{width:W,height:Va,x:I,y:sa}}(Hj(b)))}function hh(b){const g=Vj(b),n=["absolute","fixed"].includes(Gj(b).position)&&kj(b)?Bh(b):b;return ik(n)?g.filter(I=>{var W;if(W=ik(I))a:if(W=null==n.getRootNode?void 0:n.getRootNode(),I.contains(n))W=!0;else{if(W&&fl(W)){W=n;do{if(W&&I===W){W=!0;break a}W=W.parentNode||W.host}while(W)}W=!1}return W&&"body"!==ck(I)}):
[]}function Gg(b,g,n,I){void 0===I&&(I={});const {ancestorScroll:W=!0,ancestorResize:ia=!0,elementResize:sa=!0,animationFrame:Ka=!1}=I,Va=W&&!Ka,Za=ia&&!Ka,lb=Va||Za?[...(ik(b)?Vj(b):[]),...Vj(g)]:[];lb.forEach(Ub=>{Va&&Ub.addEventListener("scroll",n,{passive:!0});Za&&Ub.addEventListener("resize",n)});let vb,Qb=null;if(sa){let Ub=!0;Qb=new ResizeObserver(()=>{Ub||n();Ub=!1});ik(b)&&!Ka&&Qb.observe(b);Qb.observe(g)}let cc=Ka?jk(b):null;return Ka&&function rc(){const lc=jk(b);!cc||lc.x===cc.x&&lc.y===
cc.y&&lc.width===cc.width&&lc.height===cc.height||n();cc=lc;vb=requestAnimationFrame(rc)}(),n(),()=>{var rc;lb.forEach(lc=>{Va&&lc.removeEventListener("scroll",n);Za&&lc.removeEventListener("resize",n)});null==(rc=Qb)||rc.disconnect();Qb=null;Ka&&cancelAnimationFrame(vb)}}function Nj(b,g){if(b===g)return!0;if(typeof b!==typeof g)return!1;if("function"===typeof b&&b.toString()===g.toString())return!0;let n,I;if(b&&g&&"object"==typeof b){if(Array.isArray(b)){var W=b.length;if(W!=g.length)return!1;for(n=
W;0!==n--;)if(!Nj(b[n],g[n]))return!1;return!0}I=Object.keys(b);W=I.length;if(W!==Object.keys(g).length)return!1;for(n=W;0!==n--;)if(!Object.prototype.hasOwnProperty.call(g,I[n]))return!1;for(n=W;0!==n--;)if(W=I[n],!("_owner"===W&&b.$$typeof||Nj(b[W],g[W])))return!1;return!0}return b!==b&&g!==g}function Nh(b){const g=Ln.useRef(b);Jv(()=>{g.current=b});return g}function aj(b){let {middleware:g,placement:n="bottom",strategy:I="absolute",whileElementsMounted:W}=void 0===b?{}:b;const ia=Ln.useRef(null),
sa=Ln.useRef(null),Ka=Nh(W),Va=Ln.useRef(null),[Za,lb]=Ln.useState({x:null,y:null,strategy:I,placement:n,middlewareData:{}}),[vb,Qb]=Ln.useState(g);Nj(null==vb?void 0:vb.map(Gc=>{({options:Gc}=Gc);return Gc}),null==g?void 0:g.map(Gc=>{({options:Gc}=Gc);return Gc}))||Qb(g);const cc=Ln.useCallback(()=>{ia.current&&sa.current&&hE(ia.current,sa.current,{middleware:vb,placement:n,strategy:I}).then(Gc=>{Ub.current&&iE.flushSync(()=>{lb(Gc)})})},[vb,n,I]);Jv(()=>{Ub.current&&cc()},[cc]);const Ub=Ln.useRef(!1);
Jv(()=>{Ub.current=!0;return()=>{Ub.current=!1}},[]);const rc=Ln.useCallback(()=>{"function"===typeof Va.current&&(Va.current(),Va.current=null);if(ia.current&&sa.current)if(Ka.current){const Gc=Ka.current(ia.current,sa.current,cc);Va.current=Gc}else cc()},[cc,Ka]),lc=Ln.useCallback(Gc=>{ia.current=Gc;rc()},[rc]),Vb=Ln.useCallback(Gc=>{sa.current=Gc;rc()},[rc]),sc=Ln.useMemo(()=>({reference:ia,floating:sa}),[]);return Ln.useMemo(()=>xf(te({},Za),{update:cc,refs:sc,reference:lc,floating:Vb}),[Za,cc,
sc,lc,Vb])}function ug(b){const [g,n]=(0,lE.useState)(void 0);zn(()=>{if(b){n({width:b.offsetWidth,height:b.offsetHeight});const I=new ResizeObserver(W=>{if(Array.isArray(W)&&W.length){W=W[0];if("borderBoxSize"in W){W=W.borderBoxSize;var ia=Array.isArray(W)?W[0]:W;W=ia.inlineSize;ia=ia.blockSize}else W=b.offsetWidth,ia=b.offsetHeight;n({width:W,height:ia})}});I.observe(b,{box:"border-box"});return()=>I.unobserve(b)}n(void 0)},[b]);return g}function Wi(b){return void 0!==b}function Tf(b){return null!==
b}function Hg(b){const [g,n="center"]=b.split("-");return[g,n]}function zj(b,g){return(0,np.useReducer)((n,I)=>{I=g[n][I];return null!==I&&void 0!==I?I:n},b)}function mi(b){const [g,n]=(0,np.useState)(),I=(0,np.useRef)({}),W=(0,np.useRef)(b),ia=(0,np.useRef)("none"),[sa,Ka]=zj(b?"mounted":"unmounted",{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});(0,np.useEffect)(()=>{const Va=Xg(I.current);
ia.current="mounted"===sa?Va:"none"},[sa]);zn(()=>{const Va=I.current,Za=W.current;if(Za!==b){const lb=ia.current,vb=Xg(Va);b?Ka("MOUNT"):"none"===vb||"none"===(null===Va||void 0===Va?void 0:Va.display)?Ka("UNMOUNT"):Za&&lb!==vb?Ka("ANIMATION_OUT"):Ka("UNMOUNT");W.current=b}},[b,Ka]);zn(()=>{if(g){const Va=lb=>{const vb=Xg(I.current).includes(lb.animationName);lb.target===g&&vb&&(0,sE.flushSync)(()=>Ka("ANIMATION_END"))},Za=lb=>{lb.target===g&&(ia.current=Xg(I.current))};g.addEventListener("animationstart",
Za);g.addEventListener("animationcancel",Va);g.addEventListener("animationend",Va);return()=>{g.removeEventListener("animationstart",Za);g.removeEventListener("animationcancel",Va);g.removeEventListener("animationend",Va)}}Ka("ANIMATION_END")},[g,Ka]);return{isPresent:["mounted","unmountSuspended"].includes(sa),ref:(0,np.useCallback)(Va=>{Va&&(I.current=getComputedStyle(Va));n(Va)},[])}}function Xg(b){return(null===b||void 0===b?void 0:b.animationName)||"none"}function Vf({prop:b,defaultProp:g,onChange:n=
()=>{}}){const [I,W]=th({defaultProp:g,onChange:n}),ia=void 0!==b;g=ia?b:I;const sa=Vh(n);n=(0,Vt.useCallback)(Ka=>{ia?(Ka="function"===typeof Ka?Ka(b):Ka,Ka!==b&&sa(Ka)):W(Ka)},[ia,b,W,sa]);return[g,n]}function th({defaultProp:b,onChange:g}){b=(0,Vt.useState)(b);const [n]=b,I=(0,Vt.useRef)(n),W=Vh(g);(0,Vt.useEffect)(()=>{I.current!==n&&(W(n),I.current=n)},[n,I,W]);return b}function Jl(b,g){const n=Math.abs(g.top-b.y),I=Math.abs(g.bottom-b.y),W=Math.abs(g.right-b.x);b=Math.abs(g.left-b.x);switch(Math.min(n,
I,W,b)){case b:return"left";case W:return"right";case n:return"top";case I:return"bottom";default:return null}}function Fi(b){b=b.slice();b.sort((g,n)=>g.x<n.x?-1:g.x>n.x?1:g.y<n.y?-1:g.y>n.y?1:0);return Qi(b)}function Qi(b){if(1>=b.length)return b.slice();const g=[];for(var n=0;n<b.length;n++){for(var I=b[n];2<=g.length;){var W=g[g.length-1],ia=g[g.length-2];if((W.x-ia.x)*(I.y-ia.y)>=(W.y-ia.y)*(I.x-ia.x))g.pop();else break}g.push(I)}g.pop();n=[];for(I=b.length-1;0<=I;I--){for(W=b[I];2<=n.length;){ia=
n[n.length-1];const sa=n[n.length-2];if((ia.x-sa.x)*(W.y-sa.y)>=(ia.y-sa.y)*(W.x-sa.x))n.pop();else break}n.push(W)}n.pop();return 1===g.length&&1===n.length&&g[0].x===n[0].x&&g[0].y===n[0].y?g:g.concat(n)}function Pb(b){var {side:g,content:n,sideOffset:I=10}=b;b=Ia(b,["side","content","sideOffset"]);return n?(0,pb.jsx)(DE,{delayDuration:300,children:(0,pb.jsxs)(EE,{children:[(0,pb.jsx)(FE,{asChild:!0,children:b.children}),(0,pb.jsx)(GE,{children:(0,pb.jsxs)(HE,xf(te({className:"tl-tooltip-content",
sideOffset:I,side:g},b),{children:[n,(0,pb.jsx)(IE,{className:"tl-tooltip-arrow"})]}))})]})}):(0,pb.jsx)(pb.Fragment,{children:b.children})}function dc(b){var {className:g,tooltip:n,tooltipSide:I}=b;b=Ia(b,["className","tooltip","tooltipSide"]);return(0,pb.jsx)(Pb,{content:n,side:I,children:(0,pb.jsx)("button",te({className:"tl-button "+(null!=g?g:"")},b))})}function ec(b){var g=b+"CollectionProvider";const [n,I]=Ui(g),[W,ia]=n(g,{collectionRef:{current:null},itemMap:new Map}),sa=lb=>{const {scope:vb,
children:Qb}=lb;lb=Xo.default.useRef(null);const cc=Xo.default.useRef(new Map).current;return Xo.default.createElement(W,{scope:vb,itemMap:cc,collectionRef:lb},Qb)};Object.assign(sa,{displayName:g});const Ka=b+"CollectionSlot";g=Xo.default.forwardRef((lb,vb)=>{const {scope:Qb,children:cc}=lb;lb=ia(Ka,Qb);vb=Lg(vb,lb.collectionRef);return Xo.default.createElement(Iq,{ref:vb},cc)});Object.assign(g,{displayName:Ka});const Va=b+"CollectionItemSlot",Za=Xo.default.forwardRef((lb,vb)=>{const {scope:Qb,children:cc}=
lb,Ub=Ia(lb,["scope","children"]),rc=Xo.default.useRef(null);lb=Lg(vb,rc);const lc=ia(Va,Qb);Xo.default.useEffect(()=>{lc.itemMap.set(rc,te({ref:rc},Ub));return()=>void lc.itemMap.delete(rc)});return Xo.default.createElement(Iq,{["data-radix-collection-item"]:"",ref:lb},cc)});Object.assign(Za,{displayName:Va});return[{Provider:sa,Slot:g,ItemSlot:Za},function(lb){const vb=ia(b+"CollectionConsumer",lb);return Xo.default.useCallback(()=>{const Qb=vb.collectionRef.current;if(!Qb)return[];const cc=Array.from(Qb.querySelectorAll("[data-radix-collection-item]"));
return Array.from(vb.itemMap.values()).sort((Ub,rc)=>cc.indexOf(Ub.ref.current)-cc.indexOf(rc.ref.current))},[vb.collectionRef,vb.itemMap])},I]}function ja(b){const g=(0,rz.useContext)(JE);return b||g||"ltr"}function Fb(){(0,KE.useEffect)(()=>{var b,g;const n=document.querySelectorAll("[data-radix-focus-guard]");document.body.insertAdjacentElement("afterbegin",null!==(b=n[0])&&void 0!==b?b:Sb());document.body.insertAdjacentElement("beforeend",null!==(g=n[1])&&void 0!==g?g:Sb());Pv++;return()=>{1===
Pv&&document.querySelectorAll("[data-radix-focus-guard]").forEach(I=>I.remove());Pv--}},[])}function Sb(){const b=document.createElement("span");b.setAttribute("data-radix-focus-guard","");b.tabIndex=0;b.style.cssText="outline: none; opacity: 0; position: fixed; pointer-events: none";return b}function wb(b,{select:g=!1}={}){const n=document.activeElement;for(const I of b)if(Lb(I,{select:g}),document.activeElement!==n)break}function zb(b){const g=[];for(b=document.createTreeWalker(b,NodeFilter.SHOW_ELEMENT,
{acceptNode:n=>{const I="INPUT"===n.tagName&&"hidden"===n.type;return n.disabled||n.hidden||I?NodeFilter.FILTER_SKIP:0<=n.tabIndex?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});b.nextNode();)g.push(b.currentNode);return g}function Ob(b,g){for(const n of b)if(!tb(n,{upTo:g}))return n}function tb(b,{upTo:g}){if("hidden"===getComputedStyle(b).visibility)return!0;for(;b&&(void 0===g||b!==g);){if("none"===getComputedStyle(b).display)return!0;b=b.parentElement}return!1}function Lb(b,{select:g=!1}=
{}){if(b&&b.focus){const n=document.activeElement;b.focus({preventScroll:!0});b!==n&&b instanceof HTMLInputElement&&"select"in b&&g&&b.select()}}function $b(b,g){b=[...b];g=b.indexOf(g);-1!==g&&b.splice(g,1);return b}function Ac(b){return b.filter(g=>"A"!==g.tagName)}function Nc(b,g,n){b=b.key;n="rtl"!==n?b:"ArrowLeft"===b?"ArrowRight":"ArrowRight"===b?"ArrowLeft":b;if("vertical"!==g||!["ArrowLeft","ArrowRight"].includes(n))if("horizontal"!==g||!["ArrowUp","ArrowDown"].includes(n))return RE[n]}function Sc(b){const g=
document.activeElement;for(const n of b){if(n===g)break;n.focus();if(document.activeElement!==g)break}}function wd(b,g){return b.map((n,I)=>b[(g+I)%b.length])}function Qd(b,g){var n=(0,VE.useState)(function(){return{value:b,callback:g,facade:{get current(){return n.value},set current(I){var W=n.value;W!==I&&(n.value=I,n.callback(I,W))}}}})[0];n.callback=g;return n.facade}function Fd(b,g){return Qd(g||null,function(n){return b.forEach(function(I){"function"===typeof I?I(n):I&&(I.current=n);return I})})}
function Bd(b){return b}function Gd(b,g){void 0===g&&(g=Bd);var n=[],I=!1;return{read:function(){if(I)throw Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:b},useMedium:function(W){var ia=g(W,I);n.push(ia);return function(){n=n.filter(function(sa){return sa!==ia})}},assignSyncMedium:function(W){for(I=!0;n.length;){var ia=n;n=[];ia.forEach(W)}n={push:function(sa){return W(sa)},filter:function(){return n}}},assignMedium:function(W){I=
!0;var ia=[];if(n.length){var sa=n;n=[];sa.forEach(W);ia=n}var Ka=function(){var Va=ia;ia=[];Va.forEach(W)};Promise.resolve().then(Ka);n={push:function(Va){ia.push(Va);Promise.resolve().then(Ka)},filter:function(Va){ia=ia.filter(Va);return n}}}}}function ze(b){const g=document.activeElement;for(const n of b){if(n===g)break;n.focus();if(document.activeElement!==g)break}}function Uf(b,g){return b.map((n,I)=>b[(g+I)%b.length])}function ue(b,g,n){const I=1<g.length&&Array.from(g).every(ia=>ia===g[0])?
g[0]:g,W=n?b.indexOf(n):-1;b=Uf(b,Math.max(W,0));1===I.length&&(b=b.filter(ia=>ia!==n));b=b.find(ia=>ia.toLowerCase().startsWith(I.toLowerCase()));return b!==n?b:void 0}function We(b){return g=>"mouse"===g.pointerType?b(g):void 0}function Oe(b,[g,n]){return Math.min(n,Math.max(g,b))}function Re(b){const g=(0,Zz.useRef)({value:b,previous:b});return(0,Zz.useMemo)(()=>{g.current.value!==b&&(g.current.previous=g.current.value,g.current.value=b);return g.current.previous},[b])}function qg(b=[],g,n){b=
[...b];b[n]=g;return b.sort((I,W)=>I-W)}function Rf(b,g,n){return 100/(n-g)*(b-g)}function Vi(b,g){if(2<g)return`Value ${b+1} of ${g}`;if(2===g)return["Minimum","Maximum"][b]}function Qf(b,g){if(1===b.length)return 0;b=b.map(I=>Math.abs(I-g));const n=Math.min(...b);return b.indexOf(n)}function gg(b,g,n){b/=2;const I=Mg([0,50],[0,b]);return(b-I(g)*n)*n}function ih(b){return b.slice(0,-1).map((g,n)=>b[n+1]-g)}function Mg(b,g){return n=>b[0]===b[1]||g[0]===g[1]?g[0]:g[0]+(g[1]-g[0])/(b[1]-b[0])*(n-b[0])}
function Rg(b,g){g=Math.pow(10,g);return Math.round(b*g)/g}function fh(b){function g(Ka){return Ka?(0,pb.jsx)("div",{className:"tl-color-bg",style:{backgroundColor:Ka},children:(0,pb.jsx)("div",{className:`w-full h-full bg-${Ka}-500`})}):(0,pb.jsx)("div",{className:"tl-color-bg",children:(0,pb.jsx)(Fh,{name:"color-swatch"})})}var {color:n,opacity:I,popoverSide:W,setColor:ia,setOpacity:sa}=b;b=Ia(b,["color","opacity","popoverSide","setColor","setOpacity"]);return(0,pb.jsx)(gA,xf(te({},b),{border:!0,
arrow:!0,side:W,label:(0,pb.jsx)(Pb,{content:"Color",side:W,sideOffset:14,children:g(n)}),children:(0,pb.jsxs)("div",{className:"p-1",children:[(0,pb.jsx)("div",{className:"tl-color-palette",children:Object.values(yb).map(Ka=>(0,pb.jsx)("button",{className:`tl-color-drip m-1${Ka===n?" active":""}`,onClick:()=>ia(Ka),children:g(Ka)},Ka))}),sa&&(0,pb.jsx)("div",{className:"mx-1 my-2",children:(0,pb.jsxs)(QF,{defaultValue:[null!=I?I:0],onValueCommit:Ka=>sa(Ka[0]),max:1,step:.1,"aria-label":"Opacity",
className:"tl-slider-root",children:[(0,pb.jsx)(RF,{className:"tl-slider-track",children:(0,pb.jsx)(SF,{className:"tl-slider-range"})}),(0,pb.jsx)(TF,{className:"tl-slider-thumb"})]})})]})}))}function vg(b){const g=Vh(b),n=(0,Df.useRef)(""),I=(0,Df.useRef)(0);b=(0,Df.useCallback)(ia=>{ia=n.current+ia;g(ia);(function Va(Ka){n.current=Ka;window.clearTimeout(I.current);""!==Ka&&(I.current=window.setTimeout(()=>Va(""),1E3))})(ia)},[g]);const W=(0,Df.useCallback)(()=>{n.current="";window.clearTimeout(I.current)},
[]);(0,Df.useEffect)(()=>()=>window.clearTimeout(I.current),[]);return[n,b,W]}function hg(b,g,n){const I=1<g.length&&Array.from(g).every(ia=>ia===g[0])?g[0]:g,W=n?b.indexOf(n):-1;b=Yg(b,Math.max(W,0));1===I.length&&(b=b.filter(ia=>ia!==n));b=b.find(ia=>ia.textValue.toLowerCase().startsWith(I.toLowerCase()));return b!==n?b:void 0}function Yg(b,g){return b.map((n,I)=>b[(g+I)%b.length])}function Nf(b){var {options:g,tooltip:n,value:I,onValueChange:W}=b;b=Ia(b,["options","tooltip","value","onValueChange"]);
const [ia,sa]=WF.useState(!1);return(0,pb.jsx)("div",xf(te({},b),{className:"tl-select-input",children:(0,pb.jsxs)(oG,{open:ia,onOpenChange:sa,value:I,onValueChange:W,children:[(0,pb.jsx)(Pb,{content:n,children:(0,pb.jsxs)(pG,{className:"tl-select-input-trigger",children:[(0,pb.jsx)("div",{className:"tl-select-input-trigger-value",children:(0,pb.jsx)(qG,{})}),(0,pb.jsx)(rG,{style:{lineHeight:1},children:(0,pb.jsx)(Fh,{name:ia?"chevron-up":"chevron-down"})})]})}),(0,pb.jsx)(sG,{className:"tl-select-input-portal",
children:(0,pb.jsxs)(tG,{className:"tl-select-input-content",children:[(0,pb.jsx)(xG,{}),(0,pb.jsx)(uG,{className:"tl-select-input-viewport",children:g.map(Ka=>(0,pb.jsx)(vG,{className:"tl-select-input-select-item",value:Ka.value,children:(0,pb.jsx)(wG,{children:Ka.label})},Ka.value))}),(0,pb.jsx)(yG,{})]})})]})}))}function ri(b,g){return function(n){return b(g(n))}}function vh(b,g){return g(b)}function ei(b,g){return function(n){return b(g,n)}}function Uj(b,g){return function(){return b(g)}}function ii(b,
g){g(b);return b}function wh(){for(var b=arguments.length,g=Array(b),n=0;n<b;n++)g[n]=arguments[n];return g}function Cl(b){b()}function Ij(b){return function(){return b}}function lm(){for(var b=arguments.length,g=Array(b),n=0;n<b;n++)g[n]=arguments[n];return function(){g.map(Cl)}}function Zk(){}function Cf(b,g){return b(1,g)}function ym(b,g){b(0,g)}function Ym(b){b(2)}function Wl(b){return b(4)}function jg(b,g){return Cf(b,ei(g,0))}function Ri(b,g){var n=b(1,function(I){n();g(I)});return n}function $f(){var b=
[];return function(g,n){switch(g){case 2:b.splice(0,b.length);break;case 1:return b.push(n),function(){var I=b.indexOf(n);-1<I&&b.splice(I,1)};case 0:b.slice().forEach(function(I){I(n)});break;default:throw Error("unrecognized action "+g);}}}function df(b){var g=b,n=$f();return function(I,W){switch(I){case 1:W(g);break;case 0:g=W;break;case 4:return g}return n(I,W)}}function Hi(b){var g,n;return function(I,W){switch(I){case 1:if(W){if(n===W)break;g&&g();n=W;return g=b(1,W)}g&&g();return Zk;case 2:g&&
g();n=null;break;default:throw Error("unrecognized action "+I);}}}function oj(b){return ii($f(),function(g){return jg(b,g)})}function ej(b,g){return ii(df(g),function(n){return jg(b,n)})}function Si(){for(var b=arguments.length,g=Array(b),n=0;n<b;n++)g[n]=arguments[n];return function(I){return g.reduceRight(vh,I)}}function wf(b){for(var g=arguments.length,n=Array(1<g?g-1:0),I=1;I<g;I++)n[I-1]=arguments[I];var W=Si.apply(void 0,n);return function(ia,sa){switch(ia){case 1:return Cf(b,W(sa));case 2:b(2);
break;default:throw Error("unrecognized action "+ia);}}}function De(b,g){return b===g}function gf(b){void 0===b&&(b=De);var g;return function(n){return function(I){b(g,I)||(g=I,n(I))}}}function oe(b){return function(g){return function(n){b(n)&&g(n)}}}function je(b){return function(g){return ri(g,b)}}function ti(b){return function(g){return function(){return g(b)}}}function Kg(b,g){return function(n){return function(I){return n(g=b(g,I))}}}function Ni(b){return function(g){return function(n){0<b?b--:
g(n)}}}function jh(b){var g,n;return function(I){return function(W){g=W;n||=setTimeout(function(){n=void 0;I(g)},b)}}}function gl(b){var g,n;return function(I){return function(W){g=W;n&&clearTimeout(n);n=setTimeout(function(){I(g)},b)}}}function le(){for(var b=arguments.length,g=Array(b),n=0;n<b;n++)g[n]=arguments[n];var I=Array(g.length),W=0,ia=null,sa=Math.pow(2,g.length)-1;g.forEach(function(Ka,Va){var Za=Math.pow(2,Va);Cf(Ka,function(lb){var vb=W;W|=Za;I[Va]=lb;vb!==sa&&W===sa&&ia&&(ia(),ia=null)})});
return function(Ka){return function(Va){var Za=function(){return Ka([Va].concat(I))};W===sa?Za():ia=Za}}}function Te(){for(var b=arguments.length,g=Array(b),n=0;n<b;n++)g[n]=arguments[n];return function(I,W){switch(I){case 1:return lm.apply(void 0,g.map(function(ia){return ia(1,W)}));case 2:break;default:throw Error("unrecognized action "+I);}}}function ng(b,g){void 0===g&&(g=De);return wf(b,gf(g))}function pe(){for(var b=$f(),g=arguments.length,n=Array(g),I=0;I<g;I++)n[I]=arguments[I];var W=Array(n.length),
ia=0,sa=Math.pow(2,n.length)-1;n.forEach(function(Ka,Va){var Za=Math.pow(2,Va);Cf(Ka,function(lb){W[Va]=lb;ia|=Za;ia===sa&&b(0,W)})});return function(Ka,Va){switch(Ka){case 1:return ia===sa&&Va(W),b(1,Va);case 2:b(2);break;default:throw Error("unrecognized action "+Ka);}}}function nh(b,g,n){void 0===g&&(g=[]);n=(void 0===n?{singleton:!0}:n).singleton;return{id:Symbol(),constructor:b,dependencies:g,singleton:n}}function Ol(b){var g=new Map;return function W(I){var ia=I.id,sa=I.constructor,Ka=I.dependencies;
if((I=I.singleton)&&g.has(ia))return g.get(ia);sa=sa(Ka.map(function(Va){return W(Va)}));I&&g.set(ia,sa);return sa}(b)}function Al(b,g){if(null==b)return{};var n={},I=Object.keys(b),W;for(W=0;W<I.length;W++){var ia=I[W];0<=g.indexOf(ia)||(n[ia]=b[ia])}return n}function si(b,g){if(b){if("string"===typeof b)return ph(b,g);var n=Object.prototype.toString.call(b).slice(8,-1);"Object"===n&&b.constructor&&(n=b.constructor.name);if("Map"===n||"Set"===n)return Array.from(b);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ph(b,
g)}}function ph(b,g){if(null==g||g>b.length)g=b.length;for(var n=0,I=Array(g);n<g;n++)I[n]=b[n];return I}function Hf(b,g){var n="undefined"!==typeof Symbol&&b[Symbol.iterator]||b["@@iterator"];if(n)return(n=n.call(b)).next.bind(n);if(Array.isArray(b)||(n=si(b))||g&&b&&"number"===typeof b.length){n&&(b=n);var I=0;return function(){return I>=b.length?{done:!0}:{done:!1,value:b[I++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
}function dh(b,g){for(var n={},I={},W=0,ia=b.length;W<ia;)I[b[W]]=1,W+=1;for(var sa in g)I.hasOwnProperty(sa)||(n[sa]=g[sa]);return n}function tl(b,g,n){function I(vb,Qb){vb.propsReady&&(0,vb.propsReady)(0,!1);for(var cc=Hf(sa),Ub;!(Ub=cc()).done;)Ub=Ub.value,(0,vb[g.required[Ub]])(0,Qb[Ub]);for(cc=Hf(Ka);!(Ub=cc()).done;)if(Ub=Ub.value,Ub in Qb)(0,vb[g.optional[Ub]])(0,Qb[Ub]);vb.propsReady&&(0,vb.propsReady)(0,!0)}function W(vb){return Va.reduce(function(Qb,cc){Qb[cc]=function(Ub){(0,vb[g.methods[cc]])(0,
Ub)};return Qb},{})}function ia(vb){return Za.reduce(function(Qb,cc){Qb[cc]=Hi(vb[g.events[cc]]);return Qb},{})}var sa=Object.keys(g.required||{}),Ka=Object.keys(g.optional||{}),Va=Object.keys(g.methods||{}),Za=Object.keys(g.events||{}),lb=(0,An.createContext)({});return{Component:(0,An.forwardRef)(function(vb,Qb){var cc=vb.children,Ub=Al(vb,BG),rc=(0,An.useState)(function(){return ii(Ol(b),function(Vb){return I(Vb,Ub)})})[0],lc=(0,An.useState)(Uj(ia,rc))[0];mu(function(){for(var Vb=Hf(Za),sc;!(sc=
Vb()).done;)if(sc=sc.value,sc in Ub)(0,lc[sc])(1,Ub[sc]);return function(){Object.values(lc).map(Ym)}},[Ub,lc,rc]);mu(function(){I(rc,Ub)});(0,An.useImperativeHandle)(Qb,Ij(W(rc)));return(0,An.createElement)(lb.Provider,{value:rc},n?(0,An.createElement)(n,dh([].concat(sa,Ka,Za),Ub),cc):cc)}),usePublisher:function(vb){return(0,An.useCallback)(ei(ym,(0,An.useContext)(lb)[vb]),[vb])},useEmitterValue:function(vb){var Qb=(0,An.useContext)(lb)[vb];vb=(0,An.useState)(Uj(Wl,Qb));var cc=vb[0],Ub=vb[1];mu(function(){return Cf(Qb,
function(rc){rc!==cc&&Ub(Ij(rc))})},[Qb,cc]);return cc},useEmitter:function(vb,Qb){var cc=(0,An.useContext)(lb)[vb];mu(function(){return cc(1,Qb)},[Qb,cc])}}}function Fg(){return Fg=Object.assign||function(b){for(var g=1;g<arguments.length;g++){var n=arguments[g],I;for(I in n)Object.prototype.hasOwnProperty.call(n,I)&&(b[I]=n[I])}return b},Fg.apply(this,arguments)}function Pf(b,g){if(null==b)return{};var n,I,W={},ia=Object.keys(b);for(I=0;I<ia.length;I++)0<=g.indexOf(n=ia[I])||(W[n]=b[n]);return W}
function Lm(b,g){(null==g||g>b.length)&&(g=b.length);for(var n=0,I=Array(g);n<g;n++)I[n]=b[n];return I}function dk(b,g){var n="undefined"!=typeof Symbol&&b[Symbol.iterator]||b["@@iterator"];if(n)return(n=n.call(b)).next.bind(n);if(Array.isArray(b)||(n=function(W,ia){if(W){if("string"==typeof W)return Lm(W,ia);var sa=Object.prototype.toString.call(W).slice(8,-1);return"Object"===sa&&W.constructor&&(sa=W.constructor.name),"Map"===sa||"Set"===sa?Array.from(W):"Arguments"===sa||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(sa)?
Lm(W,ia):void 0}}(b))||g&&b&&"number"==typeof b.length){n&&(b=n);var I=0;return function(){return I>=b.length?{done:!0}:{done:!1,value:b[I++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}function Kf(b,g){void 0===g&&(g=!0);var n=(0,ci.useRef)(null),I=function(ia){};if("undefined"!=typeof ResizeObserver){var W=new ResizeObserver(function(ia){ia=ia[0].target;null!==ia.offsetParent&&b(ia)});
I=function(ia){ia&&g?(W.observe(ia),n.current=ia):(n.current&&W.unobserve(n.current),n.current=null)}}return{ref:n,callbackRef:I}}function Jj(b,g){return void 0===g&&(g=!0),Kf(b,g).callbackRef}function Dh(b,g,n,I,W,ia,sa){return Kf(function(Ka){for(var Va=function(vb,Qb,cc,Ub){cc=vb.length;if(0===cc)return null;for(var rc=[],lc=0;lc<cc;lc++){var Vb=vb.item(lc);if(Vb&&void 0!==Vb.dataset.index){var sc=parseInt(Vb.dataset.index),Gc=parseFloat(Vb.dataset.knownSize),Qc=Qb(Vb,"offsetHeight");if(0===Qc&&
Ub("Zero-sized element, this should not happen",{child:Vb},im.ERROR),Qc!==Gc)Vb=rc[rc.length-1],0===rc.length||Vb.size!==Qc||Vb.endIndex!==sc-1?rc.push({startIndex:sc,endIndex:sc,size:Qc}):rc[rc.length-1].endIndex++}}return rc}(Ka.children,g,0,W),Za=Ka.parentElement;!Za.dataset.virtuosoScroller;)Za=Za.parentElement;var lb="window"===Za.firstElementChild.dataset.viewportType;I({scrollTop:Math.max(sa?sa.scrollTop:lb?window.pageYOffset||document.documentElement.scrollTop:Za.scrollTop,0),scrollHeight:sa?
sa.scrollHeight:lb?document.documentElement.scrollHeight:Za.scrollHeight,viewportHeight:sa?sa.offsetHeight:lb?window.innerHeight:Za.offsetHeight});null==ia||ia(function(vb,Qb,cc){return"normal"===Qb||null!=Qb&&Qb.endsWith("px")||cc("row-gap was not resolved to pixel value correctly",Qb,im.WARN),"normal"===Qb?0:parseInt(null!=Qb?Qb:"0",10)}(0,getComputedStyle(Ka).rowGap,W));null!==Va&&b(Va)},n)}function qh(b,g){return Math.round(b.getBoundingClientRect()[g])}function dn(b,g,n,I,W){void 0===I&&(I=Zk);
var ia=(0,ci.useRef)(null),sa=(0,ci.useRef)(null),Ka=(0,ci.useRef)(null),Va=(0,ci.useRef)(!1),Za=(0,ci.useCallback)(function(lb){lb=lb.target;var vb=lb===window||lb===document,Qb=vb?window.pageYOffset||document.documentElement.scrollTop:lb.scrollTop,cc=vb?document.documentElement.scrollHeight:lb.scrollHeight,Ub=vb?window.innerHeight:lb.offsetHeight;lb=function(){b({scrollTop:Math.max(Qb,0),scrollHeight:cc,viewportHeight:Ub})};Va.current?(0,CG.flushSync)(lb):lb();Va.current=!1;null!==sa.current&&(Qb===
sa.current||0>=Qb||Qb===cc-Ub)&&(sa.current=null,g(!0),Ka.current&&(clearTimeout(Ka.current),Ka.current=null))},[b,g]);return(0,ci.useEffect)(function(){var lb=W||ia.current;return I(W||ia.current),Za({target:lb}),lb.addEventListener("scroll",Za,{passive:!0}),function(){I(null);lb.removeEventListener("scroll",Za)}},[ia,Za,n,I,W]),{scrollerRef:ia,scrollByCallback:function(lb){Va.current=!0;ia.current.scrollBy(lb)},scrollToCallback:function(lb){var vb=ia.current;if(vb&&!("offsetHeight"in vb&&0===vb.offsetHeight)){var Qb,
cc,Ub,rc="smooth"===lb.behavior;if(vb===window?(cc=Math.max(qh(document.documentElement,"height"),document.documentElement.scrollHeight),Qb=window.innerHeight,Ub=document.documentElement.scrollTop):(cc=vb.scrollHeight,Qb=qh(vb,"height"),Ub=vb.scrollTop),lb.top=Math.ceil(Math.max(Math.min(cc-Qb,lb.top),0)),1.01>Math.abs(Qb-cc)||lb.top===Ub)return b({scrollTop:Ub,scrollHeight:cc,viewportHeight:Qb}),void(rc&&g(!0));rc?(sa.current=lb.top,Ka.current&&clearTimeout(Ka.current),Ka.current=setTimeout(function(){Ka.current=
null;sa.current=null;g(!0)},1E3)):sa.current=null;vb.scrollTo(lb)}}}}function Dl(b,g,n,I,W){return void 0===I&&(I=Li),void 0===W&&(W=Li),{k:b,v:g,lvl:n,l:I,r:W}}function Uk(b,g){if(b===Li)return Li;var n=b.k,I=b.l,W=b.r;if(g===n){if(I===Li)return W;if(W===Li)return I;g=El(I);return Ji(qj(b,{k:g[0],v:g[1],l:Wh(I)}))}return Ji(qj(b,g<n?{l:Uk(I,g)}:{r:Uk(W,g)}))}function Lj(b,g,n){return(void 0===n&&(n="k"),b===Li)?[-Infinity,void 0]:b[n]===g?[b.k,b.v]:b[n]<g?(g=Lj(b.r,g,n),-Infinity===g[0]?[b.k,b.v]:
g):Lj(b.l,g,n)}function ek(b,g,n){return b===Li?Dl(g,n,1):g===b.k?qj(b,{k:g,v:n}):Bj(eg(qj(b,g<b.k?{l:ek(b.l,g,n)}:{r:ek(b.r,g,n)})))}function pj(b,g,n){if(b===Li)return[];var I=b.k,W=b.v,ia=b.r,sa=[];return I>g&&(sa=sa.concat(pj(b.l,g,n))),I>=g&&I<=n&&sa.push({k:I,v:W}),I<=n&&(sa=sa.concat(pj(ia,g,n))),sa}function en(b){return b===Li?[]:[].concat(en(b.l),[{k:b.k,v:b.v}],en(b.r))}function El(b){return b.r===Li?[b.k,b.v]:El(b.r)}function Wh(b){return b.r===Li?b.l:Ji(qj(b,{r:Wh(b.r)}))}function qj(b,
g){return Dl(void 0!==g.k?g.k:b.k,void 0!==g.v?g.v:b.v,void 0!==g.lvl?g.lvl:b.lvl,void 0!==g.l?g.l:b.l,void 0!==g.r?g.r:b.r)}function Xi(b){return b===Li||b.lvl>b.r.lvl}function Ji(b){var g=b.l,n=b.r,I=b.lvl;if(n.lvl>=I-1&&g.lvl>=I-1)return b;if(I>n.lvl+1){if(Xi(g))return eg(qj(b,{lvl:I-1}));if(g===Li||g.r===Li)throw Error("Unexpected empty nodes");return qj(g.r,{l:qj(g,{r:g.r.l}),r:qj(b,{l:g.r.r,lvl:I-1}),lvl:I})}if(Xi(b))return Bj(qj(b,{lvl:I-1}));if(n===Li||n.l===Li)throw Error("Unexpected empty nodes");
g=n.l;var W=Xi(g)?n.lvl-1:n.lvl;return qj(g,{l:qj(b,{r:g.l,lvl:I-1}),r:Bj(qj(n,{l:g.r,lvl:W})),lvl:g.lvl+1})}function zm(b,g,n){return b===Li?[]:Pm(pj(b,Lj(b,g)[0],n),function(I){return{index:I.k,value:I.v}})}function Pm(b,g){var n=b.length;if(0===n)return[];var I=g(b[0]),W=I.index;I=I.value;for(var ia=[],sa=1;sa<n;sa++){var Ka=g(b[sa]),Va=Ka.index;Ka=Ka.value;ia.push({start:W,end:Va-1,value:I});W=Va;I=Ka}return ia.push({start:W,end:Infinity,value:I}),ia}function Bj(b){var g=b.r,n=b.lvl;return g===
Li||g.r===Li||g.lvl!==n||g.r.lvl!==n?b:qj(g,{l:qj(b,{r:g.l}),lvl:n+1})}function eg(b){var g=b.l;return g===Li||g.lvl!==b.lvl?b:qj(g,{r:qj(b,{l:g.r})})}function ui(b,g,n,I){void 0===I&&(I=0);for(var W=b.length-1;I<=W;){var ia=Math.floor((I+W)/2),sa=n(b[ia],g);if(0===sa)return ia;if(-1===sa){if(2>W-I)return ia-1;W=ia-1}else{if(W===I)return ia;I=ia+1}}throw Error("Failed binary finding record in array - "+b.join(",")+", searched for "+g);}function tn(b){var g=b.size,n=b.startIndex,I=b.endIndex;return function(W){return W.start===
n&&(W.end===I||Infinity===W.end)&&W.value===g}}function Xl(b,g){b=b.index;return g===b?0:g<b?-1:1}function y(b,g){b=b.offset;return g===b?0:g<b?-1:1}function U(b){return{index:b.index,value:b}}function xa(b,g,n,I){var W=0,ia=0,sa=0,Ka;0!==g?(sa=b[Ka=ui(b,g-1,Xl)].offset,ia=Lj(n,g-1),W=ia[0],ia=ia[1],b.length&&b[Ka].size===Lj(n,g)[1]&&--Ka,b=b.slice(0,Ka+1)):b=[];for(g=dk(zm(n,g,Infinity));!(n=g()).done;)Ka=n.value,n=Ka.start,Ka=Ka.value,W=n-W,sa=W*ia+sa+W*I,b.push({offset:sa,size:Ka,index:n}),W=n,
ia=Ka;return{offsetTree:b,lastIndex:W,lastOffset:sa,lastSize:ia}}function ua(b,g){var n=g[0],I=g[1],W=g[3];0<n.length&&(0,g[2])("received item sizes",n,im.DEBUG);var ia=b.sizeTree;g=ia;var sa=0;if(0<I.length&&ia===Li&&2===n.length){var Ka=n[0].size,Va=n[1].size;g=I.reduce(function(lb,vb){return ek(ek(lb,vb,Ka),vb+1,Va)},g)}else n=function(lb,vb){var Qb,cc=lb===Li?0:Infinity;for(vb=dk(vb);!(Qb=vb()).done;){var Ub=Qb.value;Qb=Ub.size;var rc=Ub.startIndex,lc=Ub.endIndex;if(cc=Math.min(cc,rc),lb===Li)lb=
ek(lb,0,Qb);else{var Vb=zm(lb,rc-1,lc+1);if(!Vb.some(tn(Ub))){var sc,Gc=Ub=!1;for(Vb=dk(Vb);!(sc=Vb()).done;){var Qc=sc.value;sc=Qc.start;var Vc=Qc.end;Qc=Qc.value;Ub?(lc>=sc||Qb===Qc)&&(lb=Uk(lb,sc)):(Gc=Qc!==Qb,Ub=!0);Vc>lc&&lc>=sc&&Qc!==Qb&&(lb=ek(lb,lc+1,Qc))}Gc&&(lb=ek(lb,rc,Qb))}}}return[lb,cc]}(g,n),g=n[0],sa=n[1];if(g===ia)return b;b=xa(b.offsetTree,sa,g,W);var Za=b.offsetTree;return{sizeTree:g,offsetTree:Za,lastIndex:b.lastIndex,lastOffset:b.lastOffset,lastSize:b.lastSize,groupOffsetTree:I.reduce(function(lb,
vb){return ek(lb,vb,Fa(vb,Za,W))},Li),groupIndices:I}}function Fa(b,g,n){if(0===g.length)return 0;g=g[ui(g,b,Xl)];b-=g.index;b=g.size*b+(b-1)*n+g.offset;return 0<b?b+n:b}function ab(b,g,n){if(void 0!==b.groupIndex)return g.groupIndices[b.groupIndex]+1;b=rb("LAST"===b.index?n:b.index,g);return Math.max(0,b,Math.min(n,b))}function rb(b,g){if(g.groupOffsetTree===Li)return b;for(var n=0;g.groupIndices[n]<=b+n;)n++;return b+n}function ub(b){b="number"==typeof b?{index:b}:b;return b.align||(b.align="start"),
b.behavior&&GG||(b.behavior="auto"),b.offset||(b.offset=0),b}function Zb(b){return!!b&&("smooth"===b?"smooth":"auto")}function zc(b){return b.reduce(function(g,n){return g.groupIndices.push(g.totalCount),g.totalCount+=n+1,g},{totalCount:0,groupIndices:[]})}function Bc(b,g){return!(!b||b[0]!==g[0]||b[1]!==g[1])}function Id(b,g){return!(!b||b.startIndex!==g.startIndex||b.endIndex!==g.endIndex)}function Md(b,g,n){return"number"==typeof b?"up"===n&&"top"===g||"down"===n&&"bottom"===g?b:0:"up"===n?"top"===
g?b.main:b.reverse:"bottom"===g?b.main:b.reverse}function sd(b,g,n){if(0===b.length)return[];if(g.groupOffsetTree===Li)return b.map(function(Va){return Fg({},Va,{index:Va.index+n,originalIndex:Va.index})});var I,W=[],ia=zm(g.groupOffsetTree,b[0].index,b[b.length-1].index),sa=void 0,Ka=0;for(b=dk(b);!(I=b()).done;)I=I.value,(!sa||sa.end<I.index)&&(sa=ia.shift(),Ka=g.groupIndices.indexOf(sa.start)),W.push(Fg({},I.index===sa.start?{type:"group",index:Ka}:{index:I.index-(Ka+1)+n,groupIndex:Ka},{size:I.size,
offset:I.offset,originalIndex:I.index,data:I.data}));return W}function Be(b,g,n,I,W,ia){var sa=0,Ka=0;0<b.length&&(sa=b[0].offset,Ka=b[b.length-1],Ka=Ka.offset+Ka.size);var Va=n-W.lastIndex,Za=sa;I=W.lastOffset+Va*W.lastSize+(Va-1)*I-Ka;return{items:sd(b,W,ia),topItems:sd(g,W,ia),topListHeight:g.reduce(function(lb,vb){return vb.size+lb},0),offsetTop:sa,offsetBottom:I,top:Za,bottom:Ka,totalCount:n,firstItemIndex:ia}}function Ef(b){var g,n=!1;return function(){return n||(n=!0,g=b()),g}}function Cg(b,
g){var n=(0,ci.useRef)(null),I=(0,ci.useCallback)(function(Va){if(null!==Va&&Va.offsetParent){var Za=Va.getBoundingClientRect();Va=Za.width;if(g){var lb=g.getBoundingClientRect();Za=Za.top-lb.top;lb=lb.height-Math.max(0,Za);Za+=g.scrollTop}else lb=window.innerHeight-Math.max(0,Za.top),Za=Za.top+window.pageYOffset;n.current={offsetTop:Za,visibleHeight:lb,visibleWidth:Va};b(n.current)}},[b,g]),W=Kf(I),ia=W.callbackRef,sa=W.ref,Ka=(0,ci.useCallback)(function(){I(sa.current)},[I,sa]);return(0,ci.useEffect)(function(){if(g){g.addEventListener("scroll",
Ka);var Va=new ResizeObserver(Ka);return Va.observe(g),function(){g.removeEventListener("scroll",Ka);Va.unobserve(g)}}return window.addEventListener("scroll",Ka),window.addEventListener("resize",Ka),function(){window.removeEventListener("scroll",Ka);window.removeEventListener("resize",Ka)}},[Ka,g]),ia}function lj(b){return b}function ag(b,g){var n=$f();return Cf(n,function(){return console.warn("react-virtuoso: You are using a deprecated property. "+g,"color: red;","color: inherit;","color: blue;")}),
jg(n,b),n}function og(b,g){if("string"!=typeof b)return{context:g}}function Sh(b){var g=b.usePublisher,n=b.useEmitter,I=b.useEmitterValue;return ch.memo(function(W){var ia=W.style,sa=W.children;W=Pf(W,UG);var Ka=g("scrollContainerState"),Va=I("ScrollerComponent"),Za=g("smoothScrollTargetReached"),lb=I("scrollerRef"),vb=I("context");Ka=dn(Ka,Za,Va,lb);Za=Ka.scrollerRef;lb=Ka.scrollByCallback;return n("scrollTo",Ka.scrollToCallback),n("scrollBy",lb),(0,ci.createElement)(Va,Fg({ref:Za,style:Fg({},aH,
ia),"data-test-id":"virtuoso-scroller","data-virtuoso-scroller":!0,tabIndex:0},W,og(Va,vb)),sa)})}function ji(b){var g=b.usePublisher,n=b.useEmitter,I=b.useEmitterValue;return ch.memo(function(W){var ia=W.style,sa=W.children;W=Pf(W,VG);var Ka=g("windowScrollContainerState"),Va=I("ScrollerComponent"),Za=g("smoothScrollTargetReached"),lb=I("totalListHeight"),vb=I("deviation"),Qb=I("customScrollParent"),cc=I("context");Za=dn(Ka,Za,Va,Zk,Qb);var Ub=Za.scrollerRef;Ka=Za.scrollByCallback;Za=Za.scrollToCallback;
return DG(function(){return Ub.current=Qb||window,function(){Ub.current=null}},[Ub,Qb]),n("windowScrollTo",Za),n("scrollBy",Ka),(0,ci.createElement)(Va,Fg({style:Fg({position:"relative"},ia,0!==lb?{height:lb+vb}:{}),"data-virtuoso-scroller":!0},W,og(Va,cc)),sa)})}function Jh(b,g,n){return Array.from({length:g-b+1}).map(function(I,W){return{index:W+b,data:null==n?void 0:n[W+b]}})}function cg(b,g){return b&&b.column===g.column&&b.row===g.row}function Of(b,g,n,I){var W=n.height;return void 0===W||0===
I.length?{top:0,bottom:0}:{top:xh(b,g,n,I[0].index),bottom:xh(b,g,n,I[I.length-1].index)+W}}function xh(b,g,n,I){var W=g.column;b=Hr(1,pu((b.width+W)/(n.width+W)));I=pu(I/b);n=I*n.height+Hr(0,I-1)*g.row;return 0<n?n+g.row:n}function gh(b,g,n){return"normal"===g||null!=g&&g.endsWith("px")||n(b+" was not resolved to pixel value correctly",g,im.WARN),"normal"===g?0:parseInt(null!=g?g:"0",10)}function gi(b,g){void 0!==g.strokeWidth&&(g.strokeWidth=Math.max(g.strokeWidth,1));void 0!==g.opacity&&(g.opacity=
Math.min(1,Math.max(g.opacity,0)));return g}function qi({strokeWidth:b,size:g,mode:n}){return"svg"===n?(0,pb.jsx)("rect",{className:"tl-binding-indicator",x:b,y:b,rx:2,ry:2,width:Math.max(0,g[0]-2*b),height:Math.max(0,g[1]-2*b),strokeWidth:4*b}):(0,pb.jsx)("div",{className:"tl-binding-indicator",style:{position:"absolute",left:0,top:0,right:0,bottom:0,boxShadow:"0 0 0 4px var(--tl-binding)",borderRadius:4}})}function Kj(){const b=pg();return"panning"===b.inputs.state||"pinching"===b.inputs.state}
function Bl({left:b,middle:g,right:n,stroke:I,strokeWidth:W}){return(0,pb.jsxs)("g",{children:[(0,pb.jsx)("path",{className:"tl-stroke-hitarea",d:`M ${b} L ${g} ${n}`}),(0,pb.jsx)("path",{d:`M ${b} L ${g} ${n}`,fill:"none",stroke:I,strokeWidth:W,strokeLinecap:"round",strokeLinejoin:"round",pointerEvents:"none"})]})}function Bk(b,g,n){g=G(b,g,b,n).points;if(!g)return console.warn("Could not find an intersection for the arrow head."),{left:b,right:b};g=(n=g[0])?Ud.rotWith(n,b,Math.PI/6):b;b=n?Ud.rotWith(n,
b,-Math.PI/6):b;return{left:g,right:b}}function tm(b,g,n){const {left:I,right:W}=Bk(b,g,n);return`M ${I} L ${b} ${W}`}function ep(b,g,n,I,W){b=b.strokeWidth;var ia=Ud.dist(g,n);b=Math.min(ia/3,16*b);ia=[];ia.push(`M ${g} L ${n}`);I&&ia.push(tm(g,n,b));W&&ia.push(tm(n,g,b));return ia.join(" ")}function sn({id:b,bounds:g,labelSize:n,offset:I,scale:W=1}){return(0,pb.jsx)("defs",{children:(0,pb.jsxs)("mask",{id:b+"_clip",children:[(0,pb.jsx)("rect",{x:-100,y:-100,width:g.width+200,height:g.height+200,
fill:"white"}),(0,pb.jsx)("rect",{x:g.width/2-n[0]/2*W+((null==I?void 0:I[0])||0),y:g.height/2-n[1]/2*W+((null==I?void 0:I[1])||0),width:n[0]*W,height:n[1]*W,rx:4*W,ry:4*W,fill:"black"})]})})}function Zg(b,g,n,I=W=>W){return b*I(.5-g*(.5-n))}function un(b){return[-b[0],-b[1]]}function fj(b,g){return[b[0]+g[0],b[1]+g[1]]}function $k(b,g){return[b[0]-g[0],b[1]-g[1]]}function Ok(b,g){return[b[0]*g,b[1]*g]}function Zm(b){return[b[1],-b[0]]}function go(b,g){return b[0]===g[0]&&b[1]===g[1]}function Yl(b){return b[0]*
b[0]+b[1]*b[1]}function Mm(b){var g=Math.hypot(b[0],b[1]);return[b[0]/g,b[1]/g]}function al(b,g){return Math.hypot(b[1]-g[1],b[0]-g[0])}function ok(b,g,n){let I=Math.sin(n);n=Math.cos(n);let W=b[0]-g[0];b=b[1]-g[1];return[W*n-b*I+g[0],W*I+b*n+g[1]]}function Am(b,g,n){return fj(b,Ok($k(g,b),n))}function qn(b,g,n){return fj(b,Ok(g,n))}function cn(b,g={}){let {size:n=16,smoothing:I=.5,thinning:W=.5,simulatePressure:ia=!0,easing:sa=ld=>ld,start:Ka={},end:Va={},last:Za=!1}=g,{cap:lb=!0,easing:vb=ld=>ld*
(2-ld)}=Ka,{cap:Qb=!0,easing:cc=ld=>--ld*ld*ld+1}=Va;if(0===b.length||0>=n)return[];var Ub=b[b.length-1].runningLength;let rc=!1===Ka.taper?0:!0===Ka.taper?Math.max(n,Ub):Ka.taper,lc=!1===Va.taper?0:!0===Va.taper?Math.max(n,Ub):Va.taper;var Vb=Math.pow(n*I,2);g=[];let sc=[];var Gc=b.slice(0,10).reduce((ld,nd)=>{var Ed=nd.pressure;ia&&(nd=Lr(1,nd.distance/n),Ed=Lr(1,1-nd),Ed=Lr(1,ld+.275*(Ed-ld)*nd));return(ld+Ed)/2},b[0].pressure),Qc=Zg(n,W,b[b.length-1].pressure,sa),Vc;let Vd=b[0].vector;var $d=
b[0].point;let Ee=$d;var Ne=$d;let uf=Ee;var rf=!1;for(var ff=0;ff<b.length;ff++){var {pressure:Ge}=b[ff];let {point:ld,vector:nd,distance:Ed,runningLength:xe}=b[ff];if(ff<b.length-1&&3>Ub-xe)continue;W?(ia&&(Qc=Lr(1,Ed/n),Ge=Lr(1,1-Qc),Ge=Lr(1,Gc+.275*(Ge-Gc)*Qc)),Qc=Zg(n,W,Ge,sa)):Qc=n/2;void 0===Vc&&(Vc=Qc);var Ad=xe<rc?vb(xe/rc):1,fd=Ub-xe<lc?cc((Ub-xe)/lc):1;Qc=Math.max(.01,Qc*Math.min(Ad,fd));fd=(ff<b.length-1?b[ff+1]:b[ff]).vector;let Fe=ff<b.length-1?nd[0]*fd[0]+nd[1]*fd[1]:1;Ad=null!==Fe&&
0>Fe;if(0>nd[0]*Vd[0]+nd[1]*Vd[1]&&!rf||Ad){$d=Ok(Zm(Vd),Qc);for(let sf=1/13,mf=0;1>=mf;mf+=sf)Ne=ok($k(ld,$d),ld,Ys*mf),g.push(Ne),uf=ok(fj(ld,$d),ld,Ys*-mf),sc.push(uf);$d=Ne;Ee=uf;Ad&&(rf=!0)}else(rf=!1,ff===b.length-1)?(Ge=Ok(Zm(nd),Qc),g.push($k(ld,Ge)),sc.push(fj(ld,Ge))):(Gc=Ok(Zm(Am(fd,nd,Fe)),Qc),Ne=$k(ld,Gc),(1>=ff||Yl($k($d,Ne))>Vb)&&(g.push(Ne),$d=Ne),uf=fj(ld,Gc),(1>=ff||Yl($k(Ee,uf))>Vb)&&(sc.push(uf),Ee=uf),Gc=Ge,Vd=nd)}Ub=b[0].point.slice(0,2);Vb=1<b.length?b[b.length-1].point.slice(0,
2):fj(b[0].point,[1,1]);Ne=[];rf=[];if(1===b.length){if(!rc&&!lc||Za){b=qn(Ub,Mm(Zm($k(Ub,Vb))),-(Vc||Qc));g=[];for(let ld=1/13,nd=ld;1>=nd;nd+=ld)g.push(ok(b,Ub,2*Ys*nd));return g}}else{if(!(rc||lc&&1===b.length))if(lb)for(let ld=1/13,nd=ld;1>=nd;nd+=ld)Vc=ok(sc[0],Ub,Ys*nd),Ne.push(Vc);else ff=$k(g[0],sc[0]),Vc=Ok(ff,.5),ff=Ok(ff,.51),Ne.push($k(Ub,Vc),$k(Ub,ff),fj(Ub,ff),fj(Ub,Vc));Vc=Zm(un(b[b.length-1].vector));if(lc||rc&&1===b.length)rf.push(Vb);else if(Qb){b=qn(Vb,Vc,Qc);for(let ld=1/29,nd=
ld;1>nd;nd+=ld)rf.push(ok(b,Vb,3*Ys*nd))}else rf.push(fj(Vb,Ok(Vc,Qc)),fj(Vb,Ok(Vc,.99*Qc)),$k(Vb,Ok(Vc,.99*Qc)),$k(Vb,Ok(Vc,Qc)))}return g.concat(rf,sc.reverse(),Ne)}function bp(b,g={}){var n;let {streamline:I=.5,size:W=16,last:ia=!1}=g;if(0===b.length)return[];g=.15+.85*(1-I);b=Array.isArray(b[0])?b:b.map(({x:vb,y:Qb,pressure:cc=.5})=>[vb,Qb,cc]);if(2===b.length){var sa=b[1];b=b.slice(0,-1);for(var Ka=1;5>Ka;Ka++)b.push(Am(b[0],sa,Ka/4))}1===b.length&&(b=[...b,[...fj(b[0],[1,1]),...b[0].slice(2)]]);
sa=[{point:[b[0][0],b[0][1]],pressure:0<=b[0][2]?b[0][2]:.25,vector:[1,1],distance:0,runningLength:0}];Ka=!1;let Va=0,Za=sa[0],lb=b.length-1;for(let vb=1;vb<b.length;vb++){let Qb=ia&&vb===lb?b[vb].slice(0,2):Am(Za.point,b[vb],g);if(go(Za.point,Qb))continue;let cc=al(Qb,Za.point);if(Va+=cc,vb<lb&&!Ka){if(Va<W)continue;Ka=!0}Za={point:Qb,pressure:0<=b[vb][2]?b[vb][2]:.5,vector:Mm($k(Za.point,Qb)),distance:cc,runningLength:Va};sa.push(Za)}return sa[0].vector=(null==(n=sa[1])?void 0:n.vector)||[0,0],
sa}function io(b,g=4/3){return(new xw(b)).exportAsSVG(g)}function Jo(b,g=4/3){return(new xw(b)).generatePreviewJsx(void 0,g)}function ql({id:b,type:g,onRemove:n,showContent:I}){const W=pg(),{handlers:ia}=zG.default.useContext(ln);return(0,pb.jsxs)("div",{className:"tl-shape-links-panel-item color-level relative",children:[(0,pb.jsx)("div",{className:"whitespace-pre break-all overflow-hidden text-ellipsis inline-flex",children:(0,pb.jsx)(lA,{id:b,showReferenceContent:I})}),(0,pb.jsx)("div",{className:"flex-1"}),
ia.getBlockPageName(b)!==W.currentPage.name&&(0,pb.jsx)(dc,{tooltip:"Open Page",type:"button",onClick:()=>null==ia?void 0:ia.redirectToPage(b),children:(0,pb.jsx)(Fh,{name:"open-as-page"})}),(0,pb.jsx)(dc,{tooltip:"Open Page in Right Sidebar",type:"button",onClick:()=>null==ia?void 0:ia.sidebarAddBlock(b,"B"===g?"block":"page"),children:(0,pb.jsx)(Fh,{name:"move-to-sidebar-right"})}),n&&(0,pb.jsx)(dc,{className:"tl-shape-links-panel-item-remove-button",tooltip:"Remove link",type:"button",onClick:n,
children:(0,pb.jsx)(Fh,{name:"x",className:"!translate-y-0"})})]})}function Qo({options:b,value:g,onValueChange:n}){return(0,pb.jsx)(YA,{className:"tl-toggle-group-input",type:"single",value:g,onValueChange:n,children:b.map(I=>(0,pb.jsx)(Pb,{content:I.tooltip,children:(0,pb.jsx)("div",{className:"inline-block",children:(0,pb.jsx)(ZA,{className:"tl-toggle-group-input-button",value:I.value,disabled:I.value===g,children:(0,pb.jsx)(Fh,{name:I.icon})})})},I.value))})}function Ro({options:b,value:g,onValueChange:n}){return(0,pb.jsx)(YA,
{className:"tl-toggle-group-input",type:"multiple",value:g,onValueChange:n,children:b.map(I=>(0,pb.jsx)(ZA,{className:"tl-toggle-group-input-button",value:I.value,children:(0,pb.jsx)(Fh,{name:I.icon})},I.value))})}function mm(b){var {toggle:g=!0,pressed:n,onPressedChange:I,className:W,tooltip:ia}=b;b=Ia(b,["toggle","pressed","onPressedChange","className","tooltip"]);return(0,pb.jsx)(Pb,{content:ia,children:(0,pb.jsx)("div",{className:"inline-block",children:(0,pb.jsx)(YH,xf(te({},b),{"data-toggle":g,
className:"tl-toggle-input"+(W?" "+W:""),pressed:n,onPressedChange:I}))})})}function bl(b,g){return b.filter(n=>{var I;return null==(I=yw[n.props.type])?void 0:I.includes(g)})}function Bm(b){return g=>"mouse"!==g.pointerType?b(g):void 0}function ho(b){b=b.match(/\.[0-9a-z]+$/i);if(!b)return"unknown";b=b[0].toLowerCase();return CI.includes(b)?"image":DI.includes(b)?"video":"unknown"}function Gn(...b){return(...g)=>Pc(this,null,function*(){for(const n of b){const I=yield n(...g);if(I&&0<I.length)return I}return null})}
function Tn(b,g){return Pc(this,null,function*(){return b.types.includes(g)?b instanceof DataTransfer?b.getData(g):yield(yield b.getType(g)).text():null})}function oo(){const {handlers:b}=eB.useContext(ln);return eB.useCallback((g,n)=>Pc(this,null,function*(){if(n.shiftKey&&1===g.selectedShapesArray.length){var I=yield navigator.clipboard.read();let W;0<I.length&&(I=(yield(yield I[0].getType("text/plain")).text()).trim())&&(/^\(\(.*\)\)$/.test(I)&&40===I.length?(I=I.slice(2,-2),Th(I)&&(W=I)):/^\[\[.*\]\]$/.test(I)&&
(W=I.slice(2,-2)));if(W){g.selectedShapesArray[0].update({refs:[W]});g.persist();return}}EI(g,n,b)}),[])}function cm(){const b=oo();return BI.useCallback((g,n)=>Pc(this,[g,n],function*(I,{dataTransfer:W,point:ia}){b(I,{point:ia,shiftKey:!1,dataTransfer:W,fromDrop:!0})}),[])}function Nm(){return FI.default.useCallback(b=>Pc(this,null,function*(){setTimeout(()=>{b.selectTool("logseq-portal").selectedTool.transition("creating")},100)}),[])}var jo=Object.create,$m=Object.defineProperty,ro=Object.defineProperties,
el=Object.getOwnPropertyDescriptor,Oo=Object.getOwnPropertyDescriptors,Un=Object.getOwnPropertyNames,an=Object.getOwnPropertySymbols,pn=Object.getPrototypeOf,on=Object.prototype.hasOwnProperty,Cm=Object.prototype.propertyIsEnumerable,Ko=(b,g,n)=>g in b?$m(b,g,{enumerable:!0,configurable:!0,writable:!0,value:n}):b[g]=n,te=(b,g)=>{for(var n in g||={})on.call(g,n)&&Ko(b,n,g[n]);if(an)for(n of an(g))Cm.call(g,n)&&Ko(b,n,g[n]);return b},xf=(b,g)=>ro(b,Oo(g)),Ia=(b,g)=>{var n={},I;for(I in b)on.call(b,
I)&&0>g.indexOf(I)&&(n[I]=b[I]);if(null!=b&&an)for(I of an(b))0>g.indexOf(I)&&Cm.call(b,I)&&(n[I]=b[I]);return n},$a=(b,g)=>function(){return g||(0,b[Un(b)[0]])((g={exports:{}}).exports,g),g.exports},La=(b,g,n,I)=>{if(g&&"object"===typeof g||"function"===typeof g)for(let W of Un(g))on.call(b,W)||W===n||$m(b,W,{get:()=>g[W],enumerable:!(I=el(g,W))||I.enumerable});return b},cb=(b,g,n)=>(n=null!=b?jo(pn(b)):{},La(!g&&b&&b.__esModule?n:$m(n,"default",{value:b,enumerable:!0}),b)),mb=(b,g,n,I)=>{for(var W=
1<I?void 0:I?el(g,n):g,ia=b.length-1,sa;0<=ia;ia--)if(sa=b[ia])W=(I?sa(g,n,W):sa(W))||W;I&&W&&$m(g,n,W);return W},Ma=(b,g,n)=>{Ko(b,"symbol"!==typeof g?g+"":g,n);return n},Pc=(b,g,n)=>new Promise((I,W)=>{var ia=Va=>{try{Ka(n.next(Va))}catch(Za){W(Za)}},sa=Va=>{try{Ka(n.throw(Va))}catch(Za){W(Za)}},Ka=Va=>Va.done?I(Va.value):Promise.resolve(Va.value).then(ia,sa);Ka((n=n.apply(b,g)).next())}),Nd=$a({["../../node_modules/mousetrap/mousetrap.js"](b,g){(function(n,I,W){function ia(lc,Vb,sc){lc.addEventListener?
lc.addEventListener(Vb,sc,!1):lc.attachEvent("on"+Vb,sc)}function sa(lc){if("keypress"==lc.type){var Vb=String.fromCharCode(lc.which);lc.shiftKey||(Vb=Vb.toLowerCase());return Vb}return vb[lc.which]?vb[lc.which]:Qb[lc.which]?Qb[lc.which]:String.fromCharCode(lc.which).toLowerCase()}function Ka(lc){return"shift"==lc||"ctrl"==lc||"alt"==lc||"meta"==lc}function Va(lc,Vb){var sc,Gc=[];"+"===lc?lc=["+"]:(lc=lc.replace(/\+{2}/g,"+plus"),lc=lc.split("+"));for(sc=0;sc<lc.length;++sc){var Qc=lc[sc];Ub[Qc]&&
(Qc=Ub[Qc]);Vb&&"keypress"!=Vb&&cc[Qc]&&(Qc=cc[Qc],Gc.push("shift"));Ka(Qc)&&Gc.push(Qc)}lc=Qc;if(!Vb){if(!rc){rc={};for(var Vc in vb)95<Vc&&112>Vc||vb.hasOwnProperty(Vc)&&(rc[vb[Vc]]=Vc)}Vb=rc[lc]?"keydown":"keypress"}"keypress"==Vb&&Gc.length&&(Vb="keydown");return{key:Qc,modifiers:Gc,action:Vb}}function Za(lc,Vb){return null===lc||lc===I?!1:lc===Vb?!0:Za(lc.parentNode,Vb)}function lb(lc){function Vb(Ge){Ge=Ge||{};var Ad=!1,fd;for(fd in Ee)Ge[fd]?Ad=!0:Ee[fd]=0;Ad||(ff=!1)}function sc(Ge,Ad,fd,
ld,nd,Ed){var xe,Fe=[],sf=fd.type;if(!$d._callbacks[Ge])return[];"keyup"==sf&&Ka(Ge)&&(Ad=[Ge]);for(xe=0;xe<$d._callbacks[Ge].length;++xe){var mf=$d._callbacks[Ge][xe];if((ld||!mf.seq||Ee[mf.seq]==mf.level)&&sf==mf.action){var lf;(lf="keypress"==sf&&!fd.metaKey&&!fd.ctrlKey)||(lf=mf.modifiers,lf=Ad.sort().join(",")===lf.sort().join(","));lf&&(lf=ld&&mf.seq==ld&&mf.level==Ed,(!ld&&mf.combo==nd||lf)&&$d._callbacks[Ge].splice(xe,1),Fe.push(mf))}}return Fe}function Gc(Ge,Ad,fd,ld){$d.stopCallback(Ad,
Ad.target||Ad.srcElement,fd,ld)||!1!==Ge(Ad,fd)||(Ad.preventDefault?Ad.preventDefault():Ad.returnValue=!1,Ad.stopPropagation?Ad.stopPropagation():Ad.cancelBubble=!0)}function Qc(Ge){"number"!==typeof Ge.which&&(Ge.which=Ge.keyCode);var Ad=sa(Ge);if(Ad)if("keyup"==Ge.type&&uf===Ad)uf=!1;else{var fd=$d,ld=fd.handleKey,nd=[];Ge.shiftKey&&nd.push("shift");Ge.altKey&&nd.push("alt");Ge.ctrlKey&&nd.push("ctrl");Ge.metaKey&&nd.push("meta");ld.call(fd,Ad,nd,Ge)}}function Vc(Ge,Ad,fd,ld){function nd(sf){return function(){ff=
sf;++Ee[Ge];clearTimeout(Ne);Ne=setTimeout(Vb,1E3)}}function Ed(sf){Gc(fd,sf,Ge);"keyup"!==ld&&(uf=sa(sf));setTimeout(Vb,10)}for(var xe=Ee[Ge]=0;xe<Ad.length;++xe){var Fe=xe+1===Ad.length?Ed:nd(ld||Va(Ad[xe+1]).action);Vd(Ad[xe],Fe,ld,Ge,xe)}}function Vd(Ge,Ad,fd,ld,nd){$d._directMap[Ge+":"+fd]=Ad;Ge=Ge.replace(/\s+/g," ");var Ed=Ge.split(" ");1<Ed.length?Vc(Ge,Ed,Ad,fd):(fd=Va(Ge,fd),$d._callbacks[fd.key]=$d._callbacks[fd.key]||[],sc(fd.key,fd.modifiers,{type:fd.action},ld,Ge,nd),$d._callbacks[fd.key][ld?
"unshift":"push"]({callback:Ad,modifiers:fd.modifiers,action:fd.action,seq:ld,level:nd,combo:Ge}))}var $d=this;lc=lc||I;if(!($d instanceof lb))return new lb(lc);$d.target=lc;$d._callbacks={};$d._directMap={};var Ee={},Ne,uf=!1,rf=!1,ff=!1;$d._handleKey=function(Ge,Ad,fd){var ld=sc(Ge,Ad,fd),nd;Ad={};var Ed=0,xe=!1;for(nd=0;nd<ld.length;++nd)ld[nd].seq&&(Ed=Math.max(Ed,ld[nd].level));for(nd=0;nd<ld.length;++nd)ld[nd].seq?ld[nd].level==Ed&&(xe=!0,Ad[ld[nd].seq]=1,Gc(ld[nd].callback,fd,ld[nd].combo,
ld[nd].seq)):xe||Gc(ld[nd].callback,fd,ld[nd].combo);ld="keypress"==fd.type&&rf;fd.type!=ff||Ka(Ge)||ld||Vb(Ad);rf=xe&&"keydown"==fd.type};$d._bindMultiple=function(Ge,Ad,fd){for(var ld=0;ld<Ge.length;++ld)Vd(Ge[ld],Ad,fd)};ia(lc,"keypress",Qc);ia(lc,"keydown",Qc);ia(lc,"keyup",Qc)}if(n){var vb={8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"ins",46:"del",91:"meta",
93:"meta",224:"meta"},Qb={106:"*",107:"+",109:"-",110:".",111:"/",186:";",187:"\x3d",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},cc={"~":"`","!":"1","@":"2","#":"3",$:"4","%":"5","^":"6","\x26":"7","*":"8","(":"9",")":"0",_:"-","+":"\x3d",":":";",'"':"'","\x3c":",","\x3e":".","?":"/","|":"\\"},Ub={option:"alt",command:"meta","return":"enter",escape:"esc",plus:"+",mod:/Mac|iPod|iPhone|iPad/.test(navigator.platform)?"meta":"ctrl"},rc;for(W=1;20>W;++W)vb[111+W]="f"+W;for(W=
0;9>=W;++W)vb[W+96]=W.toString();lb.prototype.bind=function(lc,Vb,sc){lc=lc instanceof Array?lc:[lc];this._bindMultiple.call(this,lc,Vb,sc);return this};lb.prototype.unbind=function(lc,Vb){return this.bind.call(this,lc,function(){},Vb)};lb.prototype.trigger=function(lc,Vb){if(this._directMap[lc+":"+Vb])this._directMap[lc+":"+Vb]({},lc);return this};lb.prototype.reset=function(){this._callbacks={};this._directMap={};return this};lb.prototype.stopCallback=function(lc,Vb){if(-1<(" "+Vb.className+" ").indexOf(" mousetrap ")||
Za(Vb,this.target))return!1;if("composedPath"in lc&&"function"===typeof lc.composedPath){var sc=lc.composedPath()[0];sc!==lc.target&&(Vb=sc)}return"INPUT"==Vb.tagName||"SELECT"==Vb.tagName||"TEXTAREA"==Vb.tagName||Vb.isContentEditable};lb.prototype.handleKey=function(){return this._handleKey.apply(this,arguments)};lb.addKeycodes=function(lc){for(var Vb in lc)lc.hasOwnProperty(Vb)&&(vb[Vb]=lc[Vb]);rc=null};lb.init=function(){var lc=lb(I),Vb;for(Vb in lc)"_"!==Vb.charAt(0)&&(lb[Vb]=function(sc){return function(){return lc[sc].apply(lc,
arguments)}}(Vb))};lb.init();n.Mousetrap=lb;"undefined"!==typeof g&&g.exports&&(g.exports=lb);"function"===typeof define&&define.amd&&define(function(){return lb})}})("undefined"!==typeof window?window:null,"undefined"!==typeof window?document:null)}}),fe=$a({["../../node_modules/rbush/rbush.min.js"](b,g){!function(n,I){"object"==typeof b&&"undefined"!=typeof g?g.exports=I():"function"==typeof define&&define.amd?define(I):(n=n||self).RBush=I()}(b,function(){function n(Vb,sc,Gc,Qc,Vc){!function ff($d,
Ee,Ne,uf,rf){for(;uf>Ne;){if(600<uf-Ne){var Ge=uf-Ne+1,Ad=Ee-Ne+1,fd=Math.log(Ge),ld=.5*Math.exp(2*fd/3);fd=.5*Math.sqrt(fd*ld*(Ge-ld)/Ge)*(0>Ad-Ge/2?-1:1);ff($d,Ee,Math.max(Ne,Math.floor(Ee-Ad*ld/Ge+fd)),Math.min(uf,Math.floor(Ee+(Ge-Ad)*ld/Ge+fd)),rf)}Ge=$d[Ee];Ad=Ne;ld=uf;I($d,Ne,Ee);for(0<rf($d[uf],Ge)&&I($d,Ne,uf);Ad<ld;){I($d,Ad,ld);Ad++;for(ld--;0>rf($d[Ad],Ge);)Ad++;for(;0<rf($d[ld],Ge);)ld--}0===rf($d[Ne],Ge)?I($d,Ne,ld):I($d,++ld,uf);ld<=Ee&&(Ne=ld+1);Ee<=ld&&(uf=ld-1)}}(Vb,sc,Gc||0,Qc||
Vb.length-1,Vc||W)}function I(Vb,sc,Gc){var Qc=Vb[sc];Vb[sc]=Vb[Gc];Vb[Gc]=Qc}function W(Vb,sc){return Vb<sc?-1:Vb>sc?1:0}function ia(Vb,sc){sa(Vb,0,Vb.children.length,sc,Vb)}function sa(Vb,sc,Gc,Qc,Vc){Vc||=Ub(null);Vc.minX=1/0;Vc.minY=1/0;Vc.maxX=-1/0;for(Vc.maxY=-1/0;sc<Gc;sc++){var Vd=Vb.children[sc];Ka(Vc,Vb.leaf?Qc(Vd):Vd)}return Vc}function Ka(Vb,sc){return Vb.minX=Math.min(Vb.minX,sc.minX),Vb.minY=Math.min(Vb.minY,sc.minY),Vb.maxX=Math.max(Vb.maxX,sc.maxX),Vb.maxY=Math.max(Vb.maxY,sc.maxY),
Vb}function Va(Vb,sc){return Vb.minX-sc.minX}function Za(Vb,sc){return Vb.minY-sc.minY}function lb(Vb){return(Vb.maxX-Vb.minX)*(Vb.maxY-Vb.minY)}function vb(Vb){return Vb.maxX-Vb.minX+(Vb.maxY-Vb.minY)}function Qb(Vb,sc){return Vb.minX<=sc.minX&&Vb.minY<=sc.minY&&sc.maxX<=Vb.maxX&&sc.maxY<=Vb.maxY}function cc(Vb,sc){return sc.minX<=Vb.maxX&&sc.minY<=Vb.maxY&&sc.maxX>=Vb.minX&&sc.maxY>=Vb.minY}function Ub(Vb){return{children:Vb,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function rc(Vb,
sc,Gc,Qc,Vc){for(var Vd=[sc,Gc];Vd.length;)if(!((Gc=Vd.pop())-(sc=Vd.pop())<=Qc)){var $d=sc+Math.ceil((Gc-sc)/Qc/2)*Qc;n(Vb,$d,sc,Gc,Vc);Vd.push(sc,$d,$d,Gc)}}var lc=function(Vb){void 0===Vb&&(Vb=9);this._maxEntries=Math.max(4,Vb);this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries));this.clear()};return lc.prototype.all=function(){return this._all(this.data,[])},lc.prototype.search=function(Vb){var sc=this.data,Gc=[];if(!cc(Vb,sc))return Gc;for(var Qc=this.toBBox,Vc=[];sc;){for(var Vd=0;Vd<
sc.children.length;Vd++){var $d=sc.children[Vd],Ee=sc.leaf?Qc($d):$d;cc(Vb,Ee)&&(sc.leaf?Gc.push($d):Qb(Vb,Ee)?this._all($d,Gc):Vc.push($d))}sc=Vc.pop()}return Gc},lc.prototype.collides=function(Vb){var sc=this.data;if(!cc(Vb,sc))return!1;for(var Gc=[];sc;){for(var Qc=0;Qc<sc.children.length;Qc++){var Vc=sc.children[Qc],Vd=sc.leaf?this.toBBox(Vc):Vc;if(cc(Vb,Vd)){if(sc.leaf||Qb(Vb,Vd))return!0;Gc.push(Vc)}}sc=Gc.pop()}return!1},lc.prototype.load=function(Vb){if(!Vb||!Vb.length)return this;if(Vb.length<
this._minEntries){for(var sc=0;sc<Vb.length;sc++)this.insert(Vb[sc]);return this}Vb=this._build(Vb.slice(),0,Vb.length-1,0);this.data.children.length?this.data.height===Vb.height?this._splitRoot(this.data,Vb):(this.data.height<Vb.height&&(sc=this.data,this.data=Vb,Vb=sc),this._insert(Vb,this.data.height-Vb.height-1,!0)):this.data=Vb;return this},lc.prototype.insert=function(Vb){return Vb&&this._insert(Vb,this.data.height-1),this},lc.prototype.clear=function(){return this.data=Ub([]),this},lc.prototype.remove=
function(Vb,sc){if(!Vb)return this;for(var Gc,Qc,Vc,Vd=this.data,$d=this.toBBox(Vb),Ee=[],Ne=[];Vd||Ee.length;){if(Vd||(Vd=Ee.pop(),Qc=Ee[Ee.length-1],Gc=Ne.pop(),Vc=!0),Vd.leaf){a:{var uf=Vb;var rf=Vd.children,ff=sc;if(ff){for(var Ge=0;Ge<rf.length;Ge++)if(ff(uf,rf[Ge])){uf=Ge;break a}uf=-1}else uf=rf.indexOf(uf)}if(-1!==uf)return Vd.children.splice(uf,1),Ee.push(Vd),this._condense(Ee),this}Vc||Vd.leaf||!Qb(Vd,$d)?Qc?(Gc++,Vd=Qc.children[Gc],Vc=!1):Vd=null:(Ee.push(Vd),Ne.push(Gc),Gc=0,Qc=Vd,Vd=
Vd.children[0])}return this},lc.prototype.toBBox=function(Vb){return Vb},lc.prototype.compareMinX=function(Vb,sc){return Vb.minX-sc.minX},lc.prototype.compareMinY=function(Vb,sc){return Vb.minY-sc.minY},lc.prototype.toJSON=function(){return this.data},lc.prototype.fromJSON=function(Vb){return this.data=Vb,this},lc.prototype._all=function(Vb,sc){for(var Gc=[];Vb;)Vb.leaf?sc.push.apply(sc,Vb.children):Gc.push.apply(Gc,Vb.children),Vb=Gc.pop();return sc},lc.prototype._build=function(Vb,sc,Gc,Qc){var Vc,
Vd=Gc-sc+1,$d=this._maxEntries;if(Vd<=$d)return ia(Vc=Ub(Vb.slice(sc,Gc+1)),this.toBBox),Vc;Qc||(Qc=Math.ceil(Math.log(Vd)/Math.log($d)),$d=Math.ceil(Vd/Math.pow($d,Qc-1)));(Vc=Ub([])).leaf=!1;Vc.height=Qc;Vd=Math.ceil(Vd/$d);$d=Vd*Math.ceil(Math.sqrt($d));for(rc(Vb,sc,Gc,$d,this.compareMinX);sc<=Gc;sc+=$d){var Ee=Math.min(sc+$d-1,Gc);rc(Vb,sc,Ee,Vd,this.compareMinY);for(var Ne=sc;Ne<=Ee;Ne+=Vd)Vc.children.push(this._build(Vb,Ne,Math.min(Ne+Vd-1,Ee),Qc-1))}return ia(Vc,this.toBBox),Vc},lc.prototype._chooseSubtree=
function(Vb,sc,Gc,Qc){for(;Qc.push(sc),!sc.leaf&&Qc.length-1!==Gc;){for(var Vc=1/0,Vd=1/0,$d=void 0,Ee=0;Ee<sc.children.length;Ee++){var Ne=sc.children[Ee],uf=lb(Ne),rf=(ff=Vb,Ge=Ne,(Math.max(Ge.maxX,ff.maxX)-Math.min(Ge.minX,ff.minX))*(Math.max(Ge.maxY,ff.maxY)-Math.min(Ge.minY,ff.minY))-uf);rf<Vd?(Vd=rf,Vc=uf<Vc?uf:Vc,$d=Ne):rf===Vd&&uf<Vc&&(Vc=uf,$d=Ne)}sc=$d||sc.children[0]}var ff,Ge;return sc},lc.prototype._insert=function(Vb,sc,Gc){Gc=Gc?Vb:this.toBBox(Vb);var Qc=[],Vc=this._chooseSubtree(Gc,
this.data,sc,Qc);Vc.children.push(Vb);for(Ka(Vc,Gc);0<=sc&&Qc[sc].children.length>this._maxEntries;)this._split(Qc,sc),sc--;this._adjustParentBBoxes(Gc,Qc,sc)},lc.prototype._split=function(Vb,sc){var Gc=Vb[sc],Qc=Gc.children.length,Vc=this._minEntries;this._chooseSplitAxis(Gc,Vc,Qc);Qc=this._chooseSplitIndex(Gc,Vc,Qc);Qc=Ub(Gc.children.splice(Qc,Gc.children.length-Qc));Qc.height=Gc.height;Qc.leaf=Gc.leaf;ia(Gc,this.toBBox);ia(Qc,this.toBBox);sc?Vb[sc-1].children.push(Qc):this._splitRoot(Gc,Qc)},lc.prototype._splitRoot=
function(Vb,sc){this.data=Ub([Vb,sc]);this.data.height=Vb.height+1;this.data.leaf=!1;ia(this.data,this.toBBox)},lc.prototype._chooseSplitIndex=function(Vb,sc,Gc){for(var Qc,Vc,Vd,$d,Ee,Ne,uf,rf=1/0,ff=1/0,Ge=sc;Ge<=Gc-sc;Ge++){var Ad=sa(Vb,0,Ge,this.toBBox),fd=sa(Vb,Ge,Gc,this.toBBox),ld=(Vc=Ad,Vd=fd,$d=void 0,Ee=void 0,Ne=void 0,uf=void 0,$d=Math.max(Vc.minX,Vd.minX),Ee=Math.max(Vc.minY,Vd.minY),Ne=Math.min(Vc.maxX,Vd.maxX),uf=Math.min(Vc.maxY,Vd.maxY),Math.max(0,Ne-$d)*Math.max(0,uf-Ee));Ad=lb(Ad)+
lb(fd);ld<rf?(rf=ld,Qc=Ge,ff=Ad<ff?Ad:ff):ld===rf&&Ad<ff&&(ff=Ad,Qc=Ge)}return Qc||Gc-sc},lc.prototype._chooseSplitAxis=function(Vb,sc,Gc){var Qc=Vb.leaf?this.compareMinX:Va,Vc=Vb.leaf?this.compareMinY:Za;this._allDistMargin(Vb,sc,Gc,Qc)<this._allDistMargin(Vb,sc,Gc,Vc)&&Vb.children.sort(Qc)},lc.prototype._allDistMargin=function(Vb,sc,Gc,Qc){Vb.children.sort(Qc);Qc=this.toBBox;for(var Vc=sa(Vb,0,sc,Qc),Vd=sa(Vb,Gc-sc,Gc,Qc),$d=vb(Vc)+vb(Vd),Ee=sc;Ee<Gc-sc;Ee++){var Ne=Vb.children[Ee];Ka(Vc,Vb.leaf?
Qc(Ne):Ne);$d+=vb(Vc)}for(Gc=Gc-sc-1;Gc>=sc;Gc--)Vc=Vb.children[Gc],Ka(Vd,Vb.leaf?Qc(Vc):Vc),$d+=vb(Vd);return $d},lc.prototype._adjustParentBBoxes=function(Vb,sc,Gc){for(;0<=Gc;Gc--)Ka(sc[Gc],Vb)},lc.prototype._condense=function(Vb){for(var sc=Vb.length-1,Gc=void 0;0<=sc;sc--)0===Vb[sc].children.length?0<sc?(Gc=Vb[sc-1].children).splice(Gc.indexOf(Vb[sc]),1):this.clear():ia(Vb[sc],this.toBBox)},lc})}}),He=$a({["../../node_modules/fast-deep-equal/index.js"](b,g){g.exports=function ia(I,W){if(I===
W)return!0;if(I&&W&&"object"==typeof I&&"object"==typeof W){if(I.constructor!==W.constructor)return!1;var sa;if(Array.isArray(I)){var Ka=I.length;if(Ka!=W.length)return!1;for(sa=Ka;0!==sa--;)if(!ia(I[sa],W[sa]))return!1;return!0}if(I.constructor===RegExp)return I.source===W.source&&I.flags===W.flags;if(I.valueOf!==Object.prototype.valueOf)return I.valueOf()===W.valueOf();if(I.toString!==Object.prototype.toString)return I.toString()===W.toString();var Va=Object.keys(I);Ka=Va.length;if(Ka!==Object.keys(W).length)return!1;
for(sa=Ka;0!==sa--;)if(!Object.prototype.hasOwnProperty.call(W,Va[sa]))return!1;for(sa=Ka;0!==sa--;)if(Ka=Va[sa],!ia(I[Ka],W[Ka]))return!1;return!0}return I!==I&&W!==W}}}),da=$a({["../../../node_modules/deepmerge/dist/cjs.js"](b,g){function n(vb,Qb){return!1!==Qb.clone&&Qb.isMergeableObject(vb)?Va(Array.isArray(vb)?[]:{},vb,Qb):vb}function I(vb,Qb,cc){return vb.concat(Qb).map(function(Ub){return n(Ub,cc)})}function W(vb){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(vb).filter(function(Qb){return vb.propertyIsEnumerable(Qb)}):
[]}function ia(vb){return Object.keys(vb).concat(W(vb))}function sa(vb,Qb){try{return Qb in vb}catch(cc){return!1}}function Ka(vb,Qb,cc){var Ub={};cc.isMergeableObject(vb)&&ia(vb).forEach(function(rc){Ub[rc]=n(vb[rc],cc)});ia(Qb).forEach(function(rc){if(!sa(vb,rc)||Object.hasOwnProperty.call(vb,rc)&&Object.propertyIsEnumerable.call(vb,rc))if(sa(vb,rc)&&cc.isMergeableObject(Qb[rc])){if(cc.customMerge){var lc=cc.customMerge(rc);lc="function"===typeof lc?lc:Va}else lc=Va;Ub[rc]=lc(vb[rc],Qb[rc],cc)}else Ub[rc]=
n(Qb[rc],cc)});return Ub}function Va(vb,Qb,cc){cc=cc||{};cc.arrayMerge=cc.arrayMerge||I;cc.isMergeableObject=cc.isMergeableObject||Za;cc.cloneUnlessOtherwiseSpecified=n;var Ub=Array.isArray(Qb),rc=Array.isArray(vb);return Ub!==rc?n(Qb,cc):Ub?cc.arrayMerge(vb,Qb,cc):Ka(vb,Qb,cc)}var Za=function(vb){var Qb;if(Qb=!!vb&&"object"===typeof vb)Qb=Object.prototype.toString.call(vb),Qb=!("[object RegExp]"===Qb||"[object Date]"===Qb||vb.$$typeof===lb);return Qb},lb="function"===typeof Symbol&&Symbol.for?Symbol.for("react.element"):
60103;Va.all=function(vb,Qb){if(!Array.isArray(vb))throw Error("first argument should be an array");return vb.reduce(function(cc,Ub){return Va(cc,Ub,Qb)},{})};g.exports=Va}}),wa=$a({["../../node_modules/tslib/tslib.js"](b,g){var n,I,W,ia,sa,Ka,Va,Za,lb,vb,Qb,cc,Ub,rc,lc,Vb,sc,Gc,Qc,Vc,Vd,$d,Ee,Ne,uf;(function(rf){function ff(Ad,fd){Ad!==Ge&&("function"===typeof Object.create?Object.defineProperty(Ad,"__esModule",{value:!0}):Ad.__esModule=!0);return function(ld,nd){return Ad[ld]=fd?fd(ld,nd):nd}}var Ge=
"object"===typeof va?va:"object"===typeof self?self:"object"===typeof this?this:{};"function"===typeof define&&define.amd?define("tslib",["exports"],function(Ad){rf(ff(Ge,ff(Ad)))}):"object"===typeof g&&"object"===typeof g.exports?rf(ff(Ge,ff(g.exports))):rf(ff(Ge))})(function(rf){var ff=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Ad,fd){Ad.__proto__=fd}||function(Ad,fd){for(var ld in fd)Object.prototype.hasOwnProperty.call(fd,ld)&&(Ad[ld]=fd[ld])};n=function(Ad,fd){function ld(){this.constructor=
Ad}if("function"!==typeof fd&&null!==fd)throw new TypeError("Class extends value "+String(fd)+" is not a constructor or null");ff(Ad,fd);Ad.prototype=null===fd?Object.create(fd):(ld.prototype=fd.prototype,new ld)};I=Object.assign||function(Ad){for(var fd,ld=1,nd=arguments.length;ld<nd;ld++){fd=arguments[ld];for(var Ed in fd)Object.prototype.hasOwnProperty.call(fd,Ed)&&(Ad[Ed]=fd[Ed])}return Ad};W=function(Ad,fd){var ld={},nd;for(nd in Ad)Object.prototype.hasOwnProperty.call(Ad,nd)&&0>fd.indexOf(nd)&&
(ld[nd]=Ad[nd]);if(null!=Ad&&"function"===typeof Object.getOwnPropertySymbols){var Ed=0;for(nd=Object.getOwnPropertySymbols(Ad);Ed<nd.length;Ed++)0>fd.indexOf(nd[Ed])&&Object.prototype.propertyIsEnumerable.call(Ad,nd[Ed])&&(ld[nd[Ed]]=Ad[nd[Ed]])}return ld};ia=function(Ad,fd,ld,nd){var Ed=arguments.length,xe=3>Ed?fd:null===nd?nd=Object.getOwnPropertyDescriptor(fd,ld):nd,Fe;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)xe=Reflect.decorate(Ad,fd,ld,nd);else for(var sf=Ad.length-
1;0<=sf;sf--)if(Fe=Ad[sf])xe=(3>Ed?Fe(xe):3<Ed?Fe(fd,ld,xe):Fe(fd,ld))||xe;return 3<Ed&&xe&&Object.defineProperty(fd,ld,xe),xe};sa=function(Ad,fd){return function(ld,nd){fd(ld,nd,Ad)}};Ka=function(Ad,fd){if("object"===typeof Reflect&&"function"===typeof Reflect.metadata)return Reflect.metadata(Ad,fd)};Va=function(Ad,fd,ld,nd){function Ed(xe){return xe instanceof ld?xe:new ld(function(Fe){Fe(xe)})}return new (ld||=Promise)(function(xe,Fe){function sf(Vg){try{lf(nd.next(Vg))}catch(Ig){Fe(Ig)}}function mf(Vg){try{lf(nd["throw"](Vg))}catch(Ig){Fe(Ig)}}
function lf(Vg){Vg.done?xe(Vg.value):Ed(Vg.value).then(sf,mf)}lf((nd=nd.apply(Ad,fd||[])).next())})};Za=function(Ad,fd){function ld(lf){return function(Vg){return nd([lf,Vg])}}function nd(lf){if(xe)throw new TypeError("Generator is already executing.");for(;Ed;)try{if(xe=1,Fe&&(sf=lf[0]&2?Fe["return"]:lf[0]?Fe["throw"]||((sf=Fe["return"])&&sf.call(Fe),0):Fe.next)&&!(sf=sf.call(Fe,lf[1])).done)return sf;if(Fe=0,sf)lf=[lf[0]&2,sf.value];switch(lf[0]){case 0:case 1:sf=lf;break;case 4:return Ed.label++,
{value:lf[1],done:!1};case 5:Ed.label++;Fe=lf[1];lf=[0];continue;case 7:lf=Ed.ops.pop();Ed.trys.pop();continue;default:if(!(sf=Ed.trys,sf=0<sf.length&&sf[sf.length-1])&&(6===lf[0]||2===lf[0])){Ed=0;continue}if(3===lf[0]&&(!sf||lf[1]>sf[0]&&lf[1]<sf[3]))Ed.label=lf[1];else if(6===lf[0]&&Ed.label<sf[1])Ed.label=sf[1],sf=lf;else if(sf&&Ed.label<sf[2])Ed.label=sf[2],Ed.ops.push(lf);else{sf[2]&&Ed.ops.pop();Ed.trys.pop();continue}}lf=fd.call(Ad,Ed)}catch(Vg){lf=[6,Vg],Fe=0}finally{xe=sf=0}if(lf[0]&5)throw lf[1];
return{value:lf[0]?lf[1]:void 0,done:!0}}var Ed={label:0,sent:function(){if(sf[0]&1)throw sf[1];return sf[1]},trys:[],ops:[]},xe,Fe,sf,mf;return mf={next:ld(0),"throw":ld(1),"return":ld(2)},"function"===typeof Symbol&&(mf[Symbol.iterator]=function(){return this}),mf};lb=function(Ad,fd){for(var ld in Ad)"default"===ld||Object.prototype.hasOwnProperty.call(fd,ld)||uf(fd,Ad,ld)};uf=Object.create?function(Ad,fd,ld,nd){void 0===nd&&(nd=ld);var Ed=Object.getOwnPropertyDescriptor(fd,ld);if(!Ed||("get"in
Ed?!fd.__esModule:Ed.writable||Ed.configurable))Ed={enumerable:!0,get:function(){return fd[ld]}};Object.defineProperty(Ad,nd,Ed)}:function(Ad,fd,ld,nd){void 0===nd&&(nd=ld);Ad[nd]=fd[ld]};vb=function(Ad){var fd="function"===typeof Symbol&&Symbol.iterator,ld=fd&&Ad[fd],nd=0;if(ld)return ld.call(Ad);if(Ad&&"number"===typeof Ad.length)return{next:function(){Ad&&nd>=Ad.length&&(Ad=void 0);return{value:Ad&&Ad[nd++],done:!Ad}}};throw new TypeError(fd?"Object is not iterable.":"Symbol.iterator is not defined.");
};Qb=function(Ad,fd){var ld="function"===typeof Symbol&&Ad[Symbol.iterator];if(!ld)return Ad;Ad=ld.call(Ad);var nd,Ed=[];try{for(;(void 0===fd||0<fd--)&&!(nd=Ad.next()).done;)Ed.push(nd.value)}catch(Fe){var xe={error:Fe}}finally{try{nd&&!nd.done&&(ld=Ad["return"])&&ld.call(Ad)}finally{if(xe)throw xe.error;}}return Ed};cc=function(){for(var Ad=[],fd=0;fd<arguments.length;fd++)Ad=Ad.concat(Qb(arguments[fd]));return Ad};Ub=function(){for(var Ad=0,fd=0,ld=arguments.length;fd<ld;fd++)Ad+=arguments[fd].length;
Ad=Array(Ad);var nd=0;for(fd=0;fd<ld;fd++)for(var Ed=arguments[fd],xe=0,Fe=Ed.length;xe<Fe;xe++,nd++)Ad[nd]=Ed[xe];return Ad};rc=function(Ad,fd,ld){if(ld||2===arguments.length)for(var nd=0,Ed=fd.length,xe;nd<Ed;nd++)!xe&&nd in fd||(xe||=Array.prototype.slice.call(fd,0,nd),xe[nd]=fd[nd]);return Ad.concat(xe||Array.prototype.slice.call(fd))};lc=function(Ad){return this instanceof lc?(this.v=Ad,this):new lc(Ad)};Vb=function(Ad,fd,ld){function nd(Ig){mf[Ig]&&(lf[Ig]=function(oi){return new Promise(function(Nk,
Xk){1<Vg.push([Ig,oi,Nk,Xk])||Ed(Ig,oi)})})}function Ed(Ig,oi){try{var Nk=mf[Ig](oi);Nk.value instanceof lc?Promise.resolve(Nk.value.v).then(xe,Fe):sf(Vg[0][2],Nk)}catch(Xk){sf(Vg[0][3],Xk)}}function xe(Ig){Ed("next",Ig)}function Fe(Ig){Ed("throw",Ig)}function sf(Ig,oi){(Ig(oi),Vg.shift(),Vg.length)&&Ed(Vg[0][0],Vg[0][1])}if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var mf=ld.apply(Ad,fd||[]),lf,Vg=[];return lf={},nd("next"),nd("throw"),nd("return"),lf[Symbol.asyncIterator]=
function(){return this},lf};sc=function(Ad){function fd(Ed,xe){ld[Ed]=Ad[Ed]?function(Fe){return(nd=!nd)?{value:lc(Ad[Ed](Fe)),done:"return"===Ed}:xe?xe(Fe):Fe}:xe}var ld,nd;return ld={},fd("next"),fd("throw",function(Ed){throw Ed;}),fd("return"),ld[Symbol.iterator]=function(){return this},ld};Gc=function(Ad){function fd(xe){Ed[xe]=Ad[xe]&&function(Fe){return new Promise(function(sf,mf){Fe=Ad[xe](Fe);ld(sf,mf,Fe.done,Fe.value)})}}function ld(xe,Fe,sf,mf){Promise.resolve(mf).then(function(lf){xe({value:lf,
done:sf})},Fe)}if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var nd=Ad[Symbol.asyncIterator],Ed;return nd?nd.call(Ad):(Ad="function"===typeof vb?vb(Ad):Ad[Symbol.iterator](),Ed={},fd("next"),fd("throw"),fd("return"),Ed[Symbol.asyncIterator]=function(){return this},Ed)};Qc=function(Ad,fd){Object.defineProperty?Object.defineProperty(Ad,"raw",{value:fd}):Ad.raw=fd;return Ad};var Ge=Object.create?function(Ad,fd){Object.defineProperty(Ad,"default",{enumerable:!0,
value:fd})}:function(Ad,fd){Ad["default"]=fd};Vc=function(Ad){if(Ad&&Ad.__esModule)return Ad;var fd={};if(null!=Ad)for(var ld in Ad)"default"!==ld&&Object.prototype.hasOwnProperty.call(Ad,ld)&&uf(fd,Ad,ld);Ge(fd,Ad);return fd};Vd=function(Ad){return Ad&&Ad.__esModule?Ad:{"default":Ad}};$d=function(Ad,fd,ld,nd){if("a"===ld&&!nd)throw new TypeError("Private accessor was defined without a getter");if("function"===typeof fd?Ad!==fd||!nd:!fd.has(Ad))throw new TypeError("Cannot read private member from an object whose class did not declare it");
return"m"===ld?nd:"a"===ld?nd.call(Ad):nd?nd.value:fd.get(Ad)};Ee=function(Ad,fd,ld,nd,Ed){if("m"===nd)throw new TypeError("Private method is not writable");if("a"===nd&&!Ed)throw new TypeError("Private accessor was defined without a setter");if("function"===typeof fd?Ad!==fd||!Ed:!fd.has(Ad))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===nd?Ed.call(Ad,ld):Ed?Ed.value=ld:fd.set(Ad,ld),ld};Ne=function(Ad,fd){if(null===fd||"object"!==typeof fd&&
"function"!==typeof fd)throw new TypeError("Cannot use 'in' operator on non-object");return"function"===typeof Ad?fd===Ad:Ad.has(fd)};rf("__extends",n);rf("__assign",I);rf("__rest",W);rf("__decorate",ia);rf("__param",sa);rf("__metadata",Ka);rf("__awaiter",Va);rf("__generator",Za);rf("__exportStar",lb);rf("__createBinding",uf);rf("__values",vb);rf("__read",Qb);rf("__spread",cc);rf("__spreadArrays",Ub);rf("__spreadArray",rc);rf("__await",lc);rf("__asyncGenerator",Vb);rf("__asyncDelegator",sc);rf("__asyncValues",
Gc);rf("__makeTemplateObject",Qc);rf("__importStar",Vc);rf("__importDefault",Vd);rf("__classPrivateFieldGet",$d);rf("__classPrivateFieldSet",Ee);rf("__classPrivateFieldIn",Ne)})}}),Xa={};((b,g)=>{for(var n in g)$m(b,n,{get:g[n],enumerable:!0})})(Xa,{App:()=>KI,PreviewManager:()=>xw,generateJSXFromModel:()=>Jo,generateSVGFromModel:()=>io});Ta.exports=(b=>La($m({},"__esModule",{value:!0}),b))(Xa);var yb=(b=>{b.Yellow="yellow";b.Red="red";b.Pink="pink";b.Green="green";b.Blue="blue";b.Purple="purple";
b.Gray="gray";b.Default="";return b})(yb||{}),ac,vc=new Uint8Array(16),Xc=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,kd=[];for(let b=0;256>b;++b)kd.push((b+256).toString(16).slice(1));var zd,Sd,ye=0,Ye=0,$e=function(b,g,n){n=g&&n||0;const I=g||Array(16);b=b||{};let W=b.node||zd;var ia=void 0!==b.clockseq?b.clockseq:Sd;if(null==W||null==ia){var sa=b.random||(b.rng||q)();null==W&&(W=zd=[sa[0]|1,sa[1],sa[2],sa[3],sa[4],sa[5]]);
null==ia&&(ia=Sd=(sa[6]<<8|sa[7])&16383)}sa=void 0!==b.msecs?b.msecs:Date.now();let Ka=void 0!==b.nsecs?b.nsecs:Ye+1;const Va=sa-ye+(Ka-Ye)/1E4;0>Va&&void 0===b.clockseq&&(ia=ia+1&16383);(0>Va||sa>ye)&&void 0===b.nsecs&&(Ka=0);if(1E4<=Ka)throw Error("uuid.v1(): Can't create more than 10M uuids/sec");ye=sa;Ye=Ka;Sd=ia;sa+=122192928E5;b=(1E4*(sa&268435455)+Ka)%4294967296;I[n++]=b>>>24&255;I[n++]=b>>>16&255;I[n++]=b>>>8&255;I[n++]=b&255;b=sa/4294967296*1E4&268435455;I[n++]=b>>>8&255;I[n++]=b&255;I[n++]=
b>>>24&15|16;I[n++]=b>>>16&255;I[n++]=ia>>>8|128;I[n++]=ia&255;for(ia=0;6>ia;++ia)I[n+ia]=W[ia];return g||S(I)},kf=class{static clamp(b,g,n){return Math.max(g,"undefined"!==typeof n?Math.min(b,n):b)}static clampV(b,g,n){return b.map(I=>n?kf.clamp(I,g,n):kf.clamp(I,g))}static cross(b,g,n){return(g[0]-b[0])*(n[1]-b[1])-(n[0]-b[0])*(g[1]-b[1])}static snap(b,g=1){return[Math.round(b[0]/g)*g,Math.round(b[1]/g)*g]}},gd=kf;gd.neg=b=>[-b[0],-b[1]];gd.add=(b,g)=>[b[0]+g[0],b[1]+g[1]];gd.addScalar=(b,g)=>[b[0]+
g,b[1]+g];gd.sub=(b,g)=>[b[0]-g[0],b[1]-g[1]];gd.subScalar=(b,g)=>[b[0]-g,b[1]-g];gd.vec=(b,g)=>[g[0]-b[0],g[1]-b[1]];gd.mul=(b,g)=>[b[0]*g,b[1]*g];gd.mulV=(b,g)=>[b[0]*g[0],b[1]*g[1]];gd.div=(b,g)=>[b[0]/g,b[1]/g];gd.divV=(b,g)=>[b[0]/g[0],b[1]/g[1]];gd.per=b=>[b[1],-b[0]];gd.dpr=(b,g)=>b[0]*g[0]+b[1]*g[1];gd.cpr=(b,g)=>b[0]*g[1]-g[0]*b[1];gd.len2=b=>b[0]*b[0]+b[1]*b[1];gd.len=b=>Math.hypot(b[0],b[1]);gd.pry=(b,g)=>kf.dpr(b,g)/kf.len(g);gd.uni=b=>kf.div(b,kf.len(b));gd.normalize=b=>kf.uni(b);gd.tangent=
(b,g)=>kf.uni(kf.sub(b,g));gd.dist2=(b,g)=>kf.len2(kf.sub(b,g));gd.dist=(b,g)=>Math.hypot(b[1]-g[1],b[0]-g[0]);gd.fastDist=(b,g)=>{b=[g[0]-b[0],g[1]-b[1]];g=[Math.abs(b[0]),Math.abs(b[1])];let n=1/Math.max(g[0],g[1]);n*=1.29289-(g[0]+g[1])*n*.29289;return[b[0]*n,b[1]*n]};gd.ang=(b,g)=>Math.atan2(kf.cpr(b,g),kf.dpr(b,g));gd.angle=(b,g)=>Math.atan2(g[1]-b[1],g[0]-b[0]);gd.med=(b,g)=>kf.mul(kf.add(b,g),.5);gd.rot=(b,g=0)=>[b[0]*Math.cos(g)-b[1]*Math.sin(g),b[0]*Math.sin(g)+b[1]*Math.cos(g)];gd.rotWith=
(b,g,n=0)=>{if(0===n)return b;const I=Math.sin(n);n=Math.cos(n);const W=b[0]-g[0];b=b[1]-g[1];return[W*n-b*I+g[0],W*I+b*n+g[1]]};gd.isEqual=(b,g)=>b[0]===g[0]&&b[1]===g[1];gd.lrp=(b,g,n)=>kf.add(b,kf.mul(kf.sub(g,b),n));gd.int=(b,g,n,I,W=1)=>{n=(kf.clamp(n,I)-n)/(I-n);return kf.add(kf.mul(b,1-n),kf.mul(g,W))};gd.ang3=(b,g,n)=>{b=kf.vec(g,b);g=kf.vec(g,n);return kf.ang(b,g)};gd.abs=b=>[Math.abs(b[0]),Math.abs(b[1])];gd.rescale=(b,g)=>{const n=kf.len(b);return[g*b[0]/n,g*b[1]/n]};gd.isLeft=(b,g,n)=>
(g[0]-b[0])*(n[1]-b[1])-(n[0]-b[0])*(g[1]-b[1]);gd.clockwise=(b,g,n)=>0<kf.isLeft(b,g,n);gd.toFixed=b=>b.map(g=>Math.round(100*g)/100);gd.nearestPointOnLineThroughPoint=(b,g,n)=>kf.add(b,kf.mul(g,kf.pry(kf.sub(n,b),g)));gd.distanceToLineThroughPoint=(b,g,n)=>kf.dist(n,kf.nearestPointOnLineThroughPoint(b,g,n));gd.nearestPointOnLineSegment=(b,g,n,I=!0)=>{const W=kf.uni(kf.sub(g,b));n=kf.add(b,kf.mul(W,kf.pry(kf.sub(n,b),W)));if(I){if(n[0]<Math.min(b[0],g[0]))return b[0]<g[0]?b:g;if(n[0]>Math.max(b[0],
g[0]))return b[0]>g[0]?b:g;if(n[1]<Math.min(b[1],g[1]))return b[1]<g[1]?b:g;if(n[1]>Math.max(b[1],g[1]))return b[1]>g[1]?b:g}return n};gd.distanceToLineSegment=(b,g,n,I=!0)=>kf.dist(n,kf.nearestPointOnLineSegment(b,g,n,I));gd.nudge=(b,g,n)=>kf.isEqual(b,g)?b:kf.add(b,kf.mul(kf.uni(kf.sub(g,b)),n));gd.nudgeAtAngle=(b,g,n)=>[Math.cos(g)*n+b[0],Math.sin(g)*n+b[1]];gd.toPrecision=(b,g=4)=>[+b[0].toPrecision(g),+b[1].toPrecision(g)];gd.pointsBetween=(b,g,n=6)=>Array.from(Array(n)).map((I,W)=>{I=W/(n-1);
W=Math.min(1,.5+Math.abs(.5-I));return[...kf.lrp(b,g,I),W]});gd.slope=(b,g)=>b[0]===g[0]?NaN:(b[1]-g[1])/(b[0]-g[0]);gd.toAngle=b=>{b=Math.atan2(b[1],b[0]);return 0>b?b+2*Math.PI:b};gd.max=(...b)=>[Math.max(...b.map(g=>g[0])),Math.max(...b.map(g=>g[1]))];gd.min=(...b)=>[Math.min(...b.map(g=>g[0])),Math.min(...b.map(g=>g[1]))];var Ud=gd,Ve=class{static getRectangleSides(b,g,n=0){const I=[b[0]+g[0]/2,b[1]+g[1]/2],W=gd.rotWith(b,I,n),ia=gd.rotWith(gd.add(b,[g[0],0]),I,n),sa=gd.rotWith(gd.add(b,g),I,
n);b=gd.rotWith(gd.add(b,[0,g[1]]),I,n);return[["top",[W,ia]],["right",[ia,sa]],["bottom",[sa,b]],["left",[b,W]]]}static getBoundsSides(b){return Ve.getRectangleSides([b.minX,b.minY],[b.width,b.height])}static expandBounds(b,g){return{minX:b.minX-g,minY:b.minY-g,maxX:b.maxX+g,maxY:b.maxY+g,width:b.width+2*g,height:b.height+2*g}}static boundsCollide(b,g){return!(b.maxX<g.minX||b.minX>g.maxX||b.maxY<g.minY||b.minY>g.maxY)}static boundsContain(b,g){return Array.isArray(g)?b.minX<g[0]&&b.minY<g[1]&&b.maxY>
g[1]&&b.maxX>g[0]:b.minX<g.minX&&b.minY<g.minY&&b.maxY>g.maxY&&b.maxX>g.maxX}static boundsContained(b,g){return Ve.boundsContain(g,b)}static boundsAreEqual(b,g){return!(g.maxX!==b.maxX||g.minX!==b.minX||g.maxY!==b.maxY||g.minY!==b.minY)}static getBoundsFromPoints(b,g=0){let n=Infinity,I=Infinity,W=-Infinity,ia=-Infinity;if(2>b.length)I=n=0,ia=W=1;else for(const sa of b)n=Math.min(sa[0],n),I=Math.min(sa[1],I),W=Math.max(sa[0],W),ia=Math.max(sa[1],ia);return 0!==g?Ve.getBoundsFromPoints(b.map(sa=>gd.rotWith(sa,
[(n+W)/2,(I+ia)/2],g))):{minX:n,minY:I,maxX:W,maxY:ia,width:Math.max(1,W-n),height:Math.max(1,ia-I)}}static centerBounds(b,g){const n=Ve.getBoundsCenter(b);return Ve.translateBounds(b,[g[0]-n[0],g[1]-n[1]])}static snapBoundsToGrid(b,g){const n=Math.round(b.minX/g)*g,I=Math.round(b.minY/g)*g,W=Math.round(b.maxX/g)*g;b=Math.round(b.maxY/g)*g;return{minX:n,minY:I,maxX:W,maxY:b,width:Math.max(1,W-n),height:Math.max(1,b-I)}}static translateBounds(b,g){return{minX:b.minX+g[0],minY:b.minY+g[1],maxX:b.maxX+
g[0],maxY:b.maxY+g[1],width:b.width,height:b.height}}static multiplyBounds(b,g){const n=Ve.getBoundsCenter(b);return Ve.centerBounds({minX:b.minX*g,minY:b.minY*g,maxX:b.maxX*g,maxY:b.maxY*g,width:b.width*g,height:b.height*g},[n[0]*g,n[1]*g])}static divideBounds(b,g){const n=Ve.getBoundsCenter(b);return Ve.centerBounds({minX:b.minX/g,minY:b.minY/g,maxX:b.maxX/g,maxY:b.maxY/g,width:b.width/g,height:b.height/g},[n[0]/g,n[1]/g])}static getRotatedBounds(b,g=0){b=Ve.getRotatedCorners(b,g);let n=g=Infinity,
I=-Infinity,W=-Infinity;for(const ia of b)g=Math.min(ia[0],g),n=Math.min(ia[1],n),I=Math.max(ia[0],I),W=Math.max(ia[1],W);return{minX:g,minY:n,maxX:I,maxY:W,width:Math.max(1,I-g),height:Math.max(1,W-n),rotation:0}}static getRotatedEllipseBounds(b,g,n,I,W=0){var ia=Math.cos(W);const sa=Math.sin(W);W=Math.hypot(n*ia,I*sa);ia=Math.hypot(n*sa,I*ia);return{minX:b+n-W,minY:g+I-ia,maxX:b+n+W,maxY:g+I+ia,width:2*W,height:2*ia}}static getExpandedBounds(b,g){const n=Math.min(b.minX,g.minX),I=Math.min(b.minY,
g.minY),W=Math.max(b.maxX,g.maxX);b=Math.max(b.maxY,g.maxY);return{minX:n,minY:I,maxX:W,maxY:b,width:Math.abs(W-n),height:Math.abs(b-I)}}static getCommonBounds(b){if(2>b.length)return b[0];let g=b[0];for(let n=1;n<b.length;n++)g=Ve.getExpandedBounds(g,b[n]);return g}static getRotatedCorners(b,g=0){const n=[b.minX+b.width/2,b.minY+b.height/2];b=[[b.minX,b.minY],[b.maxX,b.minY],[b.maxX,b.maxY],[b.minX,b.maxY]];return g?b.map(I=>gd.rotWith(I,n,g)):b}static getTransformedBoundingBox(b,g,n,I=0,W=!1){const [ia,
sa]=[b.minX,b.minY],[Ka,Va]=[b.maxX,b.maxY];let [Za,lb]=[b.minX,b.minY],[vb,Qb]=[b.maxX,b.maxY];if("center"===g)return{minX:Za+n[0],minY:lb+n[1],maxX:vb+n[0],maxY:Qb+n[1],width:vb-Za,height:Qb-lb,scaleX:1,scaleY:1};const [cc,Ub]=gd.rot(n,-I);switch(g){case "top_edge":case "top_left_corner":case "top_right_corner":lb+=Ub;break;case "bottom_edge":case "bottom_left_corner":case "bottom_right_corner":Qb+=Ub}switch(g){case "left_edge":case "top_left_corner":case "bottom_left_corner":Za+=cc;break;case "right_edge":case "top_right_corner":case "bottom_right_corner":vb+=
cc}var rc=Ka-ia;const lc=Va-sa;var Vb=(vb-Za)/rc,sc=(Qb-lb)/lc;b=0>Vb;n=0>sc;var Gc=Math.abs(vb-Za),Qc=Math.abs(Qb-lb);if(W)switch(W=rc/lc,rc=W<Gc/Qc,sc=1/W*(0>sc?1:-1)*Gc,Vb=Qc*(0>Vb?1:-1)*W,g){case "top_left_corner":rc?lb=Qb+sc:Za=vb+Vb;break;case "top_right_corner":rc?lb=Qb+sc:vb=Za-Vb;break;case "bottom_right_corner":rc?Qb=lb-sc:vb=Za-Vb;break;case "bottom_left_corner":rc?Qb=lb-sc:Za=vb+Vb;break;case "bottom_edge":case "top_edge":Gc=(Za+vb)/2;Qc*=W;Za=Gc-Qc/2;vb=Gc+Qc/2;break;case "left_edge":case "right_edge":Qc=
(lb+Qb)/2,Gc/=W,lb=Qc-Gc/2,Qb=Qc+Gc/2}if(0!==I%(2*Math.PI)){Gc=[0,0];Qc=gd.med([ia,sa],[Ka,Va]);Vb=gd.med([Za,lb],[vb,Qb]);switch(g){case "top_left_corner":Gc=gd.sub(gd.rotWith([vb,Qb],Vb,I),gd.rotWith([Ka,Va],Qc,I));break;case "top_right_corner":Gc=gd.sub(gd.rotWith([Za,Qb],Vb,I),gd.rotWith([ia,Va],Qc,I));break;case "bottom_right_corner":Gc=gd.sub(gd.rotWith([Za,lb],Vb,I),gd.rotWith([ia,sa],Qc,I));break;case "bottom_left_corner":Gc=gd.sub(gd.rotWith([vb,lb],Vb,I),gd.rotWith([Ka,sa],Qc,I));break;
case "top_edge":Gc=gd.sub(gd.rotWith(gd.med([Za,Qb],[vb,Qb]),Vb,I),gd.rotWith(gd.med([ia,Va],[Ka,Va]),Qc,I));break;case "left_edge":Gc=gd.sub(gd.rotWith(gd.med([vb,lb],[vb,Qb]),Vb,I),gd.rotWith(gd.med([Ka,sa],[Ka,Va]),Qc,I));break;case "bottom_edge":Gc=gd.sub(gd.rotWith(gd.med([Za,lb],[vb,lb]),Vb,I),gd.rotWith(gd.med([ia,sa],[Ka,sa]),Qc,I));break;case "right_edge":Gc=gd.sub(gd.rotWith(gd.med([Za,lb],[Za,Qb]),Vb,I),gd.rotWith(gd.med([ia,sa],[ia,Va]),Qc,I))}[Za,lb]=gd.sub([Za,lb],Gc);[vb,Qb]=gd.sub([vb,
Qb],Gc)}vb<Za&&([vb,Za]=[Za,vb]);Qb<lb&&([Qb,lb]=[lb,Qb]);return{minX:Za,minY:lb,maxX:vb,maxY:Qb,width:vb-Za,height:Qb-lb,scaleX:(vb-Za)/(Ka-ia||1)*(b?-1:1),scaleY:(Qb-lb)/(Va-sa||1)*(n?-1:1)}}static getTransformAnchor(b,g,n){let I=b;switch(b){case "top_left_corner":I=g&&n?"bottom_right_corner":g?"top_right_corner":n?"bottom_left_corner":"bottom_right_corner";break;case "top_right_corner":I=g&&n?"bottom_left_corner":g?"top_left_corner":n?"bottom_right_corner":"bottom_left_corner";break;case "bottom_right_corner":I=
g&&n?"top_left_corner":g?"bottom_left_corner":n?"top_right_corner":"top_left_corner";break;case "bottom_left_corner":I=g&&n?"top_right_corner":g?"bottom_right_corner":n?"top_left_corner":"top_right_corner"}return I}static getRelativeTransformedBoundingBox(b,g,n,I,W){I=b.minX+(I?g.maxX-n.maxX:n.minX-g.minX)/g.width*b.width;W=b.minY+(W?g.maxY-n.maxY:n.minY-g.minY)/g.height*b.height;const ia=n.width/g.width*b.width;b=n.height/g.height*b.height;return{minX:I,minY:W,maxX:I+ia,maxY:W+b,width:ia,height:b}}static getRotatedSize(b,
g){const n=gd.div(b,2);b=[[0,0],[b[0],0],b,[0,b[1]]].map(I=>gd.rotWith(I,n,g));b=Ve.getBoundsFromPoints(b);return[b.width,b.height]}static getBoundsCenter(b){return[b.minX+b.width/2,b.minY+b.height/2]}static getBoundsWithCenter(b){const g=Ve.getBoundsCenter(b);return xf(te({},b),{midX:g[0],midY:g[1]})}static getCommonTopLeft(b){const g=[Infinity,Infinity];b.forEach(n=>{g[0]=Math.min(g[0],n[0]);g[1]=Math.min(g[1],n[1])});return g}static getTLSnapPoints(b,g,n){const I=te({},b);b=[0,0];const W=[],ia=
{minX:{id:"minX",isSnapped:!1},midX:{id:"midX",isSnapped:!1},maxX:{id:"maxX",isSnapped:!1},minY:{id:"minY",isSnapped:!1},midY:{id:"midY",isSnapped:!1},maxY:{id:"maxY",isSnapped:!1}},sa=["midX","minX","maxX"],Ka=["midY","minY","maxY"];g=g.map(Qb=>{const cc=sa.flatMap((rc,lc)=>sa.map((Vb,sc)=>{const Gc=I[rc]-Qb[Vb];return{f:rc,t:Vb,gap:Gc,distance:Math.abs(Gc),isCareful:0===lc||3===lc+sc}})),Ub=Ka.flatMap((rc,lc)=>Ka.map((Vb,sc)=>{const Gc=I[rc]-Qb[Vb];return{f:rc,t:Vb,gap:Gc,distance:Math.abs(Gc),
isCareful:0===lc||3===lc+sc}}));return[Qb,cc,Ub]});let Va=Infinity,Za=Infinity,lb=Infinity,vb=Infinity;g.forEach(([,Qb,cc])=>{Qb.forEach(Ub=>{Ub.distance<n&&Ub.distance<lb&&(lb=Ub.distance,Va=Ub.gap)});cc.forEach(Ub=>{Ub.distance<n&&Ub.distance<vb&&(vb=Ub.distance,Za=Ub.gap)})});g.forEach(([Qb,cc,Ub])=>{Infinity!==Va&&cc.forEach(rc=>{2>Math.abs(rc.gap-Va)&&(ia[rc.f]=xf(te({},ia[rc.f]),{isSnapped:!0,to:Qb[rc.t],B:Qb,distance:rc.distance}))});Infinity!==Za&&Ub.forEach(rc=>{2>Math.abs(rc.gap-Za)&&(ia[rc.f]=
xf(te({},ia[rc.f]),{isSnapped:!0,to:Qb[rc.t],B:Qb,distance:rc.distance}))})});b[0]=Infinity===Va?0:Va;b[1]=Infinity===Za?0:Za;I.minX-=b[0];I.midX-=b[0];I.maxX-=b[0];I.minY-=b[1];I.midY-=b[1];I.maxY-=b[1];sa.forEach(Qb=>{Qb=ia[Qb];if(Qb.isSnapped){var {id:cc,B:Ub}=Qb;Qb=I[cc];W.push("minX"===cc?[[Qb,I.midY],[Qb,Ub.minY],[Qb,Ub.maxY]]:[[Qb,I.minY],[Qb,I.maxY],[Qb,Ub.minY],[Qb,Ub.maxY]])}});Ka.forEach(Qb=>{Qb=ia[Qb];if(Qb.isSnapped){var {id:cc,B:Ub}=Qb;Qb=I[cc];W.push("midY"===cc?[[I.midX,Qb],[Ub.minX,
Qb],[Ub.maxX,Qb]]:[[I.minX,Qb],[I.maxX,Qb],[Ub.minX,Qb],[Ub.maxX,Qb]])}});return{offset:b,snapLines:W}}static ensureRatio(b,g){const {width:n,height:I}=b,W=te({},b);n/I<g?(W.width=I*g,W.maxX+=n-b.width):(W.height=n/g,W.maxY+=I-b.height);return W}static getDistributions(b,g){var n=b.map(ia=>{const sa=ia.getBounds();return{id:ia.id,point:[sa.minX,sa.minY],bounds:sa,center:ia.getCenter()}});b=n.length;var I=Ve.getCommonBounds(n.map(({bounds:ia})=>ia));const W=[];switch(g){case "horizontal":g=n.reduce((ia,
sa)=>ia+sa.bounds.width,0);if(g>I.width){const ia=n.sort((Za,lb)=>Za.bounds.minX-lb.bounds.minX)[0],sa=n.sort((Za,lb)=>lb.bounds.maxX-Za.bounds.maxX)[0];I=n.filter(Za=>Za!==ia&&Za!==sa).sort((Za,lb)=>Za.center[0]-lb.center[0]);const Ka=(sa.center[0]-ia.center[0])/(b-1),Va=ia.center[0]+Ka;I.forEach(({id:Za,point:lb,bounds:vb},Qb)=>{W.push({id:Za,prev:lb,next:[Va+Ka*Qb-vb.width/2,vb.minY]})})}else{n=n.sort((Ka,Va)=>Ka.center[0]-Va.center[0]);let ia=I.minX;const sa=(I.width-g)/(b-1);n.forEach(({id:Ka,
point:Va,bounds:Za})=>{W.push({id:Ka,prev:Va,next:[ia,Za.minY]});ia+=Za.width+sa})}break;case "vertical":if(g=n.reduce((ia,sa)=>ia+sa.bounds.height,0),g>I.height){const ia=n.sort((Za,lb)=>Za.bounds.minY-lb.bounds.minY)[0],sa=n.sort((Za,lb)=>lb.bounds.maxY-Za.bounds.maxY)[0];I=n.filter(Za=>Za!==ia&&Za!==sa).sort((Za,lb)=>Za.center[1]-lb.center[1]);const Ka=(sa.center[1]-ia.center[1])/(b-1),Va=ia.center[1]+Ka;I.forEach(({id:Za,point:lb,bounds:vb},Qb)=>{W.push({id:Za,prev:lb,next:[vb.minX,Va+Ka*Qb-vb.height/
2]})})}else{n=n.sort((Ka,Va)=>Ka.center[1]-Va.center[1]);let ia=I.minY;const sa=(I.height-g)/(b-1);n.forEach(({id:Ka,point:Va,bounds:Za})=>{W.push({id:Ka,prev:Va,next:[Za.minX,ia]});ia+=Za.height+sa})}}return W}static getPackedDistributions(b){const g=Ve.getCommonBounds(b.map(({bounds:W})=>W)),n=[g.minX,g.minY],I=Object.fromEntries(b.map(W=>[W.id,[W.bounds.minX,W.bounds.minY]]));b=b.filter(W=>{var ia,sa,Ka,Va;return!((null==(sa=null==(ia=W.props.handles)?void 0:ia.start)?0:sa.bindingId)||(null==(Va=
null==(Ka=W.props.handles)?void 0:Ka.end)?0:Va.bindingId))}).map(W=>{const ia=W.getBounds();return{id:W.id,w:ia.width+16,h:ia.height+16,x:ia.minX,y:ia.minY}});A(b);return b.map(({id:W,x:ia,y:sa})=>({id:W,prev:I[W],next:[ia+n[0],sa+n[1]]}))}},xj=class{static pointInCircle(b,g,n){return gd.dist(b,g)<=n}static pointInEllipse(b,g,n,I,W=0){W=W||0;var ia=Math.cos(W);W=Math.sin(W);g=gd.sub(b,g);b=ia*g[0]+W*g[1];ia=W*g[0]-ia*g[1];return 1>=b*b/(n*n)+ia*ia/(I*I)}static pointInRect(b,g){return!(b[0]<g[0]||
b[0]>b[0]+g[0]||b[1]<g[1]||b[1]>b[1]+g[1])}static pointInPolygon(b,g){let n=0;g.forEach((I,W)=>{W=g[(W+1)%g.length];I[1]<=b[1]?W[1]>b[1]&&0<gd.cross(I,W,b)&&(n+=1):W[1]<=b[1]&&0>gd.cross(I,W,b)&&--n});return 0!==n}static pointInBounds(b,g){return!(b[0]<g.minX||b[0]>g.maxX||b[1]<g.minY||b[1]>g.maxY)}static pointInPolyline(b,g,n=3){for(let I=1;I<g.length;I++)if(gd.distanceToLineSegment(g[I-1],g[I],b)<n)return!0;return!1}static _getSqSegDist(b,g,n){let I=g[0];g=g[1];let W=n[0]-I,ia=n[1]-g;if(0!==W||
0!==ia){const sa=((b[0]-I)*W+(b[1]-g)*ia)/(W*W+ia*ia);1<sa?(I=n[0],g=n[1]):0<sa&&(I+=W*sa,g+=ia*sa)}W=b[0]-I;ia=b[1]-g;return W*W+ia*ia}static _simplifyStep(b,g,n,I,W){let ia=I,sa=-1;for(let Ka=g+1;Ka<n;Ka++){const Va=xj._getSqSegDist(b[Ka],b[g],b[n]);Va>ia&&(sa=Ka,ia=Va)}-1<sa&&ia>I&&(1<sa-g&&xj._simplifyStep(b,g,sa,I,W),W.push(b[sa]),1<n-sa&&xj._simplifyStep(b,sa,n,I,W))}static simplify2(b,g=1){if(2>=b.length)return b;g*=g;var n=b[0],I=b[1];const W=[n];for(let ia=1,sa=b.length;ia<sa;ia++)I=b[ia],
(I[0]-n[0])*(I[0]-n[0])+(I[1]-n[1])*(I[1]-n[1])>g&&(W.push(I),n=I);n!==I&&W.push(I);n=W.length-1;I=[W[0]];xj._simplifyStep(W,0,n,g,I);I.push(W[n],b[b.length-1]);return I}static pointNearToPolyline(b,g,n=8){const I=g.length;for(let W=1;W<I;W++)if(gd.distanceToLineSegment(g[W-1],g[W],b)<n)return!0;return!1}},Ag=xj;Ma(Ag,"simplify",(b,g=1)=>{var n=b.length;const I=b[0],W=b[n-1],[ia,sa]=I,[Ka,Va]=W;if(2<n){let Za=0,lb=0;const vb=gd.len2([Va-sa,Ka-ia]);for(let Qb=1;Qb<n-1;Qb++){const [cc,Ub]=b[Qb],rc=
Math.pow(cc*(Va-sa)+ia*(Ub-Va)+Ka*(sa-Ub),2)/vb;Za>rc||(Za=rc,lb=Qb)}if(Za>g)return n=xj.simplify(b.slice(0,lb+1),g),b=xj.simplify(b.slice(lb+1),g),n.concat(b.slice(1))}return[I,W]});var Pj=cb(Nd()),rl=({target:b},g)=>{b=b&&b.tagName;return!!(b&&g&&g.includes(b))},rn=class{static registerShortcut(b,g){Pj.default.bind(b,(n,I)=>{var W;n.preventDefault();rl(n,["INPUT","TEXTAREA","SELECT"])||(null==(W=n.target)?0:W.isContentEditable)||g(n,I)},"keydown");return()=>{Pj.default.unbind(b,"keydown")}}},rm=
Math.PI,Em=rm/2,Ak=2*rm,mh={},Pl={bottom_edge:"ns-resize",top_edge:"ns-resize",left_edge:"ew-resize",right_edge:"ew-resize",bottom_left_corner:"nesw-resize",bottom_right_corner:"nwse-resize",top_left_corner:"nwse-resize",top_right_corner:"nesw-resize",bottom_left_resize_corner:"swne-rotate",bottom_right_resize_corner:"senw-rotate",top_left_resize_corner:"nwse-rotate",top_right_resize_corner:"nesw-rotate",rotate:"rotate",center:"grab",background:"grab"},Ei=class{static circleFromThreePoints(b,g,n){const [I,
W]=b,[ia,sa]=g,[Ka,Va]=n;g=I*(sa-Va)-W*(ia-Ka)+ia*Va-Ka*sa;b=-((I*I+W*W)*(Va-sa)+(ia*ia+sa*sa)*(W-Va)+(Ka*Ka+Va*Va)*(sa-W))/(2*g);g=-((I*I+W*W)*(ia-Ka)+(ia*ia+sa*sa)*(Ka-I)+(Ka*Ka+Va*Va)*(I-ia))/(2*g);return[b,g,Math.hypot(b-I,g-W)]}static perimeterOfEllipse(b,g){const n=Math.pow(b-g,2)/Math.pow(b+g,2);return rm*(b+g)*(1+3*n/(10+Math.sqrt(4-3*n)))}static shortAngleDist(b,g){b=(g-b)%Ak;return 2*b%Ak-b}static longAngleDist(b,g){return Ak-Ei.shortAngleDist(b,g)}static lerpAngles(b,g,n){return b+Ei.shortAngleDist(b,
g)*n}static angleDelta(b,g){return Ei.shortAngleDist(b,g)}static getSweep(b,g,n){return Ei.angleDelta(Ud.angle(b,g),Ud.angle(b,n))}static clampRadians(b){return(Ak+b)%Ak}static snapAngleToSegments(b,g){g=Ak/g;b=Math.floor((Ei.clampRadians(b)+g/2)/g)*g%Ak;b<rm&&(b+=Ak);b>rm&&(b-=Ak);return b}static isAngleBetween(b,g,n){if(n===b||n===g)return!0;g=(g-b+Em)%Em;return g<=rm!==(n-b+Em)%Em>g}static degreesToRadians(b){return b*rm/180}static radiansToDegrees(b){return 180*b/rm}static getArcLength(b,g,n,
I){b=Ei.getSweep(b,n,I);return b/Ak*Ak*g}static getSweepFlag(b,g,n){n=Ud.angle(b,n);return 0<(Ud.angle(b,g)-n+3*rm)%Ak-rm?0:1}static getLargeArcFlag(b,g,n){b=Ud.angle(n,b);g=(Ud.angle(n,g)-b+3*rm)%Ak-rm;return Math.abs(g)>Em?0:1}static getArcDashOffset(b,g,n,I,W){const ia=Ei.getSweepFlag(b,n,I);g=Ei.getArcLength(b,g,n,I);return-(0>ia?g:Ak*b[2]-g)/2+W}static getEllipseDashOffset(b,g){return-(Ak*b[2])/2+-g}static radiansToCardinalDirection(b){return b<.25*Math.PI?"north":b<.75*Math.PI?"east":b<1.25*
Math.PI?"south":b<1.75*Math.PI?"west":"north"}},Di=class{static getPolygonCentroid(b){var g=b.map(n=>n[0]);b=b.map(n=>n[1]);g=Math.min(...g)+Math.max(...g);b=Math.min(...b)+Math.max(...b);return[g?g/2:0,b?b/2:0]}};Ma(Di,"getEdges",b=>{const g=b.length;return b.map((n,I)=>[n,b[(I+1)%g]])});Ma(Di,"getEdgeOutwardNormal",(b,g)=>Ud.per(Ud.uni(Ud.sub(g,b))));Ma(Di,"getEdgeInwardNormal",(b,g)=>Ud.neg(Di.getEdgeOutwardNormal(b,g)));Ma(Di,"getOffsetEdge",(b,g,n)=>{n=Ud.mul(Ud.per(Ud.uni(Ud.sub(g,b))),n);return[Ud.add(b,
n),Ud.add(g,n)]});Ma(Di,"getOffsetEdges",(b,g)=>b.map(([n,I])=>Di.getOffsetEdge(n,I,g)));Ma(Di,"getOffsetPolygon",(b,g)=>{if(1>b.length)throw Error("Expected at least one point.");if(1===b.length)return b=b[0],[Ud.add(b,[-g,-g]),Ud.add(b,[g,-g]),Ud.add(b,[g,g]),Ud.add(b,[-g,g])];if(2===b.length){const [n,I]=b;return[...Di.getOffsetEdge(n,I,g),...Di.getOffsetEdge(I,n,g)]}return Di.getOffsetEdges(Di.getEdges(b),g).flatMap((n,I,W)=>{{I=W[(I+1)%W.length];const ia=gd.slope(n[0],n[1]);W=gd.slope(I[0],I[1]);
ia!==W?Number.isNaN(ia)&&!Number.isNaN(W)?n=[n[0][0],(n[0][0]-I[0][0])*W+I[0][1]]:Number.isNaN(W)&&!Number.isNaN(ia)?n=[I[0][0],(I[0][0]-n[0][0])*ia+n[0][1]]:(n=(ia*n[0][0]-W*I[0][0]+I[0][1]-n[0][1])/(ia-W),n=[n,W*(n-I[0][0])+I[0][1]]):n=void 0}if(void 0===n)throw Error("Expected an intersection");return n})});Ma(Di,"getPolygonVertices",(b,g,n=0,I=1)=>{b=Ud.div(b,2);const [W,ia]=[Math.max(1,b[0]-n),Math.max(1,b[1]-n)];n=[];for(let Za=0,lb=Ak/g;Za<g;Za++){var sa=(-Em+Za*lb)%Ak,Ka=(-Em+(Za+1)*lb)%Ak;
sa=Ud.add(b,[W*Math.cos(sa),ia*Math.sin(sa)]);Ka=Ud.add(b,[W*Math.cos(Ka),ia*Math.sin(Ka)]);var Va=Ud.med(sa,Ka);Va=Ud.nudge(Va,b,Ud.dist(b,Va)*(1-I));n.push(sa,Va,Ka)}return n});Ma(Di,"getTriangleVertices",(b,g=0,n=1)=>{const [I,W]=b;var ia=1-n;b=[I/2,g/2];n=[I-g,W-g];g=[g/2,W-g];const sa=Di.getPolygonCentroid([b,n,g]),Ka=Ud.med(b,n),Va=Ud.med(n,g),Za=Ud.med(g,b),lb=Ud.dist(Ka,sa)*ia,vb=Ud.dist(Va,sa)*ia;ia*=Ud.dist(Za,sa);return[b,lb?Ud.nudge(Ka,sa,lb):Ka,n,vb?Ud.nudge(Va,sa,vb):Va,g,ia?Ud.nudge(Za,
sa,ia):Za]});Ma(Di,"getStarVertices",(b,g,n,I=1)=>{const W=Ud.div(g,2),ia=Ud.mul(W,I/2),sa=Ak/n/2;return Array.from(Array(2*n)).map((Ka,Va)=>{Ka=-Em+Va*sa;const [Za,lb]=Va%2?ia:W;return Ud.add(b,[Za*Math.cos(Ka),lb*Math.sin(Ka)])})});var po=class{static getCurvedPathForPolygon(b){if(3>b.length)return"M -4, 0\n      a 4,4 0 1,0 8,0\n      a 4,4 0 1,0 -8,0";const g=["M",...b[0].slice(0,2),"Q"],n=b.length;for(let I=1;I<n;I++){const [W,ia]=b[I],[sa,Ka]=b[(I+1)%n];g.push(W,ia,(W+sa)/2,(ia+Ka)/2)}g.push("Z");
return g.join(" ")}static getCurvedPathForPoints(b){if(3>b.length)return"M -4, 0\n      a 4,4 0 1,0 8,0\n      a 4,4 0 1,0 -8,0";const g=["M",...b[0].slice(0,2),"Q"],n=b.length;for(let I=1;I<n-1;I++){const [W,ia]=b[I],[sa,Ka]=b[I+1];g.push(W,ia,(W+sa)/2,(ia+Ka)/2)}return g.join(" ")}static getSvgPathFromStroke(b,g=!0){const n=b.length;if(4>n)return"";let I=b[0],W=b[1];var ia=b[2];ia=`M${I[0].toFixed(2)},${I[1].toFixed(2)} Q${W[0].toFixed(2)},${W[1].toFixed(2)} ${((W[0]+ia[0])/2).toFixed(2)},${((W[1]+
ia[1])/2).toFixed(2)} T`;for(let sa=2,Ka=n-1;sa<Ka;sa++)I=b[sa],W=b[sa+1],ia+=`${((I[0]+W[0])/2).toFixed(2)},${((I[1]+W[1])/2).toFixed(2)} `;g&&(ia+="Z");return ia}static getSvgPathFromStrokePoints(b,g=!1){const n=b.length;if(4>n)return"";let I=b[0].point,W=b[1].point;var ia=b[2].point;ia=`M${I[0].toFixed(2)},${I[1].toFixed(2)} Q${W[0].toFixed(2)},${W[1].toFixed(2)} ${((W[0]+ia[0])/2).toFixed(2)},${((W[1]+ia[1])/2).toFixed(2)} T`;for(let sa=2,Ka=n-1;sa<Ka;sa++)I=b[sa].point,W=b[sa+1].point,ia+=`${((I[0]+
W[0])/2).toFixed(2)},${((I[1]+W[1])/2).toFixed(2)} `;g&&(ia+="Z");return ia}};Ma(po,"TRIM_NUMBERS",/(\s?[A-Z]?,?-?[0-9]*\.[0-9]{0,2})(([0-9]|e|-)*)/g);var ps={},am=Object.assign,dp=Object.getOwnPropertyDescriptor,Om=Object.defineProperty,ko=Object.prototype,Mo=[];Object.freeze(Mo);var oq={};Object.freeze(oq);var os="undefined"!==typeof Proxy,ns=Object.toString(),No=function(){},mg="undefined"!==typeof Object.getOwnPropertySymbols,cp="undefined"!==typeof Reflect&&Reflect.ownKeys?Reflect.ownKeys:mg?
function(b){return Object.getOwnPropertyNames(b).concat(Object.getOwnPropertySymbols(b))}:Object.getOwnPropertyNames,ms=Object.getOwnPropertyDescriptors||function(b){var g={};cp(b).forEach(function(n){g[n]=dp(b,n)});return g},ol=Symbol("mobx-stored-annotations"),Sg=Symbol("mobx administration"),qo=function(){function b(n){void 0===n&&(n="Atom");this.name_=void 0;this.isBeingObserved_=this.isPendingUnobservation_=!1;this.observers_=new Set;this.lastAccessedBy_=this.diffValue_=0;this.lowestObserverState_=
Uc.NOT_TRACKING_;this.onBUOL=this.onBOL=void 0;this.name_=n}var g=b.prototype;g.onBO=function(){this.onBOL&&this.onBOL.forEach(function(n){return n()})};g.onBUO=function(){this.onBUOL&&this.onBUOL.forEach(function(n){return n()})};g.reportObserved=function(){return Mb(this)};g.reportChanged=function(){pd();fc(this);Rd()};g.toString=function(){return this.name_};return b}(),fp=D("Atom",qo),Po={identity:function(b,g){return b===g},structural:function(b,g){return ta(b,g)},"default":function(b,g){return Object.is?
Object.is(b,g):b===g?0!==b||1/b===1/g:b!==b&&g!==g},shallow:function(b,g){return ta(b,g,1)}},qs="override",no=ob(),mo={deep:!0,name:void 0,defaultDecorator:void 0,proxy:!0};Object.freeze(mo);var br=Wb("observable"),$q=Wb("observable.ref",{enhancer:gb}),lo=Wb("observable.shallow",{enhancer:function(b,g,n){if(void 0===b||null===b||Xd(b)||jb(b)||Lp(b)||Dq(b))return b;if(Array.isArray(b))return Bg.array(b,{name:n,deep:!1});if(H(b))return Bg.object(b,void 0,{name:n,deep:!1});if(N(b))return Bg.map(b,{name:n,
deep:!1});if(P(b))return Bg.set(b,{name:n,deep:!1})}}),ar=Wb("observable.struct",{enhancer:function(b,g){return ta(b,g)?g:b}}),zp=Ua(br);Object.assign(ad,zp);var cr={box:function(b,g){g=g||mo;return new Da(b,Ic(g),g.name,!0,g.equals)},array:function(b,g){g=g||mo;return(!1===ve.useProxies||!1===g.proxy?jf:bb)(b,Ic(g),g.name)},map:function(b,g){g=g||mo;return new cy(b,Ic(g),g.name)},set:function(b,g){g=g||mo;return new dy(b,Ic(g),g.name)},object:function(b,g,n){if(!1===ve.useProxies||!1===(null==n?
void 0:n.proxy))n=Cd({},n);else{var I={},W,ia;ka();I=Cd(I,n);n=null!=(ia=(W=I[Sg]).proxy_)?ia:W.proxy_=new Proxy(I,nC)}return qc(n,b,g)},ref:Ua($q),shallow:Ua(lo),deep:zp,struct:Ua(ar)},Bg=am(ad,cr),Bt=Bb("computed"),zt=Bb("computed.struct",{equals:Po.structural}),Eg=function(b,g){if(Y(g))return Ea(b,g,Bt);if(H(b))return Ua(Bb("computed",b));g=H(g)?g:{};g.get=b;g.name||(g.name=b.name||"");return new oc(g)};Object.assign(Eg,Bt);Eg.struct=Ua(zt);var At,Ct,So=0,hv=1,dr=null!=(At=null==(Ct=dp(function(){},
"name"))?void 0:Ct.configurable)?At:!1,T={value:"action",configurable:!0,writable:!1,enumerable:!1};var la=Symbol.toPrimitive;var Da=function(b){function g(I,W,ia,sa,Ka){void 0===ia&&(ia="ObservableValue");void 0===Ka&&(Ka=Po["default"]);sa=b.call(this,ia)||this;sa.enhancer=void 0;sa.hasUnreportedChange_=!1;sa.interceptors_=void 0;sa.changeListeners_=void 0;sa.value_=void 0;sa.dehancer=void 0;sa.enhancer=W;sa.name_=ia;sa.equals=Ka;sa.value_=W(I,void 0,ia);return sa}ea(g,b);var n=g.prototype;n.dehanceValue=
function(I){return void 0!==this.dehancer?this.dehancer(I):I};n.set=function(I){I=this.prepareNewValue_(I);I!==ve.UNCHANGED&&this.setNewValue_(I)};n.prepareNewValue_=function(I){if(be(this)){I=mc(this,{object:this,type:To,newValue:I});if(!I)return ve.UNCHANGED;I=I.newValue}I=this.enhancer(I,this.value_,this.name_);return this.equals(this.value_,I)?ve.UNCHANGED:I};n.setNewValue_=function(I){var W=this.value_;this.value_=I;this.reportChanged();Me(this)&&ef(this,{type:To,object:this,newValue:I,oldValue:W})};
n.get=function(){this.reportObserved();return this.dehanceValue(this.value_)};n.intercept_=function(I){return rd(this,I)};n.observe_=function(I,W){W&&I({observableKind:"value",debugObjectName:this.name_,object:this,type:To,newValue:this.value_,oldValue:void 0});return Yf(this,I)};n.raw=function(){return this.value_};n.toJSON=function(){return this.get()};n.toString=function(){return this.name_+"["+this.value_+"]"};n.valueOf=function(){return X(this.get())};n[la]=function(){return this.valueOf()};
return g}(qo),hb=D("ObservableValue",Da);var Ib=Symbol.toPrimitive;var oc=function(){function b(n){this.dependenciesState_=Uc.NOT_TRACKING_;this.observing_=[];this.newObserving_=null;this.isPendingUnobservation_=this.isBeingObserved_=!1;this.observers_=new Set;this.lastAccessedBy_=this.runId_=this.diffValue_=0;this.lowestObserverState_=Uc.UP_TO_DATE_;this.unboundDepsCount_=0;this.value_=new Ce(null);this.triggeredBy_=this.name_=void 0;this.isRunningSetter_=this.isComputing_=!1;this.setter_=this.derivation=
void 0;this.isTracing_=Pd.NONE;this.onBUOL=this.onBOL=this.keepAlive_=this.requiresReaction_=this.equals_=this.scope_=void 0;n.get||m(31);this.derivation=n.get;this.name_=n.name||"ComputedValue";n.set&&(this.setter_=Mc("ComputedValue-setter",n.set));this.equals_=n.equals||(n.compareStructural||n.struct?Po.structural:Po["default"]);this.scope_=n.context;this.requiresReaction_=n.requiresReaction;this.keepAlive_=!!n.keepAlive}var g=b.prototype;g.onBecomeStale_=function(){sb(this)};g.onBO=function(){this.onBOL&&
this.onBOL.forEach(function(n){return n()})};g.onBUO=function(){this.onBUOL&&this.onBUOL.forEach(function(n){return n()})};g.get=function(){this.isComputing_&&m(32,this.name_,this.derivation);if(0!==ve.inBatch||0!==this.observers_.size||this.keepAlive_){if(Mb(this),Wc(this)){var n=ve.trackingContext;this.keepAlive_&&!n&&(ve.trackingContext=this);this.trackAndCompute()&&Xb(this);ve.trackingContext=n}}else Wc(this)&&(this.warnAboutUntrackedRead_(),pd(),this.value_=this.computeValue_(!1),Rd());n=this.value_;
if(n instanceof Ce)throw n.cause;return n};g.set=function(n){if(this.setter_){this.isRunningSetter_&&m(33,this.name_);this.isRunningSetter_=!0;try{this.setter_.call(this.scope_,n)}finally{this.isRunningSetter_=!1}}else m(34,this.name_)};g.trackAndCompute=function(){var n=this.value_,I=this.dependenciesState_===Uc.NOT_TRACKING_,W=this.computeValue_(!0);if(n=I||n instanceof Ce||W instanceof Ce||!this.equals_(n,W))this.value_=W;return n};g.computeValue_=function(n){this.isComputing_=!0;var I=wc(!1);
if(n)var W=id(this,this.derivation,this.scope_);else if(!0===ve.disableErrorBoundaries)W=this.derivation.call(this.scope_);else try{W=this.derivation.call(this.scope_)}catch(ia){W=new Ce(ia)}ve.allowStateChanges=I;this.isComputing_=!1;return W};g.suspend_=function(){this.keepAlive_||(Kd(this),this.value_=void 0)};g.observe_=function(n,I){var W=this,ia=!0,sa=void 0;return Ld(function(){var Ka=W.get();if(!ia||I){var Va=pc();n({observableKind:"computed",debugObjectName:W.name_,type:To,object:W,newValue:Ka,
oldValue:sa});ve.trackingDerivation=Va}ia=!1;sa=Ka})};g.warnAboutUntrackedRead_=function(){};g.toString=function(){return this.name_+"["+this.derivation.toString()+"]"};g.valueOf=function(){return X(this.get())};g[Ib]=function(){return this.valueOf()};return b}(),Hc=D("ComputedValue",oc),Uc;(function(b){b[b.NOT_TRACKING_=-1]="NOT_TRACKING_";b[b.UP_TO_DATE_=0]="UP_TO_DATE_";b[b.POSSIBLY_STALE_=1]="POSSIBLY_STALE_";b[b.STALE_=2]="STALE_"})(Uc||={});var Pd;(function(b){b[b.NONE=0]="NONE";b[b.LOG=1]=
"LOG";b[b.BREAK=2]="BREAK"})(Pd||={});var Ce=function(b){this.cause=void 0;this.cause=b},bg=function(){this.version=6;this.UNCHANGED={};this.trackingContext=this.trackingDerivation=null;this.inBatch=this.mobxGuid=this.runId=0;this.pendingUnobservations=[];this.pendingReactions=[];this.allowStateChanges=this.isRunningReactions=!1;this.enforceActions=this.allowStateReads=!0;this.spyListeners=[];this.globalReactionErrorHandlers=[];this.suppressReactionErrors=this.disableErrorBoundaries=this.observableRequiresReaction=
this.reactionRequiresObservable=this.computedRequiresReaction=!1;this.useProxies=!0;this.verifyProxies=!1;this.safeDescriptors=!0},oh=!0,pf=!1,ve=function(){var b=R();0<b.__mobxInstanceCount&&!b.__mobxGlobals&&(oh=!1);b.__mobxGlobals&&b.__mobxGlobals.version!==(new bg).version&&(oh=!1);if(oh){if(b.__mobxGlobals)return b.__mobxInstanceCount+=1,b.__mobxGlobals.UNCHANGED||(b.__mobxGlobals.UNCHANGED={}),b.__mobxGlobals;b.__mobxInstanceCount=1;return b.__mobxGlobals=new bg}setTimeout(function(){pf||m(35)},
1);return new bg}(),eh=function(){function b(n,I,W,ia){void 0===n&&(n="Reaction");this.requiresObservable_=this.errorHandler_=this.onInvalidate_=this.name_=void 0;this.observing_=[];this.newObserving_=[];this.dependenciesState_=Uc.NOT_TRACKING_;this.unboundDepsCount_=this.runId_=this.diffValue_=0;this.isRunning_=this.isTrackPending_=this.isScheduled_=this.isDisposed_=!1;this.isTracing_=Pd.NONE;this.name_=n;this.onInvalidate_=I;this.errorHandler_=W;this.requiresObservable_=ia}var g=b.prototype;g.onBecomeStale_=
function(){this.schedule_()};g.schedule_=function(){this.isScheduled_||(this.isScheduled_=!0,ve.pendingReactions.push(this),0<ve.inBatch||ve.isRunningReactions||me(nb))};g.isScheduled=function(){return this.isScheduled_};g.runReaction_=function(){if(!this.isDisposed_){pd();this.isScheduled_=!1;var n=ve.trackingContext;ve.trackingContext=this;if(Wc(this)){this.isTrackPending_=!0;try{this.onInvalidate_()}catch(I){this.reportExceptionInDerivation_(I)}}ve.trackingContext=n;Rd()}};g.track=function(n){if(!this.isDisposed_){pd();
this.isRunning_=!0;var I=ve.trackingContext;ve.trackingContext=this;n=id(this,n,void 0);ve.trackingContext=I;this.isTrackPending_=this.isRunning_=!1;this.isDisposed_&&Kd(this);n instanceof Ce&&this.reportExceptionInDerivation_(n.cause);Rd()}};g.reportExceptionInDerivation_=function(n){var I=this;if(this.errorHandler_)this.errorHandler_(n,this);else{if(ve.disableErrorBoundaries)throw n;ve.suppressReactionErrors||console.error("[mobx] uncaught error in '"+this+"'",n);ve.globalReactionErrorHandlers.forEach(function(W){return W(n,
I)})}};g.dispose=function(){this.isDisposed_||(this.isDisposed_=!0,this.isRunning_||(pd(),Kd(this),Rd()))};g.getDisposer_=function(){var n=this.dispose.bind(this);n[Sg]=this;return n};g.toString=function(){return"Reaction["+this.name_+"]"};g.trace=function(n){void 0===n&&(n=!1);Cb(this,n)};return b}(),kh=100,me=function(b){return b()},Wd=D("Reaction",eh),ke="action",cf=fb(ke),nf=fb("action.bound",{bound:!0}),Ah=fb("autoAction",{autoAction:!0}),xg=fb("autoAction.bound",{autoAction:!0,bound:!0}),af=
Tc(!1);Object.assign(af,cf);var Kh=Tc(!0);Object.assign(Kh,Ah);af.bound=Ua(nf);Kh.bound=Ua(xg);var Oh=function(b){return b()},Lo="onBO",gv="onBUO",oC=0;Rb.prototype=Object.create(Error.prototype);var by=ra("flow"),mC=ra("flow.bound",{bound:!0}),us=Object.assign(function(b,g){if(Y(g))return Ea(b,g,by);var n=b.name||"\x3cunnamed flow\x3e";g=function(){var I=arguments,W=++oC,ia=af(n+" - runid: "+W+" - init",b).apply(this,I),sa,Ka=void 0;I=new Promise(function(Va,Za){function lb(Ub){Ka=void 0;try{var rc=
af(n+" - runid: "+W+" - yield "+cc++,ia.next).call(ia,Ub)}catch(lc){return Za(lc)}Qb(rc)}function vb(Ub){Ka=void 0;try{var rc=af(n+" - runid: "+W+" - yield "+cc++,ia["throw"]).call(ia,Ub)}catch(lc){return Za(lc)}Qb(rc)}function Qb(Ub){if(ma(null==Ub?void 0:Ub.then))Ub.then(Qb,Za);else{if(Ub.done)return Va(Ub.value);Ka=Promise.resolve(Ub.value);return Ka.then(lb,vb)}}var cc=0;sa=Za;lb(void 0)});I.cancel=af(n+" - runid: "+W+" - cancel",function(){try{if(Ka){var Va=Ka;ma(Va.cancel)&&Va.cancel()}var Za=
ia["return"](void 0),lb=Promise.resolve(Za.value);lb.then(No,No);ma(lb.cancel)&&lb.cancel();sa(new Rb)}catch(vb){sa(vb)}});return I};g.isMobXFlow=!0;return g},by);us.bound=Ua(mC);var nC={has:function(b,g){return b[Sg].has_(g)},get:function(b,g){return b[Sg].get_(g)},set:function(b,g,n){var I;return Y(g)?null!=(I=b[Sg].set_(g,n,!0))?I:!0:!1},deleteProperty:function(b,g){var n;return Y(g)?null!=(n=b[Sg].delete_(g,!0))?n:!0:!1},defineProperty:function(b,g,n){var I;return null!=(I=b[Sg].defineProperty_(g,
n))?I:!0},ownKeys:function(b){return b[Sg].ownKeys_()},preventExtensions:function(b){m(13)}},To="update",lC={get:function(b,g){var n=b[Sg];return g===Sg?n:"length"===g?n.getArrayLength_():"string"!==typeof g||isNaN(g)?F(It,g)?It[g]:b[g]:n.get_(parseInt(g))},set:function(b,g,n){var I=b[Sg];"length"===g&&I.setArrayLength_(n);"symbol"===typeof g||isNaN(g)?b[g]=n:I.set_(parseInt(g),n);return!0},preventExtensions:function(){m(15)}},qv=function(){function b(n,I,W,ia){void 0===n&&(n="ObservableArray");this.atom_=
this.legacyMode_=this.owned_=void 0;this.values_=[];this.proxy_=this.dehancer=this.enhancer_=this.changeListeners_=this.interceptors_=void 0;this.lastKnownLength_=0;this.owned_=W;this.legacyMode_=ia;this.atom_=new qo(n);this.enhancer_=function(sa,Ka){return I(sa,Ka,"ObservableArray[..]")}}var g=b.prototype;g.dehanceValue_=function(n){return void 0!==this.dehancer?this.dehancer(n):n};g.dehanceValues_=function(n){return void 0!==this.dehancer&&0<n.length?n.map(this.dehancer):n};g.intercept_=function(n){return rd(this,
n)};g.observe_=function(n,I){void 0===I&&(I=!1);I&&n({observableKind:"array",object:this.proxy_,debugObjectName:this.atom_.name_,type:"splice",index:0,added:this.values_.slice(),addedCount:this.values_.length,removed:[],removedCount:0});return Yf(this,n)};g.getArrayLength_=function(){this.atom_.reportObserved();return this.values_.length};g.setArrayLength_=function(n){("number"!==typeof n||isNaN(n)||0>n)&&m("Out of range: "+n);var I=this.values_.length;if(n!==I)if(n>I){for(var W=Array(n-I),ia=0;ia<
n-I;ia++)W[ia]=void 0;this.spliceWithArray_(I,0,W)}else this.spliceWithArray_(n,I-n)};g.updateArrayLength_=function(n,I){n!==this.lastKnownLength_&&m(16);this.lastKnownLength_+=I;this.legacyMode_&&0<I&&se(n+I+1)};g.spliceWithArray_=function(n,I,W){var ia=this,sa=this.values_.length;void 0===n?n=0:n>sa?n=sa:0>n&&(n=Math.max(0,sa+n));I=1===arguments.length?sa-n:void 0===I||null===I?0:Math.max(0,Math.min(I,sa-n));void 0===W&&(W=Mo);if(be(this)){var Ka=mc(this,{object:this.proxy_,type:"splice",index:n,
removedCount:I,added:W});if(!Ka)return Mo;I=Ka.removedCount;W=Ka.added}W=0===W.length?W:W.map(function(Va){return ia.enhancer_(Va,void 0)});this.legacyMode_&&this.updateArrayLength_(sa,W.length-I);sa=this.spliceItemsIntoValues_(n,I,W);0===I&&0===W.length||this.notifyArraySplice_(n,W,sa);return this.dehanceValues_(sa)};g.spliceItemsIntoValues_=function(n,I,W){if(1E4>W.length){var ia;return(ia=this.values_).splice.apply(ia,[n,I].concat(W))}ia=this.values_.slice(n,n+I);var sa=this.values_.slice(n+I);
this.values_.length+=W.length-I;for(I=0;I<W.length;I++)this.values_[n+I]=W[I];for(I=0;I<sa.length;I++)this.values_[n+W.length+I]=sa[I];return ia};g.notifyArrayChildUpdate_=function(n,I,W){var ia=!this.owned_&&!1,sa=Me(this);n=sa||ia?{observableKind:"array",object:this.proxy_,type:To,debugObjectName:this.atom_.name_,index:n,newValue:I,oldValue:W}:null;this.atom_.reportChanged();sa&&ef(this,n)};g.notifyArraySplice_=function(n,I,W){var ia=!this.owned_&&!1,sa=Me(this);n=sa||ia?{observableKind:"array",
object:this.proxy_,debugObjectName:this.atom_.name_,type:"splice",index:n,removed:W,added:I,removedCount:W.length,addedCount:I.length}:null;this.atom_.reportChanged();sa&&ef(this,n)};g.get_=function(n){if(this.legacyMode_&&n>=this.values_.length)console.warn("[mobx] Out of bounds read: "+n);else return this.atom_.reportObserved(),this.dehanceValue_(this.values_[n])};g.set_=function(n,I){var W=this.values_;this.legacyMode_&&n>W.length&&m(17,n,W.length);if(n<W.length){var ia=W[n];if(be(this)){I=mc(this,
{type:To,object:this.proxy_,index:n,newValue:I});if(!I)return;I=I.newValue}I=this.enhancer_(I,ia);I!==ia&&(W[n]=I,this.notifyArrayChildUpdate_(n,I,ia))}else{n=Array(n+1-W.length);for(ia=0;ia<n.length-1;ia++)n[ia]=void 0;n[n.length-1]=I;this.spliceWithArray_(W.length,0,n)}};return b}(),It={clear:function(){return this.splice(0)},replace:function(b){var g=this[Sg];return g.spliceWithArray_(0,g.values_.length,b)},toJSON:function(){return this.slice()},splice:function(b,g){for(var n=arguments.length,
I=Array(2<n?n-2:0),W=2;W<n;W++)I[W-2]=arguments[W];n=this[Sg];switch(arguments.length){case 0:return[];case 1:return n.spliceWithArray_(b);case 2:return n.spliceWithArray_(b,g)}return n.spliceWithArray_(b,g,I)},spliceWithArray:function(b,g,n){return this[Sg].spliceWithArray_(b,g,n)},push:function(){for(var b=this[Sg],g=arguments.length,n=Array(g),I=0;I<g;I++)n[I]=arguments[I];b.spliceWithArray_(b.values_.length,0,n);return b.values_.length},pop:function(){return this.splice(Math.max(this[Sg].values_.length-
1,0),1)[0]},shift:function(){return this.splice(0,1)[0]},unshift:function(){for(var b=this[Sg],g=arguments.length,n=Array(g),I=0;I<g;I++)n[I]=arguments[I];b.spliceWithArray_(0,0,n);return b.values_.length},reverse:function(){ve.trackingDerivation&&m(37,"reverse");this.replace(this.slice().reverse());return this},sort:function(){ve.trackingDerivation&&m(37,"sort");var b=this.slice();b.sort.apply(b,arguments);this.replace(b);return this},remove:function(b){var g=this[Sg];b=g.dehanceValues_(g.values_).indexOf(b);
return-1<b?(this.splice(b,1),!0):!1}};Db("concat",eb);Db("flat",eb);Db("includes",eb);Db("indexOf",eb);Db("join",eb);Db("lastIndexOf",eb);Db("slice",eb);Db("toString",eb);Db("toLocaleString",eb);Db("every",Eb);Db("filter",Eb);Db("find",Eb);Db("findIndex",Eb);Db("flatMap",Eb);Db("forEach",Eb);Db("map",Eb);Db("some",Eb);Db("reduce",gc);Db("reduceRight",gc);var pC=D("ObservableArrayAdministration",qv),qC={};var rC=Symbol.iterator;var sC=Symbol.toStringTag;var cy=function(){function b(n,I,W){var ia=this;
void 0===I&&(I=Na);void 0===W&&(W="ObservableMap");this.name_=this.enhancer_=void 0;this[Sg]=qC;this.dehancer=this.changeListeners_=this.interceptors_=this.keysAtom_=this.hasMap_=this.data_=void 0;this.enhancer_=I;this.name_=W;ma(Map)||m(18);this.keysAtom_=Ya("ObservableMap.keys()");this.data_=new Map;this.hasMap_=new Map;Gb(!0,function(){ia.merge(n)})}var g=b.prototype;g.has_=function(n){return this.data_.has(n)};g.has=function(n){var I=this;if(!ve.trackingDerivation)return this.has_(n);var W=this.hasMap_.get(n);
if(!W){var ia=W=new Da(this.has_(n),gb,"ObservableMap.key?",!1);this.hasMap_.set(n,ia);uc(ia,function(){return I.hasMap_["delete"](n)})}return W.get()};g.set=function(n,I){var W=this.has_(n);if(be(this)){I=mc(this,{type:W?To:"add",object:this,newValue:I,name:n});if(!I)return this;I=I.newValue}W?this.updateValue_(n,I):this.addValue_(n,I);return this};g["delete"]=function(n){var I=this;if(be(this)&&!mc(this,{type:"delete",object:this,name:n}))return!1;if(this.has_(n)){var W=Me(this),ia=W?{observableKind:"map",
debugObjectName:this.name_,type:"delete",object:this,oldValue:this.data_.get(n).value_,name:n}:null;Hd(function(){var sa;I.keysAtom_.reportChanged();null==(sa=I.hasMap_.get(n))?void 0:sa.setNewValue_(!1);I.data_.get(n).setNewValue_(void 0);I.data_["delete"](n)});W&&ef(this,ia);return!0}return!1};g.updateValue_=function(n,I){var W=this.data_.get(n);I=W.prepareNewValue_(I);if(I!==ve.UNCHANGED){var ia=Me(this);n=ia?{observableKind:"map",debugObjectName:this.name_,type:To,object:this,oldValue:W.value_,
name:n,newValue:I}:null;W.setNewValue_(I);ia&&ef(this,n)}};g.addValue_=function(n,I){var W=this;Hd(function(){var Ka,Va=new Da(I,W.enhancer_,"ObservableMap.key",!1);W.data_.set(n,Va);I=Va.value_;null==(Ka=W.hasMap_.get(n))?void 0:Ka.setNewValue_(!0);W.keysAtom_.reportChanged()});var ia=Me(this),sa=ia?{observableKind:"map",debugObjectName:this.name_,type:"add",object:this,name:n,newValue:I}:null;ia&&ef(this,sa)};g.get=function(n){return this.has(n)?this.dehanceValue_(this.data_.get(n).get()):this.dehanceValue_(void 0)};
g.dehanceValue_=function(n){return void 0!==this.dehancer?this.dehancer(n):n};g.keys=function(){this.keysAtom_.reportObserved();return this.data_.keys()};g.values=function(){var n=this,I=this.keys();return db({next:function(){var W=I.next(),ia=W.done;W=W.value;return{done:ia,value:ia?void 0:n.get(W)}}})};g.entries=function(){var n=this,I=this.keys();return db({next:function(){var W=I.next(),ia=W.done;W=W.value;return{done:ia,value:ia?void 0:[W,n.get(W)]}}})};g[rC]=function(){return this.entries()};
g.forEach=function(n,I){for(var W=Ga(this),ia;!(ia=W()).done;)ia=ia.value,n.call(I,ia[1],ia[0],this)};g.merge=function(n){var I=this;Lp(n)&&(n=new Map(n));Hd(function(){H(n)?ba(n).forEach(function(W){return I.set(W,n[W])}):Array.isArray(n)?n.forEach(function(W){return I.set(W[0],W[1])}):N(n)?(n.constructor!==Map&&m(19,n),n.forEach(function(W,ia){return I.set(ia,W)})):null!==n&&void 0!==n&&m(20,n)});return this};g.clear=function(){var n=this;Hd(function(){Jd(function(){for(var I=Ga(n.keys()),W;!(W=
I()).done;)n["delete"](W.value)})})};g.replace=function(n){var I=this;Hd(function(){for(var W=hd(n),ia=new Map,sa=!1,Ka=Ga(I.data_.keys()),Va;!(Va=Ka()).done;)if(Va=Va.value,!W.has(Va))if(I["delete"](Va))sa=!0;else{var Za=I.data_.get(Va);ia.set(Va,Za)}for(W=Ga(W.entries());!(Ka=W()).done;)Va=Ka.value,Ka=Va[0],Za=Va[1],Va=I.data_.has(Ka),I.set(Ka,Za),I.data_.has(Ka)&&(Za=I.data_.get(Ka),ia.set(Ka,Za),Va||(sa=!0));if(!sa)if(I.data_.size!==ia.size)I.keysAtom_.reportChanged();else for(sa=I.data_.keys(),
W=ia.keys(),Ka=sa.next(),Va=W.next();!Ka.done;){if(Ka.value!==Va.value){I.keysAtom_.reportChanged();break}Ka=sa.next();Va=W.next()}I.data_=ia});return this};g.toString=function(){return"[object ObservableMap]"};g.toJSON=function(){return Array.from(this)};g.observe_=function(n,I){return Yf(this,n)};g.intercept_=function(n){return rd(this,n)};K(b,[{key:"size",get:function(){this.keysAtom_.reportObserved();return this.data_.size}},{key:sC,get:function(){return"Map"}}]);return b}(),Lp=D("ObservableMap",
cy),tC={};var uC=Symbol.iterator;var vC=Symbol.toStringTag;var dy=function(){function b(n,I,W){void 0===I&&(I=Na);void 0===W&&(W="ObservableSet");this.name_=void 0;this[Sg]=tC;this.data_=new Set;this.enhancer_=this.dehancer=this.interceptors_=this.changeListeners_=this.atom_=void 0;this.name_=W;ma(Set)||m(22);this.atom_=Ya(this.name_);this.enhancer_=function(ia,sa){return I(ia,sa,W)};n&&this.replace(n)}var g=b.prototype;g.dehanceValue_=function(n){return void 0!==this.dehancer?this.dehancer(n):n};
g.clear=function(){var n=this;Hd(function(){Jd(function(){for(var I=Ga(n.data_.values()),W;!(W=I()).done;)n["delete"](W.value)})})};g.forEach=function(n,I){for(var W=Ga(this),ia;!(ia=W()).done;)ia=ia.value,n.call(I,ia,ia,this)};g.add=function(n){var I=this;if(be(this)&&!mc(this,{type:"add",object:this,newValue:n}))return this;if(!this.has(n)){Hd(function(){I.data_.add(I.enhancer_(n,void 0));I.atom_.reportChanged()});var W=Me(this),ia=W?{observableKind:"set",debugObjectName:this.name_,type:"add",object:this,
newValue:n}:null;W&&ef(this,ia)}return this};g["delete"]=function(n){var I=this;if(be(this)&&!mc(this,{type:"delete",object:this,oldValue:n}))return!1;if(this.has(n)){var W=Me(this),ia=W?{observableKind:"set",debugObjectName:this.name_,type:"delete",object:this,oldValue:n}:null;Hd(function(){I.atom_.reportChanged();I.data_["delete"](n)});W&&ef(this,ia);return!0}return!1};g.has=function(n){this.atom_.reportObserved();return this.data_.has(this.dehanceValue_(n))};g.entries=function(){var n=0,I=Array.from(this.keys()),
W=Array.from(this.values());return db({next:function(){var ia=n;n+=1;return ia<W.length?{value:[I[ia],W[ia]],done:!1}:{done:!0}}})};g.keys=function(){return this.values()};g.values=function(){this.atom_.reportObserved();var n=this,I=0,W=Array.from(this.data_.values());return db({next:function(){return I<W.length?{value:n.dehanceValue_(W[I++]),done:!1}:{done:!0}}})};g.replace=function(n){var I=this;Dq(n)&&(n=new Set(n));Hd(function(){Array.isArray(n)?(I.clear(),n.forEach(function(W){return I.add(W)})):
P(n)?(I.clear(),n.forEach(function(W){return I.add(W)})):null!==n&&void 0!==n&&m("Cannot initialize set from "+n)});return this};g.observe_=function(n,I){return Yf(this,n)};g.intercept_=function(n){return rd(this,n)};g.toJSON=function(){return Array.from(this)};g.toString=function(){return"[object ObservableSet]"};g[uC]=function(){return this.values()};K(b,[{key:"size",get:function(){this.atom_.reportObserved();return this.data_.size}},{key:vC,get:function(){return"Set"}}]);return b}(),Dq=D("ObservableSet",
dy),ey=Object.create(null),fy=function(){function b(n,I,W,ia){void 0===I&&(I=new Map);void 0===ia&&(ia=no);this.pendingKeys_=this.appliedAnnotations_=this.isPlainObject_=this.proxy_=this.interceptors_=this.changeListeners_=this.keysAtom_=this.defaultAnnotation_=this.values_=this.target_=void 0;this.target_=n;this.values_=I;this.name_=W;this.defaultAnnotation_=ia;this.keysAtom_=new qo("ObservableObject.keys");this.isPlainObject_=H(this.target_)}var g=b.prototype;g.getObservablePropValue_=function(n){return this.values_.get(n).get()};
g.setObservablePropValue_=function(n,I){var W=this.values_.get(n);if(W instanceof oc)return W.set(I),!0;if(be(this)){I=mc(this,{type:To,object:this.proxy_||this.target_,name:n,newValue:I});if(!I)return null;I=I.newValue}I=W.prepareNewValue_(I);if(I!==ve.UNCHANGED){var ia=Me(this);n=ia?{type:To,observableKind:"object",debugObjectName:this.name_,object:this.proxy_||this.target_,oldValue:W.value_,name:n,newValue:I}:null;W.setNewValue_(I);ia&&ef(this,n)}return!0};g.get_=function(n){ve.trackingDerivation&&
!F(this.target_,n)&&this.has_(n);return this.target_[n]};g.set_=function(n,I,W){void 0===W&&(W=!1);if(F(this.target_,n)){if(this.values_.has(n))return this.setObservablePropValue_(n,I);if(W)return Reflect.set(this.target_,n,I);this.target_[n]=I;return!0}return this.extend_(n,{value:I,enumerable:!0,writable:!0,configurable:!0},this.defaultAnnotation_,W)};g.has_=function(n){if(!ve.trackingDerivation)return n in this.target_;this.pendingKeys_||(this.pendingKeys_=new Map);var I=this.pendingKeys_.get(n);
I||(I=new Da(n in this.target_,gb,"ObservableObject.key?",!1),this.pendingKeys_.set(n,I));return I.get()};g.make_=function(n,I){!0===I&&(I=this.defaultAnnotation_);if(!1!==I){if(!(n in this.target_)){var W;if(null!=(W=this.target_[ol])&&W[n])return;m(1,I.annotationType_,this.name_+"."+n.toString())}for(W=this.target_;W&&W!==ko;){var ia=dp(W,n);if(ia){ia=I.make_(this,n,ia,W);if(0===ia)return;if(1===ia)break}W=Object.getPrototypeOf(W)}var sa;null==(sa=this.target_[ol])?!0:delete sa[n]}};g.extend_=function(n,
I,W,ia){void 0===ia&&(ia=!1);!0===W&&(W=this.defaultAnnotation_);if(!1===W)return this.defineProperty_(n,I,ia);if(I=W.extend_(this,n,I,ia)){var sa;null==(sa=this.target_[ol])?!0:delete sa[n]}return I};g.defineProperty_=function(n,I,W){void 0===W&&(W=!1);try{pd();var ia=this.delete_(n);if(!ia)return ia;if(be(this)){var sa=mc(this,{object:this.proxy_||this.target_,name:n,type:"add",newValue:I.value});if(!sa)return null;var Ka=sa.newValue;I.value!==Ka&&(I=Z({},I,{value:Ka}))}if(W){if(!Reflect.defineProperty(this.target_,
n,I))return!1}else Om(this.target_,n,I);this.notifyPropertyAddition_(n,I.value)}finally{Rd()}return!0};g.defineObservableProperty_=function(n,I,W,ia){void 0===ia&&(ia=!1);try{pd();var sa=this.delete_(n);if(!sa)return sa;if(be(this)){var Ka=mc(this,{object:this.proxy_||this.target_,name:n,type:"add",newValue:I});if(!Ka)return null;I=Ka.newValue}var Va=he(n),Za={configurable:ve.safeDescriptors?this.isPlainObject_:!0,enumerable:!0,get:Va.get,set:Va.set};if(ia){if(!Reflect.defineProperty(this.target_,
n,Za))return!1}else Om(this.target_,n,Za);var lb=new Da(I,W,"ObservableObject.key",!1);this.values_.set(n,lb);this.notifyPropertyAddition_(n,lb.value_)}finally{Rd()}return!0};g.defineComputedProperty_=function(n,I,W){void 0===W&&(W=!1);try{pd();var ia=this.delete_(n);if(!ia)return ia;if(be(this)&&!mc(this,{object:this.proxy_||this.target_,name:n,type:"add",newValue:void 0}))return null;I.name||(I.name="ObservableObject.key");I.context=this.proxy_||this.target_;var sa=he(n),Ka={configurable:ve.safeDescriptors?
this.isPlainObject_:!0,enumerable:!1,get:sa.get,set:sa.set};if(W){if(!Reflect.defineProperty(this.target_,n,Ka))return!1}else Om(this.target_,n,Ka);this.values_.set(n,new oc(I));this.notifyPropertyAddition_(n,void 0)}finally{Rd()}return!0};g.delete_=function(n,I){void 0===I&&(I=!1);if(!F(this.target_,n))return!0;if(be(this)&&!mc(this,{object:this.proxy_||this.target_,name:n,type:"remove"}))return null;try{var W,ia;pd();var sa=Me(this),Ka=this.values_.get(n),Va=void 0;if(!Ka&&sa){var Za;Va=null==(Za=
dp(this.target_,n))?void 0:Za.value}if(I){if(!Reflect.deleteProperty(this.target_,n))return!1}else delete this.target_[n];Ka&&(this.values_["delete"](n),Ka instanceof Da&&(Va=Ka.value_),fc(Ka));this.keysAtom_.reportChanged();null==(W=this.pendingKeys_)?void 0:null==(ia=W.get(n))?void 0:ia.set(n in this.target_);if(sa){var lb={type:"remove",observableKind:"object",object:this.proxy_||this.target_,debugObjectName:this.name_,oldValue:Va,name:n};sa&&ef(this,lb)}}finally{Rd()}return!0};g.observe_=function(n,
I){return Yf(this,n)};g.intercept_=function(n){return rd(this,n)};g.notifyPropertyAddition_=function(n,I){var W,ia,sa=Me(this);sa&&(I=sa?{type:"add",observableKind:"object",debugObjectName:this.name_,object:this.proxy_||this.target_,name:n,newValue:I}:null,sa&&ef(this,I));null==(W=this.pendingKeys_)?void 0:null==(ia=W.get(n))?void 0:ia.set(!0);this.keysAtom_.reportChanged()};g.ownKeys_=function(){this.keysAtom_.reportObserved();return cp(this.target_)};g.keys_=function(){this.keysAtom_.reportObserved();
return Object.keys(this.target_)};return b}(),wC=D("ObservableObjectAdministration",fy),xC=Xe(0),rv=0,Yx=function(){};(function(b,g){Object.setPrototypeOf?Object.setPrototypeOf(b.prototype,g):void 0!==b.prototype.__proto__?b.prototype.__proto__=g:b.prototype=g})(Yx,Array.prototype);var mv=function(b,g,n){function I(ia,sa,Ka,Va){void 0===Ka&&(Ka="ObservableArray");void 0===Va&&(Va=!1);var Za=b.call(this)||this;sa=new qv(Ka,sa,Va,!0);sa.proxy_=pa(Za);Q(pa(Za),Sg,sa);ia&&ia.length&&(sa=wc(!0),Za.spliceWithArray(0,
0,ia),ve.allowStateChanges=sa);Object.defineProperty(pa(Za),"0",xC);return Za}ea(I,b);var W=I.prototype;W.concat=function(){this[Sg].atom_.reportObserved();for(var ia=arguments.length,sa=Array(ia),Ka=0;Ka<ia;Ka++)sa[Ka]=arguments[Ka];return Array.prototype.concat.apply(this.slice(),sa.map(function(Va){return jb(Va)?Va.slice():Va}))};W[n]=function(){var ia=this,sa=0;return db({next:function(){return sa<ia.length?{value:ia[sa++],done:!1}:{done:!0,value:void 0}}})};K(I,[{key:"length",get:function(){return this[Sg].getArrayLength_()},
set:function(ia){this[Sg].setArrayLength_(ia)}},{key:g,get:function(){return"Array"}}]);return I}(Yx,Symbol.toStringTag,Symbol.iterator);Object.entries(It).forEach(function(b){var g=b[0];b=b[1];"concat"!==g&&M(mv.prototype,g,b)});se(1E3);var Zx=ko.toString;["Symbol","Map","Set"].forEach(function(b){"undefined"===typeof R()[b]&&m("MobX requires global '"+b+"' to be available or polyfilled")});"object"===typeof __MOBX_DEVTOOLS_GLOBAL_HOOK__&&__MOBX_DEVTOOLS_GLOBAL_HOOK__.injectMobx({spy:tc,extras:{getDebugName:Ab},
$mobx:Sg});var pb=V(587),em=class{constructor(b){Ma(this,"props");Ma(this,"aspectRatio");Ma(this,"type");Ma(this,"hideCloneHandles",!1);Ma(this,"hideResizeHandles",!1);Ma(this,"hideRotateHandle",!1);Ma(this,"hideContextBar",!1);Ma(this,"hideSelectionDetail",!1);Ma(this,"hideSelection",!1);Ma(this,"canChangeAspectRatio",!0);Ma(this,"canUnmount",!0);Ma(this,"canResize",[!0,!0]);Ma(this,"canScale",!0);Ma(this,"canFlip",!0);Ma(this,"canEdit",!1);Ma(this,"canBind",!1);Ma(this,"nonce");Ma(this,"bindingDistance",
4);Ma(this,"isDirty",!1);Ma(this,"lastSerialized");Ma(this,"getCenter",()=>Ve.getBoundsCenter(this.bounds));Ma(this,"getRotatedBounds",()=>{const {bounds:ia,props:{rotation:sa}}=this;return sa?Ve.getBoundsFromPoints(Ve.getRotatedCorners(ia,sa)):ia});Ma(this,"hitTestPoint",ia=>{var sa=this.rotatedBounds;if(!this.props.rotation)return Ag.pointInBounds(ia,sa);sa=Ve.getRotatedCorners(sa,this.props.rotation);return Ag.pointInPolygon(ia,sa)});Ma(this,"hitTestLineSegment",(ia,sa)=>{const Ka=Ve.getBoundsFromPoints([ia,
sa]),{rotatedBounds:Va,props:{rotation:Za=0}}=this;return Ve.boundsContain(Va,Ka)||Za?h(ia,sa,Ve.getRotatedCorners(this.bounds)).didIntersect:0<t(Va,ia,sa).length});Ma(this,"hitTestBounds",ia=>{const {rotatedBounds:sa,props:{rotation:Ka=0}}=this,Va=Ve.getRotatedCorners(this.bounds,Ka);return Ve.boundsContain(ia,sa)||0<z([ia.minX,ia.minY],[ia.width,ia.height],Va).length});Ma(this,"getExpandedBounds",()=>Ve.expandBounds(this.getBounds(),this.bindingDistance));Ma(this,"getBindingPoint",(ia,sa,Ka,Va)=>
{var Za=this.getBounds(),lb=this.getExpandedBounds();if(Ag.pointInBounds(ia,lb)){var vb=C(sa,Ka,lb).filter(Qb=>Qb.didIntersect).map(Qb=>Qb.points[0]);if(vb.length)return Ka=this.getCenter(),vb=vb.sort((Qb,cc)=>Ud.dist(cc,sa)-Ud.dist(Qb,sa))[0],vb=Ud.med(ia,vb),Va?(Va=2>Ud.dist(ia,Ka)?Ka:ia,Za=0):(Va=2>Ud.distanceToLineSegment(ia,vb,Ka)?Ka:vb,Za=Ag.pointInBounds(ia,Za)?this.bindingDistance:Math.max(this.bindingDistance,Ve.getBoundsSides(Za).map(Qb=>Ud.distanceToLineSegment(Qb[1][0],Qb[1][1],ia)).sort((Qb,
cc)=>Qb-cc)[0])),lb=Ud.divV(Ud.sub(Va,[lb.minX,lb.minY]),[lb.width,lb.height]),{point:Ud.clampV(lb,0,1),distance:Za}}});Ma(this,"getSerialized",()=>Cc(xf(te({},this.props),{type:this.type,nonce:this.nonce})));Ma(this,"getCachedSerialized",()=>{!this.isDirty&&this.lastSerialized||Hd(()=>{this.setIsDirty(!1);this.setLastSerialized(this.getSerialized())});if(this.lastSerialized)return this.lastSerialized;throw Error("Should not get here for getCachedSerialized");});Ma(this,"validateProps",ia=>ia);Ma(this,
"update",(ia,sa=!1,Ka=!1)=>{sa||this.isDirty||this.setIsDirty(!0);sa||Ka||this.incNonce();Object.assign(this.props,this.validateProps(ia));return this});Ma(this,"clone",()=>new this.constructor(this.serialized));Ma(this,"onResetBounds",ia=>this);Ma(this,"scale",[1,1]);Ma(this,"onResizeStart",ia=>{var sa;this.scale=[...(null!=(sa=this.props.scale)?sa:[1,1])];return this});Ma(this,"onResize",(ia,sa)=>{const {bounds:Ka,rotation:Va,scale:[Za,lb]}=sa;ia=[...this.scale];0>Za&&(ia[0]*=-1);0>lb&&(ia[1]*=
-1);this.update({point:[Ka.minX,Ka.minY],scale:ia,rotation:Va});return this});Ma(this,"onHandleChange",(ia,{id:sa,delta:Ka})=>{if(void 0!==ia.handles){var Va=Eq(ia.handles);Va[sa]=xf(te({},Va[sa]),{point:Ud.add(Ka,ia.handles[sa].point)});var Za=Ve.getCommonTopLeft(Object.values(Va).map(lb=>lb.point));Object.values(Va).forEach(lb=>{lb.point=Ud.sub(lb.point,Za)});this.update({point:Ud.add(ia.point,Za),handles:Va})}});var g,n;const I=this.constructor.id,W=null!=(g=this.constructor.defaultProps)?g:{};
this.type=I;this.props=te(te({scale:[1,1]},W),b);this.nonce=null!=(n=b.nonce)?n:Date.now();rg(this)}get id(){return this.props.id}setNonce(b){this.nonce=b}incNonce(){this.nonce++}setIsDirty(b){this.isDirty=b}setLastSerialized(b){this.lastSerialized=b}get center(){return this.getCenter()}get bounds(){return this.getBounds()}get rotatedBounds(){return this.getRotatedBounds()}get serialized(){return this.getCachedSerialized()}getShapeSVGJsx(b){b=this.getBounds();const {stroke:g,strokeWidth:n,strokeType:I,
opacity:W,fill:ia,noFill:sa,borderRadius:Ka}=this.props;return(0,pb.jsx)("rect",{fill:sa?"none":Bf(ia,"background"),stroke:Bf(g,"stroke"),strokeWidth:null!=n?n:2,strokeDasharray:"dashed"===I?"8 2":void 0,fillOpacity:null!=W?W:.2,width:b.width,height:b.height,rx:Ka,ry:Ka})}};Ma(em,"type");mb([Bg],em.prototype,"props",2);mb([Bg],em.prototype,"canResize",2);mb([Bg],em.prototype,"nonce",2);mb([Bg],em.prototype,"isDirty",2);mb([Bg],em.prototype,"lastSerialized",2);mb([Eg],em.prototype,"id",1);mb([af],
em.prototype,"setNonce",1);mb([af],em.prototype,"incNonce",1);mb([af],em.prototype,"setIsDirty",1);mb([af],em.prototype,"setLastSerialized",1);mb([Eg],em.prototype,"center",1);mb([Eg],em.prototype,"bounds",1);mb([Eg],em.prototype,"rotatedBounds",1);mb([Eg],em.prototype,"serialized",1);mb([af],em.prototype,"update",2);var fn=class extends em{constructor(b={}){super(b);Ma(this,"canBind",!0);Ma(this,"getBounds",()=>{const [g,n]=this.props.point,[I,W]=this.props.size;return{minX:g,minY:n,maxX:g+I,maxY:n+
W,width:I,height:W}});Ma(this,"getRotatedBounds",()=>Ve.getBoundsFromPoints(Ve.getRotatedCorners(this.bounds,this.props.rotation)));Ma(this,"onResize",(g,n)=>{const {bounds:I,rotation:W,scale:[ia,sa]}=n;g=[...this.scale];0>ia&&(g[0]*=-1);0>sa&&(g[1]*=-1);this.update({point:[I.minX,I.minY],scale:g,rotation:W});return this.update({rotation:W,point:[I.minX,I.minY],size:[Math.max(1,I.width),Math.max(1,I.height)],scale:g})});Ma(this,"validateProps",g=>{void 0!==g.size&&(g.size[0]=Math.max(g.size[0],1),
g.size[1]=Math.max(g.size[1],1));return g});rg(this)}};Ma(fn,"id","box");Ma(fn,"defaultProps",{id:"box",type:"box",parentId:"page",point:[0,0],size:[100,100]});var mr=class extends em{constructor(b={}){super(b);Ma(this,"getBounds",()=>{const {pointBounds:g,props:{point:n}}=this;return Ve.translateBounds(g,n)});Ma(this,"getRotatedBounds",()=>{const {props:{rotation:g,point:n},bounds:I,rotatedPoints:W}=this;return g?Ve.translateBounds(Ve.getBoundsFromPoints(W),n):I});Ma(this,"normalizedPoints",[]);
Ma(this,"isResizeFlippedX",!1);Ma(this,"isResizeFlippedY",!1);Ma(this,"onResizeStart",()=>{var g;const {bounds:n,props:{points:I}}=this;this.scale=[...(null!=(g=this.props.scale)?g:[1,1])];const W=[n.width,n.height];this.normalizedPoints=I.map(ia=>gd.divV(ia,W));return this});Ma(this,"onResize",(g,n)=>{const {bounds:I,scale:[W,ia]}=n,sa=[I.width,I.height];g=[...this.scale];0>W&&(g[0]*=-1);0>ia&&(g[1]*=-1);return this.update(W||ia?{point:[I.minX,I.minY],points:this.normalizedPoints.map(Ka=>gd.mulV(Ka,
sa).concat(Ka[2])),scale:g}:{point:[I.minX,I.minY],points:this.normalizedPoints.map(Ka=>gd.mulV(Ka,sa).concat(Ka[2]))})});Ma(this,"hitTestPoint",g=>{const {props:{points:n,point:I}}=this;return Ag.pointNearToPolyline(gd.sub(g,I),n)});Ma(this,"hitTestLineSegment",(g,n)=>{const {bounds:I,props:{points:W,point:ia}}=this;if(Ag.pointInBounds(g,I)||Ag.pointInBounds(n,I)||0<t(I,g,n).length){const sa=gd.sub(g,ia),Ka=gd.sub(n,ia);return h(sa,Ka,W).didIntersect||!!W.find(Va=>5>gd.dist(sa,Va)||5>gd.dist(Ka,
Va))}return!1});Ma(this,"hitTestBounds",g=>{const {rotatedBounds:n,props:{points:I,point:W}}=this,ia=Ve.translateBounds(g,gd.neg(W));return Ve.boundsContain(g,n)||I.every(sa=>Ag.pointInBounds(sa,ia))||Ve.boundsCollide(g,n)&&0<J([ia.minX,ia.minY],[ia.width,ia.height],I).length});rg(this)}get pointBounds(){const {props:{points:b}}=this;return Ve.getBoundsFromPoints(b)}get rotatedPoints(){const {props:{point:b,points:g,rotation:n},center:I}=this;if(!n)return g;const W=gd.sub(I,b);return g.map(ia=>gd.rotWith(ia,
W,n))}};Ma(mr,"id","draw");Ma(mr,"defaultProps",{id:"draw",type:"draw",parentId:"page",point:[0,0],points:[],isComplete:!1});mb([Eg],mr.prototype,"pointBounds",1);mb([Eg],mr.prototype,"rotatedPoints",1);var ov=class extends fn{constructor(b={}){super(b);Ma(this,"getBounds",()=>{const {props:{point:[g,n],size:[I,W]}}=this;return Ve.getRotatedEllipseBounds(g,n,I/2,W/2,0)});Ma(this,"getRotatedBounds",()=>{const {props:{point:[g,n],size:[I,W],rotation:ia}}=this;return Ve.getRotatedEllipseBounds(g,n,I/
2,W/2,ia)});Ma(this,"hitTestPoint",g=>{const {props:{size:n,rotation:I},center:W}=this;return Ag.pointInEllipse(g,W,n[0],n[1],I||0)});Ma(this,"hitTestLineSegment",(g,n)=>{const {props:{size:[I,W],rotation:ia=0},center:sa}=this;return p(g,n,sa,I,W,ia).didIntersect});Ma(this,"hitTestBounds",g=>{const {props:{size:[n,I],rotation:W=0},rotatedBounds:ia}=this;var sa;if(!(sa=Ve.boundsContain(g,ia))){const {minX:Ka,minY:Va,width:Za,height:lb}=g;sa=0<u(this.center,n/2,I/2,W,[Ka,Va],[Za,lb]).length}return sa});
rg(this)}};Ma(ov,"id","ellipse");Ma(ov,"defaultProps",{id:"ellipse",type:"ellipse",parentId:"page",point:[0,0],size:[100,100]});var pv=class extends fn{constructor(b={}){super(b);Ma(this,"onResetBounds",g=>{const {clipping:n,size:I,point:W}=this.props;if(n){const [ia,sa,Ka,Va]=Array.isArray(n)?n:[n,n,n,n];return this.update({clipping:0,point:[W[0]-Va,W[1]-ia],size:[I[0]+(Va-sa),I[1]+(ia-Ka)]})}if(g.asset){const {size:[ia,sa]}=g.asset;this.update({clipping:0,point:[W[0]+I[0]/2-ia/2,W[1]+I[1]/2-sa/
2],size:[ia,sa]})}return this});Ma(this,"onResize",(g,n)=>{const {bounds:I,clip:W,scale:ia}=n;({clipping:n}=this.props);const {clipping:sa}=g;if(W){const {point:[Ka,Va],size:[Za,lb]}=g,[vb,Qb,cc,Ub]=sa?Array.isArray(sa)?sa:[sa,sa,sa,sa]:[0,0,0,0];n=[vb+(I.minY-Va),Qb+(I.maxX-(Ka+Za)),cc+(I.maxY-(Va+lb)),Ub+(I.minX-Ka)]}else void 0!==sa&&(n=Array.isArray(sa)?sa:[sa,sa,sa,sa],n=[n[0]*ia[1],n[1]*ia[0],n[2]*ia[1],n[3]*ia[0]]);if(n&&Array.isArray(n)){const Ka=n;Ka.every((Va,Za)=>0===Za||Va===Ka[Za-1])&&
(n=Ka[0])}return this.update({point:[I.minX,I.minY],size:[Math.max(1,I.width),Math.max(1,I.height)],clipping:n})});rg(this)}};Ma(pv,"id","ellipse");Ma(pv,"defaultProps",{id:"ellipse",type:"ellipse",parentId:"page",point:[0,0],size:[100,100],clipping:0,objectFit:"none",assetId:""});var $x=class extends em{constructor(b={}){super(b);Ma(this,"getBounds",()=>{const {points:g,props:{point:n}}=this;return Ve.translateBounds(Ve.getBoundsFromPoints(g),n)});Ma(this,"getRotatedBounds",()=>{const {rotatedPoints:g,
props:{point:n}}=this;return Ve.translateBounds(Ve.getBoundsFromPoints(g),n)});Ma(this,"normalizedHandles",[]);Ma(this,"onResizeStart",()=>{var g;const {props:{handles:n},bounds:I}=this;this.scale=[...(null!=(g=this.props.scale)?g:[1,1])];const W=[I.width,I.height];this.normalizedHandles=Object.values(n).map(ia=>gd.divV(ia.point,W));return this});Ma(this,"onResize",(g,n)=>{const {bounds:I,scale:[W,ia]}=n,{props:{handles:sa},normalizedHandles:Ka}=this,Va=[I.width,I.height];g=[...this.scale];0>W&&(g[0]*=
-1);0>ia&&(g[1]*=-1);return this.update({point:[I.minX,I.minY],handles:Object.values(sa).map((Za,lb)=>xf(te({},Za),{point:gd.mulV(Ka[lb],Va)})),scale:g})});Ma(this,"hitTestPoint",g=>{const {points:n}=this;return Ag.pointNearToPolyline(gd.sub(g,this.props.point),n)});Ma(this,"hitTestLineSegment",(g,n)=>{const {bounds:I,points:W,props:{point:ia}}=this;if(Ag.pointInBounds(g,I)||Ag.pointInBounds(n,I)||0<t(I,g,n).length){const sa=gd.sub(g,ia),Ka=gd.sub(n,ia);return h(sa,Ka,W).didIntersect||!!W.find(Va=>
5>gd.dist(sa,Va)||5>gd.dist(Ka,Va))}return!1});Ma(this,"hitTestBounds",g=>{const {rotatedBounds:n,points:I,props:{point:W}}=this,ia=Ve.translateBounds(g,gd.neg(W));return Ve.boundsContain(g,n)||I.every(sa=>Ag.pointInBounds(sa,ia))||Ve.boundsCollide(g,n)&&0<J([ia.minX,ia.minY],[ia.width,ia.height],I).length});Ma(this,"validateProps",g=>{g.point&&(g.point=[0,0]);void 0!==g.handles&&1>Object.values(g.handles).length&&(g.handles=$x.defaultProps.handles);return g});rg(this)}get points(){return Object.values(this.props.handles).map(b=>
b.point)}get centroid(){const {points:b}=this;return Di.getPolygonCentroid(b)}get rotatedPoints(){const {centroid:b,props:{handles:g,rotation:n}}=this;return n?Object.values(g).map(I=>gd.rotWith(I.point,b,n)):this.points}},jr=$x;Ma(jr,"id","polyline");Ma(jr,"defaultProps",{id:"polyline",type:"polyline",parentId:"page",point:[0,0],handles:{}});mb([Eg],jr.prototype,"points",1);mb([Eg],jr.prototype,"centroid",1);mb([Eg],jr.prototype,"rotatedPoints",1);var ay=class extends jr{constructor(b={}){super(b);
Ma(this,"hideResizeHandles",!0);Ma(this,"hideRotateHandle",!0);Ma(this,"validateProps",g=>{g.point&&(g.point=[0,0]);void 0!==g.handles&&1>Object.values(g.handles).length&&(g.handles=ay.defaultProps.handles);return g});Ma(this,"getHandlesChange",(g,n)=>{var I=zi(g.handles,n);I=zi(I,{start:{point:Ud.toFixed(I.start.point)},end:{point:Ud.toFixed(I.end.point)}});if(!Ud.isEqual(I.start.point,I.end.point)){n={point:g.point,handles:Eq(I)};g=g.point;I=Ve.translateBounds(Ve.getBoundsFromPoints(Object.values(I).map(ia=>
ia.point)),n.point);var W=Ud.sub([I.minX,I.minY],g);Ud.isEqual(W,[0,0])||(Object.values(n.handles).forEach(ia=>{ia.point=Ud.toFixed(Ud.sub(ia.point,W))}),n.point=Ud.toFixed(Ud.add(n.point,W)));return n}});rg(this)}},ws=ay;Ma(ws,"id","line");Ma(ws,"defaultProps",{id:"line",type:"line",parentId:"page",point:[0,0],handles:{start:{id:"start",canBind:!0,point:[0,0]},end:{id:"end",canBind:!0,point:[1,1]}}});var Gp=class extends fn{constructor(b={}){super(b);Ma(this,"getRotatedBounds",()=>{const {rotatedVertices:g,
props:{point:n},offset:I}=this;return Ve.translateBounds(Ve.getBoundsFromPoints(g),gd.add(n,I))});Ma(this,"hitTestPoint",g=>{const {vertices:n}=this;return Ag.pointInPolygon(gd.add(g,this.props.point),n)});Ma(this,"hitTestLineSegment",(g,n)=>{const {vertices:I,props:{point:W}}=this;return h(gd.sub(g,W),gd.sub(n,W),I).didIntersect});Ma(this,"hitTestBounds",g=>{const {rotatedBounds:n,offset:I,rotatedVertices:W,props:{point:ia}}=this,sa=Ve.translateBounds(g,gd.neg(gd.add(ia,I)));return Ve.boundsContain(g,
n)||W.every(Ka=>Ag.pointInBounds(Ka,sa))||0<z([sa.minX,sa.minY],[sa.width,sa.height],W).length});Ma(this,"validateProps",g=>{g.point&&(g.point=[0,0]);void 0!==g.sides&&3>g.sides&&(g.sides=3);return g});rg(this)}get vertices(){return this.getVertices()}get pageVertices(){const {props:{point:b},vertices:g}=this;return g.map(n=>gd.add(n,b))}get centroid(){const {vertices:b}=this;return Di.getPolygonCentroid(b)}get rotatedVertices(){const {vertices:b,centroid:g,props:{rotation:n}}=this;return n?b.map(I=>
gd.rotWith(I,g,n)):b}get offset(){const {props:{size:[b,g]}}=this,n=Ve.getBoundsCenter(Ve.getBoundsFromPoints(this.vertices));return gd.sub(gd.div([b,g],2),n)}getVertices(b=0){const {ratio:g,sides:n,size:I}=this.props;return 3===n?Di.getTriangleVertices(I,b,g):Di.getPolygonVertices(I,n,b,g)}};Ma(Gp,"id","polygon");Ma(Gp,"defaultProps",{id:"polygon",type:"polygon",parentId:"page",point:[0,0],size:[100,100],sides:5,ratio:1,isFlippedY:!1});mb([Eg],Gp.prototype,"vertices",1);mb([Eg],Gp.prototype,"pageVertices",
1);mb([Eg],Gp.prototype,"centroid",1);mb([Eg],Gp.prototype,"rotatedVertices",1);mb([Eg],Gp.prototype,"offset",1);var nv=class extends fn{constructor(b={}){super(b);Ma(this,"canEdit",!0);Ma(this,"canFlip",!1);rg(this)}};Ma(nv,"id","text");Ma(nv,"defaultProps",{id:"text",type:"text",parentId:"page",isSizeLocked:!0,point:[0,0],size:[16,32],text:""});var Ht=class extends fn{constructor(b={}){super(b);Ma(this,"canEdit",!1);Ma(this,"canFlip",!1);Ma(this,"getBounds",()=>Ve.getCommonBounds(this.shapes.map(g=>
g.getBounds())));rg(this);this.canResize=[!1,!1]}getShapes(){throw Error("will be implemented other places");}get shapes(){return this.getShapes()}};Ma(Ht,"id","group");Ma(Ht,"defaultProps",{id:"group",type:"group",parentId:"page",point:[0,0],size:[0,0],children:[]});mb([Eg],Ht.prototype,"shapes",1);var ir=class{constructor(){Ma(this,"_id");Ma(this,"_initial");Ma(this,"_states");Ma(this,"_isActive",!1);Ma(this,"cursor");Ma(this,"_disposables",[]);Ma(this,"children",new Map([]));Ma(this,"registerStates",
n=>{n.forEach(I=>this.children.set(I.id,new I(this,this)));return this});Ma(this,"deregisterStates",n=>{n.forEach(I=>{var W;null==(W=this.children.get(I.id))?void 0:W.dispose();this.children.delete(I.id)});return this});Ma(this,"currentState",{});Ma(this,"transition",(n,I={})=>{if(0===this.children.size)throw Error(`Tool ${this.id} has no states, cannot transition to ${n}.`);const W=this.children.get(n),ia=this.currentState;if(!W)throw Error(`Could not find a state named ${n}.`);Hd(()=>{this.currentState?
(ia._events.onExit(xf(te({},I),{toId:n})),ia.dispose(),W.registerKeyboardShortcuts(),this.setCurrentState(W),this._events.onTransition(xf(te({},I),{fromId:ia.id,toId:n})),W._events.onEnter(xf(te({},I),{fromId:ia.id}))):(this.currentState=W,W._events.onEnter(xf(te({},I),{fromId:""})))});return this});Ma(this,"isIn",n=>{n=n.split(".").reverse();let I=this;for(;0<n.length;){const W=n.pop();if(!W)return!0;if(I.currentState.id===W){if(0===n.length)return!0;I=I.currentState}else break}return!1});Ma(this,
"isInAny",(...n)=>n.some(this.isIn));Ma(this,"forwardEvent",(n,...I)=>{var W,ia;(null==(ia=null==(W=this.currentState)?void 0:W._events)?0:ia[n])&&Hd(()=>{var sa;return null==(sa=this.currentState._events)?void 0:sa[n](...I)})});Ma(this,"_events",{onTransition:n=>{var I;null==(I=this.onTransition)?void 0:I.call(this,n)},onEnter:n=>{var I;this._isActive=!0;this.initial&&this.transition(this.initial,n);null==(I=this.onEnter)?void 0:I.call(this,n)},onExit:n=>{var I,W,ia;this._isActive=!1;null==(W=null==
(I=this.currentState)?void 0:I.onExit)?void 0:W.call(I,{toId:"parent"});null==(ia=this.onExit)?void 0:ia.call(this,n)},onPointerDown:(n,I)=>{var W;null==(W=this.onPointerDown)?void 0:W.call(this,n,I);this.forwardEvent("onPointerDown",n,I)},onPointerUp:(n,I)=>{var W;null==(W=this.onPointerUp)?void 0:W.call(this,n,I);this.forwardEvent("onPointerUp",n,I)},onPointerMove:(n,I)=>{var W;null==(W=this.onPointerMove)?void 0:W.call(this,n,I);this.forwardEvent("onPointerMove",n,I)},onPointerEnter:(n,I)=>{var W;
null==(W=this.onPointerEnter)?void 0:W.call(this,n,I);this.forwardEvent("onPointerEnter",n,I)},onPointerLeave:(n,I)=>{var W;null==(W=this.onPointerLeave)?void 0:W.call(this,n,I);this.forwardEvent("onPointerLeave",n,I)},onDoubleClick:(n,I)=>{var W;null==(W=this.onDoubleClick)?void 0:W.call(this,n,I);this.forwardEvent("onDoubleClick",n,I)},onKeyDown:(n,I)=>{var W;this._events.onModifierKey(n,I);null==(W=this.onKeyDown)?void 0:W.call(this,n,I);this.forwardEvent("onKeyDown",n,I)},onKeyUp:(n,I)=>{var W;
this._events.onModifierKey(n,I);null==(W=this.onKeyUp)?void 0:W.call(this,n,I);this.forwardEvent("onKeyUp",n,I)},onPinchStart:(n,I)=>{var W;null==(W=this.onPinchStart)?void 0:W.call(this,n,I);this.forwardEvent("onPinchStart",n,I)},onPinch:(n,I)=>{var W;null==(W=this.onPinch)?void 0:W.call(this,n,I);this.forwardEvent("onPinch",n,I)},onPinchEnd:(n,I)=>{var W;null==(W=this.onPinchEnd)?void 0:W.call(this,n,I);this.forwardEvent("onPinchEnd",n,I)},onModifierKey:(n,I)=>{switch(I.key){case "Shift":case "Alt":case "Ctrl":case "Meta":this._events.onPointerMove(n,
I)}}});Ma(this,"onEnter");Ma(this,"onExit");Ma(this,"onTransition");Ma(this,"onPointerDown");Ma(this,"onPointerUp");Ma(this,"onPointerMove");Ma(this,"onPointerEnter");Ma(this,"onPointerLeave");Ma(this,"onDoubleClick");Ma(this,"onKeyDown");Ma(this,"onKeyUp");Ma(this,"onPinchStart");Ma(this,"onPinch");Ma(this,"onPinchEnd");const b=this.constructor.initial,g=this.constructor.states;this._id=this.constructor.id;this._initial=b;this._states=g}dispose(){this._disposables.forEach(b=>b());this._disposables=
[];return this}get initial(){return this._initial}get states(){return this._states}get id(){return this._id}get isActive(){return this._isActive}get ascendants(){return[this]}get descendants(){return Array.from(this.children.values()).flatMap(b=>[b,...b.descendants])}setCurrentState(b){this.currentState=b}};Ma(ir,"id");Ma(ir,"shortcuts");mb([Bg],ir.prototype,"currentState",2);mb([af],ir.prototype,"setCurrentState",1);var sv=class extends ir{constructor(b,g){var n,I;super();Ma(this,"registerKeyboardShortcuts",
()=>{var W;null!=(W=this._shortcuts)&&W.length&&this._disposables.push(...this._shortcuts.map(({keys:ia,fn:sa})=>rn.registerShortcut(ia,Ka=>{this.isActive&&sa(this.root,this,Ka)})))});Ma(this,"_root");Ma(this,"_parent");Ma(this,"_shortcuts",[]);Ma(this,"children",new Map([]));Ma(this,"registerStates",W=>{W.forEach(ia=>this.children.set(ia.id,new ia(this,this._root)));return this});Ma(this,"deregisterStates",W=>{W.forEach(ia=>{var sa;null==(sa=this.children.get(ia.id))?void 0:sa.dispose();this.children.delete(ia.id)});
return this});this._parent=b;this._root=g;this.states&&0<this.states.length&&(this.registerStates(this.states),b=null!=(n=this.initial)?n:this.states[0].id,n=this.children.get(b))&&(this.setCurrentState(n),null==(I=this.currentState)?void 0:I._events.onEnter({fromId:"initial"}));this._shortcuts=this.constructor.shortcuts;rg(this)}get root(){return this._root}get parent(){return this._parent}get ascendants(){return this.parent?"ascendants"in this.parent?[...this.parent.ascendants,this]:[this.parent,
this]:[this]}};Ma(sv,"cursor");var Ap=class extends sv{constructor(){super(...arguments);Ma(this,"isLocked",!1);Ma(this,"previous");Ma(this,"onEnter",({fromId:b})=>{this.previous=b;this.cursor&&this.app.cursors.setCursor(this.cursor)});Ma(this,"onTransition",b=>{({toId:b}=b);b=this.children.get(b);this.app.cursors.reset();b.cursor?this.app.cursors.setCursor(b.cursor):this.cursor&&this.app.cursors.setCursor(this.cursor)})}get app(){return this.root}},yi=class extends sv{get app(){return this.root}get tool(){return this.parent}},
Xx=class extends yi{constructor(){super(...arguments);Ma(this,"cursor","crosshair");Ma(this,"creatingShape");Ma(this,"aspectRatio");Ma(this,"initialBounds",{});Ma(this,"onEnter",()=>{const {currentPage:b,inputs:{originPoint:g,currentPoint:n}}=this.app;var {Shape:I}=this.tool;I=new I({id:$e(),type:I.id,parentId:b.id,point:[...g],fill:this.app.settings.color,stroke:this.app.settings.color,size:Ud.abs(Ud.sub(n,g))});this.initialBounds={minX:g[0],minY:g[1],maxX:g[0]+1,maxY:g[1]+1,width:1,height:1};I.canChangeAspectRatio||
(I.aspectRatio?(this.aspectRatio=I.aspectRatio,this.initialBounds.height=this.aspectRatio):(this.aspectRatio=1,this.initialBounds.height=1),this.initialBounds.width=1,this.initialBounds.maxY=this.initialBounds.minY+this.initialBounds.height);this.creatingShape=I;this.app.currentPage.addShapes(I);this.app.setSelectedShapes([I])});Ma(this,"onPointerMove",b=>{if(!b.order){if(!this.creatingShape)throw Error("Expected a creating shape.");({initialBounds:b}=this);var {currentPoint:g,originPoint:n,shiftKey:I}=
this.app.inputs;b=Ve.getTransformedBoundingBox(b,"bottom_right_corner",Ud.sub(g,n),0,I||this.creatingShape.props.isAspectRatioLocked||!this.creatingShape.canChangeAspectRatio);this.creatingShape.update({point:[b.minX,b.minY],size:[b.width,b.height]})}});Ma(this,"onPointerUp",()=>{this.tool.transition("idle");this.creatingShape&&this.app.setSelectedShapes([this.creatingShape]);this.app.transition("select");this.app.persist()});Ma(this,"onKeyDown",(b,g)=>{switch(g.key){case "Escape":if(!this.creatingShape)throw Error("Expected a creating shape.");
this.app.deleteShapes([this.creatingShape]);this.tool.transition("idle")}})}};Ma(Xx,"id","creating");var Vx=class extends yi{constructor(){super(...arguments);Ma(this,"onPointerDown",(b,g)=>{b.order||this.tool.transition("pointing")});Ma(this,"onPinchStart",(...b)=>{var g,n;this.app.transition("select",{returnTo:this.app.currentState.id});null==(n=(g=this.app._events).onPinchStart)?void 0:n.call(g,...b)});Ma(this,"onKeyDown",(b,g)=>{switch(g.key){case "Escape":this.app.transition("select")}})}};Ma(Vx,
"id","idle");var Wx=class extends yi{constructor(){super(...arguments);Ma(this,"onPointerMove",()=>{const {currentPoint:b,originPoint:g}=this.app.inputs;5<gd.dist(b,g)&&(this.tool.transition("creating"),this.app.setSelectedShapes(this.app.currentPage.shapes))});Ma(this,"onPointerUp",()=>{this.tool.transition("idle")})}};Ma(Wx,"id","pointing");var gp=class extends Ap{constructor(){super(...arguments);Ma(this,"cursor","crosshair")}};Ma(gp,"id","box");Ma(gp,"states",[Vx,Wx,Xx]);Ma(gp,"initial","idle");
var Cx=class extends yi{constructor(){super(...arguments);Ma(this,"shape",{});Ma(this,"points",[[0,0,.5]]);Ma(this,"persistDebounced",il(this.app.persist,200));Ma(this,"onPinchStart",(b,g)=>{this.tool.transition("pinching",{info:b,event:g})});Ma(this,"onEnter",()=>{var b;const {Shape:g,previousShape:n}=this.tool;var {originPoint:I}=this.app.inputs;this.app.history.pause();if(this.app.inputs.shiftKey&&n){this.shape=n;var {shape:W}=this;var ia=W.props.points[W.props.points.length-1];const Ka=gd.sub(I,
W.props.point).concat(null!=(b=I[2])?b:.5);this.points=[...W.props.points,ia,ia];const Va=Math.ceil(gd.dist(ia,I)/16);for(let Za=0,lb=Za/(Va-1);Za<Va;Za++){b=this.points;I=b.push;W=gd.lrp(ia,Ka,lb);var sa=ia[2];I.call(b,W.concat.call(W,sa+(Ka[2]-sa)*lb))}this.addNextPoint(Ka)}else this.tool.previousShape=void 0,this.points=[[0,0,null!=(ia=I[2])?ia:.5]],this.shape=new g({id:$e(),type:g.id,parentId:this.app.currentPage.id,point:I.slice(0,2),points:this.points,isComplete:!1,fill:this.app.settings.color,
stroke:this.app.settings.color}),this.app.currentPage.addShapes(this.shape)});Ma(this,"onPointerMove",()=>{const {shape:b}=this,{currentPoint:g,previousPoint:n}=this.app.inputs;gd.isEqual(n,g)||this.addNextPoint(gd.sub(g,b.props.point).concat(g[2]))});Ma(this,"onPointerUp",()=>{if(!this.shape)throw Error("Expected a creating shape.");this.app.history.resume();this.shape.update({isComplete:!0,points:this.tool.simplify?Ag.simplify2(this.points,this.tool.simplifyTolerance):this.shape.props.points});
this.tool.previousShape=this.shape;this.tool.transition("idle");let b=this.app.selectedTool.id;"pencil"===b||"highlighter"===b?this.persistDebounced():this.app.persist()});Ma(this,"onKeyDown",(b,g)=>{switch(g.key){case "Escape":if(!this.shape)throw Error("Expected a creating shape.");this.app.deleteShapes([this.shape]);this.tool.transition("idle")}})}addNextPoint(b){const {shape:g}=this,n=gd.min(b,[0,0]);this.points.push(b);0>n[0]||0>n[1]?(this.points=this.points.map(I=>gd.sub(I,n).concat(I[2])),
g.update({point:gd.add(g.props.point,n),points:this.points})):g.update({points:this.points})}};Ma(Cx,"id","creating");var Dx=class extends yi{constructor(){super(...arguments);Ma(this,"onPointerDown",(b,g)=>{b.order||this.tool.transition("creating")});Ma(this,"onPinchStart",(b,g)=>{this.tool.transition("pinching",{info:b,event:g})});Ma(this,"onKeyDown",(b,g)=>{switch(g.key){case "Escape":this.app.transition("select")}})}};Ma(Dx,"id","idle");var Ex=class extends yi{constructor(){super(...arguments);
Ma(this,"origin",[0,0]);Ma(this,"prevDelta",[0,0]);Ma(this,"onEnter",b=>{this.prevDelta=b.info.delta;this.origin=b.info.point});Ma(this,"onPinch",b=>{this.app.viewport.pinchZoom(b.point,b.delta,b.delta[2])});Ma(this,"onPinchEnd",()=>{this.tool.transition("idle")})}};Ma(Ex,"id","pinching");var ts=class extends Ap{constructor(){super(...arguments);Ma(this,"cursor","crosshair");Ma(this,"simplify",!0);Ma(this,"simplifyTolerance",1);Ma(this,"previousShape");Ma(this,"onPinchStart",(b,g)=>{this.transition("pinching",
{info:b,event:g})})}};Ma(ts,"id","draw");Ma(ts,"states",[Dx,Cx,Ex]);Ma(ts,"initial","idle");var Fx=class extends yi{constructor(){super(...arguments);Ma(this,"points",[[0,0,.5]]);Ma(this,"hitShapes",new Set);Ma(this,"onEnter",()=>{const {originPoint:b}=this.app.inputs;this.points=[b];this.hitShapes.clear()});Ma(this,"onPointerMove",()=>{const {currentPoint:b,previousPoint:g}=this.app.inputs;gd.isEqual(g,b)||(this.points.push(b),this.app.shapesInViewport.filter(n=>n.hitTestLineSegment(g,b)).forEach(n=>
this.hitShapes.add(n)),this.app.setErasingShapes(Array.from(this.hitShapes.values())))});Ma(this,"onPointerUp",()=>{this.app.deleteShapes(Array.from(this.hitShapes.values()));this.tool.transition("idle")});Ma(this,"onKeyDown",(b,g)=>{switch(g.key){case "Escape":this.app.setErasingShapes([]),this.tool.transition("idle")}})}};Ma(Fx,"id","erasing");var Gx=class extends yi{constructor(){super(...arguments);Ma(this,"onPointerDown",(b,g)=>{b.order||this.tool.transition("pointing")});Ma(this,"onPinchStart",
(...b)=>{var g,n;this.app.transition("select",{returnTo:this.app.currentState.id});null==(n=(g=this.app._events).onPinchStart)?void 0:n.call(g,...b)});Ma(this,"onKeyDown",(b,g)=>{switch(g.key){case "Escape":this.app.transition("select")}})}};Ma(Gx,"id","idle");var Hx=class extends yi{constructor(){super(...arguments);Ma(this,"onEnter",()=>{const {currentPoint:b}=this.app.inputs;this.app.setErasingShapes(this.app.shapesInViewport.filter(g=>g.hitTestPoint(b)))});Ma(this,"onPointerMove",()=>{const {currentPoint:b,
originPoint:g}=this.app.inputs;5<gd.dist(b,g)&&(this.tool.transition("erasing"),this.app.setSelectedShapes([]))});Ma(this,"onPointerUp",()=>{const b=[...this.app.erasingShapes];this.app.setErasingShapes([]);this.app.deleteShapes(b);this.tool.transition("idle")})}};Ma(Hx,"id","pointing");var Ft=class extends Ap{constructor(){super(...arguments);Ma(this,"cursor","crosshair")}};Ma(Ft,"id","erase");Ma(Ft,"states",[Gx,Hx,Fx]);Ma(Ft,"initial","idle");var jv=class extends yi{constructor(){super(...arguments);
Ma(this,"handle",{});Ma(this,"handleId","end");Ma(this,"currentShape",{});Ma(this,"initialShape",{});Ma(this,"bindableShapeIds",[]);Ma(this,"startBindingShapeId");Ma(this,"newStartBindingId","");Ma(this,"draggedBindingId","");Ma(this,"onPointerMove",()=>{const {inputs:{shiftKey:b,previousPoint:g,originPoint:n,currentPoint:I,modKey:W,altKey:ia}}=this.app;var sa=this.app.getShapeById(this.initialShape.id),{handles:Ka}=this.initialShape,Va=this.handleId,Za="start"===this.handleId?"end":"start";if(!Ud.isEqual(g,
I)){var lb=Ud.sub(I,n);if(b){var vb=Ka[Za].point,Qb=Ud.add(Ka[Va].point,lb),cc=Ud.angle(vb,Qb);vb=Ud.rotWith(Qb,vb,Ei.snapAngleToSegments(cc,24)-cc);lb=Ud.add(lb,Ud.sub(vb,Qb))}lb=Ud.add(Ka[Va].point,lb);Ka={[Va]:xf(te({},Ka[Va]),{point:Ud.toFixed(lb),bindingId:void 0})};var Ub=this.currentShape.getHandlesChange(this.initialShape,Ka);if(Ub){Ka=zi(sa.props,Ub);var rc={},lc;Va=Ka.handles[Va];Za=Ka.handles[Za];if(this.startBindingShapeId){var Vb;if(lb=this.app.getShapeById(this.startBindingShapeId)){Qb=
lb.getCenter();vb=Ka.handles.end;var sc=Ud.add(Ka.handles.start.point,Ka.point);Ud.isEqual(sc,Qb)&&sc[1]++;cc=lb.hitTestPoint(I);sc=Ud.uni(Ud.sub(sc,Qb));const Gc=void 0!==this.app.currentPage.bindings[this.newStartBindingId];W||lb.hitTestPoint(Ud.add(Ka.point,vb.point))||(Vb=Rc(sa.props,lb,"start",this.newStartBindingId,Qb,Qb,sc,cc));Vb&&!Gc?(rc[this.newStartBindingId]=Vb,Ka.handles.start.bindingId=Vb.id):!Vb&&Gc&&(console.log("removing start binding"),delete rc[this.newStartBindingId],Ka.handles.start.bindingId=
void 0)}}if(!W){Vb=Ud.add(Za.point,Ka.point);Za=Ud.add(Va.point,Ka.point);Va=Ud.uni(Ud.sub(Za,Vb));const Gc=Ud.add(Ka.point,Ka.handles.start.point),Qc=Ud.add(Ka.point,Ka.handles.end.point);lb=this.bindableShapeIds.map(Vc=>this.app.getShapeById(Vc)).sort((Vc,Vd)=>Vd.nonce-Vc.nonce).filter(Vc=>![Gc,Qc].every(Vd=>Vc.hitTestPoint(Vd)));for(const Vc of lb)if(lc=Rc(sa.props,Vc,this.handleId,this.draggedBindingId,Za,Vb,Va,ia))break}lc?(rc[this.draggedBindingId]=lc,Ka=zi(Ka,{handles:{[this.handleId]:{bindingId:this.draggedBindingId}}})):
(sa=sa.props.handles[this.handleId].bindingId,void 0!==sa&&(delete rc[sa],Ka=zi(Ka,{handles:{[this.handleId]:{bindingId:void 0}}})));Ub=this.currentShape.getHandlesChange(Ka,Ka.handles);Hd(()=>{var Gc;if(Ub){this.currentShape.update(Ub);this.app.currentPage.updateBindings(rc);const Qc=Object.values(null!=(Gc=Ub.handles)?Gc:{}).map(Vc=>Vc.bindingId).map(Vc=>this.app.currentPage.bindings[Vc]).filter(Boolean).flatMap(Vc=>[Vc.toId,Vc.fromId].filter(Boolean));this.app.setBindingShapes(Qc)}})}}});Ma(this,
"onPointerUp",()=>{this.tool.transition("idle");this.currentShape&&this.app.setSelectedShapes([this.currentShape]);this.app.transition("select");this.app.persist()});Ma(this,"onExit",()=>{this.app.clearBindingShape();this.app.history.resume();this.app.persist()});Ma(this,"onKeyDown",(b,g)=>{switch(g.key){case "Escape":this.app.deleteShapes([this.currentShape]),this.tool.transition("idle")}})}};Ma(jv,"id","creating");var Ix=class extends jv{constructor(){super(...arguments);Ma(this,"onEnter",()=>{var b;
this.app.history.pause();this.newStartBindingId=$e();this.draggedBindingId=$e();this.bindableShapeIds=this.app.currentPage.getBindableShapes();var {Shape:g}=this.tool;const {originPoint:n}=this.app.inputs;g=new g(xf(te({},g.defaultProps),{id:$e(),type:g.id,parentId:this.app.currentPage.id,point:n,fill:this.app.settings.color,stroke:this.app.settings.color}));this.initialShape=Cc(g.props);this.currentShape=g;this.app.currentPage.addShapes(g);this.app.setSelectedShapes([g]);if(this.startBindingShapeId=
null==(b=this.bindableShapeIds.map(I=>this.app.getShapeById(I)).filter(I=>Ag.pointInBounds(n,I.bounds))[0])?void 0:b.id)this.bindableShapeIds.splice(this.bindableShapeIds.indexOf(this.startBindingShapeId),1),this.app.setBindingShapes([this.startBindingShapeId])})}};Ma(Ix,"id","creating");var Jx=class extends yi{constructor(){super(...arguments);Ma(this,"onPointerDown",(b,g)=>{b.order||this.tool.transition("pointing")});Ma(this,"onPinchStart",(...b)=>{var g,n;this.app.transition("select",{returnTo:this.app.currentState.id});
null==(n=(g=this.app._events).onPinchStart)?void 0:n.call(g,...b)});Ma(this,"onKeyDown",(b,g)=>{switch(g.key){case "Escape":this.app.transition("select")}});Ma(this,"onPointerEnter",b=>{if(!b.order)switch(b.type){case "shape":this.app.setHoveredShape(b.shape.id);break;case "selection":"background"!==b.handle&&"center"!==b.handle&&this.tool.transition("hoveringSelectionHandle",b)}});Ma(this,"onPointerLeave",b=>{b.order||"shape"===b.type&&this.app.hoveredId&&this.app.setHoveredShape(void 0)})}};Ma(Jx,
"id","idle");var Kx=class extends yi{constructor(){super(...arguments);Ma(this,"onPointerMove",()=>{const {currentPoint:b,originPoint:g}=this.app.inputs;5<gd.dist(b,g)&&(this.tool.transition("creating"),this.app.setSelectedShapes(this.app.currentPage.shapes))})}};Ma(Kx,"id","pointing");var Gt=class extends Ap{constructor(){super(...arguments);Ma(this,"cursor","crosshair")}};Ma(Gt,"id","line");Ma(Gt,"states",[Jx,Kx,Ix]);Ma(Gt,"initial","idle");var sx=class extends yi{constructor(){super(...arguments);
Ma(this,"cursor","crosshair");Ma(this,"creatingShape");Ma(this,"aspectRatio");Ma(this,"initialBounds",{});Ma(this,"onEnter",()=>{const {currentPage:b,inputs:{originPoint:g}}=this.app,{Shape:n}=this.tool,I=new n({id:$e(),type:n.id,parentId:b.id,point:[...g],text:"",size:[16,32],isSizeLocked:!0,fill:this.app.settings.color,stroke:this.app.settings.color});this.creatingShape=I;Hd(()=>{this.app.currentPage.addShapes(I);const {bounds:W}=I;I.update({point:Ud.sub(g,[W.width/2,W.height/2])});this.app.transition("select");
this.app.setSelectedShapes([I]);this.app.currentState.transition("editingShape",{type:"shape",shape:this.creatingShape,order:0})})})}};Ma(sx,"id","creating");var tx=class extends yi{constructor(){super(...arguments);Ma(this,"onPointerDown",(b,g)=>{b.order||this.tool.transition("creating")});Ma(this,"onPinchStart",(...b)=>{var g,n;this.app.transition("select",{returnTo:this.app.currentState.id});null==(n=(g=this.app._events).onPinchStart)?void 0:n.call(g,...b)});Ma(this,"onKeyDown",(b,g)=>{switch(g.key){case "Escape":this.app.transition("select")}})}};
Ma(tx,"id","idle");var Et=class extends Ap{constructor(){super(...arguments);Ma(this,"cursor","crosshair")}};Ma(Et,"id","box");Ma(Et,"states",[tx,sx]);Ma(Et,"initial","idle");var jC=cb(fe()),kC=class extends jC.default{constructor(){super(...arguments);Ma(this,"toBBox",b=>b.rotatedBounds)}},ux=class extends yi{constructor(){super(...arguments);Ma(this,"initialSelectedIds",[]);Ma(this,"initialSelectedShapes",[]);Ma(this,"tree",new kC);Ma(this,"onEnter",()=>{const {selectedShapes:b,currentPage:g,selectedIds:n}=
this.app;this.initialSelectedIds=Array.from(n.values());this.initialSelectedShapes=Array.from(b.values());this.tree.load(g.shapes)});Ma(this,"onExit",()=>{this.initialSelectedIds=[];this.tree.clear()});Ma(this,"onPointerMove",()=>{const {inputs:{shiftKey:b,ctrlKey:g,originPoint:n,currentPoint:I}}=this.app,W=Ve.getBoundsFromPoints([I,n],0);this.app.setBrush(W);const ia=[...(new Set(this.tree.search(W).filter(sa=>g?Ve.boundsContain(W,sa.rotatedBounds):sa.hitTestBounds(W)).filter(sa=>"group"!==sa.type).map(sa=>
{var Ka;return null!=(Ka=this.app.getParentGroup(sa))?Ka:sa})))];b?ia.every(sa=>this.initialSelectedShapes.includes(sa))?this.app.setSelectedShapes(this.initialSelectedShapes.filter(sa=>!ia.includes(sa))):this.app.setSelectedShapes([...(new Set([...this.initialSelectedShapes,...ia]))]):this.app.setSelectedShapes(ia);this.app.viewport.panToPointWhenOutOfBounds(I)});Ma(this,"onPointerUp",()=>{this.app.setBrush(void 0);this.tool.transition("idle")});Ma(this,"handleModifierKey",(b,g)=>{switch(g.key){case "Escape":this.app.setBrush(void 0),
this.app.setSelectedShapes(this.initialSelectedIds),this.tool.transition("idle")}})}};Ma(ux,"id","brushing");var vx=class extends yi{constructor(){super(...arguments);Ma(this,"onEnter",b=>{var g;const {selectedIds:n,selectedShapes:I,inputs:{shiftKey:W}}=this.app;if("shape"===b.type&&!I.has(b.shape)){const ia=null!=(g=this.app.getParentGroup(b.shape))?g:b.shape;W?this.app.setSelectedShapes([...Array.from(n.values()),ia.id]):this.app.setSelectedShapes([ia])}});Ma(this,"onPointerDown",()=>{this.tool.transition("idle")})}};
Ma(vx,"id","contextMenu");var wx=class extends yi{constructor(){super(...arguments);Ma(this,"onEnter",b=>{"pinching"===b.fromId&&this.parent.returnTo&&this.app.transition(this.parent.returnTo)});Ma(this,"onExit",()=>{});Ma(this,"onPointerEnter",b=>{if(!b.order)switch(b.type){case "shape":this.app.setHoveredShape(b.shape.id);break;case "selection":"background"!==b.handle&&"center"!==b.handle&&this.tool.transition("hoveringSelectionHandle",b);break;case "canvas":this.app.setHoveredShape(void 0)}});
Ma(this,"onPointerDown",(b,g)=>{const {selectedShapes:n,inputs:{ctrlKey:I}}=this.app;if(2===g.button)this.tool.transition("contextMenu",b);else if(I)this.tool.transition("pointingCanvas");else switch(b.type){case "selection":switch(b.handle){case "center":break;case "background":this.tool.transition("pointingBoundsBackground");break;case "rotate":this.tool.transition("pointingRotateHandle");break;default:this.tool.transition("pointingResizeHandle",b)}break;case "shape":if(n.has(b.shape))this.tool.transition("pointingSelectedShape",
b);else{const {selectionBounds:W,inputs:ia}=this.app;W&&Ag.pointInBounds(ia.currentPoint,W)?this.tool.transition("pointingShapeBehindBounds",b):this.tool.transition("pointingShape",b)}break;case "handle":this.tool.transition("pointingHandle",b);break;case "canvas":this.tool.transition("pointingCanvas");break;case "minimap":this.tool.transition("pointingMinimap",te(te({},g),b))}});Ma(this,"onPointerLeave",b=>{b.order||"shape"===b.type&&this.app.hoveredId&&this.app.setHoveredShape(void 0)});Ma(this,
"onPinchStart",(b,g)=>{this.tool.transition("pinching",{info:b,event:g})});Ma(this,"onDoubleClick",b=>{if(!b.order&&1===this.app.selectedShapesArray.length){var g=this.app.selectedShapesArray[0];if(g.canEdit)switch(b.type){case "shape":this.tool.transition("editingShape",b);break;case "selection":1===this.app.selectedShapesArray.length&&this.tool.transition("editingShape",{type:"shape",target:g})}}});Ma(this,"onKeyDown",(b,g)=>{({selectedShapesArray:b}=this.app);switch(g.key){case "Enter":1===b.length&&
b[0].canEdit&&this.tool.transition("editingShape",{type:"shape",shape:b[0],order:0});break;case "Escape":b.length&&this.app.setSelectedShapes([])}})}};Ma(wx,"id","idle");var xx=class extends yi{constructor(){super(...arguments);Ma(this,"onEnter",b=>{var g;const {selectedIds:n,inputs:{shiftKey:I}}=this.app,W=null!=(g=this.app.getParentGroup(b.shape))?g:b.shape;I?this.app.setSelectedShapes([...Array.from(n.values()),W.id]):this.app.setSelectedShapes([W])});Ma(this,"onPointerMove",()=>{const {currentPoint:b,
originPoint:g}=this.app.inputs;5<gd.dist(b,g)&&this.tool.transition("translating")});Ma(this,"onPointerUp",()=>{this.tool.transition("idle")});Ma(this,"onPinchStart",(b,g)=>{this.tool.transition("pinching",{info:b,event:g})})}};Ma(xx,"id","pointingShape");var yx=class extends yi{constructor(){super(...arguments);Ma(this,"cursor","move");Ma(this,"onPointerMove",()=>{const {currentPoint:b,originPoint:g}=this.app.inputs;5<gd.dist(b,g)&&this.tool.transition("translating")});Ma(this,"onPointerUp",()=>
{this.app.setSelectedShapes([]);this.tool.transition("idle")});Ma(this,"onPinchStart",(b,g)=>{this.tool.transition("pinching",{info:b,event:g})})}};Ma(yx,"id","pointingBoundsBackground");var zx=class extends yi{constructor(){super(...arguments);Ma(this,"onEnter",()=>{var b;const {shiftKey:g}=this.app.inputs;g||(this.app.setSelectedShapes([]),this.app.setEditingShape(),null==(b=window.getSelection())?void 0:b.removeAllRanges())});Ma(this,"onPointerMove",()=>{const {currentPoint:b,originPoint:g}=this.app.inputs;
5<gd.dist(b,g)&&this.tool.transition("brushing")});Ma(this,"onPointerUp",()=>{this.app.inputs.shiftKey||this.app.setSelectedShapes([]);this.tool.transition("idle")});Ma(this,"onPinchStart",(b,g)=>{this.tool.transition("pinching",{info:b,event:g})});Ma(this,"onDoubleClick",()=>{this.app.notify("canvas-dbclick",{point:this.app.inputs.originPoint})})}};Ma(zx,"id","pointingCanvas");var Ax=class extends yi{constructor(){super(...arguments);Ma(this,"cursor","move");Ma(this,"isCloning",!1);Ma(this,"didClone",
!1);Ma(this,"initialPoints",{});Ma(this,"initialShapePoints",{});Ma(this,"initialClonePoints",{});Ma(this,"clones",[]);Ma(this,"onEnter",()=>{var b;this.app.history.pause();const {allSelectedShapesArray:g,inputs:n}=this.app;this.initialPoints=this.initialShapePoints=Object.fromEntries(g.map(({id:I,props:{point:W}})=>[I,W.slice()]));document.querySelectorAll("input,textarea").forEach(I=>I.blur());null==(b=document.getSelection())?void 0:b.empty();n.altKey?this.startCloning():this.moveSelectedShapesToPointer()});
Ma(this,"onExit",()=>{this.app.history.resume();this.app.persist();this.isCloning=this.didClone=!1;this.clones=[];this.initialPoints={};this.initialShapePoints={};this.initialClonePoints={}});Ma(this,"onPointerMove",()=>{const {inputs:{currentPoint:b}}=this.app;this.moveSelectedShapesToPointer();this.app.viewport.panToPointWhenOutOfBounds(b)});Ma(this,"onPointerDown",()=>{this.app.history.resume();this.app.persist();this.tool.transition("idle")});Ma(this,"onPointerUp",()=>{this.app.history.resume();
this.app.persist();this.tool.transition("idle")});Ma(this,"onKeyDown",(b,g)=>{switch(g.key){case "Alt":this.startCloning();break;case "Escape":this.app.allSelectedShapes.forEach(n=>{n.update({point:this.initialPoints[n.id]})}),this.tool.transition("idle")}});Ma(this,"onKeyUp",(b,g)=>{switch(g.key){case "Alt":if(!this.isCloning)throw Error("Expected to be cloning.");const {currentPage:n,allSelectedShapes:I}=this.app;n.removeShapes(...I);this.initialPoints=this.initialShapePoints;this.app.setSelectedShapes(Object.keys(this.initialPoints));
this.moveSelectedShapesToPointer();this.isCloning=!1}})}moveSelectedShapesToPointer(){const {inputs:{shiftKey:b,originPoint:g,currentPoint:n}}=this.app,{initialPoints:I}=this,W=gd.sub(n,g);b&&(Math.abs(W[0])<Math.abs(W[1])?W[0]=0:W[1]=0);Hd(()=>{this.app.allSelectedShapes.forEach(ia=>{ia.update({point:gd.add(I[ia.id],W)})})})}startCloning(){this.didClone||(this.clones=this.app.allSelectedShapesArray.map(b=>{const g=this.app.getShapeClass(b.type);if(!g)throw Error("Could not find that shape class.");
return new g(xf(te({},b.serialized),{id:$e(),type:b.type,point:this.initialPoints[b.id],rotation:b.props.rotation}))}),this.initialClonePoints=Object.fromEntries(this.clones.map(({id:b,props:{point:g}})=>[b,g.slice()])),this.didClone=!0);this.app.allSelectedShapes.forEach(b=>{b.update({point:this.initialPoints[b.id]})});this.initialPoints=this.initialClonePoints;this.app.currentPage.addShapes(...this.clones);this.app.setSelectedShapes(Object.keys(this.initialClonePoints));this.moveSelectedShapesToPointer();
this.isCloning=!0}};Ma(Ax,"id","translating");var Bx=class extends yi{constructor(){super(...arguments);Ma(this,"pointedSelectedShape");Ma(this,"onEnter",b=>{this.pointedSelectedShape=b.shape});Ma(this,"onExit",()=>{this.pointedSelectedShape=void 0});Ma(this,"onPointerMove",()=>{const {currentPoint:b,originPoint:g}=this.app.inputs;5<gd.dist(b,g)&&this.tool.transition("translating")});Ma(this,"onPointerUp",()=>{const {shiftKey:b,currentPoint:g}=this.app.inputs;var {selectedShapesArray:n}=this.app;
if(!this.pointedSelectedShape)throw Error("Expected a pointed selected shape");if(b)({selectedIds:n}=this.app),n=Array.from(n.values()),n.splice(n.indexOf(this.pointedSelectedShape.id),1),this.app.setSelectedShapes(n);else{if(1===n.length&&this.pointedSelectedShape.canEdit&&this.pointedSelectedShape instanceof fn&&Ag.pointInBounds(g,this.pointedSelectedShape.bounds)){this.tool.transition("editingShape",{shape:this.pointedSelectedShape,order:0,type:"shape"});return}this.app.setSelectedShapes([this.pointedSelectedShape.id])}this.tool.transition("idle")});
Ma(this,"onPinchStart",(b,g)=>{this.tool.transition("pinching",{info:b,event:g})})}};Ma(Bx,"id","pointingSelectedShape");var Lx=class extends yi{constructor(){super(...arguments);Ma(this,"info",{});Ma(this,"onEnter",b=>{this.info=b;this.updateCursor()});Ma(this,"onExit",()=>{this.app.cursors.reset()});Ma(this,"onPointerMove",()=>{const {currentPoint:b,originPoint:g}=this.app.inputs;5<gd.dist(b,g)&&this.tool.transition("resizing",this.info)});Ma(this,"onPointerUp",()=>{this.tool.transition("hoveringSelectionHandle",
this.info)});Ma(this,"onPinchStart",(b,g)=>{this.tool.transition("pinching",{info:b,event:g})})}updateCursor(){this.app.cursors.setCursor(Pl[this.info.handle],this.app.selectionBounds.rotation)}};Ma(Lx,"id","pointingResizeHandle");var Mx=class extends yi{constructor(){super(...arguments);Ma(this,"isSingle",!1);Ma(this,"handle","bottom_right_corner");Ma(this,"snapshots",{});Ma(this,"initialCommonBounds",{});Ma(this,"selectionRotation",0);Ma(this,"resizeType","corner");Ma(this,"onEnter",b=>{var g,n;
const {history:I,selectedShapesArray:W,selectionBounds:ia}=this.app;if(!ia)throw Error("Expected a selected bounds.");this.handle=b.handle;this.resizeType="left_edge"===b.handle||"right_edge"===b.handle?"horizontal-edge":"top_edge"===b.handle||"bottom_edge"===b.handle?"vertical-edge":"corner";this.app.cursors.setCursor(Mx.CURSORS[b.handle],null==(g=this.app.selectionBounds)?void 0:g.rotation);I.pause();const sa=Ve.getBoundsFromPoints(W.map(Ka=>Ve.getBoundsCenter(Ka.bounds)));this.selectionRotation=
(this.isSingle=1===W.length)?null!=(n=W[0].props.rotation)?n:0:0;this.initialCommonBounds=te({},ia);this.snapshots=Object.fromEntries(W.map(Ka=>{const Va=te({},Ka.bounds),[Za,lb]=Ve.getBoundsCenter(Va);return[Ka.id,{props:Ka.serialized,bounds:Va,transformOrigin:[(Za-this.initialCommonBounds.minX)/this.initialCommonBounds.width,(lb-this.initialCommonBounds.minY)/this.initialCommonBounds.height],innerTransformOrigin:[(Za-sa.minX)/sa.width,(lb-sa.minY)/sa.height],isAspectRatioLocked:Ka.props.isAspectRatioLocked||
!(Ka.canChangeAspectRatio&&!Ka.props.rotation)}]}));W.forEach(Ka=>{var Va;null==(Va=Ka.onResizeStart)?void 0:Va.call(Ka,{isSingle:this.isSingle})})});Ma(this,"onExit",()=>{this.app.cursors.reset();this.snapshots={};this.initialCommonBounds={};this.selectionRotation=0;this.app.history.resume()});Ma(this,"onPointerMove",()=>{const {inputs:{altKey:b,shiftKey:g,ctrlKey:n,originPoint:I,currentPoint:W}}=this.app,{handle:ia,snapshots:sa,initialCommonBounds:Ka}=this;let Va=gd.sub(W,I);b&&(Va=gd.mul(Va,2));
const Za=this.app.selectedShapes.values().next().value;let lb=Ve.getTransformedBoundingBox(Ka,ia,Va,this.selectionRotation,g||this.isSingle&&(n?!("clipping"in Za.props):!Za.canChangeAspectRatio||Za.props.isAspectRatioLocked));b&&(lb=te(te({},lb),Ve.centerBounds(lb,Ve.getBoundsCenter(Ka))));const {scaleX:vb,scaleY:Qb}=lb;this.app.selectedShapes.forEach(cc=>{var Ub,rc;const {props:lc,bounds:Vb,transformOrigin:sc}=sa[cc.id];let Gc=Ve.getRelativeTransformedBoundingBox(lb,Ka,Vb,0>vb,0>Qb);if(cc.canResize.some(Vd=>
Vd)||cc.props.isSizeLocked||!this.isSingle){var Qc=[vb,Qb],Vc=null!=(Ub=lc.rotation)?Ub:0;Ub=Ve.getBoundsCenter(Gc);cc.canFlip||(Qc=gd.abs(Qc));cc.canScale||(Qc=null!=(rc=lc.scale)?rc:[1,1]);if(Vc&&0>vb&&0<=Qb||0>Qb&&0<=vb)Vc*=-1;cc.onResize(lc,{center:Ub,rotation:Vc,scale:Qc,bounds:Gc,type:ia,clip:n,transformOrigin:sc})}});this.updateCursor(vb,Qb);this.app.viewport.panToPointWhenOutOfBounds(W)});Ma(this,"onPointerUp",()=>{this.app.history.resume();this.app.persist();this.tool.transition("idle")});
Ma(this,"onKeyDown",(b,g)=>{switch(g.key){case "Escape":this.app.selectedShapes.forEach(n=>{n.update(te({},this.snapshots[n.id].props))}),this.tool.transition("idle")}})}updateCursor(b,g){var n,I,W,ia;const sa=0>b&&0<=g;b=0>g&&0<=b;switch(this.handle){case "top_left_corner":case "bottom_right_corner":sa||b?"nwse-resize"===this.app.cursors.cursor&&this.app.cursors.setCursor("nesw-resize",null==(n=this.app.selectionBounds)?void 0:n.rotation):"nesw-resize"===this.app.cursors.cursor&&this.app.cursors.setCursor("nwse-resize",
null==(I=this.app.selectionBounds)?void 0:I.rotation);break;case "top_right_corner":case "bottom_left_corner":sa||b?"nesw-resize"===this.app.cursors.cursor&&this.app.cursors.setCursor("nwse-resize",null==(W=this.app.selectionBounds)?void 0:W.rotation):"nwse-resize"===this.app.cursors.cursor&&this.app.cursors.setCursor("nesw-resize",null==(ia=this.app.selectionBounds)?void 0:ia.rotation)}}},kv=Mx;Ma(kv,"id","resizing");Ma(kv,"CURSORS",{bottom_edge:"ns-resize",top_edge:"ns-resize",left_edge:"ew-resize",
right_edge:"ew-resize",bottom_left_corner:"nesw-resize",bottom_right_corner:"nwse-resize",top_left_corner:"nwse-resize",top_right_corner:"nesw-resize"});var Nx=class extends yi{constructor(){super(...arguments);Ma(this,"cursor","rotate");Ma(this,"handle","");Ma(this,"onEnter",b=>{this.app.history.pause();this.handle=b.handle;this.updateCursor()});Ma(this,"onPointerMove",()=>{const {currentPoint:b,originPoint:g}=this.app.inputs;5<gd.dist(b,g)&&this.tool.transition("rotating",{handle:this.handle})});
Ma(this,"onPointerUp",()=>{this.app.history.resume();this.app.persist();this.tool.transition("idle")});Ma(this,"onPinchStart",(b,g)=>{this.tool.transition("pinching",{info:b,event:g})})}updateCursor(){this.app.cursors.setCursor(Pl[this.handle],this.app.selectionRotation)}};Ma(Nx,"id","pointingRotateHandle");var Ox=class extends yi{constructor(){super(...arguments);Ma(this,"info",{});Ma(this,"onEnter",b=>{this.info=b});Ma(this,"onPointerMove",()=>{const {currentPoint:b,originPoint:g}=this.app.inputs;
5<gd.dist(b,g)&&this.tool.transition("translating")});Ma(this,"onPointerUp",()=>{const {selectedIds:b,inputs:{shiftKey:g}}=this.app;g?this.app.setSelectedShapes([...Array.from(b.values()),this.info.shape.id]):this.app.setSelectedShapes([this.info.shape.id]);this.tool.transition("idle")});Ma(this,"onPinchStart",(b,g)=>{this.tool.transition("pinching",{info:b,event:g})})}};Ma(Ox,"id","pointingShapeBehindBounds");var lv=class extends yi{constructor(){super(...arguments);Ma(this,"cursor","rotate");Ma(this,
"snapshot",{});Ma(this,"initialCommonCenter",[0,0]);Ma(this,"initialCommonBounds",{});Ma(this,"initialAngle",0);Ma(this,"initialSelectionRotation",0);Ma(this,"handle","");Ma(this,"onEnter",b=>{const {history:g,selectedShapesArray:n,selectionBounds:I}=this.app;if(!I)throw Error("Expected selected bounds.");g.pause();this.handle=b.handle;this.initialSelectionRotation=this.app.selectionRotation;this.initialCommonBounds=te({},I);this.initialCommonCenter=Ve.getBoundsCenter(I);this.initialAngle=gd.angle(this.initialCommonCenter,
this.app.inputs.currentPoint);this.snapshot=Object.fromEntries(n.map(W=>[W.id,{point:[...W.props.point],center:[...W.center],rotation:W.props.rotation,handles:"handles"in W?Eq(W.handles):void 0}]));this.updateCursor()});Ma(this,"onExit",()=>{this.app.history.resume();this.snapshot={}});Ma(this,"onPointerMove",()=>{const {selectedShapes:b,inputs:{shiftKey:g,currentPoint:n}}=this.app,{snapshot:I,initialCommonCenter:W,initialAngle:ia,initialSelectionRotation:sa}=this;let Ka=gd.angle(W,n)-ia;g&&(Ka=Ei.snapAngleToSegments(Ka,
24));b.forEach(Za=>{var lb=I[Za.id];let vb=0;if(g){var {rotation:Qb=0}=lb;vb=Ei.snapAngleToSegments(Qb,24)-Qb}const cc=gd.sub(lb.center,lb.point);Qb=gd.rotWith(lb.center,W,Ka);if("handles"in Za){lb=lb.handles;const Ub=lb.map(lc=>gd.rotWith(lc.point,cc,Ka)),rc=Ve.getCommonTopLeft(Ub);Za.update({point:gd.add(rc,gd.sub(Qb,cc)),handles:lb.map((lc,Vb)=>xf(te({},lc),{point:gd.sub(Ub[Vb],rc)}))})}else Za.update({point:gd.sub(Qb,cc),rotation:Ei.clampRadians((lb.rotation||0)+Ka+vb)})});const Va=Ei.clampRadians(sa+
Ka);this.app.setSelectionRotation(g?Ei.snapAngleToSegments(Va,24):Va);this.updateCursor()});Ma(this,"onPointerUp",()=>{this.app.history.resume();this.app.persist();this.tool.transition("idle")});Ma(this,"onKeyDown",(b,g)=>{switch(g.key){case "Escape":this.app.selectedShapes.forEach(n=>{n.update(this.snapshot[n.id])}),this.tool.transition("idle")}})}updateCursor(){this.app.cursors.setCursor(Pl[this.handle],this.app.selectionRotation)}};Ma(lv,"id","rotating");var Px=class extends yi{constructor(){super(...arguments);
Ma(this,"onPinch",(b,g)=>{this.app.viewport.pinchZoom(b.point,b.delta,b.delta[2])});Ma(this,"onPinchEnd",()=>{this.tool.transition("idle")});Ma(this,"onPointerDown",()=>{this.tool.transition("idle")})}};Ma(Px,"id","pinching");var Qx=class extends jv{constructor(){super(...arguments);Ma(this,"cursor","grabbing");Ma(this,"onEnter",b=>{this.app.history.pause();this.newStartBindingId=$e();this.draggedBindingId=$e();this.bindableShapeIds=this.app.currentPage.getBindableShapes();this.handleId=b.id;this.currentShape=
b.shape;this.initialShape=Cc(this.currentShape.props);this.app.setSelectedShapes([this.currentShape])})}};Ma(Qx,"id","translatingHandle");var Rx=class extends yi{constructor(){super(...arguments);Ma(this,"cursor","grabbing");Ma(this,"info",{});Ma(this,"onEnter",b=>{this.info=b});Ma(this,"onPointerMove",()=>{const {currentPoint:b,originPoint:g}=this.app.inputs;5<gd.dist(b,g)&&this.tool.transition("translatingHandle",this.info)});Ma(this,"onPointerUp",()=>{this.tool.transition("idle")});Ma(this,"onPinchStart",
(b,g)=>{this.tool.transition("pinching",{info:b,event:g})})}};Ma(Rx,"id","pointingHandle");var Sx=class extends yi{constructor(){super(...arguments);Ma(this,"handle");Ma(this,"onEnter",b=>{var g;this.app.cursors.setCursor(Pl[b.handle],null!=(g=this.app.selectionBounds.rotation)?g:0);this.handle=b.handle});Ma(this,"onExit",()=>{this.app.cursors.reset()});Ma(this,"onPinchStart",(b,g)=>{this.tool.transition("pinching",{info:b,event:g})});Ma(this,"onPointerDown",b=>{switch(b.type){case "selection":switch(b.handle){case "center":break;
case "background":break;case "top_left_resize_corner":case "top_right_resize_corner":case "bottom_right_resize_corner":case "bottom_left_resize_corner":this.tool.transition("pointingRotateHandle",b);break;default:this.tool.transition("pointingResizeHandle",b)}}});Ma(this,"onPointerLeave",()=>{this.tool.transition("idle")});Ma(this,"onDoubleClick",b=>{var g;if(!b.order&&1===this.app.selectedShapes.size){var n=this.app.selectedShapes.values().next().value;if(n.canEdit)switch(b.type){case "shape":this.tool.transition("editingShape",
b);break;case "selection":null==(g=n.onResetBounds)?void 0:g.call(n,{zoom:this.app.viewport.camera.zoom}),1===this.app.selectedShapesArray.length&&this.tool.transition("editingShape",{type:"shape",target:n})}else n.onResetBounds({asset:n.props.assetId?this.app.assets[n.props.assetId]:void 0,zoom:this.app.viewport.camera.zoom}),this.tool.transition("idle")}})}};Ma(Sx,"id","hoveringSelectionHandle");var Tx=class extends yi{constructor(){super(...arguments);Ma(this,"editingShape",{});Ma(this,"onEnter",
b=>{this.editingShape=b.shape;this.app.setEditingShape(b.shape)});Ma(this,"onExit",()=>{var b;if(this.editingShape&&"text"in this.editingShape.props){const g=this.editingShape.props.text.trim();""===g&&"text"===this.editingShape.props.type?this.app.deleteShapes([this.editingShape]):(this.editingShape.onResetBounds(),this.editingShape.update({text:g}))}this.app.persist();this.app.setEditingShape();null==(b=document.querySelector(".tl-canvas"))?void 0:b.focus()});Ma(this,"onPinchStart",(b,g)=>{this.tool.transition("pinching",
{info:b,event:g})});Ma(this,"onPointerDown",b=>{switch(b.type){case "shape":if(b.shape===this.editingShape)break;this.tool.transition("idle",b);break;case "canvas":b.order||this.tool.transition("idle",b)}});Ma(this,"onKeyDown",(b,g)=>{switch(g.key){case "Escape":Hd(()=>{g.stopPropagation();this.app.setSelectedShapes([this.editingShape]);this.tool.transition("idle")})}})}};Ma(Tx,"id","editingShape");var Ux=class extends yi{constructor(){super(...arguments);Ma(this,"minimapZoom",1);Ma(this,"minimapRect",
{minX:0,minY:0,maxX:0,maxY:0,width:0,height:0});Ma(this,"getCameraPoint",b=>{const g=document.querySelector(".tl-preview-minimap svg");var n=document.querySelector(".tl-preview-minimap #minimap-camera-rect");if(g&&n){const I=g.getBoundingClientRect();this.minimapRect.height=I.height;this.minimapRect.width=I.width;this.minimapRect.minX=I.left;this.minimapRect.minY=I.top;this.minimapRect.maxX=I.right;this.minimapRect.maxY=I.bottom;this.minimapZoom=+g.dataset.commonBoundWidth/this.minimapRect.width;
b=gd.sub(b,[this.minimapRect.minX,this.minimapRect.minY]);n=n.getBoundingClientRect();n=gd.mul(gd.sub(b,[n.left+n.width/2,n.top+n.height/2]),this.minimapZoom);return gd.sub(this.app.viewport.camera.point,n)}});Ma(this,"onEnter",b=>{(b=this.getCameraPoint([b.clientX,b.clientY]))?this.app.viewport.update({point:b}):this.tool.transition("idle")});Ma(this,"onPointerMove",(b,g)=>{(b=this.getCameraPoint([g.clientX,g.clientY]))&&this.app.viewport.update({point:b})});Ma(this,"onPointerUp",()=>{this.tool.transition("idle")})}};
Ma(Ux,"id","pointingMinimap");var hr=class extends Ap{constructor(){super(...arguments);Ma(this,"returnTo","");Ma(this,"onEnter",b=>{this.returnTo=null==b?void 0:b.returnTo})}};Ma(hr,"id","select");Ma(hr,"initial","idle");Ma(hr,"shortcut",["1","s"]);Ma(hr,"states",[wx,ux,vx,zx,xx,Ox,Bx,yx,Sx,Lx,Nx,Ux,Rx,Qx,Ax,kv,lv,lv,Px,Tx]);var ox=class extends yi{constructor(){super(...arguments);Ma(this,"cursor","grabbing");Ma(this,"originalScreenPoint",[]);Ma(this,"originalCameraPoint",[]);Ma(this,"prevState",
"idle");Ma(this,"onEnter",b=>{this.prevState=null==b?void 0:b.prevState;this.originalScreenPoint=this.app.inputs.currentScreenPoint;this.originalCameraPoint=this.app.viewport.camera.point});Ma(this,"onPointerMove",(b,g)=>{b=Ud.sub(this.originalScreenPoint,this.app.inputs.currentScreenPoint);this.app.viewport.update({point:Ud.sub(this.originalCameraPoint,Ud.div(b,this.app.viewport.camera.zoom))})});Ma(this,"onPointerUp",()=>{var b;this.tool.transition(null!=(b=this.prevState)?b:"idle")})}};Ma(ox,"id",
"panning");var px=class extends yi{constructor(){super(...arguments);Ma(this,"onEnter",b=>{this.parent.prevTool&&b.exit&&(this.app.setCurrentState(this.parent.prevTool),setTimeout(()=>{this.app.cursors.reset();this.app.cursors.setCursor(this.parent.prevTool.cursor)}))});Ma(this,"onPointerDown",(b,g)=>{b.order||this.tool.transition("panning")})}};Ma(px,"id","idle");var qx=class extends yi{constructor(){super(...arguments);Ma(this,"onPointerDown",(b,g)=>{b.order||this.tool.transition("panning",{prevState:"idleHold"})});
Ma(this,"onPinchStart",(b,g)=>{this.tool.transition("pinching",{info:b,event:g})})}};Ma(qx,"id","idleHold");var rx=class extends yi{constructor(){super(...arguments);Ma(this,"origin",[0,0]);Ma(this,"prevDelta",[0,0]);Ma(this,"onEnter",b=>{this.prevDelta=b.info.delta;this.origin=b.info.point});Ma(this,"onPinch",b=>{this.app.viewport.pinchZoom(b.point,b.delta,b.delta[2])});Ma(this,"onPinchEnd",()=>{this.tool.transition("idle")})}};Ma(rx,"id","pinching");var er=class extends Ap{constructor(){super(...arguments);
Ma(this,"cursor","grab");Ma(this,"prevTool",null);Ma(this,"onEnter",b=>{this.prevTool=null==b?void 0:b.prevTool});Ma(this,"onKeyDown",(b,g)=>{switch(g.key){case "Escape":this.app.transition("select")}});Ma(this,"onPinchStart",(b,g)=>{this.transition("pinching",{info:b,event:g})})}};Ma(er,"id","move");Ma(er,"shortcut",["2","m"]);Ma(er,"states",[px,qx,ox,rx]);Ma(er,"initial","idle");var dm=class{constructor(b,g={}){Ma(this,"lastShapesNounces",null);Ma(this,"app");Ma(this,"id");Ma(this,"name");Ma(this,
"shapes",[]);Ma(this,"bindings",{});Ma(this,"nonce",0);Ma(this,"bump",()=>{});Ma(this,"bringForward",Ka=>{const Va=this.parseShapesArg(Ka);Va.sort((Za,lb)=>this.shapes.indexOf(lb)-this.shapes.indexOf(Za)).map(Za=>this.shapes.indexOf(Za)).forEach(Za=>{if(Za!==this.shapes.length-1&&!Va.includes(this.shapes[Za+1])){var lb=this.shapes[Za];this.shapes[Za]=this.shapes[Za+1];this.shapes[Za+1]=lb}});this.app.persist();return this});Ma(this,"sendBackward",Ka=>{const Va=this.parseShapesArg(Ka);Va.sort((Za,
lb)=>this.shapes.indexOf(Za)-this.shapes.indexOf(lb)).map(Za=>this.shapes.indexOf(Za)).forEach(Za=>{if(0!==Za&&!Va.includes(this.shapes[Za-1])){var lb=this.shapes[Za];this.shapes[Za]=this.shapes[Za-1];this.shapes[Za-1]=lb}});this.app.persist();return this});Ma(this,"bringToFront",Ka=>{const Va=this.parseShapesArg(Ka);this.shapes=this.shapes.filter(Za=>!Va.includes(Za)).concat(Va);this.app.persist();return this});Ma(this,"sendToBack",Ka=>{const Va=this.parseShapesArg(Ka);this.shapes=Va.concat(this.shapes.filter(Za=>
!Va.includes(Za)));this.app.persist();return this});Ma(this,"flip",(Ka,Va)=>{Ka=this.parseShapesArg(Ka);const Za=Ve.getCommonBounds(Ka.map(lb=>lb.bounds));Ka.forEach(lb=>{var vb;const Qb=Ve.getRelativeTransformedBoundingBox(Za,Za,lb.bounds,"horizontal"===Va,"vertical"===Va);if(lb.serialized)lb.onResize(lb.serialized,{bounds:Qb,center:Ve.getBoundsCenter(Qb),rotation:null!=(vb=lb.props.rotation)?vb:-0,type:"top_left_corner",scale:lb.canFlip&&lb.props.scale?"horizontal"===Va?[-lb.props.scale[0],1]:[1,
-lb.props.scale[1]]:[1,1],clip:!1,transformOrigin:[.5,.5]})});this.app.persist();return this});Ma(this,"getShapeById",Ka=>this.shapes.find(Va=>Va.id===Ka));Ma(this,"cleanup",Ka=>{Ka=kc(this.bindings,Ka);const Va=new Set;let Za=!1,lb=!1;const vb=Eq(this.bindings);Ka.forEach(Qb=>{var cc;if(this.bindings[Qb.id]){var Ub=this.getShapeById(Qb.toId),rc=this.getShapeById(Qb.fromId);Ub&&rc?Va.has(rc.id)||(Qb=this.updateArrowBindings(rc),Va.add(rc.id),Qb&&(rc=te(te({},rc.props),Qb),Za=!0,null==(cc=this.getShapeById(rc.id))?
void 0:cc.update(rc,!1,!0))):(delete vb[Qb.id],lb=!0)}});Object.keys(vb).forEach(Qb=>{const cc=this.bindings[Qb];0===this.shapes.filter(Ub=>Ub.id===cc.fromId||Ub.id===cc.toId).length&&(delete vb[Qb],lb=!0)});lb&&this.update({bindings:vb});(Za||lb)&&this.app.persist(!0)});Ma(this,"updateArrowBindings",Ka=>{var Va,Za,lb,vb={start:Eq(Ka.props.handles.start),end:Eq(Ka.props.handles.end)},Qb={isBound:!1,handle:Ka.props.handles.start,point:Ud.add(Ka.props.handles.start.point,Ka.props.point)},cc={isBound:!1,
handle:Ka.props.handles.end,point:Ud.add(Ka.props.handles.end.point,Ka.props.point)};if(Ka.props.handles.start.bindingId){var Ub=void 0!==(null==(Va=Ka.props.decorations)?void 0:Va.start);Va=Ka.props.handles.start;var rc=this.bindings[Ka.props.handles.start.bindingId],lc=this.getShapeById(null==rc?void 0:rc.toId);if(lc){Qb=lc.getBounds();var Vb=lc.getExpandedBounds(),sc=Ve.expandBounds(Qb,Ub?rc.distance:1);const {minX:Gc,minY:Qc,width:Vc,height:Vd}=Vb,$d=Ud.add([Gc,Qc],Ud.mulV([Vc,Vd],Ud.rotWith(rc.point,
[.5,.5],lc.props.rotation||0)));Qb={isBound:!0,hasDecoration:Ub,binding:rc,handle:Va,point:$d,target:lc,bounds:Qb,expandedBounds:Vb,intersectBounds:sc,center:lc.getCenter()}}}if(Ka.props.handles.end.bindingId&&(Ub=void 0!==(null==(Za=Ka.props.decorations)?void 0:Za.end),Za=Ka.props.handles.end,Va=this.bindings[Ka.props.handles.end.bindingId],rc=this.getShapeById(null==Va?void 0:Va.toId))){cc=rc.getBounds();lc=rc.getExpandedBounds();Vb=Ub?Ve.expandBounds(cc,Va.distance):cc;const {minX:Gc,minY:Qc,width:Vc,
height:Vd}=lc;sc=Ud.add([Gc,Qc],Ud.mulV([Vc,Vd],Ud.rotWith(Va.point,[.5,.5],rc.props.rotation||0)));cc={isBound:!0,hasDecoration:Ub,binding:Va,handle:Za,point:sc,target:rc,bounds:cc,expandedBounds:lc,intersectBounds:Vb,center:rc.getCenter()}}for(const Gc of["end","start"]){Za="start"===Gc?Qb:cc;const Qc="start"===Gc?cc:Qb;if(Za.isBound)if(Za.binding.distance){if(Ub=Ud.uni(Ud.sub(Za.point,Qc.point)),Va=C(Qc.point,Ub,Za.intersectBounds,Za.target.props.rotation).filter(Vc=>Vc.didIntersect).map(Vc=>Vc.points[0]).sort((Vc,
Vd)=>Ud.dist(Vc,Qc.point)-Ud.dist(Vd,Qc.point)),Va[0])if(rc=void 0,Qc.isBound&&(rc=C(Qc.point,Ub,Qc.intersectBounds,Qc.target.props.rotation).filter(Vc=>Vc.didIntersect).map(Vc=>Vc.points[0]).sort((Vc,Vd)=>Ud.dist(Vc,Qc.point)-Ud.dist(Vd,Qc.point))[0]),Qc.isBound&&(2>Va.length||rc&&Va[0]&&10>Math.ceil(Ud.dist(Va[0],rc))||Ve.boundsContain(Za.expandedBounds,Qc.expandedBounds)||Ve.boundsCollide(Za.expandedBounds,Qc.expandedBounds)))Ub=Ud.uni(Ud.sub(Qc.point,Za.point)),Va=C(Za.point,Ub,Za.bounds,Za.target.props.rotation).filter(Vc=>
Vc.didIntersect).map(Vc=>Vc.points[0]),Va[0]&&(vb[Gc].point=Ud.toFixed(Ud.sub(Va[0],Ka.props.point)),vb["start"===Gc?"end":"start"].point=Ud.toFixed(Ud.add(Ud.sub(Va[0],Ka.props.point),Ud.mul(Ub,Math.min(Ud.dist(Va[0],Qc.point),10*(Ve.boundsContain(Qc.bounds,Za.intersectBounds)?-1:1))))));else{if(!Qc.isBound&&(Va[0]&&10>Ud.dist(Va[0],Qc.point)||Ag.pointInBounds(Qc.point,Za.intersectBounds)))return vb=Ud.uni(Ud.sub(Za.center,Qc.point)),null==(lb=Ka.getHandlesChange)?void 0:lb.call(Ka,Ka.props,{[Gc]:xf(te({},
Ka.props.handles[Gc]),{point:Ud.toFixed(Ud.add(Ud.sub(Qc.point,Ka.props.point),Ud.mul(vb,10)))})});Va[0]&&(vb[Gc].point=Ud.toFixed(Ud.sub(Va[0],Ka.props.point)))}}else vb[Gc].point=Ud.sub(Za.point,Ka.props.point)}return Ka.getHandlesChange(Ka.props,vb)});const {id:n,name:I,shapes:W=[],bindings:ia={},nonce:sa}=g;this.id=n;this.name=I;this.bindings=Object.assign({},ia);this.app=b;this.nonce=sa||0;this.addShapes(...W);rg(this);Ld(()=>{const Ka=0<this.shapes.length?Object.fromEntries(this.shapes.map(Va=>
[Va.id,Va.nonce])):null;if(this.lastShapesNounces&&Ka){const Va=this.lastShapesNounces,Za=[...(new Set([...Object.keys(Ka),...Object.keys(Va)]))].filter(lb=>Va[lb]!==Ka[lb]);requestAnimationFrame(()=>{this.cleanup(Za)})}Ka&&(this.lastShapesNounces=Ka)})}get serialized(){return{id:this.id,name:this.name,shapes:this.shapes.map(b=>b.serialized).filter(b=>!!b).map(b=>Cc(b)),bindings:Eq(this.bindings),nonce:this.nonce}}get shapesById(){return Object.fromEntries(this.shapes.map(b=>[b.id,b]))}update(b){Object.assign(this,
b);return this}updateBindings(b){Object.assign(this.bindings,b);return this}addShapes(...b){if(0!==b.length)return b="getBounds"in b[0]?b:b.map(g=>new (this.app.getShapeClass(g.type))(g)),this.shapes.push(...b),this.bump(),b}parseShapesArg(b){return"string"===typeof b[0]?this.shapes.filter(g=>b.includes(g.id)):b}removeShapes(...b){const g=this.parseShapesArg(b);this.shapes=this.shapes.filter(n=>!g.includes(n));return g}getBindableShapes(){return this.shapes.filter(b=>b.canBind).sort((b,g)=>g.nonce-
b.nonce).map(b=>b.id)}};mb([Bg],dm.prototype,"id",2);mb([Bg],dm.prototype,"name",2);mb([Bg],dm.prototype,"shapes",2);mb([Bg],dm.prototype,"bindings",2);mb([Eg],dm.prototype,"serialized",1);mb([Eg],dm.prototype,"shapesById",1);mb([Bg],dm.prototype,"nonce",2);mb([af],dm.prototype,"bump",2);mb([af],dm.prototype,"update",1);mb([af],dm.prototype,"updateBindings",1);mb([af],dm.prototype,"addShapes",1);mb([af],dm.prototype,"removeShapes",1);mb([af],dm.prototype,"bringForward",2);mb([af],dm.prototype,"sendBackward",
2);mb([af],dm.prototype,"bringToFront",2);mb([af],dm.prototype,"sendToBack",2);mb([af],dm.prototype,"cleanup",2);var Kk=class{constructor(){Ma(this,"shiftKey",!1);Ma(this,"ctrlKey",!1);Ma(this,"modKey",!1);Ma(this,"altKey",!1);Ma(this,"spaceKey",!1);Ma(this,"isPinching",!1);Ma(this,"currentScreenPoint",[0,0]);Ma(this,"currentPoint",[0,0]);Ma(this,"previousScreenPoint",[0,0]);Ma(this,"previousPoint",[0,0]);Ma(this,"originScreenPoint",[0,0]);Ma(this,"originPoint",[0,0]);Ma(this,"pointerIds",new Set);
Ma(this,"state","idle");Ma(this,"containerOffset",[0,0]);Ma(this,"onPointerDown",(b,g)=>{this.pointerIds.add(g.pointerId);this.updateModifiers(g);this.originScreenPoint=this.currentScreenPoint;this.originPoint=b;this.state="pointing"});Ma(this,"onPointerMove",(b,g)=>{"pinching"!==this.state&&("panning"===this.state&&(this.state="idle"),this.updateModifiers(g),this.previousPoint=this.currentPoint,this.currentPoint=b)});Ma(this,"onPointerUp",(b,g)=>{this.pointerIds.clear();this.updateModifiers(g);this.state=
"idle"});Ma(this,"onKeyDown",b=>{this.updateModifiers(b);switch(b.key){case " ":this.spaceKey=!0}});Ma(this,"onKeyUp",b=>{this.updateModifiers(b);switch(b.key){case " ":this.spaceKey=!1}});Ma(this,"onPinchStart",(b,g)=>{this.updateModifiers(g);this.state="pinching"});Ma(this,"onPinch",(b,g)=>{"pinching"===this.state&&this.updateModifiers(g)});Ma(this,"onPinchEnd",(b,g)=>{"pinching"===this.state&&(this.updateModifiers(g),this.state="idle")});rg(this)}updateContainerOffset(b){Object.assign(this.containerOffset,
b)}updateModifiers(b){b.isPrimary&&("clientX"in b&&(this.previousScreenPoint=this.currentScreenPoint,this.currentScreenPoint=Ud.sub([b.clientX,b.clientY],this.containerOffset)),"shiftKey"in b&&(this.shiftKey=b.shiftKey,this.ctrlKey=b.ctrlKey,this.altKey=b.altKey,this.modKey=pk()?b.metaKey:b.ctrlKey))}};mb([Bg],Kk.prototype,"shiftKey",2);mb([Bg],Kk.prototype,"ctrlKey",2);mb([Bg],Kk.prototype,"modKey",2);mb([Bg],Kk.prototype,"altKey",2);mb([Bg],Kk.prototype,"spaceKey",2);mb([Bg],Kk.prototype,"isPinching",
2);mb([Bg],Kk.prototype,"currentScreenPoint",2);mb([Bg],Kk.prototype,"currentPoint",2);mb([Bg],Kk.prototype,"previousScreenPoint",2);mb([Bg],Kk.prototype,"previousPoint",2);mb([Bg],Kk.prototype,"originScreenPoint",2);mb([Bg],Kk.prototype,"originPoint",2);mb([Bg],Kk.prototype,"state",2);mb([Bg],Kk.prototype,"containerOffset",2);mb([af],Kk.prototype,"updateContainerOffset",1);mb([af],Kk.prototype,"updateModifiers",1);mb([af],Kk.prototype,"onPointerDown",2);mb([af],Kk.prototype,"onPointerMove",2);mb([af],
Kk.prototype,"onPointerUp",2);mb([af],Kk.prototype,"onKeyDown",2);mb([af],Kk.prototype,"onKeyUp",2);mb([af],Kk.prototype,"onPinchStart",2);mb([af],Kk.prototype,"onPinch",2);mb([af],Kk.prototype,"onPinchEnd",2);var hC=(b,g=100)=>-(Math.cos(Math.PI*gd.clamp(b/g,0,1))-1)/2,ss=class{constructor(){Ma(this,"bounds",{minX:0,minY:0,maxX:1080,maxY:720,width:1080,height:720});Ma(this,"camera",{point:[0,0],zoom:1});Ma(this,"updateBounds",b=>{this.bounds=b;return this});Ma(this,"panCamera",b=>this.update({point:gd.sub(this.camera.point,
gd.div(b,this.camera.zoom))}));Ma(this,"panToPointWhenOutOfBounds",b=>{const g=gd.sub([this.currentView.maxX,this.currentView.maxY],b);b=gd.sub([this.currentView.minX,this.currentView.minY],b);this.panCamera(gd.mul([0>g[0]?g[0]:0<b[0]?b[0]:0,0>g[1]?g[1]:0<b[1]?b[1]:0],-ss.panMultiplier))});Ma(this,"update",({point:b,zoom:g})=>{void 0===b||isNaN(b[0])||isNaN(b[1])||(this.camera.point=b);void 0===g||isNaN(g)||(this.camera.zoom=Math.min(4,Math.max(.1,g)));return this});Ma(this,"getPagePoint",b=>{const {camera:g,
bounds:n}=this;return gd.sub(gd.div(gd.sub(b,[n.minX,n.minY]),g.zoom),g.point)});Ma(this,"getScreenPoint",b=>{const {camera:g}=this;return gd.mul(gd.add(b,g.point),g.zoom)});Ma(this,"onZoom",(b,g,n=!1)=>this.pinchZoom(b,[0,0],g,n));Ma(this,"pinchZoom",(b,g,n,I=!1)=>{var {camera:W}=this;g=gd.sub(W.point,gd.div(g,W.zoom));n=gd.clamp(n,ss.minZoom,ss.maxZoom);W=gd.div(b,W.zoom);b=gd.div(b,n);b=gd.toFixed(gd.add(g,gd.sub(b,W)));I?this.animateCamera({point:b,zoom:n}):this.update({point:b,zoom:n});return this});
Ma(this,"setZoom",(b,g=!1)=>{const {bounds:n}=this;this.onZoom([n.width/2,n.height/2],b,g)});Ma(this,"zoomIn",()=>{const {camera:b}=this;this.setZoom(b.zoom/.8,!0)});Ma(this,"zoomOut",()=>{const {camera:b}=this;this.setZoom(.8*b.zoom,!0)});Ma(this,"resetZoom",()=>{this.setZoom(1,!0);return this});Ma(this,"animateCamera",({point:b,zoom:g})=>this.animateToViewport({minX:-b[0],minY:-b[1],maxX:this.bounds.width/g-b[0],maxY:this.bounds.height/g-b[1],width:this.bounds.width/g,height:this.bounds.height/
g}));Ma(this,"animateToViewport",b=>{const g=performance.now(),n=te({},this.currentView),I=()=>{var W=performance.now()-g;W=hC(W);var ia=n.minX+(b.minX-n.minX)*W;this.update({point:[-ia,-(n.minY+(b.minY-n.minY)*W)],zoom:this.bounds.width/(n.maxX+(b.maxX-n.maxX)*W-ia)});1>W&&requestAnimationFrame(I)};I()});Ma(this,"zoomToBounds",({width:b,height:g,minX:n,minY:I})=>{const {bounds:W,camera:ia}=this;let sa=Math.min((W.width-100)/b,(W.height-100)/g);sa=Math.min(1,Math.max(ss.minZoom,ia.zoom===sa||1>ia.zoom?
Math.min(1,sa):sa));b=gd.add([-n,-I],[(W.width-b*sa)/2/sa,(W.height-g*sa)/2/sa]);this.animateCamera({point:b,zoom:sa})});rg(this)}get currentView(){const {bounds:b,camera:{point:g,zoom:n}}=this,I=b.width/n,W=b.height/n;return{minX:-g[0],minY:-g[1],maxX:I-g[0],maxY:W-g[1],width:I,height:W}}},so=ss;Ma(so,"minZoom",.1);Ma(so,"maxZoom",4);Ma(so,"panMultiplier",.05);mb([Bg],so.prototype,"bounds",2);mb([Bg],so.prototype,"camera",2);mb([af],so.prototype,"updateBounds",2);mb([af],so.prototype,"update",2);
mb([Eg],so.prototype,"currentView",1);var iC=class{constructor(b){Ma(this,"app");Ma(this,"editShape",g=>{this.app.transition("select").selectedTool.transition("editingShape",{shape:g});return this});Ma(this,"hoverShape",g=>{this.app.setHoveredShape(g);return this});Ma(this,"createShapes",(...g)=>{this.app.createShapes(g);return this});Ma(this,"updateShapes",(...g)=>{this.app.updateShapes(g);return this});Ma(this,"deleteShapes",(...g)=>{this.app.deleteShapes(g.length?g:this.app.selectedShapesArray);
return this});Ma(this,"selectShapes",(...g)=>{this.app.setSelectedShapes(g);return this});Ma(this,"deselectShapes",(...g)=>{const n="string"===typeof g[0]?g:g.map(I=>I.id);this.app.setSelectedShapes(this.app.selectedShapesArray.filter(I=>!n.includes(I.id)));return this});Ma(this,"flipHorizontal",(...g)=>{this.app.flipHorizontal(g);return this});Ma(this,"flipVertical",(...g)=>{this.app.flipVertical(g);return this});Ma(this,"selectAll",()=>{this.app.setSelectedShapes(this.app.currentPage.shapes.filter(g=>
!this.app.shapesInGroups().includes(g)));return this});Ma(this,"deselectAll",()=>{this.app.setSelectedShapes([]);return this});Ma(this,"zoomIn",()=>{this.app.viewport.zoomIn();return this});Ma(this,"zoomOut",()=>{this.app.viewport.zoomOut();return this});Ma(this,"resetZoom",()=>{this.app.viewport.resetZoom();return this});Ma(this,"zoomToFit",()=>{var {shapes:g}=this.app.currentPage;if(0===g.length)return this;g=Ve.getCommonBounds(g.map(n=>n.bounds));this.app.viewport.zoomToBounds(g);return this});
Ma(this,"cameraToCenter",()=>{var {shapes:g}=this.app.currentPage;if(0===g.length)return this;g=Ve.getCommonBounds(g.map(n=>n.bounds));this.app.viewport.update({point:Ud.add(Ud.neg(Ve.getBoundsCenter(g)),[this.app.viewport.currentView.width/2,this.app.viewport.currentView.height/2])});return this});Ma(this,"zoomToSelection",()=>{const {selectionBounds:g}=this.app;if(!g)return this;this.app.viewport.zoomToBounds(g);return this});Ma(this,"resetZoomToCursor",()=>{this.app.viewport.animateCamera({zoom:1,
point:Ud.sub(this.app.inputs.originScreenPoint,this.app.inputs.originPoint)});return this});Ma(this,"toggleGrid",()=>{const {settings:g}=this.app;g.update({showGrid:!g.showGrid});return this});Ma(this,"setColor",g=>{const {settings:n}=this.app;n.update({color:g});this.app.selectedShapesArray.forEach(I=>{I.update({fill:g,stroke:g})});this.app.persist();return this});Ma(this,"save",()=>{this.app.save();return this});Ma(this,"saveAs",()=>{this.app.save();return this});Ma(this,"undo",()=>{this.app.undo();
return this});Ma(this,"redo",()=>{this.app.redo();return this});Ma(this,"persist",()=>{this.app.persist();return this});Ma(this,"createNewLineBinding",(g,n)=>this.app.createNewLineBinding(g,n));Ma(this,"cloneShapes",({shapes:g,assets:n,bindings:I,point:W=[0,0]})=>{const ia=Ve.getCommonBounds(g.filter(Va=>"group"!==Va.type).map(Va=>{var Za,lb,vb,Qb,cc,Ub,rc,lc,Vb,sc,Gc,Qc,Vc,Vd,$d,Ee;return{minX:null!=(lb=null==(Za=Va.point)?void 0:Za[0])?lb:W[0],minY:null!=(Qb=null==(vb=Va.point)?void 0:vb[1])?Qb:
W[1],width:null!=(Ub=null==(cc=Va.size)?void 0:cc[0])?Ub:4,height:null!=(lc=null==(rc=Va.size)?void 0:rc[1])?lc:4,maxX:(null!=(sc=null==(Vb=Va.point)?void 0:Vb[0])?sc:W[0])+(null!=(Qc=null==(Gc=Va.size)?void 0:Gc[0])?Qc:4),maxY:(null!=(Vd=null==(Vc=Va.point)?void 0:Vc[1])?Vd:W[1])+(null!=(Ee=null==($d=Va.size)?void 0:$d[1])?Ee:4)}})),sa=g.map(Va=>xf(te({},Va),{id:$e(),point:[W[0]+Va.point[0]-ia.minX,W[1]+Va.point[1]-ia.minY]}));sa.forEach(Va=>{var Za;Va.children&&0<(null==(Za=Va.children)?void 0:
Za.length)&&(Va.children=Va.children.map(lb=>{var vb;return null==(vb=sa[g.findIndex(Qb=>Qb.id===lb)])?void 0:vb.id}).filter(Ii))});const Ka=[];sa.flatMap(Va=>{var Za;return Object.values(null!=(Za=Va.handles)?Za:{})}).forEach(Va=>{if(Va.bindingId){var Za=I[Va.bindingId];if(Za){var lb=g.findIndex(Qb=>Qb.id===Za.fromId);const vb=g.findIndex(Qb=>Qb.id===Za.toId);Za&&-1!==lb&&-1!==vb?(lb=xf(te({},Za),{id:$e(),fromId:sa[lb].id,toId:sa[vb].id}),Ka.push(lb),Va.bindingId=lb.id):Va.bindingId=void 0}else console.warn("binding not found",
Va.bindingId)}});n=n.filter(Va=>sa.some(Za=>Za.assetId===Va.id));return{shapes:sa,assets:n,bindings:Ka}});Ma(this,"getClonedShapesFromTldrString",(g,n)=>{try{{var I;const Za=null==(I=g.match(/<whiteboard-tldr>(.*)<\/whiteboard-tldr>/))?void 0:I[1];if(Za){try{var W=JSON.parse(Za)}catch(lb){W=null}var ia=W}else ia=void 0}g=ia;if(!g)return null;const {shapes:sa,bindings:Ka,assets:Va}=g;return this.cloneShapes({shapes:sa,bindings:Ka,assets:Va,point:n})}catch(sa){console.log(sa)}return null});Ma(this,
"cloneShapesIntoCurrentPage",g=>{(g=this.cloneShapes(g))&&this.addClonedShapes(g);return this});Ma(this,"addClonedShapes",g=>{const {shapes:n,assets:I,bindings:W}=g;0<I.length&&this.app.createAssets(I);0<n.length&&this.app.createShapes(n);this.app.currentPage.updateBindings(Object.fromEntries(W.map(ia=>[ia.id,ia])));this.app.selectedTool.transition("idle");return this});Ma(this,"addClonedShapesFromTldrString",(g,n)=>{(g=this.getClonedShapesFromTldrString(g,n))&&this.addClonedShapes(g);return this});
Ma(this,"doGroup",(g=this.app.allSelectedShapesArray)=>{var n=[...g.filter(I=>"group"===I.type),...g.map(I=>this.app.getParentGroup(I))].filter(Ii);this.app.currentPage.removeShapes(...n);g=g.filter(I=>"group"!==I.type);1<g.length&&(n=this.app.getShapeClass("group"),n=new n({id:$e(),type:n.id,parentId:this.app.currentPage.id,children:g.map(I=>I.id)}),this.app.currentPage.addShapes(n),this.app.setSelectedShapes([n]),this.app.bringForward(g));this.app.persist()});Ma(this,"unGroup",(g=this.app.allSelectedShapesArray)=>
{g=[...g.filter(I=>"group"===I.type),...g.map(I=>this.app.getParentGroup(I))].filter(Ii);const n=this.app.shapesInGroups(g);0<g.length&&(this.app.currentPage.removeShapes(...g),this.app.persist(),this.app.setSelectedShapes(n))});this.app=b}},fr=class{constructor(){Ma(this,"cursor","default");Ma(this,"rotation",0);Ma(this,"reset",()=>{this.cursor="default"});Ma(this,"setCursor",(b,g=0)=>{if(b!==this.cursor||g!==this.rotation)this.cursor=b,this.rotation=g});Ma(this,"setRotation",b=>{b!==this.rotation&&
(this.rotation=b)});rg(this)}};mb([Bg],fr.prototype,"cursor",2);mb([Bg],fr.prototype,"rotation",2);mb([af],fr.prototype,"reset",2);mb([af],fr.prototype,"setCursor",2);mb([af],fr.prototype,"setRotation",2);var gr=class{constructor(b){Ma(this,"app");Ma(this,"stack",[]);Ma(this,"isPaused",!0);Ma(this,"pause",()=>{this.isPaused||(this.isPaused=!0)});Ma(this,"resume",()=>{this.isPaused&&(this.isPaused=!1)});Ma(this,"persist",g=>{this.isPaused||this.creating||(this.app.pages.forEach(n=>n.bump()),this.app.notify("persist",
null))});Ma(this,"undo",()=>{this.isPaused||"idle"===this.app.selectedTool.currentState.id&&this.app.appUndo&&this.app.appUndo()});Ma(this,"redo",()=>{this.isPaused||"idle"===this.app.selectedTool.currentState.id&&this.app.appRedo&&this.app.appRedo()});Ma(this,"instantiateShape",g=>new (this.app.getShapeClass(g.type))(g));Ma(this,"deserialize",g=>{Hd(()=>{var n,{pages:I}=g;const W=this.isPaused;this.pause();const ia=[...this.app.selectedIds];try{const sa=new Map(this.app.pages),Ka=[];for(const Va of I){const Za=
sa.get(Va.id);if(void 0!==Za){const lb=new Map(Za.shapes.map(vb=>[vb.props.id,vb]));I=[];for(const vb of Va.shapes){const Qb=lb.get(vb.id);void 0!==Qb?(Qb.nonce!==vb.nonce&&(Qb.update(vb,!0),Qb.nonce=vb.nonce,Qb.setLastSerialized(vb)),lb.delete(vb.id)):I.push(this.instantiateShape(vb))}0<lb.size&&!this.app.selectedTool.isInAny("creating","editingShape")&&Za.removeShapes(...lb.values());0<I.length&&Za.addShapes(...I);sa.delete(Va.id);Za.updateBindings(Va.bindings);Za.nonce=null!=(n=Va.nonce)?n:0}else{const {id:lb,
name:vb,shapes:Qb,bindings:cc,nonce:Ub}=Va;Ka.push(new dm(this.app,{id:lb,name:vb,nonce:Ub,bindings:cc,shapes:Qb.map(rc=>this.instantiateShape(rc))}))}}0<Ka.length&&this.app.addPages(Ka);0<sa.size&&this.app.removePages(Array.from(sa.values()));this.app.setSelectedShapes(ia).setErasingShapes([])}catch(sa){console.warn(sa)}W||this.resume()})});this.app=b;rg(this)}get creating(){return"creating"===this.app.selectedTool.currentState.id}};mb([Bg],gr.prototype,"stack",2);mb([af],gr.prototype,"persist",
2);mb([af],gr.prototype,"undo",2);mb([af],gr.prototype,"redo",2);mb([af],gr.prototype,"deserialize",2);var rs=class{constructor(){Ma(this,"mode","light");Ma(this,"showGrid",!0);Ma(this,"color","");rg(this)}update(b){Object.assign(this,b)}};mb([Bg],rs.prototype,"mode",2);mb([Bg],rs.prototype,"showGrid",2);mb([Bg],rs.prototype,"color",2);mb([af],rs.prototype,"update",1);var $g=class extends ir{constructor(b,g,n){var I,W;super();Ma(this,"keybindingRegistered",!1);Ma(this,"uuid",$e());Ma(this,"api");
Ma(this,"inputs",new Kk);Ma(this,"cursors",new fr);Ma(this,"viewport",new so);Ma(this,"settings",new rs);Ma(this,"Tools",[]);Ma(this,"history",new gr(this));Ma(this,"persist",this.history.persist);Ma(this,"undo",this.history.undo);Ma(this,"redo",this.history.redo);Ma(this,"saving",!1);Ma(this,"saveState",()=>{this.history.isPaused||(this.saving=!0,requestAnimationFrame(()=>{this.saving&&(this.persist(),this.saving=!1)}))});Ma(this,"load",()=>{this.notify("load",null);return this});Ma(this,"save",
()=>{this.notify("save",null);return this});Ma(this,"saveAs",()=>{this.notify("saveAs",null);return this});Ma(this,"pages",new Map([["page",new dm(this,{id:"page",name:"page",shapes:[],bindings:{}})]]));Ma(this,"getPageById",ia=>{const sa=this.pages.get(ia);if(!sa)throw Error(`Could not find a page named ${ia}.`);return sa});Ma(this,"getShapeById",(ia,sa=this.currentPage.id)=>{var Ka;return null==(Ka=this.getPageById(sa))?void 0:Ka.shapesById[ia]});Ma(this,"createShapes",ia=>{(ia=this.currentPage.addShapes(...ia))&&
this.notify("create-shapes",ia);this.persist();return this});Ma(this,"updateShapes",ia=>{ia.forEach(sa=>{var Ka;return null==(Ka=this.getShapeById(sa.id))?void 0:Ka.update(sa)});this.persist();return this});Ma(this,"deleteShapes",ia=>{if(0===ia.length)return this;ia=ia.map(Va=>"string"===typeof Va?this.getShapeById(Va):Va).filter(Ii);const sa=this.shapesInGroups(ia);ia.forEach(Va=>{this.getParentGroup(Va)&&sa.push(Va)});let Ka=new Set([...ia,...sa].map(Va=>Va.id));sa.forEach(Va=>{var Za;const lb=
this.getParentGroup(Va);if(lb){const vb=null==(Za=lb.props.children)?void 0:Za.filter(Qb=>Qb!==Va.id);!vb||1>=(null==vb?void 0:vb.length)?Ka.add(lb.id):lb.update({children:vb})}});ia=[...Ka].map(Va=>this.getShapeById(Va));this.setSelectedShapes(this.selectedShapesArray.filter(Va=>!Ka.has(Va.id)));(ia=this.currentPage.removeShapes(...ia))&&this.notify("delete-shapes",ia);this.persist();return this});Ma(this,"bringForward",(ia=this.selectedShapesArray)=>{0<ia.length&&this.currentPage.bringForward(ia);
return this});Ma(this,"sendBackward",(ia=this.selectedShapesArray)=>{0<ia.length&&this.currentPage.sendBackward(ia);return this});Ma(this,"sendToBack",(ia=this.selectedShapesArray)=>{0<ia.length&&this.currentPage.sendToBack(ia);return this});Ma(this,"bringToFront",(ia=this.selectedShapesArray)=>{0<ia.length&&this.currentPage.bringToFront(ia);return this});Ma(this,"flipHorizontal",(ia=this.selectedShapesArray)=>{this.currentPage.flip(ia,"horizontal");return this});Ma(this,"flipVertical",(ia=this.selectedShapesArray)=>
{this.currentPage.flip(ia,"vertical");return this});Ma(this,"align",(ia,sa=this.selectedShapesArray)=>{if(2>sa.length)return this;const Ka=sa.map(Qb=>{const cc=Qb.getBounds();return{id:Qb.id,point:[cc.minX,cc.minY],bounds:cc}}),Va=Ve.getCommonBounds(Ka.map(({bounds:Qb})=>Qb)),Za=Va.minX+Va.width/2,lb=Va.minY+Va.height/2,vb=Object.fromEntries(Ka.map(({id:Qb,point:cc,bounds:Ub})=>[Qb,{prev:cc,next:{top:[cc[0],Va.minY],centerVertical:[cc[0],lb-Ub.height/2],bottom:[cc[0],Va.maxY-Ub.height],left:[Va.minX,
cc[1]],centerHorizontal:[Za-Ub.width/2,cc[1]],right:[Va.maxX-Ub.width,cc[1]]}[ia]}]));sa.forEach(Qb=>{vb[Qb.id]&&Qb.update({point:vb[Qb.id].next})});this.persist();return this});Ma(this,"distribute",(ia,sa=this.selectedShapesArray)=>{if(2>sa.length)return this;const Ka=Object.fromEntries(Ve.getDistributions(sa,ia).map(Va=>[Va.id,Va]));sa.forEach(Va=>{Ka[Va.id]&&Va.update({point:Ka[Va.id].next})});this.persist();return this});Ma(this,"packIntoRectangle",(ia=this.selectedShapesArray)=>{if(2>ia.length)return this;
const sa=Object.fromEntries(Ve.getPackedDistributions(ia).map(Ka=>[Ka.id,Ka]));ia.forEach(Ka=>{sa[Ka.id]&&Ka.update({point:sa[Ka.id].next})});this.persist();return this});Ma(this,"assets",{});Ma(this,"removeUnusedAssets",()=>{const ia=this.getCleanUpAssets();Object.keys(this.assets).forEach(sa=>{ia.some(Ka=>Ka.id===sa)||delete this.assets[sa]});this.persist();return this});Ma(this,"copy",()=>{if(0<this.selectedShapesArray.length&&!this.editingShape){const sa=this.allSelectedShapesArray;var ia=JSON.stringify({shapes:sa.map(Va=>
Va.serialized),assets:this.getCleanUpAssets().filter(Va=>sa.some(Za=>Za.props.assetId===Va.id)),bindings:Cc(this.currentPage.bindings)});ia=encodeURIComponent(`<whiteboard-tldr>${ia}</whiteboard-tldr>`);const Ka=this.selectedShapesArray.map(Va=>`((${Va.props.id}))`).join(" ");navigator.clipboard.write([new ClipboardItem({"text/html":new Blob([ia],{type:"text/html"}),"text/plain":new Blob([Ka],{type:"text/plain"})})])}});Ma(this,"paste",(ia,sa)=>{var Ka;this.editingShape||this.notify("paste",{point:this.inputs.currentPoint,
shiftKey:!!sa,dataTransfer:null!=(Ka=null==ia?void 0:ia.clipboardData)?Ka:void 0})});Ma(this,"cut",()=>{this.copy();this.api.deleteShapes()});Ma(this,"drop",(ia,sa)=>{this.notify("drop",{dataTransfer:ia,point:sa?this.viewport.getPagePoint(sa):Ve.getBoundsCenter(this.viewport.currentView)})});Ma(this,"selectTool",this.transition);Ma(this,"editingId");Ma(this,"setEditingShape",ia=>{this.editingId="string"===typeof ia?ia:null==ia?void 0:ia.id;return this});Ma(this,"clearEditingState",()=>{this.selectedTool.transition("idle");
return this.setEditingShape()});Ma(this,"hoveredId");Ma(this,"setHoveredShape",ia=>{this.hoveredId="string"===typeof ia?ia:null==ia?void 0:ia.id;return this});Ma(this,"selectedIds",new Set);Ma(this,"selectedShapes",new Set);Ma(this,"selectionRotation",0);Ma(this,"setSelectedShapes",ia=>{var sa;const {selectedIds:Ka,selectedShapes:Va}=this;Ka.clear();Va.clear();ia[0]&&"string"===typeof ia[0]?ia.forEach(lb=>Ka.add(lb)):ia.forEach(lb=>Ka.add(lb.id));const Za=this.currentPage.shapes.filter(lb=>Ka.has(lb.id));
Za.forEach(lb=>Va.add(lb));this.selectionRotation=1===Za.length?null!=(sa=Za[0].props.rotation)?sa:0:0;0===ia.length&&this.setEditingShape();return this});Ma(this,"erasingIds",new Set);Ma(this,"erasingShapes",new Set);Ma(this,"setErasingShapes",ia=>{const {erasingIds:sa,erasingShapes:Ka}=this;sa.clear();Ka.clear();ia[0]&&"string"===typeof ia[0]?ia.forEach(Va=>sa.add(Va)):ia.forEach(Va=>sa.add(Va.id));this.currentPage.shapes.filter(Va=>sa.has(Va.id)).forEach(Va=>Ka.add(Va));return this});Ma(this,"bindingIds");
Ma(this,"setBindingShapes",ia=>{this.bindingIds=ia;return this});Ma(this,"clearBindingShape",()=>this.setBindingShapes());Ma(this,"createNewLineBinding",(ia,sa)=>{ia="string"===typeof ia?this.getShapeById(ia):ia;sa="string"===typeof sa?this.getShapeById(sa):sa;if((null==ia?0:ia.canBind)&&(null==sa?0:sa.canBind)&&(sa=od(ia,sa))){const [Ka,Va]=sa;this.createShapes([Ka]);this.currentPage.updateBindings(Object.fromEntries(Va.map(Za=>[Za.id,Za])));this.persist();return!0}return!1});Ma(this,"brush");Ma(this,
"setBrush",ia=>{this.brush=ia;return this});Ma(this,"setCamera",(ia,sa)=>{this.viewport.update({point:ia,zoom:sa});return this});Ma(this,"getPagePoint",ia=>{const {camera:sa}=this.viewport;return gd.sub(gd.div(ia,sa.zoom),sa.point)});Ma(this,"getScreenPoint",ia=>{const {camera:sa}=this.viewport;return gd.mul(gd.add(ia,sa.point),sa.zoom)});Ma(this,"Shapes",new Map);Ma(this,"registerShapes",ia=>{ia.forEach(sa=>{if("group"===sa.id){const Ka=this;sa.prototype.getShapes=function(){var Va,Za;return null!=
(Za=null==(Va=this.props.children)?void 0:Va.map(lb=>Ka.getShapeById(lb)).filter(Boolean))?Za:[]}}return this.Shapes.set(sa.id,sa)})});Ma(this,"deregisterShapes",ia=>{ia.forEach(sa=>this.Shapes.delete(sa.id))});Ma(this,"getShapeClass",ia=>{if(!ia)throw Error("No shape type provided.");const sa=this.Shapes.get(ia);if(!sa)throw Error(`Could not find shape class for ${ia}`);return sa});Ma(this,"wrapUpdate",ia=>{Hd(()=>{const sa=!this.history.isPaused;sa&&this.history.pause();ia();sa&&(this.history.resume(),
this.persist())})});Ma(this,"subscriptions",new Set([]));Ma(this,"subscribe",(ia,sa)=>{if(void 0===sa)throw Error("Callback is required.");const Ka={event:ia,callback:sa};this.subscriptions.add(Ka);return()=>this.unsubscribe(Ka)});Ma(this,"unsubscribe",ia=>{this.subscriptions.delete(ia);return this});Ma(this,"notify",(ia,sa)=>{this.subscriptions.forEach(Ka=>{Ka.event===ia&&Ka.callback(this,sa)});return this});Ma(this,"onTransition",()=>{});Ma(this,"onPointerDown",(ia,sa)=>{if(!this.editingShape&&
1===sa.button&&!this.isIn("move"))this.temporaryTransitionToMove(sa);else if(2===sa.button&&!this.editingShape)sa.preventDefault(),this.transition("select");else if("clientX"in sa)this.inputs.onPointerDown([...this.viewport.getPagePoint([sa.clientX,sa.clientY]),.5],sa)});Ma(this,"onPointerUp",(ia,sa)=>{if(!this.editingShape&&1===sa.button&&this.isIn("move"))this.selectedTool.transition("idle",{exit:!0}),sa.stopPropagation(),sa.preventDefault();else if("clientX"in sa)this.inputs.onPointerUp([...this.viewport.getPagePoint([sa.clientX,
sa.clientY]),.5],sa)});Ma(this,"onPointerMove",(ia,sa)=>{if("clientX"in sa)this.inputs.onPointerMove([...this.viewport.getPagePoint([sa.clientX,sa.clientY]),.5],sa)});Ma(this,"onKeyDown",(ia,sa)=>{if(this.editingShape||" "!==sa.key||this.isIn("move"))this.inputs.onKeyDown(sa);else this.temporaryTransitionToMove(sa)});Ma(this,"onKeyUp",(ia,sa)=>{if(!this.editingShape&&" "===sa.key&&this.isIn("move"))this.selectedTool.transition("idle",{exit:!0}),sa.stopPropagation(),sa.preventDefault();else this.inputs.onKeyUp(sa)});
Ma(this,"onPinchStart",(ia,sa)=>{this.inputs.onPinchStart([...this.viewport.getPagePoint(ia.point),.5],sa)});Ma(this,"onPinch",(ia,sa)=>{this.inputs.onPinch([...this.viewport.getPagePoint(ia.point),.5],sa)});Ma(this,"onPinchEnd",(ia,sa)=>{this.inputs.onPinchEnd([...this.viewport.getPagePoint(ia.point),.5],sa)});this._states=[hr,er];this.history.pause();if(this.states&&0<this.states.length){this.registerStates(this.states);const ia=null!=(I=this.initial)?I:this.states[0].id;if(I=this.children.get(ia))this.currentState=
I,null==(W=this.currentState)?void 0:W._events.onEnter({fromId:"initial"})}g&&this.registerShapes(g);n&&this.registerTools(n);this.history.resume();b&&this.history.deserialize(b);this.api=new iC(this);rg(this);this.notify("mount",null)}dispose(){super.dispose();this.keybindingRegistered=!1;return this}initKeyboardShortcuts(){if(!this.keybindingRegistered){var b=this.constructor.shortcuts||[],g=Array.from(this.children.values()).filter(n=>n.constructor.shortcut).map(n=>({keys:n.constructor.shortcut,
fn:(I,W,ia)=>{this.transition(n.id)}}));this._disposables.push(...[{keys:"shift+0",fn:()=>this.api.resetZoom()},{keys:"shift+1",fn:()=>this.api.zoomToFit()},{keys:"mod+shift+1",fn:()=>this.api.zoomToSelection()},{keys:"mod+-",fn:()=>this.api.zoomOut()},{keys:"mod+\x3d",fn:()=>this.api.zoomIn()},{keys:"mod+x",fn:()=>this.cut()},{keys:"[",fn:()=>this.sendBackward()},{keys:"shift+[",fn:()=>this.sendToBack()},{keys:"]",fn:()=>this.bringForward()},{keys:"shift+]",fn:()=>this.bringToFront()},{keys:"mod+a",
fn:()=>{const {selectedTool:n}=this;"select"!==n.id&&this.selectTool("select");this.api.selectAll()}},{keys:"mod+shift+s",fn:()=>{this.saveAs();this.notify("saveAs",null)}},{keys:"mod+shift+v",fn:(n,I,W)=>{this.editingShape||(W.preventDefault(),this.paste(void 0,!0))}},{keys:["del","backspace"],fn:()=>{this.editingShape||(this.api.deleteShapes(),this.selectedTool.transition("idle"))}},{keys:"mod+g",fn:()=>{this.api.doGroup()}},{keys:"mod+shift+g",fn:()=>{this.api.unGroup()}},{keys:"shift+g",fn:()=>
{this.api.toggleGrid()}},...b,...g].map(({keys:n,fn:I})=>rn.registerShortcut(n,W=>{I(this,this,W)})));this.keybindingRegistered=!0}}loadDocumentModel(b){this.history.deserialize(b);b.assets&&0<b.assets.length&&this.addAssets(b.assets);return this}get serialized(){return{}}get currentPageId(){return this.pages.keys().next().value}get currentPage(){return this.getPageById(this.currentPageId)}addPages(b){b.forEach(g=>this.pages.set(g.id,g));this.persist();return this}removePages(b){b.forEach(g=>this.pages.delete(g.id));
this.persist();return this}shapesInGroups(b=this.shapes){return b.flatMap(g=>g.props.children).filter(Ii).map(g=>this.getShapeById(g)).filter(Ii)}getParentGroup(b){return this.shapes.find(g=>{var n;return null==(n=g.props.children)?void 0:n.includes(b.id)})}addAssets(b){b.forEach(g=>this.assets[g.id]=g);this.persist();return this}removeAssets(b){"string"===typeof b[0]?b.forEach(g=>delete this.assets[g]):b.forEach(g=>delete this.assets[g.id]);this.persist();return this}getCleanUpAssets(){const b=new Set;
this.pages.forEach(g=>g.shapes.forEach(n=>{n.props.assetId&&this.assets[n.props.assetId]&&b.add(this.assets[n.props.assetId])}));return Array.from(b)}createAssets(b){this.addAssets(b);this.notify("create-assets",{assets:b});this.persist();return this}get selectedTool(){return this.currentState}registerTools(b){this.Tools=b;return this.registerStates(b)}get editingShape(){const {editingId:b,currentPage:g}=this;return b?g.shapes.find(n=>n.id===b):void 0}get hoveredShape(){const {hoveredId:b,currentPage:g}=
this;return b?g.shapes.find(n=>n.id===b):void 0}get hoveredGroup(){const {hoveredShape:b}=this;return b?this.shapes.find(g=>{var n;return"group"===g.type&&(null==(n=g.props.children)?void 0:n.includes(b.id))}):void 0}get selectedShapesArray(){const {selectedShapes:b,selectedTool:g}=this;return"select"!==g.id?[]:Array.from(b.values())}get allSelectedShapes(){return new Set(this.allSelectedShapesArray)}get allSelectedShapesArray(){const {selectedShapesArray:b}=this;return[...(new Set([...b,...this.shapesInGroups(b)]))]}setSelectionRotation(b){this.selectionRotation=
b}get erasingShapesArray(){return Array.from(this.erasingShapes.values())}get bindingShapes(){var b;const g=1===this.selectedShapesArray.length?this.selectedShapesArray.flatMap(I=>{var W;return Object.values(null!=(W=I.props.handles)?W:{})}).flatMap(I=>I.bindingId).filter(Ii).flatMap(I=>{var W,ia;return[null==(W=this.currentPage.bindings[I])?void 0:W.fromId,null==(ia=this.currentPage.bindings[I])?void 0:ia.toId]}).filter(Ii):[],n=[...(null!=(b=this.bindingIds)?b:[]),...g];return n?this.currentPage.shapes.filter(I=>
null==n?void 0:n.includes(I.id)):void 0}get currentGrid(){const {zoom:b}=this.viewport.camera;return.15>b?128:1>b?32:8}get shapes(){const {currentPage:{shapes:b}}=this;return Array.from(b.values())}get shapesInViewport(){const {selectedShapes:b,currentPage:g,viewport:{currentView:n}}=this;return g.shapes.filter(I=>!I.canUnmount||b.has(I)||Ve.boundsContain(n,I.rotatedBounds)||Ve.boundsCollide(n,I.rotatedBounds))}get selectionDirectionHint(){const {selectionBounds:b,viewport:{currentView:g}}=this;if(b&&
!Ve.boundsContain(g,b)&&!Ve.boundsCollide(g,b)){var n=Ve.getBoundsCenter(b);return gd.clampV([(n[0]-g.minX-g.width/2)/g.width,(n[1]-g.minY-g.height/2)/g.height],-1,1)}}get selectionBounds(){const {selectedShapesArray:b}=this;if(0!==b.length)return 1===b.length?xf(te({},b[0].bounds),{rotation:b[0].props.rotation}):Ve.getCommonBounds(this.selectedShapesArray.map(g=>g.rotatedBounds))}get showSelection(){var b;const {selectedShapesArray:g}=this;return this.isIn("select")&&!this.isInAny("select.translating",
"select.pinching","select.rotating")&&(1===g.length&&!(null==(b=g[0])?0:b.hideSelection)||1<g.length)}get showSelectionDetail(){return this.isIn("select")&&!this.isInAny("select.translating","select.pinching")&&0<this.selectedShapes.size&&!this.selectedShapesArray.every(b=>b.hideSelectionDetail)&&!1}get showSelectionRotation(){return this.showSelectionDetail&&this.isInAny("select.rotating","select.pointingRotateHandle")}get showContextBar(){const {selectedShapesArray:b}=this;return this.isInAny("select.idle",
"select.hoveringSelectionHandle")&&!this.isIn("select.contextMenu")&&0<b.length&&!b.every(g=>g.hideContextBar)}get showRotateHandles(){const {selectedShapesArray:b}=this;return this.isInAny("select.idle","select.hoveringSelectionHandle","select.pointingRotateHandle","select.pointingResizeHandle")&&0<b.length&&!b.some(g=>g.hideRotateHandle)}get showResizeHandles(){const {selectedShapesArray:b}=this;return this.isInAny("select.idle","select.hoveringSelectionHandle","select.pointingShape","select.pointingSelectedShape",
"select.pointingRotateHandle","select.pointingResizeHandle")&&1===b.length&&!b.every(g=>g.hideResizeHandles)}temporaryTransitionToMove(b){b.stopPropagation();b.preventDefault();this.transition("move",{prevTool:this.selectedTool});this.selectedTool.transition("idleHold")}};Ma($g,"id","app");Ma($g,"initial","select");mb([Eg],$g.prototype,"serialized",1);mb([Bg],$g.prototype,"pages",2);mb([Eg],$g.prototype,"currentPageId",1);mb([Eg],$g.prototype,"currentPage",1);mb([af],$g.prototype,"addPages",1);mb([af],
$g.prototype,"removePages",1);mb([af],$g.prototype,"createShapes",2);mb([af],$g.prototype,"updateShapes",2);mb([af],$g.prototype,"deleteShapes",2);mb([Bg],$g.prototype,"assets",2);mb([af],$g.prototype,"addAssets",1);mb([af],$g.prototype,"removeAssets",1);mb([af],$g.prototype,"removeUnusedAssets",2);mb([Eg],$g.prototype,"selectedTool",1);mb([Bg],$g.prototype,"editingId",2);mb([Eg],$g.prototype,"editingShape",1);mb([af],$g.prototype,"setEditingShape",2);mb([Bg],$g.prototype,"hoveredId",2);mb([Eg],$g.prototype,
"hoveredShape",1);mb([Eg],$g.prototype,"hoveredGroup",1);mb([af],$g.prototype,"setHoveredShape",2);mb([Bg],$g.prototype,"selectedIds",2);mb([Bg],$g.prototype,"selectedShapes",2);mb([Bg],$g.prototype,"selectionRotation",2);mb([Eg],$g.prototype,"selectedShapesArray",1);mb([Eg],$g.prototype,"allSelectedShapes",1);mb([Eg],$g.prototype,"allSelectedShapesArray",1);mb([af],$g.prototype,"setSelectedShapes",2);mb([af],$g.prototype,"setSelectionRotation",1);mb([Bg],$g.prototype,"erasingIds",2);mb([Bg],$g.prototype,
"erasingShapes",2);mb([Eg],$g.prototype,"erasingShapesArray",1);mb([af],$g.prototype,"setErasingShapes",2);mb([Bg],$g.prototype,"bindingIds",2);mb([Eg],$g.prototype,"bindingShapes",1);mb([af],$g.prototype,"setBindingShapes",2);mb([af],$g.prototype,"createNewLineBinding",2);mb([Bg],$g.prototype,"brush",2);mb([af],$g.prototype,"setBrush",2);mb([af],$g.prototype,"setCamera",2);mb([Eg],$g.prototype,"currentGrid",1);mb([Eg],$g.prototype,"shapes",1);mb([Eg],$g.prototype,"shapesInViewport",1);mb([Eg],$g.prototype,
"selectionDirectionHint",1);mb([Eg],$g.prototype,"selectionBounds",1);mb([Eg],$g.prototype,"showSelection",1);mb([Eg],$g.prototype,"showSelectionDetail",1);mb([Eg],$g.prototype,"showSelectionRotation",1);mb([Eg],$g.prototype,"showContextBar",1);mb([Eg],$g.prototype,"showRotateHandles",1);mb([Eg],$g.prototype,"showResizeHandles",1);var cC=Function.prototype.toString,iv=Object.create,dC=Object.prototype.toString,eC=function(){function b(){this._keys=[];this._values=[]}b.prototype.has=function(g){return!!~this._keys.indexOf(g)};
b.prototype.get=function(g){return this._values[this._keys.indexOf(g)]};b.prototype.set=function(g,n){this._keys.push(g);this._values.push(n)};return b}(),fC="undefined"!==typeof WeakMap?Ue:we,gC="g"===/test/g.flags?If:dg,bC="undefined"!==typeof Symbol?Sf:Af,xD=Object.defineProperty,AC=Object.getOwnPropertyDescriptor,hy=Object.getOwnPropertyNames,tv=Object.getOwnPropertySymbols,iy=Object.prototype,jy=iy.hasOwnProperty,CC=iy.propertyIsEnumerable,ky="function"===typeof tv,DC=ky?Qg:hy,EC=Array.isArray,
uv=Object.assign,FC=Object.getPrototypeOf,gy={array:function(b,g){var n=new g.Constructor;g.cache.set(b,n);for(var I=0,W=b.length;I<W;++I)n[I]=g.copier(b[I],g);return n},arrayBuffer:function(b,g){return b.slice(0)},blob:function(b,g){return b.slice(0,b.size,b.type)},dataView:function(b,g){return new g.Constructor(b.buffer.slice(0))},date:function(b,g){return new g.Constructor(b.getTime())},error:Lh,map:rh,object:ky?Yh:ki,regExp:function(b,g){g=new g.Constructor(b.source,gC(b));g.lastIndex=b.lastIndex;
return g},set:hf},yC=uv({},gy,{array:function(b,g){var n=new g.Constructor;g.cache.set(b,n);return fi(b,n,g)},map:function(b,g){return fi(b,rh(b,g),g)},object:function(b,g){var n=Lf(g.prototype);g.cache.set(b,n);return fi(b,n,g)},set:function(b,g){return fi(b,hf(b,g),g)}});Mh(uv({},yC,{}));var zC=Mh({});cb(He());var yD=cb(da()),Eq=zC,Kn=class{static insertTextFirefox(b,g){b.setRangeText(g,b.selectionStart||0,b.selectionEnd||0,"end");b.dispatchEvent(new InputEvent("input",{data:g,inputType:"insertText",
isComposing:!1}))}static insert(b,g){const n=b.ownerDocument,I=n.activeElement;I!==b&&b.focus();n.execCommand("insertText",!1,g)||Kn.insertTextFirefox(b,g);I===n.body?b.blur():I instanceof HTMLElement&&I!==b&&I.focus()}static set(b,g){b.select();Kn.insert(b,g)}static getSelection(b){const {selectionStart:g,selectionEnd:n}=b;return b.value.slice(g?g:void 0,n?n:void 0)}static wrapSelection(b,g,n){const {selectionStart:I,selectionEnd:W}=b,ia=Kn.getSelection(b);Kn.insert(b,g+ia+(null!=n?n:g));b.selectionStart=
(I||0)+g.length;b.selectionEnd=(W||0)+g.length}static replace(b,g,n){let I=0;b.value.replace(g,(...W)=>{const ia=I+W[W.length-2],sa=W[0].length;b.selectionStart=ia;b.selectionEnd=ia+sa;W="string"===typeof n?n:n(...W);Kn.insert(b,W);b.selectionStart=ia;I+=W.length-sa;return W})}static findLineEnd(b,g){const n=b.lastIndexOf("\n",g-1)+1;return"\t"!==b.charAt(n)?g:n+1}static indent(b){var g;const {selectionStart:n,selectionEnd:I,value:W}=b;var ia=W.slice(n,I);if((ia=null==(g=/\n/g.exec(ia))?void 0:g.length)&&
0<ia){g=W.lastIndexOf("\n",n-1)+1;var sa=b.value.slice(g,I-1);ia=sa.replace(/^|\n/g,`$&${Kn.INDENT}`);sa=ia.length-sa.length;b.setSelectionRange(g,I-1);Kn.insert(b,ia);b.setSelectionRange(n+1,I+sa)}else Kn.insert(b,Kn.INDENT)}static unindent(b){const {selectionStart:g,selectionEnd:n,value:I}=b;var W=I.lastIndexOf("\n",g-1)+1;const ia=Kn.findLineEnd(I,n);var sa=b.value.slice(W,ia);const Ka=sa.replace(/(^|\n)(\t| {1,2})/g,"$1");sa=sa.length-Ka.length;b.setSelectionRange(W,ia);Kn.insert(b,Ka);W=(W=/\t| {1,2}/.exec(I.slice(W,
g)))?W[0].length:0;b.setSelectionRange(g-W,Math.max(g-W,n-sa))}static normalizeText(b){return b.replace(Kn.fixNewLines,"\n")}},wr=Kn;Ma(wr,"fixNewLines",/\r?\n|\r/g);Ma(wr,"INDENT","  ");var Mp;"undefined"!==typeof window&&(Mp=Mj());var Dv=new Map,zo=pk()?"⌘":"Ctrl",KC=class extends $g{},qy=cb(V(22)),JC=()=>{};/^((?!chrome|android).)*safari/i.test(navigator.userAgent);var py=cb(V(22)),xv={},Gs=cb(V(22)),IC=b=>{for(b=b.parentElement;b&&b!==document.body;){const {overflowY:g}=window.getComputedStyle(b);
if(b.scrollHeight>b.clientHeight&&("auto"===g||"scroll"===g||"overlay"===g))return b;b=b.parentElement}return document},wv=cb(V(22)),yv=new Map,HC={accent:"rgb(255, 0, 0)",brushFill:"var(--ls-scrollbar-background-color, rgba(0, 0, 0, .05))",brushStroke:"var(--ls-scrollbar-thumb-hover-color, rgba(0, 0, 0, .05))",selectStroke:"var(--color-selectedFill)",selectFill:"rgba(65, 132, 244, 0.05)",binding:"rgba(65, 132, 244, 0.5)",background:"var(--ls-primary-background-color)",foreground:"var(--ls-primary-text-color)",
grid:"var(--ls-quaternary-background-color)"},GC=((b,...g)=>b.reduce((n,I,W)=>n+I+(W<g.length?g[W]:""),""))`
  .tl-container {
    --tl-zoom: 1;
    --tl-scale: calc(1 / var(--tl-zoom));
    --tl-padding: 64px;
    --tl-shadow-color: 0deg 0% 0%;
    --tl-binding-distance: ${4}px;
    --tl-shadow-elevation-low: 0px 0.4px 0.5px hsl(var(--tl-shadow-color) / 0.04),
      0px 0.6px 0.8px -0.7px hsl(var(--tl-shadow-color) / 0.06),
      0.1px 1.2px 1.5px -1.4px hsl(var(--tl-shadow-color) / 0.08);
    --tl-shadow-elevation-medium: 0px 0.4px 0.5px hsl(var(--tl-shadow-color) / 0.04),
      0.1px 1.3px 1.7px -0.5px hsl(var(--tl-shadow-color) / 0.06),
      0.1px 2.8px 3.6px -1px hsl(var(--tl-shadow-color) / 0.07),
      0.3px 6.1px 7.8px -1.4px hsl(var(--tl-shadow-color) / 0.09);
    --tl-shadow-elevation-high: 0px 0.4px 0.5px hsl(var(--tl-shadow-color) / 0.04),
      0.1px 2.3px 3px -0.2px hsl(var(--tl-shadow-color) / 0.05),
      0.2px 4.1px 5.3px -0.5px hsl(var(--tl-shadow-color) / 0.06),
      0.4px 6.6px 8.5px -0.7px hsl(var(--tl-shadow-color) / 0.07),
      0.6px 10.3px 13.2px -1px hsl(var(--tl-shadow-color) / 0.08),
      0.9px 16px 20.6px -1.2px hsl(var(--tl-shadow-color) / 0.09),
      1.3px 24.3px 31.2px -1.4px hsl(var(--tl-shadow-color) / 0.1);
    box-sizing: border-box;
    position: relative;
    top: 0px;
    left: 0px;
    width: 100%;
    height: 100%;
    max-width: 100%;
    max-height: 100%;
    box-sizing: border-box;
    padding: 0px;
    margin: 0px;
    outline: none;
    z-index: 100;
    user-select: none;
    touch-action: none;
    overscroll-behavior: none;
    background-color: var(--tl-background);
    cursor: inherit;
    box-sizing: border-box;
    color: var(--tl-foreground);
    -webkit-user-select: none;
    -webkit-user-drag: none;
  }

  .tl-overlay {
    background: none;
    fill: transparent;
    position: absolute;
    width: 100%;
    height: 100%;
    touch-action: none;
    pointer-events: none;
  }

  .tl-snap-line {
    stroke: var(--tl-accent);
    stroke-width: calc(1px * var(--tl-scale));
  }

  .tl-snap-point {
    stroke: var(--tl-accent);
    stroke-width: calc(1px * var(--tl-scale));
  }

  .tl-canvas {
    position: absolute;
    width: 100%;
    height: 100%;
    touch-action: none;
    pointer-events: all;
    overflow: clip;
    outline: none;
  }

  .tl-layer {
    position: absolute;
    top: 0px;
    left: 0px;
    height: 0px;
    width: 0px;
    contain: layout style size;
  }

  .tl-absolute {
    position: absolute;
    top: 0px;
    left: 0px;
    transform-origin: center center;
    contain: layout style size;
  }

  .tl-positioned {
    position: absolute;
    transform-origin: center center;
    pointer-events: none;
    display: flex;
    align-items: center;
    justify-content: center;
    contain: layout style size;
  }

  .tl-positioned-svg {
    width: 100%;
    height: 100%;
    overflow: hidden;
    contain: layout style size;
    pointer-events: none;
  }

  .tl-positioned-div {
    position: relative;
    width: 100%;
    height: 100%;
    padding: var(--tl-padding);
    contain: layout style size;
  }

  .tl-positioned-inner {
    position: relative;
    width: 100%;
    height: 100%;
  }

  .tl-counter-scaled {
    transform: scale(var(--tl-scale));
  }

  .tl-dashed {
    stroke-dasharray: calc(2px * var(--tl-scale)), calc(2px * var(--tl-scale));
  }

  .tl-transparent {
    fill: transparent;
    stroke: transparent;
  }

  .tl-corner-handle {
    stroke: var(--tl-selectStroke);
    fill: var(--tl-background);
    stroke-width: calc(1.5px * var(--tl-scale));
  }

  .tl-rotate-handle {
    stroke: var(--tl-selectStroke);
    fill: var(--tl-background);
    stroke-width: calc(1.5px * var(--tl-scale));
  }

  .tl-user {
    left: -4px;
    top: -4px;
    height: 8px;
    width: 8px;
    border-radius: 100%;
    pointer-events: none;
  }

  .tl-indicator {
    fill: transparent;
    stroke-width: calc(1.5px * var(--tl-scale));
    pointer-events: none;
  }

  .tl-indicator-container {
    transform-origin: 0 0;
    fill: transparent;
    stroke-width: calc(1.5px * var(--tl-scale));
    pointer-events: none;
  }

  .tl-user-indicator-bounds {
    border-style: solid;
    border-width: calc(1px * var(--tl-scale));
  }

  .tl-selected {
    stroke: var(--tl-selectStroke);
  }

  .tl-hovered {
    stroke: var(--tl-selectStroke);
  }

  .tl-clone-target {
    pointer-events: all;
  }

  .tl-clone-target:hover .tl-clone-button {
    opacity: 1;
  }

  .tl-clone-button-target {
    cursor: pointer;
    pointer-events: all;
  }

  .tl-clone-button-target:hover .tl-clone-button {
    fill: var(--tl-selectStroke);
  }

  .tl-clone-button {
    opacity: 0;
    r: calc(8px * var(--tl-scale));
    stroke-width: calc(1.5px * var(--tl-scale));
    stroke: var(--tl-selectStroke);
    fill: var(--tl-background);
  }

  .tl-bounds {
    pointer-events: none;
    contain: layout style size;
  }

  .tl-bounds-bg {
    stroke: none;
    fill: var(--tl-selectFill);
    pointer-events: all;
    contain: layout style size;
  }

  .tl-bounds-fg {
    fill: transparent;
    stroke: var(--tl-selectStroke);
    stroke-width: calc(1.5px * var(--tl-scale));
  }

  .tl-brush {
    fill: var(--tl-brushFill);
    stroke: var(--tl-brushStroke);
    stroke-width: calc(1px * var(--tl-scale));
    pointer-events: none;
  }

  .tl-dot {
    fill: var(--tl-background);
    stroke: var(--tl-foreground);
    stroke-width: 2px;
  }

  .tl-handle {
    fill: var(--tl-background);
    stroke: var(--tl-selectStroke);
    stroke-width: 1.5px;
    pointer-events: none;
  }

  .tl-handle-bg {
    fill: transparent;
    stroke: none;
    r: calc(16px / max(1, var(--tl-zoom)));
    pointer-events: all;
    cursor: grab;
  }

  .tl-handle-bg:active {
    pointer-events: all;
    fill: none;
  }

  .tl-handle-bg:hover {
    cursor: grab;
    fill: var(--tl-selectFill);
  }

  .tl-binding-indicator {
    fill: transparent;
    stroke: var(--tl-binding);
  }

  .tl-centered {
    display: grid;
    place-content: center;
    place-items: center;
  }

  .tl-centered > * {
    grid-column: 1;
    grid-row: 1;
  }

  .tl-centered-g {
    transform: translate(var(--tl-padding), var(--tl-padding));
  }

  .tl-current-parent > *[data-shy='true'] {
    opacity: 1;
  }

  .tl-binding {
    fill: none;
    stroke: var(--tl-selectStroke);
    stroke-width: calc(2px * var(--tl-scale));
  }

  .tl-counter-scaled-positioned {
    position: absolute;
    top: 0;
    left: 0;
    pointer-events: none;
    padding: 0;
    contain: layout style size;
  }

  .tl-fade-in {
    opacity: 1;
    transition-timing-function: ease-in-out;
    transition-property: opacity;
    transition-duration: 0.12s;
    transition-delay: 0;
  }

  .tl-fade-out {
    opacity: 0;
    transition-timing-function: ease-out;
    transition-property: opacity;
    transition-duration: 0.12s;
    transition-delay: 0;
  }

  .tl-counter-scaled-positioned > .tl-positioned-div {
    user-select: none;
    padding: 64px;
  }

  .tl-context-bar > * {
    grid-column: 1;
    grid-row: 1;
  }

  .tl-bounds-detail {
    padding: 2px 3px;
    border-radius: 1px;
    white-space: nowrap;
    width: fit-content;
    text-align: center;
    font-size: 12px;
    font-weight: 500;
    background-color: var(--tl-selectStroke);
    color: var(--tl-background);
  }

  .tl-grid-canvas {
    position: absolute;
    touch-action: none;
    pointer-events: none;
    user-select: none;
  }

  .tl-grid {
    position: absolute;
    width: 100%;
    height: 100%;
    touch-action: none;
    pointer-events: none;
    user-select: none;
  }

  .tl-grid-dot {
    fill: var(--tl-grid);
  }

  .tl-html-canvas {
    position: absolute;
    top: 0px;
    left: 0px;
    width: 100%;
    height: 100%;
    zindex: 20000;
    pointer-events: none;
    border: 2px solid red;
  }

  .tl-direction-indicator {
    z-index: 100000;
    position: absolute;
    top: 0px;
    left: 0px;
    fill: var(--tl-selectStroke);
  }
`,ny=cb(V(22)),oy=cb(V(22)),vv={},Ek={toVector(b,g){void 0===b&&(b=g);return Array.isArray(b)?b:[b,b]},add(b,g){return[b[0]+g[0],b[1]+g[1]]},sub(b,g){return[b[0]-g[0],b[1]-g[1]]},addTo(b,g){b[0]+=g[0];b[1]+=g[1]},subTo(b,g){b[0]-=g[0];b[1]-=g[1]}},my={pointer:{start:"down",change:"move",end:"up"},mouse:{start:"down",change:"move",end:"up"},touch:{start:"start",change:"move",end:"end"},gesture:{start:"start",change:"change",end:"end"}},zD=["enter","leave"],eD=["gotpointercapture","lostpointercapture"],
ty=class{constructor(b,g,n){this.ctrl=b;this.args=g;this.key=n;this.state||(this.state={},this.computeValues([0,0]),this.computeInitial(),this.init&&this.init(),this.reset())}get state(){return this.ctrl.state[this.key]}set state(b){this.ctrl.state[this.key]=b}get shared(){return this.ctrl.state.shared}get eventStore(){return this.ctrl.gestureEventStores[this.key]}get timeoutStore(){return this.ctrl.gestureTimeoutStores[this.key]}get config(){return this.ctrl.config[this.key]}get sharedConfig(){return this.ctrl.config.shared}get handler(){return this.ctrl.handlers[this.key]}reset(){const {state:b,
shared:g,ingKey:n,args:I}=this;g[n]=b._active=b.active=b._blocked=b._force=!1;b._step=[!1,!1];b.intentional=!1;b._movement=[0,0];b._distance=[0,0];b._direction=[0,0];b._delta=[0,0];b._bounds=[[-Infinity,Infinity],[-Infinity,Infinity]];b.args=I;b.axis=void 0;b.memo=void 0;b.elapsedTime=0;b.direction=[0,0];b.distance=[0,0];b.overflow=[0,0];b._movementBound=[!1,!1];b.velocity=[0,0];b.movement=[0,0];b.delta=[0,0];b.timeStamp=0}start(b){const g=this.state,n=this.config;g._active||(this.reset(),this.computeInitial(),
g._active=!0,g.target=b.target,g.currentTarget=b.currentTarget,g.lastOffset=n.from?Dj(n.from,g):g.offset,g.offset=g.lastOffset);g.startTime=g.timeStamp=b.timeStamp}computeValues(b){const g=this.state;g._values=b;g.values=this.config.transform(b)}computeInitial(){const b=this.state;b._initial=b._values;b.initial=b.values}compute(b){const {state:g,config:n,shared:I}=this;g.args=this.args;var W=0;if(b){g.event=b;n.preventDefault&&b.cancelable&&g.event.preventDefault();g.type=b.type;I.touches=this.ctrl.pointerIds.size||
this.ctrl.touchIds.size;I.locked=!!document.pointerLockElement;W=Object;var ia=W.assign,sa={};"buttons"in b&&(sa.buttons=b.buttons);if("shiftKey"in b){const {shiftKey:Qc,altKey:Vc,metaKey:Vd,ctrlKey:$d}=b;Object.assign(sa,{shiftKey:Qc,altKey:Vc,metaKey:Vd,ctrlKey:$d})}ia.call(W,I,sa);I.down=I.pressed=1===I.buttons%2||0<I.touches;W=b.timeStamp-g.timeStamp;g.timeStamp=b.timeStamp;g.elapsedTime=g.timeStamp-g.startTime}g._active&&(ia=g._delta.map(Math.abs),Ek.addTo(g._distance,ia));this.axisIntent&&this.axisIntent(b);
const [Ka,Va]=g._movement,[Za,lb]=n.threshold,{_step:vb,values:Qb}=g;n.hasCustomTransform?(!1===vb[0]&&(vb[0]=Math.abs(Ka)>=Za&&Qb[0]),!1===vb[1]&&(vb[1]=Math.abs(Va)>=lb&&Qb[1])):(!1===vb[0]&&(vb[0]=Math.abs(Ka)>=Za&&Math.sign(Ka)*Za),!1===vb[1]&&(vb[1]=Math.abs(Va)>=lb&&Math.sign(Va)*lb));g.intentional=!1!==vb[0]||!1!==vb[1];if(g.intentional){ia=[0,0];if(n.hasCustomTransform){const [Qc,Vc]=Qb;ia[0]=!1!==vb[0]?Qc-vb[0]:0;ia[1]=!1!==vb[1]?Vc-vb[1]:0}else ia[0]=!1!==vb[0]?Ka-vb[0]:0,ia[1]=!1!==vb[1]?
Va-vb[1]:0;this.restrictToAxis&&!g._blocked&&this.restrictToAxis(ia);sa=g.offset;var cc=g._active&&!g._blocked||g.active;cc&&(g.first=g._active&&!g.active,g.last=!g._active&&g.active,g.active=I[this.ingKey]=g._active,b&&(g.first&&("bounds"in n&&(g._bounds=Dj(n.bounds,g)),this.setup&&this.setup()),g.movement=ia,this.computeOffset()));var [Ub,rc]=g.offset,[[lc,Vb],[sc,Gc]]=g._bounds;g.overflow=[Ub<lc?-1:Ub>Vb?1:0,rc<sc?-1:rc>Gc?1:0];g._movementBound[0]=g.overflow[0]?!1===g._movementBound[0]?g._movement[0]:
g._movementBound[0]:!1;g._movementBound[1]=g.overflow[1]?!1===g._movementBound[1]?g._movement[1]:g._movementBound[1]:!1;g.offset=sj(g._bounds,g.offset,g._active?n.rubberband||[0,0]:[0,0]);g.delta=Ek.sub(g.offset,sa);this.computeMovement();cc&&(!g.last||32<W)&&(g.delta=Ek.sub(g.offset,sa),b=g.delta.map(Math.abs),Ek.addTo(g.distance,b),g.direction=g.delta.map(Math.sign),g._direction=g._delta.map(Math.sign),!g.first&&0<W&&(g.velocity=[b[0]/W,b[1]/W]))}}emit(){const b=this.state;var g=this.shared;const n=
this.config;b._active||this.clean();if(!b._blocked&&b.intentional||b._force||n.triggerAllEvents)g=this.handler(zh(zh(zh({},g),b),{},{[this.aliasKey]:b.values})),void 0!==g&&(b.memo=g)}clean(){this.eventStore.clean();this.timeoutStore.clean()}},Js=class extends ty{constructor(...b){super(...b);yg(this,"aliasKey","xy")}reset(){super.reset();this.state.axis=void 0}init(){this.state.offset=[0,0];this.state.lastOffset=[0,0]}computeOffset(){this.state.offset=Ek.add(this.state.lastOffset,this.state.movement)}computeMovement(){this.state.movement=
Ek.sub(this.state.offset,this.state.lastOffset)}axisIntent(b){const g=this.state,n=this.config;!g.axis&&b&&(b="object"===typeof n.axisThreshold?n.axisThreshold[Ai(b)]:n.axisThreshold,g.axis=Ih(g._movement,b));g._blocked=(n.lockDirection||!!n.axis)&&!g.axis||!!n.axis&&n.axis!==g.axis}restrictToAxis(b){if(this.config.axis||this.config.lockDirection)switch(this.state.axis){case "x":b[1]=0;break;case "y":b[0]=0}}},gD=b=>b,uy={enabled(b=!0){return b},eventOptions(b,g,n){return zh(zh({},n.shared.eventOptions),
b)},preventDefault(b=!1){return b},triggerAllEvents(b=!1){return b},rubberband(b=0){switch(b){case !0:return[.15,.15];case !1:return[0,0];default:return Ek.toVector(b)}},from(b){if("function"===typeof b)return b;if(null!=b)return Ek.toVector(b)},transform(b,g,n){b=b||n.shared.transform;this.hasCustomTransform=!!b;return b||gD},threshold(b){return Ek.toVector(b,0)}},Fq=zh(zh({},uy),{},{axis(b,g,{axis:n}){this.lockDirection="lock"===n;if(!this.lockDirection)return n},axisThreshold(b=0){return b},bounds(b=
{}){if("function"===typeof b)return ia=>Fq.bounds(b(ia));if("current"in b)return()=>b.current;if("function"===typeof HTMLElement&&b instanceof HTMLElement)return b;const {left:g=-Infinity,right:n=Infinity,top:I=-Infinity,bottom:W=Infinity}=b;return[[g,n],[I,W]]}}),vy={ArrowRight:(b=1)=>[10*b,0],ArrowLeft:(b=1)=>[-10*b,0],ArrowUp:(b=1)=>[0,-10*b],ArrowDown:(b=1)=>[0,10*b]},hD=class extends Js{constructor(...b){super(...b);yg(this,"ingKey","dragging")}reset(){super.reset();const b=this.state;b._pointerId=
void 0;b._pointerActive=!1;b._keyboardActive=!1;b._preventScroll=!1;b._delayed=!1;b.swipe=[0,0];b.tap=!1;b.canceled=!1;b.cancel=this.cancel.bind(this)}setup(){const b=this.state;if(b._bounds instanceof HTMLElement){const g=b._bounds.getBoundingClientRect(),n=b.currentTarget.getBoundingClientRect();b._bounds=Fq.bounds({left:g.left-n.left+b.offset[0],right:g.right-n.right+b.offset[0],top:g.top-n.top+b.offset[1],bottom:g.bottom-n.bottom+b.offset[1]})}}cancel(){const b=this.state;b.canceled||(b.canceled=
!0,b._active=!1,setTimeout(()=>{this.compute();this.emit()},0))}setActive(){this.state._active=this.state._pointerActive||this.state._keyboardActive}clean(){this.pointerClean();this.state._pointerActive=!1;this.state._keyboardActive=!1;super.clean()}pointerDown(b){const g=this.config,n=this.state;if(null==b.buttons||(Array.isArray(g.pointerButtons)?g.pointerButtons.includes(b.buttons):-1===g.pointerButtons||g.pointerButtons===b.buttons)){var I=this.ctrl.setEventIds(b);g.pointerCapture&&b.target.setPointerCapture(b.pointerId);
I&&1<I.size&&n._pointerActive||(this.start(b),this.setupPointer(b),n._pointerId=nm(b),n._pointerActive=!0,this.computeValues(uj(b)),this.computeInitial(),g.preventScrollAxis&&"mouse"!==Ai(b)?(n._active=!1,this.setupScrollPrevention(b)):0<g.delay?(this.setupDelayTrigger(b),g.triggerAllEvents&&(this.compute(b),this.emit())):this.startPointerDrag(b))}}startPointerDrag(b){const g=this.state;g._active=!0;g._preventScroll=!0;g._delayed=!1;this.compute(b);this.emit()}pointerMove(b){const g=this.state,n=
this.config;if(g._pointerActive&&(g.type!==b.type||b.timeStamp!==g.timeStamp)){var I=nm(b);if(void 0===g._pointerId||I===g._pointerId)I=uj(b),document.pointerLockElement===b.target?g._delta=[b.movementX,b.movementY]:(g._delta=Ek.sub(I,g._values),this.computeValues(I)),Ek.addTo(g._movement,g._delta),this.compute(b),g._delayed&&g.intentional?(this.timeoutStore.remove("dragDelay"),g.active=!1,this.startPointerDrag(b)):n.preventScrollAxis&&!g._preventScroll?g.axis&&(g.axis===n.preventScrollAxis||"xy"===
n.preventScrollAxis?(g._active=!1,this.clean()):(this.timeoutStore.remove("startPointerDrag"),this.startPointerDrag(b))):this.emit()}}pointerUp(b){this.ctrl.setEventIds(b);try{this.config.pointerCapture&&b.target.hasPointerCapture(b.pointerId)&&b.target.releasePointerCapture(b.pointerId)}catch(sa){}const g=this.state,n=this.config;if(g._active&&g._pointerActive){var I=nm(b);if(void 0===g._pointerId||I===g._pointerId){this.state._pointerActive=!1;this.setActive();this.compute(b);var [W,ia]=g._distance;
g.tap=W<=n.tapsThreshold&&ia<=n.tapsThreshold;if(g.tap&&n.filterTaps)g._force=!0;else{const [sa,Ka]=g.direction,[Va,Za]=g.velocity,[lb,vb]=g.movement,[Qb,cc]=n.swipe.velocity,[Ub,rc]=n.swipe.distance;g.elapsedTime<n.swipe.duration&&(Math.abs(Va)>Qb&&Math.abs(lb)>Ub&&(g.swipe[0]=sa),Math.abs(Za)>cc&&Math.abs(vb)>rc&&(g.swipe[1]=Ka))}this.emit()}}}pointerClick(b){!this.state.tap&&0<b.detail&&(b.preventDefault(),b.stopPropagation())}setupPointer(b){const g=this.config,n=g.device;g.pointerLock&&b.currentTarget.requestPointerLock();
g.pointerCapture||(this.eventStore.add(this.sharedConfig.window,n,"change",this.pointerMove.bind(this)),this.eventStore.add(this.sharedConfig.window,n,"end",this.pointerUp.bind(this)),this.eventStore.add(this.sharedConfig.window,n,"cancel",this.pointerUp.bind(this)))}pointerClean(){this.config.pointerLock&&document.pointerLockElement===this.state.currentTarget&&document.exitPointerLock()}preventScroll(b){this.state._preventScroll&&b.cancelable&&b.preventDefault()}setupScrollPrevention(b){this.state._preventScroll=
!1;"persist"in b&&"function"===typeof b.persist&&b.persist();const g=this.eventStore.add(this.sharedConfig.window,"touch","change",this.preventScroll.bind(this),{passive:!1});this.eventStore.add(this.sharedConfig.window,"touch","end",g);this.eventStore.add(this.sharedConfig.window,"touch","cancel",g);this.timeoutStore.add("startPointerDrag",this.startPointerDrag.bind(this),this.config.preventScrollDelay,b)}setupDelayTrigger(b){this.state._delayed=!0;this.timeoutStore.add("dragDelay",()=>{this.state._step=
[0,0];this.startPointerDrag(b)},this.config.delay)}keyDown(b){const g=vy[b.key];if(g){const n=this.state,I=b.shiftKey?10:b.altKey?.1:1;this.start(b);n._delta=g(I);n._keyboardActive=!0;Ek.addTo(n._movement,n._delta);this.compute(b);this.emit()}}keyUp(b){b.key in vy&&(this.state._keyboardActive=!1,this.setActive(),this.compute(b),this.emit())}bind(b){const g=this.config.device;b(g,"start",this.pointerDown.bind(this));this.config.pointerCapture&&(b(g,"change",this.pointerMove.bind(this)),b(g,"end",this.pointerUp.bind(this)),
b(g,"cancel",this.pointerUp.bind(this)),b("lostPointerCapture","",this.pointerUp.bind(this)));this.config.keys&&(b("key","down",this.keyDown.bind(this)),b("key","up",this.keyUp.bind(this)));this.config.filterTaps&&b("click","",this.pointerClick.bind(this),{capture:!0,passive:!1})}},Gq="undefined"!==typeof window&&window.document&&window.document.createElement;try{var wy="constructor"in GestureEvent}catch(b){wy=!1}var iD=wy,Ks=Gq&&"ontouchstart"in window||Gq&&1<window.navigator.maxTouchPoints,yy=Gq&&
"ontouchstart"in window||Gq&&1<window.navigator.maxTouchPoints,xy=Gq&&"onpointerdown"in window,dD=Gq&&"exitPointerLock"in window.document,zy={mouse:0,touch:0,pen:8},fD=zh(zh({},Fq),{},{device(b,g,{pointer:{touch:n=!1,lock:I=!1,mouse:W=!1}={}}){this.pointerLock=I&&dD;return Ks&&n?"touch":this.pointerLock?"mouse":xy&&!W?"pointer":Ks?"touch":"mouse"},preventScrollAxis(b,g,{preventScroll:n}){this.preventScrollDelay="number"===typeof n?n:n||void 0===n&&b?250:void 0;if(yy&&!1!==n)return b?b:void 0!==n?
"y":void 0},pointerCapture(b,g,{pointer:{capture:n=!0,buttons:I=1,keys:W=!0}={}}){this.pointerButtons=I;this.keys=W;return!this.pointerLock&&"pointer"===this.device&&n},threshold(b,g,{filterTaps:n=!1,tapsThreshold:I=3,axis:W}){b=Ek.toVector(b,n?I:W?1:0);this.filterTaps=n;this.tapsThreshold=I;return b},swipe({velocity:b=.5,distance:g=50,duration:n=250}={}){return{velocity:this.transform(Ek.toVector(b)),distance:this.transform(Ek.toVector(g)),duration:n}},delay(b=0){switch(b){case !0:return 180;case !1:return 0;
default:return b}},axisThreshold(b){return b?zh(zh({},zy),b):zy}}),bD=class extends ty{constructor(...b){super(...b);yg(this,"ingKey","pinching");yg(this,"aliasKey","da")}init(){this.state.offset=[1,0];this.state.lastOffset=[1,0];this.state._pointerEvents=new Map}reset(){super.reset();const b=this.state;b._touchIds=[];b.canceled=!1;b.cancel=this.cancel.bind(this);b.turns=0}computeOffset(){const {type:b,movement:g,lastOffset:n}=this.state;this.state.offset="wheel"===b?Ek.add(g,n):[(1+g[0])*n[0],g[1]+
n[1]]}computeMovement(){const {offset:b,lastOffset:g}=this.state;this.state.movement=[b[0]/g[0],b[1]-g[1]]}axisIntent(){const b=this.state,[g,n]=b._movement;if(!b.axis){const I=30*Math.abs(g)-Math.abs(n);0>I?b.axis="angle":0<I&&(b.axis="scale")}}restrictToAxis(b){this.config.lockDirection&&("scale"===this.state.axis?b[1]=0:"angle"===this.state.axis&&(b[0]=0))}cancel(){const b=this.state;b.canceled||setTimeout(()=>{b.canceled=!0;b._active=!1;this.compute();this.emit()},0)}touchStart(b){this.ctrl.setEventIds(b);
var g=this.state;const n=this.ctrl.touchIds;g._active&&g._touchIds.every(I=>n.has(I))||2>n.size||(this.start(b),g._touchIds=Array.from(n).slice(0,2),g=ml(b,g._touchIds),this.pinchStart(b,g))}pointerStart(b){if(null==b.buttons||1===b.buttons%2){this.ctrl.setEventIds(b);b.target.setPointerCapture(b.pointerId);var g=this.state,n=g._pointerEvents,I=this.ctrl.pointerIds;g._active&&Array.from(n.keys()).every(W=>I.has(W))||(2>n.size&&n.set(b.pointerId,b),2>g._pointerEvents.size||(this.start(b),g=Yj(...Array.from(n.values())),
this.pinchStart(b,g)))}}pinchStart(b,g){this.state.origin=g.origin;this.computeValues([g.distance,g.angle]);this.computeInitial();this.compute(b);this.emit()}touchMove(b){if(this.state._active){var g=ml(b,this.state._touchIds);this.pinchMove(b,g)}}pointerMove(b){var g=this.state._pointerEvents;g.has(b.pointerId)&&g.set(b.pointerId,b);this.state._active&&(g=Yj(...Array.from(g.values())),this.pinchMove(b,g))}pinchMove(b,g){const n=this.state,I=g.angle-n._values[1];let W=0;270<Math.abs(I)&&(W+=Math.sign(I));
this.computeValues([g.distance,g.angle-360*W]);n.origin=g.origin;n.turns=W;n._movement=[n._values[0]/n._initial[0]-1,n._values[1]-n._initial[1]];this.compute(b);this.emit()}touchEnd(b){this.ctrl.setEventIds(b);this.state._active&&this.state._touchIds.some(g=>!this.ctrl.touchIds.has(g))&&(this.state._active=!1,this.compute(b),this.emit())}pointerEnd(b){const g=this.state;this.ctrl.setEventIds(b);try{b.target.releasePointerCapture(b.pointerId)}catch(n){}g._pointerEvents.has(b.pointerId)&&g._pointerEvents.delete(b.pointerId);
g._active&&2>g._pointerEvents.size&&(g._active=!1,this.compute(b),this.emit())}gestureStart(b){b.cancelable&&b.preventDefault();const g=this.state;g._active||(this.start(b),this.computeValues([b.scale,b.rotation]),g.origin=[b.clientX,b.clientY],this.compute(b),this.emit())}gestureMove(b){b.cancelable&&b.preventDefault();if(this.state._active){var g=this.state;this.computeValues([b.scale,b.rotation]);g.origin=[b.clientX,b.clientY];var n=g._movement;g._movement=[b.scale-1,b.rotation];g._delta=Ek.sub(g._movement,
n);this.compute(b);this.emit()}}gestureEnd(b){this.state._active&&(this.state._active=!1,this.compute(b),this.emit())}wheel(b){const g=this.config.modifierKey;if(!g||b[g])this.state._active?this.wheelChange(b):this.wheelStart(b),this.timeoutStore.add("wheelEnd",this.wheelEnd.bind(this))}wheelStart(b){this.start(b);this.wheelChange(b)}wheelChange(b){"uv"in b||b.cancelable&&b.preventDefault();const g=this.state;g._delta=[-Bi(b)[1]/100*g.offset[0],0];Ek.addTo(g._movement,g._delta);Ti(g);this.state.origin=
[b.clientX,b.clientY];this.compute(b);this.emit()}wheelEnd(){this.state._active&&(this.state._active=!1,this.compute(),this.emit())}bind(b){const g=this.config.device;g&&(b(g,"start",this[g+"Start"].bind(this)),b(g,"change",this[g+"Move"].bind(this)),b(g,"end",this[g+"End"].bind(this)),b(g,"cancel",this[g+"End"].bind(this)));this.config.pinchOnWheel&&b("wheel","",this.wheel.bind(this),{passive:!1})}},cD=zh(zh({},uy),{},{device(b,g,{shared:n,pointer:{touch:I=!1}={}}){if(n.target&&!Ks&&iD)return"gesture";
if(Ks&&I)return"touch";if(yy){if(xy)return"pointer";if(Ks)return"touch"}},bounds(b,g,{scaleBounds:n={},angleBounds:I={}}){const W=sa=>{sa=Dj(n,sa);sa=Object.assign({},{min:-Infinity,max:Infinity},sa||{});return[sa.min,sa.max]},ia=sa=>{sa=Dj(I,sa);sa=Object.assign({},{min:-Infinity,max:Infinity},sa||{});return[sa.min,sa.max]};return"function"!==typeof n&&"function"!==typeof I?[W(),ia()]:sa=>[W(sa),ia(sa)]},threshold(b,g,n){this.lockDirection="lock"===n.axis;return Ek.toVector(b,this.lockDirection?
[.1,3]:0)},modifierKey(b){return void 0===b?"ctrlKey":b},pinchOnWheel(b=!0){return b}}),YC=class extends Js{constructor(...b){super(...b);yg(this,"ingKey","moving")}move(b){this.config.mouseOnly&&"mouse"!==b.pointerType||(this.state._active?this.moveChange(b):this.moveStart(b),this.timeoutStore.add("moveEnd",this.moveEnd.bind(this)))}moveStart(b){this.start(b);this.computeValues(uj(b));this.compute(b);this.computeInitial();this.emit()}moveChange(b){if(this.state._active){var g=uj(b),n=this.state;
n._delta=Ek.sub(g,n._values);Ek.addTo(n._movement,n._delta);this.computeValues(g);this.compute(b);this.emit()}}moveEnd(b){this.state._active&&(this.state._active=!1,this.compute(b),this.emit())}bind(b){b("pointer","change",this.move.bind(this));b("pointer","leave",this.moveEnd.bind(this))}},ZC=zh(zh({},Fq),{},{mouseOnly:(b=!0)=>b}),$C=class extends Js{constructor(...b){super(...b);yg(this,"ingKey","scrolling")}scroll(b){this.state._active||this.start(b);this.scrollChange(b);this.timeoutStore.add("scrollEnd",
this.scrollEnd.bind(this))}scrollChange(b){b.cancelable&&b.preventDefault();const g=this.state;var n,I;const {scrollX:W,scrollY:ia,scrollLeft:sa,scrollTop:Ka}=b.currentTarget;var Va=[null!==(n=null!==W&&void 0!==W?W:sa)&&void 0!==n?n:0,null!==(I=null!==ia&&void 0!==ia?ia:Ka)&&void 0!==I?I:0];g._delta=Ek.sub(Va,g._values);Ek.addTo(g._movement,g._delta);this.computeValues(Va);this.compute(b);this.emit()}scrollEnd(){this.state._active&&(this.state._active=!1,this.compute(),this.emit())}bind(b){b("scroll",
"",this.scroll.bind(this))}},WC=Fq,XC=class extends Js{constructor(...b){super(...b);yg(this,"ingKey","wheeling")}wheel(b){this.state._active||this.start(b);this.wheelChange(b);this.timeoutStore.add("wheelEnd",this.wheelEnd.bind(this))}wheelChange(b){const g=this.state;g._delta=Bi(b);Ek.addTo(g._movement,g._delta);Ti(g);this.compute(b);this.emit()}wheelEnd(){this.state._active&&(this.state._active=!1,this.compute(),this.emit())}bind(b){b("wheel","",this.wheel.bind(this))}},UC=Fq,VC=class extends Js{constructor(...b){super(...b);
yg(this,"ingKey","hovering")}enter(b){this.config.mouseOnly&&"mouse"!==b.pointerType||(this.start(b),this.computeValues(uj(b)),this.compute(b),this.emit())}leave(b){if(!this.config.mouseOnly||"mouse"===b.pointerType){var g=this.state;if(g._active){g._active=!1;var n=uj(b);g._movement=g._delta=Ek.sub(n,g._values);this.computeValues(n);this.compute(b);g.delta=g.movement;this.emit()}}}bind(b){b("pointer","enter",this.enter.bind(this));b("pointer","leave",this.leave.bind(this))}},SC=zh(zh({},Fq),{},{mouseOnly:(b=
!0)=>b}),zv=new Map,Av=new Map,TC={key:"drag",engine:hD,resolver:fD},RC={key:"hover",engine:VC,resolver:SC},OC={key:"move",engine:YC,resolver:ZC},PC={key:"pinch",engine:bD,resolver:cD},QC={key:"scroll",engine:$C,resolver:WC},NC={key:"wheel",engine:XC,resolver:UC},xo=cb(V(22)),yo={target(b){if(b)return()=>"current"in b?b.current:b},enabled(b=!0){return b},window(b=Gq?window:void 0){return b},eventOptions({passive:b=!0,capture:g=!1}={}){return{passive:b,capture:g}},transform(b){return b}},aD=["target",
"eventOptions","window","enabled","transform"],ry=class{constructor(b,g){yg(this,"_listeners",new Set);this._ctrl=b;this._gestureKey=g}add(b,g,n,I,W){const ia=this._listeners,sa=Hh(g,n),Ka=zh(zh({},this._gestureKey?this._ctrl.config[this._gestureKey].eventOptions:{}),W);b.addEventListener(sa,I,Ka);const Va=()=>{b.removeEventListener(sa,I,Ka);ia.delete(Va)};ia.add(Va);return Va}clean(){this._listeners.forEach(b=>b());this._listeners.clear()}},MC=class{constructor(){yg(this,"_timeouts",new Map)}add(b,
g,n=140,...I){this.remove(b);this._timeouts.set(b,window.setTimeout(g,n,...I))}remove(b){(b=this._timeouts.get(b))&&window.clearTimeout(b)}clean(){this._timeouts.forEach(b=>void window.clearTimeout(b));this._timeouts.clear()}},AD=class{constructor(b){yg(this,"gestures",new Set);yg(this,"_targetEventStore",new ry(this));yg(this,"gestureEventStores",{});yg(this,"gestureTimeoutStores",{});yg(this,"handlers",{});yg(this,"config",{});yg(this,"pointerIds",new Set);yg(this,"touchIds",new Set);yg(this,"state",
{shared:{shiftKey:!1,metaKey:!1,ctrlKey:!1,altKey:!1}});b.drag&&Ci(this,"drag");b.wheel&&Ci(this,"wheel");b.scroll&&Ci(this,"scroll");b.move&&Ci(this,"move");b.pinch&&Ci(this,"pinch");b.hover&&Ci(this,"hover")}setEventIds(b){if("touches"in b)return this.touchIds=new Set(Zj(b));if("pointerId"in b)return"pointerup"===b.type||"pointercancel"===b.type?this.pointerIds.delete(b.pointerId):"pointerdown"===b.type&&this.pointerIds.add(b.pointerId),this.pointerIds}applyHandlers(b,g){this.handlers=b;this.nativeHandlers=
g}applyConfig(b,g){this.config=Qk(b,g,this.config)}clean(){this._targetEventStore.clean();for(const b of this.gestures)this.gestureEventStores[b].clean(),this.gestureTimeoutStores[b].clean()}effect(){this.config.shared.target&&this.bind();return()=>this._targetEventStore.clean()}bind(...b){var g=this.config.shared;const n={};let I;if(g.target&&(I=g.target(),!I))return;if(g.enabled){for(const W of this.gestures){const ia=this.config[W],sa=Oy(n,ia.eventOptions,!!I);ia.enabled&&(new (zv.get(W))(this,
b,W)).bind(sa)}g=Oy(n,g.eventOptions,!!I);for(const W in this.nativeHandlers)g(W,"",ia=>this.nativeHandlers[W](zh(zh({},this.state.shared),{},{event:ia,args:b})),void 0,!0)}for(const W in n)n[W]=gj(...n[W]);if(!I)return n;for(const W in n){const {device:ia,capture:sa,passive:Ka}=Gk(W);this._targetEventStore.add(I,ia,"",n[W],{capture:sa,passive:Ka})}}},Oy=(b,g,n)=>(I,W,ia,sa={},Ka=!1)=>{var Va,Za;const lb=null!==(Va=sa.capture)&&void 0!==Va?Va:g.capture;sa=null!==(Za=sa.passive)&&void 0!==Za?Za:g.passive;
I=Ka?I:rk(I,W,lb);n&&sa&&(I+="Passive");b[I]=b[I]||[];b[I].push(ia)},sy=/^on(Drag|Wheel|Scroll|Move|Pinch|Hover)/,Hs=cb(V(22)),Bv=cb(V(22)),Mt=cb(V(22)),Is=cb(V(22)),kD=cb(V(22)),BD=cb(V(22)),sD=cb(V(22)),CD=cb(V(22)),DD={none:(b,g)=>"none",["default"]:(b,g)=>"default",pointer:(b,g)=>"pointer",crosshair:(b,g)=>"crosshair",move:(b,g)=>"move",wait:(b,g)=>"wait",progress:(b,g)=>"progress",grab:(b,g)=>Oi('\x3cpath d\x3d"m13.5557 17.5742c-.098-.375-.196-.847-.406-1.552-.167-.557-.342-.859-.47-1.233-.155-.455-.303-.721-.496-1.181-.139-.329-.364-1.048-.457-1.44-.119-.509.033-.924.244-1.206.253-.339.962-.49 1.357-.351.371.13.744.512.916.788.288.46.357.632.717 1.542.393.992.564 1.918.611 2.231l.085.452c-.001-.04-.043-1.122-.044-1.162-.035-1.029-.06-1.823-.038-2.939.002-.126.064-.587.084-.715.078-.5.305-.8.673-.979.412-.201.926-.215 1.401-.017.423.173.626.55.687 1.022.014.109.094.987.093 1.107-.013 1.025.006 1.641.015 2.174.004.231.003 1.625.017 1.469.061-.656.094-3.189.344-3.942.144-.433.405-.746.794-.929.431-.203 1.113-.07 1.404.243.285.305.446.692.482 1.153.032.405-.019.897-.02 1.245 0 .867-.021 1.324-.037 2.121-.001.038-.015.298.023.182.094-.28.188-.542.266-.745.049-.125.241-.614.359-.859.114-.234.211-.369.415-.688.2-.313.415-.448.668-.561.54-.235 1.109.112 1.301.591.086.215.009.713-.028 1.105-.061.647-.254 1.306-.352 1.648-.128.447-.274 1.235-.34 1.601-.072.394-.234 1.382-.359 1.82-.086.301-.371.978-.652 1.384 0 0-1.074 1.25-1.192 1.812-.117.563-.078.567-.101.965-.024.399.121.923.121.923s-.802.104-1.234.034c-.391-.062-.875-.841-1-1.078-.172-.328-.539-.265-.682-.023-.225.383-.709 1.07-1.051 1.113-.668.084-2.054.03-3.139.02 0 0 .185-1.011-.227-1.358-.305-.26-.83-.784-1.144-1.06l-.832-.921c-.284-.36-.629-1.093-1.243-1.985-.348-.504-1.027-1.085-1.284-1.579-.223-.425-.331-.954-.19-1.325.225-.594.675-.897 1.362-.832.519.05.848.206 1.238.537.225.19.573.534.75.748.163.195.203.276.377.509.23.307.302.459.214.121" fill\x3d"%23fff"/\x3e\x3cg stroke\x3d"%23000" stroke-linecap\x3d"round" stroke-width\x3d".75"\x3e\x3cpath d\x3d"m13.5557 17.5742c-.098-.375-.196-.847-.406-1.552-.167-.557-.342-.859-.47-1.233-.155-.455-.303-.721-.496-1.181-.139-.329-.364-1.048-.457-1.44-.119-.509.033-.924.244-1.206.253-.339.962-.49 1.357-.351.371.13.744.512.916.788.288.46.357.632.717 1.542.393.992.564 1.918.611 2.231l.085.452c-.001-.04-.043-1.122-.044-1.162-.035-1.029-.06-1.823-.038-2.939.002-.126.064-.587.084-.715.078-.5.305-.8.673-.979.412-.201.926-.215 1.401-.017.423.173.626.55.687 1.022.014.109.094.987.093 1.107-.013 1.025.006 1.641.015 2.174.004.231.003 1.625.017 1.469.061-.656.094-3.189.344-3.942.144-.433.405-.746.794-.929.431-.203 1.113-.07 1.404.243.285.305.446.692.482 1.153.032.405-.019.897-.02 1.245 0 .867-.021 1.324-.037 2.121-.001.038-.015.298.023.182.094-.28.188-.542.266-.745.049-.125.241-.614.359-.859.114-.234.211-.369.415-.688.2-.313.415-.448.668-.561.54-.235 1.109.112 1.301.591.086.215.009.713-.028 1.105-.061.647-.254 1.306-.352 1.648-.128.447-.274 1.235-.34 1.601-.072.394-.234 1.382-.359 1.82-.086.301-.371.978-.652 1.384 0 0-1.074 1.25-1.192 1.812-.117.563-.078.567-.101.965-.024.399.121.923.121.923s-.802.104-1.234.034c-.391-.062-.875-.841-1-1.078-.172-.328-.539-.265-.682-.023-.225.383-.709 1.07-1.051 1.113-.668.084-2.054.03-3.139.02 0 0 .185-1.011-.227-1.358-.305-.26-.83-.784-1.144-1.06l-.832-.921c-.284-.36-.629-1.093-1.243-1.985-.348-.504-1.027-1.085-1.284-1.579-.223-.425-.331-.954-.19-1.325.225-.594.675-.897 1.362-.832.519.05.848.206 1.238.537.225.19.573.534.75.748.163.195.203.276.377.509.23.307.302.459.214.121" stroke-linejoin\x3d"round"/\x3e\x3cpath d\x3d"m20.5664 21.7344v-3.459"/\x3e\x3cpath d\x3d"m18.5508 21.7461-.016-3.473"/\x3e\x3cpath d\x3d"m16.5547 18.3047.021 3.426"/\x3e\x3c/g\x3e',
b,g),grabbing:(b,g)=>Oi("\x3cpath d\x3d'm13.5732 12.0361c.48-.178 1.427-.069 1.677.473.213.462.396 1.241.406 1.075.024-.369-.024-1.167.137-1.584.117-.304.347-.59.686-.691.285-.086.62-.116.916-.055.313.064.642.287.765.499.362.623.368 1.899.385 1.831.064-.272.07-1.229.283-1.584.141-.235.497-.445.687-.479.294-.052.656-.068.964-.008.249.049.586.344.677.487.219.344.342 1.316.379 1.658.016.141.074-.393.293-.736.406-.639 1.844-.763 1.898.639.026.654.02.624.02 1.064 0 .516-.012.828-.04 1.202-.03.399-.116 1.304-.241 1.742-.086.301-.371.978-.653 1.384 0 0-1.074 1.25-1.191 1.812-.117.563-.078.567-.102.965-.023.399.121.923.121.923s-.801.104-1.234.034c-.391-.062-.875-.84-1-1.078-.172-.328-.539-.265-.682-.023-.224.383-.709 1.07-1.05 1.113-.669.084-2.055.03-3.14.02 0 0 .185-1.011-.227-1.358-.305-.26-.83-.784-1.144-1.06l-.832-.921c-.283-.36-1.002-.929-1.243-1.985-.213-.936-.192-1.395.037-1.77.232-.381.67-.589.854-.625.208-.042.692-.039.875.062.223.123.313.159.488.391.23.307.312.456.213.121-.076-.262-.322-.595-.434-.97-.109-.361-.401-.943-.38-1.526.008-.221.103-.771.832-1.042' fill\x3d'%23fff'/\x3e\x3cg stroke\x3d'%23000' stroke-width\x3d'.75'\x3e\x3cpath d\x3d'm13.5732 12.0361c.48-.178 1.427-.069 1.677.473.213.462.396 1.241.406 1.075.024-.369-.024-1.167.137-1.584.117-.304.347-.59.686-.691.285-.086.62-.116.916-.055.313.064.642.287.765.499.362.623.368 1.899.385 1.831.064-.272.07-1.229.283-1.584.141-.235.497-.445.687-.479.294-.052.656-.068.964-.008.249.049.586.344.677.487.219.344.342 1.316.379 1.658.016.141.074-.393.293-.736.406-.639 1.844-.763 1.898.639.026.654.02.624.02 1.064 0 .516-.012.828-.04 1.202-.03.399-.116 1.304-.241 1.742-.086.301-.371.978-.653 1.384 0 0-1.074 1.25-1.191 1.812-.117.563-.078.567-.102.965-.023.399.121.923.121.923s-.801.104-1.234.034c-.391-.062-.875-.84-1-1.078-.172-.328-.539-.265-.682-.023-.224.383-.709 1.07-1.05 1.113-.669.084-2.055.03-3.14.02 0 0 .185-1.011-.227-1.358-.305-.26-.83-.784-1.144-1.06l-.832-.921c-.283-.36-1.002-.929-1.243-1.985-.213-.936-.192-1.395.037-1.77.232-.381.67-.589.854-.625.208-.042.692-.039.875.062.223.123.313.159.488.391.23.307.312.456.213.121-.076-.262-.322-.595-.434-.97-.109-.361-.401-.943-.38-1.526.008-.221.103-.771.832-1.042z' stroke-linejoin\x3d'round'/\x3e\x3cpath d\x3d'm20.5664 19.7344v-3.459' stroke-linecap\x3d'round'/\x3e\x3cpath d\x3d'm18.5508 19.7461-.016-3.473' stroke-linecap\x3d'round'/\x3e\x3cpath d\x3d'm16.5547 16.3047.021 3.426' stroke-linecap\x3d'round'/\x3e\x3c/g\x3e",
b,g),text:(b,g)=>Oi("\x3cpath d\x3d'm6.94 2v-1c-1.35866267-.08246172-2.66601117.53165299-3.47 1.63-.80398883-1.09834701-2.11133733-1.71246172-3.47-1.63v1c1.30781678-.16635468 2.55544738.59885876 3 1.84v5.1h-1v1h1v4.16c-.4476345 1.2386337-1.69302129 2.002471-3 1.84v1c1.35687108.0731933 2.6600216-.5389494 3.47-1.63.8099784 1.0910506 2.11312892 1.7031933 3.47 1.63v-1c-1.28590589.133063-2.49760499-.6252793-2.94-1.84v-4.18h1v-1h-1v-5.08c.43943906-1.21710975 1.65323743-1.97676587 2.94-1.84z' transform\x3d'translate(14 9)'/\x3e",
b,g),["resize-edge"]:(b,g)=>Oi("\x3cpath d\x3d'm9 17.9907v.005l5.997 5.996.001-3.999h1.999 2.02v4l5.98-6.001-5.98-5.999.001 4.019-2.021.002h-2l.001-4.022zm1.411.003 3.587-3.588-.001 2.587h3.5 2.521v-2.585l3.565 3.586-3.564 3.585-.001-2.585h-2.521l-3.499-.001-.001 2.586z' fill\x3d'%23fff'/\x3e\x3cpath d\x3d'm17.4971 18.9932h2.521v2.586l3.565-3.586-3.565-3.585v2.605h-2.521-3.5v-2.607l-3.586 3.587 3.586 3.586v-2.587z' fill\x3d'%23000'/\x3e",b,g),["resize-corner"]:(b,g)=>Oi("\x3cpath d\x3d'm19.7432 17.0869-4.072 4.068 2.829 2.828-8.473-.013-.013-8.47 2.841 2.842 4.075-4.068 1.414-1.415-2.844-2.842h8.486v8.484l-2.83-2.827z' fill\x3d'%23fff'/\x3e\x3cpath d\x3d'm18.6826 16.7334-4.427 4.424 1.828 1.828-5.056-.016-.014-5.054 1.842 1.841 4.428-4.422 2.474-2.475-1.844-1.843h5.073v5.071l-1.83-1.828z' fill\x3d'%23000'/\x3e",
b,g),["ew-resize"]:(b,g)=>Oi("\x3cpath d\x3d'm9 17.9907v.005l5.997 5.996.001-3.999h1.999 2.02v4l5.98-6.001-5.98-5.999.001 4.019-2.021.002h-2l.001-4.022zm1.411.003 3.587-3.588-.001 2.587h3.5 2.521v-2.585l3.565 3.586-3.564 3.585-.001-2.585h-2.521l-3.499-.001-.001 2.586z' fill\x3d'%23fff'/\x3e\x3cpath d\x3d'm17.4971 18.9932h2.521v2.586l3.565-3.586-3.565-3.585v2.605h-2.521-3.5v-2.607l-3.586 3.587 3.586 3.586v-2.587z' fill\x3d'%23000'/\x3e",b,g),["ns-resize"]:(b,g)=>Oi("\x3cpath d\x3d'm9 17.9907v.005l5.997 5.996.001-3.999h1.999 2.02v4l5.98-6.001-5.98-5.999.001 4.019-2.021.002h-2l.001-4.022zm1.411.003 3.587-3.588-.001 2.587h3.5 2.521v-2.585l3.565 3.586-3.564 3.585-.001-2.585h-2.521l-3.499-.001-.001 2.586z' fill\x3d'%23fff'/\x3e\x3cpath d\x3d'm17.4971 18.9932h2.521v2.586l3.565-3.586-3.565-3.585v2.605h-2.521-3.5v-2.607l-3.586 3.587 3.586 3.586v-2.587z' fill\x3d'%23000'/\x3e",
b+90,g),["nesw-resize"]:(b,g)=>Oi("\x3cpath d\x3d'm19.7432 17.0869-4.072 4.068 2.829 2.828-8.473-.013-.013-8.47 2.841 2.842 4.075-4.068 1.414-1.415-2.844-2.842h8.486v8.484l-2.83-2.827z' fill\x3d'%23fff'/\x3e\x3cpath d\x3d'm18.6826 16.7334-4.427 4.424 1.828 1.828-5.056-.016-.014-5.054 1.842 1.841 4.428-4.422 2.474-2.475-1.844-1.843h5.073v5.071l-1.83-1.828z' fill\x3d'%23000'/\x3e",b,g),["nwse-resize"]:(b,g)=>Oi("\x3cpath d\x3d'm19.7432 17.0869-4.072 4.068 2.829 2.828-8.473-.013-.013-8.47 2.841 2.842 4.075-4.068 1.414-1.415-2.844-2.842h8.486v8.484l-2.83-2.827z' fill\x3d'%23fff'/\x3e\x3cpath d\x3d'm18.6826 16.7334-4.427 4.424 1.828 1.828-5.056-.016-.014-5.054 1.842 1.841 4.428-4.422 2.474-2.475-1.844-1.843h5.073v5.071l-1.83-1.828z' fill\x3d'%23000'/\x3e",
b+90,g),rotate:(b,g)=>Oi('\x3cg\x3e\x3cpath d\x3d"M22.4789 9.45728L25.9935 12.9942L22.4789 16.5283V14.1032C18.126 14.1502 14.6071 17.6737 14.5675 22.0283H17.05L13.513 25.543L9.97889 22.0283H12.5674C12.6071 16.5691 17.0214 12.1503 22.4789 12.1031L22.4789 9.45728Z" fill\x3d"black"/\x3e\x3cpath fill-rule\x3d"evenodd" clip-rule\x3d"evenodd" d\x3d"M21.4789 7.03223L27.4035 12.9945L21.4789 18.9521V15.1868C18.4798 15.6549 16.1113 18.0273 15.649 21.0284H19.475L13.5128 26.953L7.55519 21.0284H11.6189C12.1243 15.8155 16.2679 11.6677 21.4789 11.1559L21.4789 7.03223ZM22.4789 12.1031C17.0214 12.1503 12.6071 16.5691 12.5674 22.0284H9.97889L13.513 25.543L17.05 22.0284H14.5675C14.5705 21.6896 14.5947 21.3558 14.6386 21.0284C15.1157 17.4741 17.9266 14.6592 21.4789 14.1761C21.8063 14.1316 22.1401 14.1069 22.4789 14.1032V16.5284L25.9935 12.9942L22.4789 9.45729L22.4789 12.1031Z" fill\x3d"white"/\x3e\x3c/g\x3e',
b+45,g),["nwse-rotate"]:(b,g)=>Oi('\x3cg\x3e\x3cpath d\x3d"M22.4789 9.45728L25.9935 12.9942L22.4789 16.5283V14.1032C18.126 14.1502 14.6071 17.6737 14.5675 22.0283H17.05L13.513 25.543L9.97889 22.0283H12.5674C12.6071 16.5691 17.0214 12.1503 22.4789 12.1031L22.4789 9.45728Z" fill\x3d"black"/\x3e\x3cpath fill-rule\x3d"evenodd" clip-rule\x3d"evenodd" d\x3d"M21.4789 7.03223L27.4035 12.9945L21.4789 18.9521V15.1868C18.4798 15.6549 16.1113 18.0273 15.649 21.0284H19.475L13.5128 26.953L7.55519 21.0284H11.6189C12.1243 15.8155 16.2679 11.6677 21.4789 11.1559L21.4789 7.03223ZM22.4789 12.1031C17.0214 12.1503 12.6071 16.5691 12.5674 22.0284H9.97889L13.513 25.543L17.05 22.0284H14.5675C14.5705 21.6896 14.5947 21.3558 14.6386 21.0284C15.1157 17.4741 17.9266 14.6592 21.4789 14.1761C21.8063 14.1316 22.1401 14.1069 22.4789 14.1032V16.5284L25.9935 12.9942L22.4789 9.45729L22.4789 12.1031Z" fill\x3d"white"/\x3e\x3c/g\x3e',
b,g),["nesw-rotate"]:(b,g)=>Oi('\x3cg\x3e\x3cpath d\x3d"M22.4789 9.45728L25.9935 12.9942L22.4789 16.5283V14.1032C18.126 14.1502 14.6071 17.6737 14.5675 22.0283H17.05L13.513 25.543L9.97889 22.0283H12.5674C12.6071 16.5691 17.0214 12.1503 22.4789 12.1031L22.4789 9.45728Z" fill\x3d"black"/\x3e\x3cpath fill-rule\x3d"evenodd" clip-rule\x3d"evenodd" d\x3d"M21.4789 7.03223L27.4035 12.9945L21.4789 18.9521V15.1868C18.4798 15.6549 16.1113 18.0273 15.649 21.0284H19.475L13.5128 26.953L7.55519 21.0284H11.6189C12.1243 15.8155 16.2679 11.6677 21.4789 11.1559L21.4789 7.03223ZM22.4789 12.1031C17.0214 12.1503 12.6071 16.5691 12.5674 22.0284H9.97889L13.513 25.543L17.05 22.0284H14.5675C14.5705 21.6896 14.5947 21.3558 14.6386 21.0284C15.1157 17.4741 17.9266 14.6592 21.4789 14.1761C21.8063 14.1316 22.1401 14.1069 22.4789 14.1032V16.5284L25.9935 12.9942L22.4789 9.45729L22.4789 12.1031Z" fill\x3d"white"/\x3e\x3c/g\x3e',
b+90,g),["senw-rotate"]:(b,g)=>Oi('\x3cg\x3e\x3cpath d\x3d"M22.4789 9.45728L25.9935 12.9942L22.4789 16.5283V14.1032C18.126 14.1502 14.6071 17.6737 14.5675 22.0283H17.05L13.513 25.543L9.97889 22.0283H12.5674C12.6071 16.5691 17.0214 12.1503 22.4789 12.1031L22.4789 9.45728Z" fill\x3d"black"/\x3e\x3cpath fill-rule\x3d"evenodd" clip-rule\x3d"evenodd" d\x3d"M21.4789 7.03223L27.4035 12.9945L21.4789 18.9521V15.1868C18.4798 15.6549 16.1113 18.0273 15.649 21.0284H19.475L13.5128 26.953L7.55519 21.0284H11.6189C12.1243 15.8155 16.2679 11.6677 21.4789 11.1559L21.4789 7.03223ZM22.4789 12.1031C17.0214 12.1503 12.6071 16.5691 12.5674 22.0284H9.97889L13.513 25.543L17.05 22.0284H14.5675C14.5705 21.6896 14.5947 21.3558 14.6386 21.0284C15.1157 17.4741 17.9266 14.6592 21.4789 14.1761C21.8063 14.1316 22.1401 14.1069 22.4789 14.1032V16.5284L25.9935 12.9942L22.4789 9.45729L22.4789 12.1031Z" fill\x3d"white"/\x3e\x3c/g\x3e',
b+180,g),["swne-rotate"]:(b,g)=>Oi('\x3cg\x3e\x3cpath d\x3d"M22.4789 9.45728L25.9935 12.9942L22.4789 16.5283V14.1032C18.126 14.1502 14.6071 17.6737 14.5675 22.0283H17.05L13.513 25.543L9.97889 22.0283H12.5674C12.6071 16.5691 17.0214 12.1503 22.4789 12.1031L22.4789 9.45728Z" fill\x3d"black"/\x3e\x3cpath fill-rule\x3d"evenodd" clip-rule\x3d"evenodd" d\x3d"M21.4789 7.03223L27.4035 12.9945L21.4789 18.9521V15.1868C18.4798 15.6549 16.1113 18.0273 15.649 21.0284H19.475L13.5128 26.953L7.55519 21.0284H11.6189C12.1243 15.8155 16.2679 11.6677 21.4789 11.1559L21.4789 7.03223ZM22.4789 12.1031C17.0214 12.1503 12.6071 16.5691 12.5674 22.0284H9.97889L13.513 25.543L17.05 22.0284H14.5675C14.5705 21.6896 14.5947 21.3558 14.6386 21.0284C15.1157 17.4741 17.9266 14.6592 21.4789 14.1761C21.8063 14.1316 22.1401 14.1069 22.4789 14.1032V16.5284L25.9935 12.9942L22.4789 9.45729L22.4789 12.1031Z" fill\x3d"white"/\x3e\x3c/g\x3e',
b+270,g)},ED=cb(V(22));cb(V(22));var Py=V(22),Qy=cb(V(22));if(!V(22).useState)throw Error("mobx-react-lite requires React with Hooks support");if(!rg)throw Error("mobx-react-lite@3 requires mobx at least version 6 to be available");var FD=V(31),Ms=cb(V(22)),Ry="undefined"===typeof FinalizationRegistry?void 0:FinalizationRegistry,GD=1E4,HD=function(b){var g="function"===typeof Symbol&&Symbol.iterator,n=g&&b[g],I=0;if(n)return n.call(b);if(b&&"number"===typeof b.length)return{next:function(){b&&I>=
b.length&&(b=void 0);return{value:b&&b[I++],done:!b}}};throw new TypeError(g?"Object is not iterable.":"Symbol.iterator is not defined.");},Sy=Ry?tk(Ry):tg(),ID=Sy.addReactionToTrack,qD=Sy.recordReactionAsCommitted,Hy=function(b,g){var n="function"===typeof Symbol&&b[Symbol.iterator];if(!n)return b;b=n.call(b);var I,W=[];try{for(;(void 0===g||0<g--)&&!(I=b.next()).done;)W.push(I.value)}catch(sa){var ia={error:sa}}finally{try{I&&!I.done&&(n=b["return"])&&n.call(b)}finally{if(ia)throw ia.error;}}return W},
rD=function(){return function(){}}(),xr=V(22),Ey="function"===typeof Symbol&&Symbol.for,Fy=Ey?Symbol.for("react.forward_ref"):"function"===typeof xr.forwardRef&&(0,xr.forwardRef)(function(b){return null}).$$typeof,Gy=Ey?Symbol.for("react.memo"):"function"===typeof xr.memo&&(0,xr.memo)(function(b){return null}).$$typeof,nD={$$typeof:!0,render:!0,compare:!0,type:!0,displayName:!0};ij.displayName="Observer";V(22);V(22);V(22);(function(b){b||=uk;Le({reactionScheduler:b})})(FD.unstable_batchedUpdates);
var oD=cb(V(22));pb=V(587);var Yn=oD.forwardRef(function(b,g){var {children:n,opacity:I,centered:W,className:ia=""}=b,sa=Ia(b,["children","opacity","centered","className"]);return(0,pb.jsx)(ij,{children:()=>(0,pb.jsx)("div",{ref:g,className:`tl-positioned-div ${ia}`,style:I?{opacity:I}:void 0,draggable:!1,children:(0,pb.jsx)("div",xf(te({className:`tl-positioned-inner ${W?"tl-centered":""}`},sa),{children:n}))})})}),pD=cb(V(22));pb=V(587);var Zn=pD.forwardRef(function(b,g){var {id:n,className:I="",
style:W,children:ia}=b,sa=Ia(b,["id","className","style","children"]);return(0,pb.jsx)(ij,{children:()=>(0,pb.jsx)("svg",{ref:g,style:W,className:`tl-positioned-svg ${I}`,children:(0,pb.jsx)("g",xf(te({id:n,className:"tl-centered-g"},sa),{children:ia}))})})}),Ls=cb(V(22)),Dy=cb(V(22)),Nt=cb(V(22));pb=V(587);var Np=bf(function(b){var {id:g,bounds:n,zIndex:I,rotation:W=0,className:ia="",children:sa}=b;b=Ia(b,"id bounds zIndex rotation className children".split(" "));const Ka=Nt.useRef(null);Nt.useLayoutEffect(()=>
{Ka.current.style.transform=`translate(
        calc(${n.minX}px - var(--tl-padding)),
        calc(${n.minY}px - var(--tl-padding)))
        rotate(${W+(n.rotation||0)}rad)`},[n.minX,n.minY,W,n.rotation]);Nt.useLayoutEffect(()=>{const Va=Ka.current;Va.style.width=`calc(${Math.floor(n.width)}px + (var(--tl-padding) * 2))`;Va.style.height=`calc(${Math.floor(n.height)}px + (var(--tl-padding) * 2))`},[n.width,n.height]);Nt.useLayoutEffect(()=>{const Va=Ka.current;void 0!==I&&(Va.style.zIndex=I.toString())},[I]);return(0,pb.jsx)("div",xf(te({id:g,ref:Ka,className:`tl-positioned ${ia}`,"aria-label":"container"},b),{children:sa}))}),
JD=cb(V(22));pb=V(587);var lD=bf(function({shapes:b,hidden:g,bounds:n,rotation:I=0}){const {components:{ContextBar:W},viewport:{bounds:ia,camera:{point:[sa,Ka],zoom:Va}}}=Gh(),Za=JD.useRef(null);var lb=Ve.getRotatedBounds(n,I);lb=Ve.multiplyBounds(lb,Va);wi(Za,n,I,10005);if(!W)throw Error("Expected a ContextBar component.");const vb=Ve.translateBounds(lb,[sa*Va,Ka*Va]);return(0,pb.jsx)("div",{ref:Za,className:"tl-counter-scaled-positioned","aria-label":"context-bar-container",children:(0,pb.jsx)(W,
{hidden:g,shapes:b,bounds:n,offsets:{left:vb.minX,right:ia.width-vb.maxX,top:vb.minY,bottom:ia.height-vb.maxY,width:vb.width,height:vb.height},scaledBounds:lb,rotation:I})})}),Cy=cb(V(22));pb=V(587);var Ty=bf(function({children:b}){const g=Cy.useRef(null),{viewport:n}=Gh(),I=g.current,{zoom:W,point:ia}=n.camera;Cy.useEffect(()=>{I&&(I.style.transform=`scale(${W}) translate3d(${ia[0]}px, ${ia[1]}px, 0)`)},[W,ia,I]);return(0,pb.jsx)("div",{ref:g,className:"tl-absolute tl-layer",children:b})});pb=V(587);
var Uy=bf(function({shape:b,isHovered:g=!1,isSelected:n=!1,isBinding:I=!1,isEditing:W=!1,meta:ia}){const {bounds:sa,props:{scale:Ka,rotation:Va=0},ReactIndicator:Za}=b;return(0,pb.jsx)(Np,{"data-type":"Indicator",bounds:sa,rotation:Va,scale:Ka,zIndex:W?1E3:1E4,children:(0,pb.jsx)(Zn,{children:(0,pb.jsx)("g",{className:`tl-indicator-container ${n?"tl-selected":"tl-hovered"}`,children:(0,pb.jsx)(Za,{isEditing:W,isBinding:I,isHovered:g,isSelected:n,isErasing:!1,meta:ia})})})})}),Vy=cb(V(22));pb=V(587);
var KD=bf(function({bounds:b,shape:g}){const {viewport:{camera:{zoom:n}},components:{QuickLinks:I}}=Gh();var W=pg();const ia=vk(g);if(!I)throw Error("Expected a QuickLinks component.");W=50>b.height*n||!W.selectedShapesArray.includes(g);return(0,pb.jsx)(Np,{bounds:b,className:"tl-quick-links-container",children:(0,pb.jsx)(Yn,{children:(0,pb.jsx)("span",xf(te({style:{position:"absolute",top:"100%",pointerEvents:"all",transformOrigin:"left top",paddingTop:"8px",transform:"scale(var(--tl-scale))",minWidth:"320px"}},
ia),{onPointerDown:sa=>sa.stopPropagation(),children:(0,pb.jsx)(I,{className:"tl-backlinks-count "+(W?"tl-backlinks-count-rounded":""),id:g.id,shape:g})}))})})});pb=V(587);var LD=bf(function({bounds:b,shape:g}){const {viewport:{camera:{zoom:n}},components:{BacklinksCount:I}}=Gh();var W=pg();if(!I)throw Error("Expected a BacklinksCount component.");const ia=sa=>sa.stopPropagation();W=50>b.height*n||!W.selectedShapesArray.includes(g)||g.hideSelection;return(0,pb.jsx)(Np,{bounds:b,className:"tl-backlinks-count-container",
children:(0,pb.jsx)(Yn,{children:(0,pb.jsx)("span",{style:{position:"absolute",left:"100%",pointerEvents:"all",transformOrigin:"left top",transform:"translateY(6px) scale(var(--tl-scale))"},onPointerDown:ia,onWheelCapture:ia,title:"Shape Backlinks",children:(0,pb.jsx)(I,{className:"tl-backlinks-count "+(W?"tl-backlinks-count-rounded":""),id:g.id,shape:g})})})})}),mD=cb(V(22));pb=V(587);var MD=bf(function({bounds:b,hidden:g,shapes:n,rotation:I=0,detail:W="size"}){const {components:{SelectionDetail:ia},
viewport:{camera:{zoom:sa}}}=Gh(),Ka=mD.useRef(null),Va=Ve.multiplyBounds(b,sa);wi(Ka,b,I,10003);if(!ia)throw Error("Expected a SelectionDetail component.");return(0,pb.jsx)("div",{ref:Ka,className:`tl-counter-scaled-positioned ${g?"tl-fade-out":""}`,"aria-label":"bounds-detail-container",children:(0,pb.jsx)(ia,{shapes:n,bounds:b,scaledBounds:Va,zoom:sa,rotation:I,detail:W})})});pb=V(587);var ND=bf(function({shape:b,isHovered:g=!1,isSelected:n=!1,isBinding:I=!1,isErasing:W=!1,isEditing:ia=!1,onEditingEnd:sa,
asset:Ka,meta:Va,zIndex:Za}){const {bounds:lb,props:{rotation:vb,scale:Qb},ReactComponent:cc}=b,Ub=vk(b);return(0,pb.jsx)(Np,{"data-shape-id":b.id,zIndex:Za,"data-type":"Shape",bounds:lb,rotation:vb,scale:Qb,children:(0,pb.jsx)(cc,{meta:Va,isEditing:ia,isBinding:I,isHovered:g,isSelected:n,isErasing:W,events:Ub,asset:Ka,onEditingEnd:sa})})});pb=V(587);var Wy=[[-1,.15,64],[.05,.375,16],[.15,1,4],[.7,2.5,1]],OD=bf(function({size:b}){const {viewport:{camera:{point:g,zoom:n}}}=Gh();return(0,pb.jsxs)("svg",
{className:"tl-grid",version:"1.1",xmlns:"http://www.w3.org/2000/svg",children:[(0,pb.jsx)("defs",{children:Wy.map(([I,W,ia],sa)=>{ia=ia*b*n;var Ka=g[0]*n,Va=g[1]*n;Ka=0<Ka?Ka%ia:ia+Ka%ia;Va=0<Va?Va%ia:ia+Va%ia;I=Fl(n,[I,W],[0,1]);return(0,pb.jsx)("pattern",{id:`grid-${sa}`,width:ia,height:ia,patternUnits:"userSpaceOnUse",children:!(2<I||.1>I)&&(0,pb.jsx)("circle",{className:"tl-grid-dot",cx:Ka,cy:Va,r:1.5,opacity:Math.max(0,Math.min(I,1))})},`grid-pattern-${sa}`)})}),Wy.map((I,W)=>(0,pb.jsx)("rect",
{width:"100%",height:"100%",fill:`url(#grid-${W})`},`grid-rect-${W}`))]})}),Xy=bf(function({size:b}){return(0,pb.jsx)(OD,{size:b})});pb=V(587);var Yy=bf(function({bounds:b}){const g=jl("background");return(0,pb.jsx)(Zn,xf(te({},g),{children:(0,pb.jsx)("rect",{className:"tl-bounds-bg",width:Math.max(1,b.width),height:Math.max(1,b.height),pointerEvents:"all",rx:8,ry:8})}))});V(22);pb=V(587);var Zy=bf(function({scaledBounds:b,shapes:g,detail:n="size",rotation:I=0}){var W;const ia=1===g.length?I:null!=
(W=b.rotation)?W:0;return(0,pb.jsx)(Yn,{centered:!0,children:(0,pb.jsx)("div",{className:"tl-bounds-detail",style:{transform:ia<Em||ia>3*Em?`rotate(${ia}rad) translateY(${b.height/2+24}px)`:`rotate(${Math.PI+ia}rad) translateY(${b.height/2+32}px)`,padding:"2px 3px",borderRadius:"1px"},children:1===g.length&&"line"===g[0].type?`${Ud.dist(g[0].props.handles.start.point,g[0].props.handles.end.point).toFixed()}`:"size"===n?`${b.width.toFixed()} \xD7 ${b.height.toFixed()}`:`\u2220${Ei.radiansToDegrees(Ei.clampRadians(I)).toFixed()}\xB0`})})});
pb=V(587);var PD={top_left_corner:"tl-cursor-nwse",top_right_corner:"tl-cursor-nesw",bottom_right_corner:"tl-cursor-nwse",bottom_left_corner:"tl-cursor-nesw"},Rt=bf(function({cx:b,cy:g,size:n,targetSize:I,corner:W,isHidden:ia}){const sa=jl(W);return(0,pb.jsxs)("g",xf(te({opacity:ia?0:1},sa),{children:[(0,pb.jsx)("rect",{className:"tl-transparent "+(ia?"":PD[W]),"aria-label":`${W} target`,x:b-1.25*I,y:g-1.25*I,width:2.5*I,height:2.5*I,pointerEvents:ia?"none":"all"}),(0,pb.jsx)("rect",{className:"tl-corner-handle",
"aria-label":`${W} handle`,x:b-n/2,y:g-n/2,width:n,height:n,pointerEvents:"none"})]}))});pb=V(587);var QD={top_edge:"tl-cursor-ns",right_edge:"tl-cursor-ew",bottom_edge:"tl-cursor-ns",left_edge:"tl-cursor-ew"},Pt=bf(function({x:b,y:g,width:n,height:I,targetSize:W,edge:ia,disabled:sa,isHidden:Ka}){const Va=jl(ia);return(0,pb.jsx)("rect",te({pointerEvents:Ka||sa?"none":"all",className:"tl-transparent tl-edge-handle "+(Ka?"":QD[ia]),"aria-label":`${ia} target`,opacity:Ka?0:1,x:b-W,y:g-W,width:Math.max(1,
n+2*W),height:Math.max(1,I+2*W)},Va))});V(22);pb=V(587);bf(function({cx:b,cy:g,size:n,targetSize:I,isHidden:W}){const ia=jl("rotate");return(0,pb.jsxs)("g",xf(te({opacity:W?0:1},ia),{children:[(0,pb.jsx)("circle",{className:"tl-transparent ","aria-label":"rotate target",cx:b,cy:g,r:I,pointerEvents:W?"none":"all"}),(0,pb.jsx)("circle",{className:"tl-rotate-handle","aria-label":"rotate handle",cx:b,cy:g,r:n/2,pointerEvents:"none"})]}))});V(22);pb=V(587);var Ot=bf(function({cx:b,cy:g,targetSize:n,corner:I,
isHidden:W}){const ia=jl(I);return(0,pb.jsx)("g",xf(te({opacity:W?0:1},ia),{children:(0,pb.jsx)("rect",{className:"tl-transparent","aria-label":`${I} target`,x:b-2.5*n,y:g-2.5*n,width:3*n,height:3*n,pointerEvents:W?"none":"all"})}))});pb=V(587);var Ly=bf(function({bounds:b,showResizeHandles:g,showRotateHandles:n,shapes:I}){var W,ia,sa=pg();let {width:Ka,height:Va}=b;var Za=sa.viewport.camera.zoom;b=8/Za;Za=6/Za;I=1===I.length?I[0].canResize:[!0,!0];sa=null!=(ia=null==(W=sa.editingShape)?void 0:W.props.borderRadius)?
ia:0;return(0,pb.jsxs)(Zn,{children:[(0,pb.jsx)("rect",{className:"tl-bounds-fg",width:Math.max(Ka,1),height:Math.max(Va,1),rx:sa,ry:sa,pointerEvents:"none"}),(0,pb.jsx)(Pt,{x:2*Za,y:0,width:Ka-4*Za,height:0,targetSize:Za,edge:"top_edge",disabled:!I[1],isHidden:!g}),(0,pb.jsx)(Pt,{x:Ka,y:2*Za,width:0,height:Va-4*Za,targetSize:Za,edge:"right_edge",disabled:!I[0],isHidden:!g}),(0,pb.jsx)(Pt,{x:2*Za,y:Va,width:Ka-4*Za,height:0,targetSize:Za,edge:"bottom_edge",disabled:!I[1],isHidden:!g}),(0,pb.jsx)(Pt,
{x:0,y:2*Za,width:0,height:Va-4*Za,targetSize:Za,edge:"left_edge",disabled:!I[0],isHidden:!g}),(0,pb.jsx)(Ot,{cx:0,cy:0,targetSize:Za,corner:"top_left_resize_corner",isHidden:!n}),(0,pb.jsx)(Ot,{cx:Ka+2*Za,cy:0,targetSize:Za,corner:"top_right_resize_corner",isHidden:!n}),(0,pb.jsx)(Ot,{cx:Ka+2*Za,cy:Va+2*Za,targetSize:Za,corner:"bottom_right_resize_corner",isHidden:!n}),(0,pb.jsx)(Ot,{cx:0,cy:Va+2*Za,targetSize:Za,corner:"bottom_left_resize_corner",isHidden:!n}),(null==I?void 0:I.every(lb=>lb))&&
(0,pb.jsxs)(pb.Fragment,{children:[(0,pb.jsx)(Rt,{cx:0,cy:0,size:b,targetSize:Za,corner:"top_left_corner",isHidden:!g}),(0,pb.jsx)(Rt,{cx:Ka,cy:0,size:b,targetSize:Za,corner:"top_right_corner",isHidden:!g}),(0,pb.jsx)(Rt,{cx:Ka,cy:Va,size:b,targetSize:Za,corner:"bottom_right_corner",isHidden:!g}),(0,pb.jsx)(Rt,{cx:0,cy:Va,size:b,targetSize:Za,corner:"bottom_left_corner",isHidden:!g})]})]})});pb=V(587);var My=bf(function({bounds:b}){return(0,pb.jsx)(Np,{bounds:b,zIndex:10001,children:(0,pb.jsx)(Zn,
{children:(0,pb.jsx)("rect",{className:"tl-brush",x:0,y:0,width:b.width,height:b.height})})})});pb=V(587);bf(function(){return(0,pb.jsx)(pb.Fragment,{})});pb=V(587);var Ny=bf(function({shape:b,handle:g,id:n}){b=Ik(b,n);const [I,W]=g.point;return(0,pb.jsxs)("g",xf(te({className:"tl-handle","aria-label":"handle"},b),{transform:`translate(${I}, ${W})`,children:[(0,pb.jsx)("circle",{className:"tl-handle-bg",pointerEvents:"all"}),(0,pb.jsx)("circle",{className:"tl-counter-scaled tl-handle",pointerEvents:"none",
r:4})]}))}),Iy=cb(V(22));pb=V(587);var Cv=bf(function({direction:b}){const {viewport:{bounds:g}}=Gh(),n=Iy.useRef(null);Iy.useLayoutEffect(()=>{const I=n.current;if(I){var W=[g.width/2,g.height/2],ia=Ve.getRectangleSides([12,12],[g.width-24,g.height-24]);for(const [,[sa,Ka]]of ia)ia=w(W,b,sa,Ka),ia.didIntersect&&(ia=ia.points[0],I.style.transform=`translate(${ia[0]-6}px,${ia[1]-6}px) rotate(${Ud.toAngle(b)}rad)`)}},[b,g]);return(0,pb.jsx)("div",{ref:n,className:"tl-direction-indicator",children:(0,pb.jsx)("svg",
{height:12,width:12,children:(0,pb.jsx)("polygon",{points:"0,0 12,6 0,12"})})})});pb=V(587);var uD=bf(function({id:b,className:g,brush:n,shapes:I,assets:W,bindingShapes:ia,editingShape:sa,hoveredShape:Ka,hoveredGroup:Va,selectionBounds:Za,selectedShapes:lb,erasingShapes:vb,selectionDirectionHint:Qb,cursor:cc="default",cursorRotation:Ub=0,selectionRotation:rc=0,showSelection:lc=!0,showHandles:Vb=!0,showSelectionRotation:sc=!1,showResizeHandles:Gc=!0,showRotateHandles:Qc=!0,showSelectionDetail:Vc=!0,
showContextBar:Vd=!0,showGrid:$d=!0,gridSize:Ee=8,onEditingEnd:Ne=JC,theme:uf=mh,children:rf}){var ff;const Ge=Ls.useRef(null),{viewport:Ad,components:fd,meta:ld}=Gh(),nd=pg(),Ed=Ls.useCallback(mf=>{nd.inputs.updateContainerOffset([mf.minX,mf.minY])},[]);Gl(uf,b);bn(Ge);qk(Ge,Ad,Ed);Ch(Ge);Rl();om(Ge,cc,Ub);Ql(Ge);$i(Ge);b=Fk();const xe=(cc=1===(null==lb?void 0:lb.length)&&lb[0])&&"handles"in cc.props?null==lb?void 0:lb[0]:void 0,Fe=Ls.useMemo(()=>new Set(lb||[]),[lb]),sf=Ls.useMemo(()=>new Set(vb||
[]),[vb]);cc=1===(null==lb?void 0:lb.length)?lb[0]:void 0;Va=[...(new Set([Va,Ka]))].filter(Ii);return(0,pb.jsxs)("div",{ref:Ge,className:`tl-container ${null!=g?g:""}`,children:[(0,pb.jsxs)("div",xf(te({tabIndex:-1,className:"tl-absolute tl-canvas"},b),{children:[$d&&fd.Grid&&(0,pb.jsx)(fd.Grid,{size:Ee}),(0,pb.jsxs)(Ty,{children:[fd.SelectionBackground&&lb&&Za&&lc&&(0,pb.jsx)(Np,{"data-type":"SelectionBackground",bounds:Za,zIndex:2,children:(0,pb.jsx)(fd.SelectionBackground,{shapes:lb,bounds:Za,
showResizeHandles:Gc,showRotateHandles:Qc})}),I&&I.map((mf,lf)=>(0,pb.jsx)(ND,{shape:mf,asset:W&&mf.props.assetId?W[mf.props.assetId]:void 0,isEditing:mf===sa,isHovered:mf===Ka,isBinding:null==ia?void 0:ia.includes(mf),isSelected:Fe.has(mf),isErasing:sf.has(mf),meta:ld,zIndex:1E3+lf,onEditingEnd:Ne},"shape_"+mf.id)),!nd.isIn("select.pinching")&&(null==lb?void 0:lb.map(mf=>(0,pb.jsx)(Uy,{shape:mf,isEditing:mf===sa,isHovered:!1,isBinding:!1,isSelected:!0},"selected_indicator_"+mf.id))),Va.map(mf=>mf!==
sa&&(0,pb.jsx)(Uy,{shape:mf},"hovered_indicator_"+mf.id)),cc&&fd.BacklinksCount&&(0,pb.jsx)(LD,{hidden:!1,bounds:cc.bounds,shape:cc}),Ka&&Ka!==cc&&fd.QuickLinks&&(0,pb.jsx)(KD,{hidden:!1,bounds:Ka.bounds,shape:Ka}),n&&fd.Brush&&(0,pb.jsx)(fd.Brush,{bounds:n}),lb&&Za&&(0,pb.jsxs)(pb.Fragment,{children:[lc&&fd.SelectionForeground&&(0,pb.jsx)(Np,{"data-type":"SelectionForeground",bounds:Za,zIndex:sa&&lb.includes(sa)?1002:10002,children:(0,pb.jsx)(fd.SelectionForeground,{shapes:lb,bounds:Za,showResizeHandles:Gc,
showRotateHandles:Qc})}),Vb&&xe&&fd.Handle&&(0,pb.jsx)(Np,{"data-type":"onlySelectedShapeWithHandles",bounds:Za,zIndex:10003,children:(0,pb.jsx)(Zn,{children:Object.entries(null!=(ff=xe.props.handles)?ff:{}).map(([mf,lf])=>Ls.createElement(fd.Handle,{key:`${lf.id}_handle_${lf.id}`,shape:xe,handle:lf,id:mf}))})}),lb&&fd.SelectionDetail&&(0,pb.jsx)(MD,{shapes:lb,bounds:Za,detail:sc?"rotation":"size",hidden:!Vc,rotation:rc},"detail"+lb.map(mf=>mf.id).join(""))]})]}),Qb&&Za&&lb&&(0,pb.jsx)(Cv,{direction:Qb,
bounds:Za,shapes:lb}),(0,pb.jsx)("div",{id:"tl-dev-tools-canvas-anchor"})]})),(0,pb.jsx)(Ty,{children:lb&&Za&&(0,pb.jsx)(pb.Fragment,{children:lb&&fd.ContextBar&&(0,pb.jsx)(lD,{shapes:lb,hidden:!Vd,bounds:cc?cc.bounds:Za,rotation:cc?cc.props.rotation:0},"context"+lb.map(mf=>mf.id).join(""))})}),rf]})}),Ky=cb(V(22)),Jy=cb(V(22));pb=V(587);bf(function({children:b}){const g=Jy.useRef(null),{viewport:n}=Gh();Jy.useEffect(()=>Ld(()=>{const I=g.current;if(I){var {zoom:W,point:ia}=n.camera;I.style.transform=
`scale(${W}) translateX(${ia[0]}px) translateY(${ia[1]}px)`}}),[]);return(0,pb.jsx)("svg",{className:"tl-absolute tl-overlay",pointerEvents:"none",children:(0,pb.jsx)("g",{ref:g,pointerEvents:"none",children:b})})});pb=V(587);var wD=bf(function(b){const g=hj(b),n=Xj(b.id);wj(g,b);Hk(g,b);return(0,pb.jsx)(n.Provider,{value:g,children:b.children})});pb=V(587);var vD=bf(function({id:b="noid",viewport:g,inputs:n,callbacks:I=mh,meta:W=mh,components:ia=mh,children:sa}){const [Ka,Va]=Ky.useState(()=>{const {Brush:lb,
ContextBar:vb,DirectionIndicator:Qb,Grid:cc,Handle:Ub,SelectionBackground:rc,SelectionDetail:lc,SelectionForeground:Vb}=ia,sc=Ia(ia,"Brush ContextBar DirectionIndicator Grid Handle SelectionBackground SelectionDetail SelectionForeground".split(" "));return{id:b,viewport:g,inputs:n,callbacks:I,meta:W,components:xf(te({},sc),{Brush:null===lb?void 0:My,ContextBar:vb,DirectionIndicator:null===Qb?void 0:Cv,Grid:null===cc?void 0:Xy,Handle:null===Ub?void 0:Ny,SelectionBackground:null===rc?void 0:Yy,SelectionDetail:null===
lc?void 0:Zy,SelectionForeground:null===Vb?void 0:Ly})}});Ky.useLayoutEffect(()=>{const {Brush:lb,ContextBar:vb,DirectionIndicator:Qb,Grid:cc,Handle:Ub,SelectionBackground:rc,SelectionDetail:lc,SelectionForeground:Vb}=ia,sc=Ia(ia,"Brush ContextBar DirectionIndicator Grid Handle SelectionBackground SelectionDetail SelectionForeground".split(" "));return Ld(()=>{Va({id:b,viewport:g,inputs:n,callbacks:I,meta:W,components:xf(te({},sc),{Brush:null===lb?void 0:My,ContextBar:vb,DirectionIndicator:null===
Qb?void 0:Cv,Grid:null===cc?void 0:Xy,Handle:null===Ub?void 0:Ny,SelectionBackground:null===rc?void 0:Yy,SelectionDetail:null===lc?void 0:Zy,SelectionForeground:null===Vb?void 0:Ly})})})},[]);const Za=fk(b);return(0,pb.jsx)(Za.Provider,{value:Ka,children:sa})});pb=V(587);pb=V(587);var tD=bf(function(b){const g=pg();return(0,pb.jsx)(wk,te({viewport:g.viewport,inputs:g.inputs,callbacks:g._events,brush:g.brush,editingShape:g.editingShape,hoveredShape:g.hoveredShape,hoveredGroup:g.hoveredGroup,bindingShapes:g.bindingShapes,
selectionDirectionHint:g.selectionDirectionHint,selectionBounds:g.selectionBounds,selectedShapes:g.selectedShapesArray,erasingShapes:g.erasingShapesArray,shapes:g.shapes,assets:g.assets,showGrid:g.settings.showGrid,showSelection:g.showSelection,showSelectionRotation:g.showSelectionRotation,showResizeHandles:g.showResizeHandles,showRotateHandles:g.showRotateHandles,showSelectionDetail:g.showSelectionDetail,showContextBar:g.showContextBar,cursor:g.cursors.cursor,cursorRotation:g.cursors.rotation,selectionRotation:g.selectionRotation,
onEditingEnd:g.clearEditingState},b))});pb=V(587);var yr=cb(V(22)),Qt=cb(V(22));pb=V(587);var RD="add-link block-search block connector group internal-link link-to-block link-to-page link-to-whiteboard move-to-sidebar-right object-compact object-expanded open-as-page page-search page references-hide references-show select-cursor text ungroup whiteboard-element whiteboard".split(" "),Fh=b=>{var {name:g,className:n}=b;b=Ia(b,["name","className"]);const I=RD.includes(g)?"tie tie-":"ti ti-";return(0,pb.jsx)("i",
te({className:[I+g,n].join(" ")},b))},bh=V(22),SD=V(22),Hq=V(22),yn=V(22),Ev=V(22),TD=V(31),Jm=V(22),Iq=(0,Jm.forwardRef)((b,g)=>{var {children:n}=b;b=Ia(b,["children"]);const I=Jm.Children.toArray(n),W=I.find(bm);if(W){const ia=W.props.children;n=I.map(sa=>sa===W?1<Jm.Children.count(ia)?Jm.Children.only(null):(0,Jm.isValidElement)(ia)?ia.props.children:null:sa);return(0,Jm.createElement)(Fv,yf({},b,{ref:g}),(0,Jm.isValidElement)(ia)?(0,Jm.cloneElement)(ia,void 0,n):null)}return(0,Jm.createElement)(Fv,
yf({},b,{ref:g}),n)});Iq.displayName="Slot";var Fv=(0,Jm.forwardRef)((b,g)=>{const {children:n}=b;b=Ia(b,["children"]);return(0,Jm.isValidElement)(n)?(0,Jm.cloneElement)(n,xf(te({},Sk(b,n.props)),{ref:Sl(g,n.ref)})):1<Jm.Children.count(n)?Jm.Children.only(null):null});Fv.displayName="SlotClone";var $y=({children:b})=>(0,Jm.createElement)(Jm.Fragment,null,b),Aj="a button div h2 h3 img label li nav ol p span svg ul".split(" ").reduce((b,g)=>{const n=(0,Ev.forwardRef)((I,W)=>{var {asChild:ia}=I;I=Ia(I,
["asChild"]);ia=ia?Iq:g;(0,Ev.useEffect)(()=>{window[Symbol.for("radix-ui")]=!0},[]);return(0,Ev.createElement)(ia,yf({},I,{ref:W}))});n.displayName=`Primitive.${g}`;return xf(te({},b),{[g]:n})},{}),Gv=V(22),UD=V(22),az,VD=(0,yn.createContext)({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),St=(0,yn.forwardRef)((b,g)=>{var n;const {disableOutsidePointerEvents:I=!1,onEscapeKeyDown:W,onPointerDownOutside:ia,onFocusOutside:sa,onInteractOutside:Ka,onDismiss:Va}=b,Za=
Ia(b,"disableOutsidePointerEvents onEscapeKeyDown onPointerDownOutside onFocusOutside onInteractOutside onDismiss".split(" ")),lb=(0,yn.useContext)(VD),[vb,Qb]=(0,yn.useState)(null),cc=null!==(n=null===vb||void 0===vb?void 0:vb.ownerDocument)&&void 0!==n?n:null===globalThis||void 0===globalThis?void 0:globalThis.document,[,Ub]=(0,yn.useState)({});g=Lg(g,Gc=>Qb(Gc));n=Array.from(lb.layers);var [rc]=[...lb.layersWithOutsidePointerEventsDisabled].slice(-1);rc=n.indexOf(rc);const lc=vb?n.indexOf(vb):
-1;n=0<lb.layersWithOutsidePointerEventsDisabled.size;const Vb=lc>=rc;rc=Jf(Gc=>{const Qc=Gc.target,Vc=[...lb.branches].some(Vd=>Vd.contains(Qc));Vb&&!Vc&&(null===ia||void 0===ia||ia(Gc),null===Ka||void 0===Ka||Ka(Gc),Gc.defaultPrevented||null===Va||void 0===Va||Va())},cc);const sc=yk(Gc=>{const Qc=Gc.target;[...lb.branches].some(Vc=>Vc.contains(Qc))||(null===sa||void 0===sa||sa(Gc),null===Ka||void 0===Ka||Ka(Gc),Gc.defaultPrevented||null===Va||void 0===Va||Va())},cc);pl(Gc=>{lc===lb.layers.size-
1&&(null===W||void 0===W||W(Gc),!Gc.defaultPrevented&&Va&&(Gc.preventDefault(),Va()))},cc);(0,yn.useEffect)(()=>{if(vb)return I&&(0===lb.layersWithOutsidePointerEventsDisabled.size&&(az=cc.body.style.pointerEvents,cc.body.style.pointerEvents="none"),lb.layersWithOutsidePointerEventsDisabled.add(vb)),lb.layers.add(vb),Ej(),()=>{I&&1===lb.layersWithOutsidePointerEventsDisabled.size&&(cc.body.style.pointerEvents=az)}},[vb,cc,I,lb]);(0,yn.useEffect)(()=>()=>{vb&&(lb.layers.delete(vb),lb.layersWithOutsidePointerEventsDisabled.delete(vb),
Ej())},[vb,lb]);(0,yn.useEffect)(()=>{const Gc=()=>Ub({});document.addEventListener("dismissableLayer.update",Gc);return()=>document.removeEventListener("dismissableLayer.update",Gc)},[]);return(0,yn.createElement)(Aj.div,yf({},Za,{ref:g,style:te({pointerEvents:n?Vb?"auto":"none":void 0},b.style),onFocusCapture:Je(b.onFocusCapture,sc.onFocusCapture),onBlurCapture:Je(b.onBlurCapture,sc.onBlurCapture),onPointerDownCapture:Je(b.onPointerDownCapture,rc.onPointerDownCapture)}))}),bz=cb(V(22)),WD=V(22),
zn=(null===globalThis||void 0===globalThis?0:globalThis.document)?WD.useLayoutEffect:()=>{},XD=bz["useId".toString()]||(()=>{}),YD=0,Ul=V(22),ZD=(b,g,n)=>Pc(void 0,null,function*(){const {placement:I="bottom",strategy:W="absolute",middleware:ia=[],platform:sa}=n,Ka=yield null==sa.isRTL?void 0:sa.isRTL(g);let Va=yield sa.getElementRects({reference:b,floating:g,strategy:W}),{x:Za,y:lb}=nl(Va,I,Ka),vb=I,Qb={},cc=0;for(let Ub=0;Ub<ia.length;Ub++){const {name:rc,fn:lc}=ia[Ub],{x:Vb,y:sc,data:Gc,reset:Qc}=
yield lc({x:Za,y:lb,initialPlacement:I,placement:vb,strategy:W,middlewareData:Qb,rects:Va,platform:sa,elements:{reference:b,floating:g}});Za=null!=Vb?Vb:Za;lb=null!=sc?sc:lb;Qb=xf(te({},Qb),{[rc]:te(te({},Qb[rc]),Gc)});Qc&&50>=cc&&(cc++,"object"==typeof Qc&&(Qc.placement&&(vb=Qc.placement),Qc.rects&&(Va=!0===Qc.rects?yield sa.getElementRects({reference:b,floating:g,strategy:W}):Qc.rects),{x:Za,y:lb}=nl(Va,vb,Ka)),Ub=-1)}return{x:Za,y:lb,placement:vb,strategy:W,middlewareData:Qb}}),Hv=Math.min,Iv=
Math.max,cz=b=>({name:"arrow",options:b,fn(g){return Pc(this,null,function*(){const {element:n,padding:I=0}=null!=b?b:{},{x:W,y:ia,placement:sa,rects:Ka,platform:Va}=g;if(null==n)return{};const Za=zk(I),lb={x:W,y:ia},vb=xi(sa),Qb=sa.split("-")[1],cc=yj(vb);var Ub=yield Va.getDimensions(n);const rc="y"===vb?"top":"left",lc="y"===vb?"bottom":"right";var Vb=Ka.reference[cc]+Ka.reference[vb]-lb[vb]-Ka.floating[cc];const sc=lb[vb]-Ka.reference[vb];var Gc=yield null==Va.getOffsetParent?void 0:Va.getOffsetParent(n);
let Qc=Gc?"y"===vb?Gc.clientHeight||0:Gc.clientWidth||0:0;0===Qc&&(Qc=Ka.floating[cc]);Gc=Za[rc];const Vc=Qc-Ub[cc]-Za[lc];Ub=Qc/2-Ub[cc]/2+(Vb/2-sc/2);Vb=Iv(Gc,Hv(Ub,Vc));return{[vb]:lb[vb]-(0<("start"===Qb?Za[rc]:Za[lc])&&Ub!==Vb&&Ka.reference[cc]<=Ka.floating[cc]?Ub<Gc?Gc-Ub:Vc-Ub:0),data:{[vb]:Vb,centerOffset:Ub-Vb}}})}}),$D={left:"right",right:"left",bottom:"top",top:"bottom"},aE={start:"end",end:"start"},dz=["top","right","bottom","left"];dz.reduce((b,g)=>b.concat(g,g+"-start",g+"-end"),[]);
var bE=function(b){return void 0===b&&(b={}),{name:"flip",options:b,fn(g){return Pc(this,null,function*(){var n;const {placement:I,middlewareData:W,rects:ia,initialPlacement:sa,platform:Ka,elements:Va}=g;var Za=b;const {mainAxis:lb=!0,crossAxis:vb=!0,fallbackPlacements:Qb,fallbackStrategy:cc="bestFit",flipAlignment:Ub=!0}=Za;Za=Ia(Za,["mainAxis","crossAxis","fallbackPlacements","fallbackStrategy","flipAlignment"]);const rc=Il(I);var lc=Qb||(rc!==sa&&Ub?function(Vd){const $d=Fm(Vd);return[Dm(Vd),$d,
Dm($d)]}(sa):[Fm(sa)]);lc=[sa,...lc];const Vb=yield sm(g,Za),sc=[];Za=(null==(n=W.flip)?void 0:n.overflows)||[];if(lb&&sc.push(Vb[rc]),vb){const {main:Vd,cross:$d}=Zl(I,ia,yield null==Ka.isRTL?void 0:Ka.isRTL(Va.floating));sc.push(Vb[Vd],Vb[$d])}if(Za=[...Za,{placement:I,overflows:sc}],!sc.every(Vd=>0>=Vd)){var Gc,Qc;n=(null!=(Gc=null==(Qc=W.flip)?void 0:Qc.index)?Gc:0)+1;if(Gc=lc[n])return{data:{index:n,overflows:Za},reset:{placement:Gc}};Gc="bottom";switch(cc){case "bestFit":var Vc;(Qc=null==(Vc=
Za.map(Vd=>[Vd,Vd.overflows.filter($d=>0<$d).reduce(($d,Ee)=>$d+Ee,0)]).sort((Vd,$d)=>Vd[1]-$d[1])[0])?void 0:Vc[0].placement)&&(Gc=Qc);break;case "initialPlacement":Gc=sa}if(I!==Gc)return{reset:{placement:Gc}}}return{}})}}},cE=function(b){b=void 0===b?{}:b;let {strategy:g="referenceHidden"}=b,n=Ia(b,["strategy"]);return{name:"hide",fn(I){return Pc(this,null,function*(){var {rects:W}=I;switch(g){case "referenceHidden":return W=Tk(yield sm(I,xf(te({},n),{elementContext:"reference"})),W.reference),
{data:{referenceHiddenOffsets:W,referenceHidden:Qj(W)}};case "escaped":return W=Tk(yield sm(I,xf(te({},n),{altBoundary:!0})),W.floating),{data:{escapedOffsets:W,escaped:Qj(W)}};default:return{}}})}}},dE=function(b){return void 0===b&&(b=0),{name:"offset",options:b,fn(g){return Pc(this,null,function*(){const {x:n,y:I}=g,W=yield function(ia,sa){return Pc(this,null,function*(){const {placement:Ka,platform:Va,elements:Za}=ia;var lb=yield null==Va.isRTL?void 0:Va.isRTL(Za.floating),vb=Il(Ka);const Qb=
Ka.split("-")[1],cc="x"===xi(Ka);vb=["left","top"].includes(vb)?-1:1;lb=lb&&cc?-1:1;const Ub="function"==typeof sa?sa(ia):sa;let {mainAxis:rc,crossAxis:lc,alignmentAxis:Vb}="number"==typeof Ub?{mainAxis:Ub,crossAxis:0,alignmentAxis:null}:te({mainAxis:0,crossAxis:0,alignmentAxis:null},Ub);return Qb&&"number"==typeof Vb&&(lc="end"===Qb?-1*Vb:Vb),cc?{x:lc*lb,y:rc*vb}:{x:rc*vb,y:lc*lb}})}(g,b);return{x:n+W.x,y:I+W.y,data:W}})}}},eE=function(b){return void 0===b&&(b={}),{name:"shift",options:b,fn(g){return Pc(this,
null,function*(){const {x:n,y:I,placement:W}=g;var ia=b;const {mainAxis:sa=!0,crossAxis:Ka=!1,limiter:Va={fn:cc=>{let {x:Ub,y:rc}=cc;return{x:Ub,y:rc}}}}=ia;var Za=Ia(ia,["mainAxis","crossAxis","limiter"]);ia={x:n,y:I};Za=yield sm(g,Za);const lb=xi(Il(W)),vb="x"===lb?"y":"x";let Qb=ia[lb];ia=ia[vb];sa&&(Qb=Iv(Qb+Za["y"===lb?"top":"left"],Hv(Qb,Qb-Za["y"===lb?"bottom":"right"])));Ka&&(ia=Iv(ia+Za["y"===vb?"top":"left"],Hv(ia,ia-Za["y"===vb?"bottom":"right"])));ia=Va.fn(xf(te({},g),{[lb]:Qb,[vb]:ia}));
return xf(te({},ia),{data:{x:ia.x-n,y:ia.y-I}})})}}},fE=function(b){return void 0===b&&(b={}),{options:b,fn(g){const {x:n,y:I,placement:W,rects:ia,middlewareData:sa}=g,{offset:Ka=0,mainAxis:Va=!0,crossAxis:Za=!0}=b;var lb={x:n,y:I};g=xi(W);const vb="x"===g?"y":"x";let Qb=lb[g];lb=lb[vb];var cc="function"==typeof Ka?Ka(xf(te({},ia),{placement:W})):Ka;cc="number"==typeof cc?{mainAxis:cc,crossAxis:0}:te({mainAxis:0,crossAxis:0},cc);if(Va){var Ub="y"===g?"height":"width",rc=ia.reference[g]-ia.floating[Ub]+
cc.mainAxis;Ub=ia.reference[g]+ia.reference[Ub]-cc.mainAxis;Qb<rc?Qb=rc:Qb>Ub&&(Qb=Ub)}if(Za){var lc,Vb,sc,Gc;const Qc="y"===g?"width":"height";rc=["top","left"].includes(Il(W));Ub=ia.reference[vb]-ia.floating[Qc]+(rc&&null!=(lc=null==(Vb=sa.offset)?void 0:Vb[vb])?lc:0)+(rc?0:cc.crossAxis);lc=ia.reference[vb]+ia.reference[Qc]+(rc?0:null!=(sc=null==(Gc=sa.offset)?void 0:Gc[vb])?sc:0)-(rc?cc.crossAxis:0);lb<Ub?lb=Ub:lb>lc&&(lb=lc)}return{[g]:Qb,[vb]:lb}}}},ez=Math.min,Ns=Math.max,Tt=Math.round,gE={getClippingRect:function(b){let {element:g,
boundary:n,rootBoundary:I,strategy:W}=b;b=[...("clippingAncestors"===n?hh(g):[].concat(n)),I];b=b.reduce((ia,sa)=>{sa=yh(g,sa,W);return ia.top=Ns(sa.top,ia.top),ia.right=ez(sa.right,ia.right),ia.bottom=ez(sa.bottom,ia.bottom),ia.left=Ns(sa.left,ia.left),ia},yh(g,b[0],W));return{width:b.right-b.left,height:b.bottom-b.top,x:b.left,y:b.top}},convertOffsetParentRelativeRectToViewportRelativeRect:function(b){let {rect:g,offsetParent:n,strategy:I}=b;var W=kj(n);const ia=Hj(n);if(n===ia)return g;b={scrollLeft:0,
scrollTop:0};var sa=0,Ka=0;(W||!W&&"fixed"!==I)&&(("body"!==ck(n)||hk(ia))&&(b=gk(n)),kj(n))&&(W=jk(n,!0),sa=W.x+n.clientLeft,Ka=W.y+n.clientTop);return xf(te({},g),{x:g.x-b.scrollLeft+sa,y:g.y-b.scrollTop+Ka})},isElement:ik,getDimensions:vj,getOffsetParent:Bh,getDocumentElement:Hj,getElementRects:b=>{let {reference:g,floating:n,strategy:I}=b;b=Bh(n);var W=kj(b);const ia=Hj(b);var sa;if(sa=W)sa=jk(b),sa=Tt(sa.width)!==b.offsetWidth||Tt(sa.height)!==b.offsetHeight;sa=jk(g,sa,"fixed"===I);let Ka={scrollLeft:0,
scrollTop:0};var Va=0,Za=0;if(W||!W&&"fixed"!==I)(("body"!==ck(b)||hk(ia))&&(Ka=gk(b)),kj(b))?(W=jk(b,!0),Va=W.x+b.clientLeft,Za=W.y+b.clientTop):ia&&(Va=Gm(ia));return{reference:{x:sa.left+Ka.scrollLeft-Va,y:sa.top+Ka.scrollTop-Za,width:sa.width,height:sa.height},floating:xf(te({},vj(n)),{x:0,y:0})}},getClientRects:b=>Array.from(b.getClientRects()),isRTL:b=>"rtl"===Gj(b).direction},hE=(b,g,n)=>ZD(b,g,te({platform:gE},n)),Ln=cb(V(22),1),fz=V(22),iE=cb(V(31),1),Jv="undefined"!==typeof document?fz.useLayoutEffect:
fz.useEffect,jE=b=>{const {element:g,padding:n}=b;return{name:"arrow",options:b,fn(I){if(Object.prototype.hasOwnProperty.call(g,"current")){if(null!=g.current)return cz({element:g.current,padding:n}).fn(I)}else if(g)return cz({element:g,padding:n}).fn(I);return{}}}},Kv=V(22),kE=(0,Kv.forwardRef)((b,g)=>{const {children:n,width:I=10,height:W=5}=b,ia=Ia(b,["children","width","height"]);return(0,Kv.createElement)(Aj.svg,yf({},ia,{ref:g,width:I,height:W,viewBox:"0 0 30 10",preserveAspectRatio:"none"}),
b.asChild?n:(0,Kv.createElement)("polygon",{points:"0,0 30,0 15,10"}))}),lE=V(22),[Lv,zr]=Ui("Popper"),[mE,gz]=Lv("Popper"),Mv=(0,Ul.forwardRef)((b,g)=>{const {__scopePopper:n,virtualRef:I}=b;b=Ia(b,["__scopePopper","virtualRef"]);const W=gz("PopperAnchor",n),ia=(0,Ul.useRef)(null);g=Lg(g,ia);(0,Ul.useEffect)(()=>{W.onAnchorChange((null===I||void 0===I?void 0:I.current)||ia.current)});return I?null:(0,Ul.createElement)(Aj.div,yf({},b,{ref:g}))}),[nE,oE]=Lv("PopperContent"),[pE,hz]=Lv("PopperContent",
{hasParent:!1,positionUpdateFns:new Set}),Ut=(0,Ul.forwardRef)((b,g)=>{var n,I,W,ia,sa,Ka,Va,Za;const {__scopePopper:lb,side:vb="bottom",sideOffset:Qb=0,align:cc="center",alignOffset:Ub=0,arrowPadding:rc=0,collisionBoundary:lc=[],collisionPadding:Vb=0,sticky:sc="partial",hideWhenDetached:Gc=!1,avoidCollisions:Qc=!0}=b;b=Ia(b,"__scopePopper side sideOffset align alignOffset arrowPadding collisionBoundary collisionPadding sticky hideWhenDetached avoidCollisions".split(" "));const Vc=gz("PopperContent",
lb),[Vd,$d]=(0,Ul.useState)(null);g=Lg(g,Qr=>$d(Qr));const [Ee,Ne]=(0,Ul.useState)(null);var uf=ug(Ee),rf=null!==(n=null===uf||void 0===uf?void 0:uf.width)&&void 0!==n?n:0;n=null!==(I=null===uf||void 0===uf?void 0:uf.height)&&void 0!==I?I:0;I=vb+("center"!==cc?"-"+cc:"");uf="number"===typeof Vb?Vb:te({top:0,right:0,bottom:0,left:0},Vb);const ff=Array.isArray(lc)?lc:[lc],Ge=0<ff.length;uf={padding:uf,boundary:ff.filter(Tf),altBoundary:Ge};const {reference:Ad,floating:fd,strategy:ld,x:nd,y:Ed,placement:xe,
middlewareData:Fe,update:sf}=aj({strategy:"fixed",placement:I,whileElementsMounted:Gg,middleware:[dE({mainAxis:Qb+n,alignmentAxis:Ub}),Qc?eE(te({mainAxis:!0,crossAxis:!1,limiter:"partial"===sc?fE():void 0},uf)):void 0,Ee?jE({element:Ee,padding:rc}):void 0,Qc?bE(te({},uf)):void 0,qE({arrowWidth:rf,arrowHeight:n}),Gc?cE({strategy:"referenceHidden"}):void 0].filter(Wi)});zn(()=>{Ad(Vc.anchor)},[Ad,Vc.anchor]);const mf=null!==nd&&null!==Ed,[lf,Vg]=Hg(xe);rf=null===(W=Fe.arrow)||void 0===W?void 0:W.x;
W=null===(ia=Fe.arrow)||void 0===ia?void 0:ia.y;ia=0!==(null===(sa=Fe.arrow)||void 0===sa?void 0:sa.centerOffset);const [Ig,oi]=(0,Ul.useState)();zn(()=>{Vd&&oi(window.getComputedStyle(Vd).zIndex)},[Vd]);const {hasParent:Nk,positionUpdateFns:Xk}=hz("PopperContent",lb),Do=!Nk;(0,Ul.useLayoutEffect)(()=>{if(!Do)return Xk.add(sf),()=>{Xk.delete(sf)}},[Do,Xk,sf]);(0,Ul.useLayoutEffect)(()=>{Do&&mf&&Array.from(Xk).reverse().forEach(Qr=>requestAnimationFrame(Qr))},[Do,mf,Xk]);sa=xf(te({"data-side":lf,"data-align":Vg},
b),{ref:g,style:xf(te({},b.style),{animation:mf?void 0:"none",opacity:null!==(Ka=Fe.hide)&&void 0!==Ka&&Ka.referenceHidden?0:void 0})});return(0,Ul.createElement)("div",{ref:fd,"data-radix-popper-content-wrapper":"",style:{position:ld,left:0,top:0,transform:mf?`translate3d(${Math.round(nd)}px, ${Math.round(Ed)}px, 0)`:"translate3d(0, -200%, 0)",minWidth:"max-content",zIndex:Ig,["--radix-popper-transform-origin"]:[null===(Va=Fe.transformOrigin)||void 0===Va?void 0:Va.x,null===(Za=Fe.transformOrigin)||
void 0===Za?void 0:Za.y].join(" ")}},(0,Ul.createElement)(nE,{scope:lb,placedSide:lf,onArrowChange:Ne,arrowX:rf,arrowY:W,shouldHideArrow:ia},Do?(0,Ul.createElement)(pE,{scope:lb,hasParent:!0,positionUpdateFns:Xk},(0,Ul.createElement)(Aj.div,sa)):(0,Ul.createElement)(Aj.div,sa)))}),iz={top:"bottom",right:"left",bottom:"top",left:"right"},jz=(0,Ul.forwardRef)(function(b,g){var {__scopePopper:n}=b;b=Ia(b,["__scopePopper"]);n=oE("PopperArrow",n);return(0,Ul.createElement)("span",{ref:n.onArrowChange,
style:{position:"absolute",left:n.arrowX,top:n.arrowY,[iz[n.placedSide]]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[n.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[n.placedSide],visibility:n.shouldHideArrow?"hidden":void 0}},(0,Ul.createElement)(kE,yf({},b,{ref:g,style:xf(te({},b.style),{display:"block"})})))}),qE=b=>({name:"transformOrigin",
options:b,fn(g){var n,I,W,ia,sa;const {placement:Ka,rects:Va,middlewareData:Za}=g,lb=(g=0!==(null===(n=Za.arrow)||void 0===n?void 0:n.centerOffset))?0:b.arrowWidth;n=g?0:b.arrowHeight;const [vb,Qb]=Hg(Ka),cc={start:"0%",center:"50%",end:"100%"}[Qb],Ub=(null!==(I=null===(W=Za.arrow)||void 0===W?void 0:W.x)&&void 0!==I?I:0)+lb/2;I=(null!==(ia=null===(sa=Za.arrow)||void 0===sa?void 0:sa.y)&&void 0!==ia?ia:0)+n/2;sa=ia="";"bottom"===vb?(ia=g?cc:`${Ub}px`,sa=`${-n}px`):"top"===vb?(ia=g?cc:`${Ub}px`,sa=
`${Va.floating.height+n}px`):"right"===vb?(ia=`${-n}px`,sa=g?cc:`${I}px`):"left"===vb&&(ia=`${Va.floating.width+n}px`,sa=g?cc:`${I}px`);return{data:{x:ia,y:sa}}}}),Nv=b=>{const {__scopePopper:g,children:n}=b,[I,W]=(0,Ul.useState)(null);return(0,Ul.createElement)(mE,{scope:g,anchor:I,onAnchorChange:W},n)},kz=V(22),rE=cb(V(31)),lz=(0,kz.forwardRef)((b,g)=>{var n;const {container:I=null===globalThis||void 0===globalThis?void 0:null===(n=globalThis.document)||void 0===n?void 0:n.body}=b;b=Ia(b,["container"]);
return I?rE.default.createPortal((0,kz.createElement)(Aj.div,yf({},b,{ref:g})),I):null}),np=V(22),sE=V(31),Os=b=>{const {present:g,children:n}=b;b=mi(g);const I="function"===typeof n?n({present:b.isPresent}):np.Children.only(n),W=Lg(b.ref,I.ref);return"function"===typeof n||b.isPresent?(0,np.cloneElement)(I,{ref:W}):null};Os.displayName="Presence";var Vt=V(22),mz=V(22),nz=(0,mz.forwardRef)((b,g)=>(0,mz.createElement)(Aj.span,yf({},b,{ref:g,style:te({position:"absolute",border:0,width:1,height:1,padding:0,
margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"},b.style)}))),[Wt]=Ui("Tooltip",[zr]),Xt=zr(),[tE,Ov]=Wt("TooltipProvider"),[uE,Ps]=Wt("Tooltip"),vE=(0,bh.forwardRef)((b,g)=>{var {__scopeTooltip:n}=b;const I=Ia(b,["__scopeTooltip"]),W=Ps("TooltipTrigger",n),ia=Ov("TooltipTrigger",n);n=Xt(n);const sa=(0,bh.useRef)(null);g=Lg(g,sa,W.onTriggerChange);const Ka=(0,bh.useRef)(!1),Va=(0,bh.useRef)(!1),Za=(0,bh.useCallback)(()=>Ka.current=!1,[]);(0,bh.useEffect)(()=>
()=>document.removeEventListener("pointerup",Za),[Za]);return(0,bh.createElement)(Mv,yf({asChild:!0},n),(0,bh.createElement)(Aj.button,yf({"aria-describedby":W.open?W.contentId:void 0,"data-state":W.stateAttribute},I,{ref:g,onPointerMove:Je(b.onPointerMove,lb=>{"touch"===lb.pointerType||Va.current||ia.isPointerInTransitRef.current||(W.onTriggerEnter(),Va.current=!0)}),onPointerLeave:Je(b.onPointerLeave,()=>{W.onTriggerLeave();Va.current=!1}),onPointerDown:Je(b.onPointerDown,()=>{Ka.current=!0;document.addEventListener("pointerup",
Za,{once:!0})}),onFocus:Je(b.onFocus,()=>{if(!Ka.current)W.onOpen()}),onBlur:Je(b.onBlur,W.onClose),onClick:Je(b.onClick,W.onClose)})))}),[wE,xE]=Wt("TooltipPortal",{forceMount:void 0}),yE=(0,bh.forwardRef)((b,g)=>{var n=xE("TooltipContent",b.__scopeTooltip);const {forceMount:I=n.forceMount,side:W="top"}=b;n=Ia(b,["forceMount","side"]);b=Ps("TooltipContent",b.__scopeTooltip);return(0,bh.createElement)(Os,{present:I||b.open},b.disableHoverableContent?(0,bh.createElement)(oz,yf({side:W},n,{ref:g})):
(0,bh.createElement)(zE,yf({side:W},n,{ref:g})))}),zE=(0,bh.forwardRef)((b,g)=>{const n=Ps("TooltipContent",b.__scopeTooltip),I=Ov("TooltipContent",b.__scopeTooltip),W=(0,bh.useRef)(null);g=Lg(g,W);const [ia,sa]=(0,bh.useState)(null),{trigger:Ka,onClose:Va}=n,Za=W.current,{onPointerInTransitChange:lb}=I,vb=(0,bh.useCallback)(()=>{sa(null);lb(!1)},[lb]),Qb=(0,bh.useCallback)((cc,Ub)=>{const rc=Jl({x:cc.clientX,y:cc.clientY},cc.currentTarget.getBoundingClientRect()),lc="right"===rc||"bottom"===rc?-5:
5;cc="right"===rc||"left"===rc?{x:cc.clientX+lc,y:cc.clientY}:{x:cc.clientX,y:cc.clientY+lc};Ub=Ub.getBoundingClientRect();const {top:Vb,right:sc,bottom:Gc,left:Qc}=Ub;Ub=Fi([cc,{x:Qc,y:Vb},{x:sc,y:Vb},{x:sc,y:Gc},{x:Qc,y:Gc}]);sa(Ub);lb(!0)},[lb]);(0,bh.useEffect)(()=>()=>vb(),[vb]);(0,bh.useEffect)(()=>{if(Ka&&Za){const cc=rc=>Qb(rc,Za),Ub=rc=>Qb(rc,Ka);Ka.addEventListener("pointerleave",cc);Za.addEventListener("pointerleave",Ub);return()=>{Ka.removeEventListener("pointerleave",cc);Za.removeEventListener("pointerleave",
Ub)}}},[Ka,Za,Qb,vb]);(0,bh.useEffect)(()=>{if(ia){const cc=Ub=>{var rc=Ub.target;Ub={x:Ub.clientX,y:Ub.clientY};rc=(null===Ka||void 0===Ka?void 0:Ka.contains(rc))||(null===Za||void 0===Za?void 0:Za.contains(rc));const {x:lc,y:Vb}=Ub;Ub=!1;for(let sc=0,Gc=ia.length-1;sc<ia.length;Gc=sc++){const Qc=ia[sc].x,Vc=ia[sc].y,Vd=ia[Gc].x,$d=ia[Gc].y;Vc>Vb!==$d>Vb&&lc<(Vd-Qc)*(Vb-Vc)/($d-Vc)+Qc&&(Ub=!Ub)}Ub=!Ub;rc?vb():Ub&&(vb(),Va())};document.addEventListener("pointermove",cc);return()=>document.removeEventListener("pointermove",
cc)}},[Ka,Za,ia,Va,vb]);return(0,bh.createElement)(oz,yf({},b,{ref:g}))}),[AE,BE]=Wt("Tooltip",{isInside:!1}),oz=(0,bh.forwardRef)((b,g)=>{const {__scopeTooltip:n,children:I,"aria-label":W,onEscapeKeyDown:ia,onPointerDownOutside:sa}=b;b=Ia(b,["__scopeTooltip","children","aria-label","onEscapeKeyDown","onPointerDownOutside"]);const Ka=Ps("TooltipContent",n),Va=Xt(n),{onClose:Za}=Ka;(0,bh.useEffect)(()=>{document.addEventListener("tooltip.open",Za);return()=>document.removeEventListener("tooltip.open",
Za)},[Za]);(0,bh.useEffect)(()=>{if(Ka.trigger){const lb=vb=>{vb=vb.target;null!==vb&&void 0!==vb&&vb.contains(Ka.trigger)&&Za()};window.addEventListener("scroll",lb,{capture:!0});return()=>window.removeEventListener("scroll",lb,{capture:!0})}},[Ka.trigger,Za]);return(0,bh.createElement)(St,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:ia,onPointerDownOutside:sa,onFocusOutside:lb=>lb.preventDefault(),onDismiss:Za},(0,bh.createElement)(Ut,yf({"data-state":Ka.stateAttribute},Va,b,{ref:g,
style:xf(te({},b.style),{["--radix-tooltip-content-transform-origin"]:"var(--radix-popper-transform-origin)"})}),(0,bh.createElement)($y,null,I),(0,bh.createElement)(AE,{scope:n,isInside:!0},(0,bh.createElement)(nz,{id:Ka.contentId,role:"tooltip"},W||I))))}),CE=(0,bh.forwardRef)((b,g)=>{const {__scopeTooltip:n}=b;b=Ia(b,["__scopeTooltip"]);const I=Xt(n);return BE("TooltipArrow",n).isInside?null:(0,bh.createElement)(jz,yf({},I,b,{ref:g}))}),DE=b=>{const {__scopeTooltip:g,delayDuration:n=700,skipDelayDuration:I=
300,disableHoverableContent:W=!1,children:ia}=b,[sa,Ka]=(0,bh.useState)(!0),Va=(0,bh.useRef)(!1),Za=(0,bh.useRef)(0);(0,bh.useEffect)(()=>{const lb=Za.current;return()=>window.clearTimeout(lb)},[]);return(0,bh.createElement)(tE,{scope:g,isOpenDelayed:sa,delayDuration:n,onOpen:(0,bh.useCallback)(()=>{window.clearTimeout(Za.current);Ka(!1)},[]),onClose:(0,bh.useCallback)(()=>{window.clearTimeout(Za.current);Za.current=window.setTimeout(()=>Ka(!0),I)},[I]),isPointerInTransitRef:Va,onPointerInTransitChange:(0,bh.useCallback)(lb=>
{Va.current=lb},[]),disableHoverableContent:W},ia)},EE=b=>{const {__scopeTooltip:g,children:n,open:I,defaultOpen:W=!1,onOpenChange:ia,disableHoverableContent:sa,delayDuration:Ka}=b,Va=Ov("Tooltip",b.__scopeTooltip);b=Xt(g);const [Za,lb]=(0,bh.useState)(null),vb=Fj(),Qb=(0,bh.useRef)(0),cc=null!==sa&&void 0!==sa?sa:Va.disableHoverableContent,Ub=null!==Ka&&void 0!==Ka?Ka:Va.delayDuration,rc=(0,bh.useRef)(!1),[lc=!1,Vb]=Vf({prop:I,defaultProp:W,onChange:Vd=>{if(Vd)Va.onOpen(),document.dispatchEvent(new CustomEvent("tooltip.open"));
else Va.onClose();null===ia||void 0===ia||ia(Vd)}}),sc=(0,bh.useMemo)(()=>lc?rc.current?"delayed-open":"instant-open":"closed",[lc]),Gc=(0,bh.useCallback)(()=>{window.clearTimeout(Qb.current);rc.current=!1;Vb(!0)},[Vb]),Qc=(0,bh.useCallback)(()=>{window.clearTimeout(Qb.current);Vb(!1)},[Vb]),Vc=(0,bh.useCallback)(()=>{window.clearTimeout(Qb.current);Qb.current=window.setTimeout(()=>{rc.current=!0;Vb(!0)},Ub)},[Ub,Vb]);(0,bh.useEffect)(()=>()=>window.clearTimeout(Qb.current),[]);return(0,bh.createElement)(Nv,
b,(0,bh.createElement)(uE,{scope:g,contentId:vb,open:lc,stateAttribute:sc,trigger:Za,onTriggerChange:lb,onTriggerEnter:(0,bh.useCallback)(()=>{Va.isOpenDelayed?Vc():Gc()},[Va.isOpenDelayed,Vc,Gc]),onTriggerLeave:(0,bh.useCallback)(()=>{cc?Qc():window.clearTimeout(Qb.current)},[Qc,cc]),onOpen:Gc,onClose:Qc,disableHoverableContent:cc},n))},FE=vE,GE=b=>{const {__scopeTooltip:g,forceMount:n,children:I,container:W}=b;b=Ps("TooltipPortal",g);return(0,bh.createElement)(wE,{scope:g,forceMount:n},(0,bh.createElement)(Os,
{present:n||b.open},(0,bh.createElement)(lz,{asChild:!0,container:W},I)))},HE=yE,IE=CE;pb=V(587);pb=V(587);var pz=cb(V(22));pb=V(587);var qz=({active:b,style:g,icon:n,otherIcon:I,onClick:W})=>{const [ia,sa]=pz.default.useState(!1);pz.default.useEffect(()=>{sa(!0);const Ka=setTimeout(()=>{sa(!1)},500);return()=>clearTimeout(Ka)},[b]);return(0,pb.jsx)("button",{"data-active":b,"data-recently-changed":ia,style:g,className:"tl-circle-button",onPointerDown:W,children:(0,pb.jsxs)("div",{className:"tl-circle-button-icons-wrapper",
"data-icons-count":I?2:1,children:[I&&(0,pb.jsx)(Fh,{name:I}),(0,pb.jsx)(Fh,{name:n})]})})},ao=V(22),Ug=V(22),Xo=cb(V(22)),rz=V(22),JE=(0,rz.createContext)(void 0),KE=V(22),Pv=0,Op=V(22),sz={bubbles:!1,cancelable:!0},Qv=(0,Op.forwardRef)((b,g)=>{const {loop:n=!1,trapped:I=!1,onMountAutoFocus:W,onUnmountAutoFocus:ia}=b;b=Ia(b,["loop","trapped","onMountAutoFocus","onUnmountAutoFocus"]);const [sa,Ka]=(0,Op.useState)(null),Va=Vh(W),Za=Vh(ia),lb=(0,Op.useRef)(null);g=Lg(g,cc=>Ka(cc));const vb=(0,Op.useRef)({paused:!1,
pause(){this.paused=!0},resume(){this.paused=!1}}).current;(0,Op.useEffect)(()=>{if(I){let cc=function(rc){!vb.paused&&sa&&(rc=rc.target,sa.contains(rc)?lb.current=rc:Lb(lb.current,{select:!0}))},Ub=function(rc){!vb.paused&&sa&&(sa.contains(rc.relatedTarget)||Lb(lb.current,{select:!0}))};document.addEventListener("focusin",cc);document.addEventListener("focusout",Ub);return()=>{document.removeEventListener("focusin",cc);document.removeEventListener("focusout",Ub)}}},[I,sa,vb.paused]);(0,Op.useEffect)(()=>
{if(sa){tz.add(vb);const cc=document.activeElement;if(!sa.contains(cc)){const Ub=new CustomEvent("focusScope.autoFocusOnMount",sz);sa.addEventListener("focusScope.autoFocusOnMount",Va);sa.dispatchEvent(Ub);Ub.defaultPrevented||(wb(Ac(zb(sa)),{select:!0}),document.activeElement===cc&&Lb(sa))}return()=>{sa.removeEventListener("focusScope.autoFocusOnMount",Va);setTimeout(()=>{const Ub=new CustomEvent("focusScope.autoFocusOnUnmount",sz);sa.addEventListener("focusScope.autoFocusOnUnmount",Za);sa.dispatchEvent(Ub);
Ub.defaultPrevented||Lb(null!==cc&&void 0!==cc?cc:document.body,{select:!0});sa.removeEventListener("focusScope.autoFocusOnUnmount",Za);tz.remove(vb)},0)}}},[sa,Va,Za,vb]);const Qb=(0,Op.useCallback)(cc=>{if((n||I)&&!vb.paused){var Ub=document.activeElement;if("Tab"===cc.key&&!cc.altKey&&!cc.ctrlKey&&!cc.metaKey&&Ub){const lc=cc.currentTarget;var rc=lc;const Vb=zb(rc),sc=Ob(Vb,rc);rc=Ob(Vb.reverse(),rc);const [Gc,Qc]=[sc,rc];Gc&&Qc?cc.shiftKey||Ub!==Qc?cc.shiftKey&&Ub===Gc&&(cc.preventDefault(),n&&
Lb(Qc,{select:!0})):(cc.preventDefault(),n&&Lb(Gc,{select:!0})):Ub===lc&&cc.preventDefault()}}},[n,I,vb.paused]);return(0,Op.createElement)(Aj.div,yf({tabIndex:-1},b,{ref:g,onKeyDown:Qb}))}),tz=function(){let b=[];return{add(g){const n=b[0];g===n||null!==n&&void 0!==n&&n.pause();b=$b(b,g);b.unshift(g)},remove(g){var n;b=$b(b,g);null===(n=b[0])||void 0===n||n.resume()}}}(),Vl=V(22),LE={bubbles:!1,cancelable:!0},[Rv,uz,ME]=ec("RovingFocusGroup"),[NE,Yt]=Ui("RovingFocusGroup",[ME]),[OE,PE]=NE("RovingFocusGroup"),
vz=(0,Vl.forwardRef)((b,g)=>(0,Vl.createElement)(Rv.Provider,{scope:b.__scopeRovingFocusGroup},(0,Vl.createElement)(Rv.Slot,{scope:b.__scopeRovingFocusGroup},(0,Vl.createElement)(QE,yf({},b,{ref:g}))))),QE=(0,Vl.forwardRef)((b,g)=>{const {__scopeRovingFocusGroup:n,orientation:I,loop:W=!1,dir:ia,currentTabStopId:sa,defaultCurrentTabStopId:Ka,onCurrentTabStopIdChange:Va,onEntryFocus:Za}=b,lb=Ia(b,"__scopeRovingFocusGroup orientation loop dir currentTabStopId defaultCurrentTabStopId onCurrentTabStopIdChange onEntryFocus".split(" ")),
vb=(0,Vl.useRef)(null);g=Lg(g,vb);const Qb=ja(ia),[cc=null,Ub]=Vf({prop:sa,defaultProp:Ka,onChange:Va}),[rc,lc]=(0,Vl.useState)(!1),Vb=Vh(Za),sc=uz(n),Gc=(0,Vl.useRef)(!1),[Qc,Vc]=(0,Vl.useState)(0);(0,Vl.useEffect)(()=>{const Vd=vb.current;if(Vd)return Vd.addEventListener("rovingFocusGroup.onEntryFocus",Vb),()=>Vd.removeEventListener("rovingFocusGroup.onEntryFocus",Vb)},[Vb]);return(0,Vl.createElement)(OE,{scope:n,orientation:I,dir:Qb,loop:W,currentTabStopId:cc,onItemFocus:(0,Vl.useCallback)(Vd=>
Ub(Vd),[Ub]),onItemShiftTab:(0,Vl.useCallback)(()=>lc(!0),[]),onFocusableItemAdd:(0,Vl.useCallback)(()=>Vc(Vd=>Vd+1),[]),onFocusableItemRemove:(0,Vl.useCallback)(()=>Vc(Vd=>Vd-1),[])},(0,Vl.createElement)(Aj.div,yf({tabIndex:rc||0===Qc?-1:0,"data-orientation":I},lb,{ref:g,style:te({outline:"none"},b.style),onMouseDown:Je(b.onMouseDown,()=>{Gc.current=!0}),onFocus:Je(b.onFocus,Vd=>{var $d=!Gc.current;if(Vd.target===Vd.currentTarget&&$d&&!rc&&($d=new CustomEvent("rovingFocusGroup.onEntryFocus",LE),
Vd.currentTarget.dispatchEvent($d),!$d.defaultPrevented)){Vd=sc().filter(Ne=>Ne.focusable);$d=Vd.find(Ne=>Ne.active);const Ee=Vd.find(Ne=>Ne.id===cc);Vd=[$d,Ee,...Vd].filter(Boolean).map(Ne=>Ne.ref.current);Sc(Vd)}Gc.current=!1}),onBlur:Je(b.onBlur,()=>lc(!1))})))}),wz=(0,Vl.forwardRef)((b,g)=>{const {__scopeRovingFocusGroup:n,focusable:I=!0,active:W=!1}=b,ia=Ia(b,["__scopeRovingFocusGroup","focusable","active"]),sa=Fj(),Ka=PE("RovingFocusGroupItem",n),Va=Ka.currentTabStopId===sa,Za=uz(n),{onFocusableItemAdd:lb,
onFocusableItemRemove:vb}=Ka;(0,Vl.useEffect)(()=>{if(I)return lb(),()=>vb()},[I,lb,vb]);return(0,Vl.createElement)(Rv.ItemSlot,{scope:n,id:sa,focusable:I,active:W},(0,Vl.createElement)(Aj.span,yf({tabIndex:Va?0:-1,"data-orientation":Ka.orientation},ia,{ref:g,onMouseDown:Je(b.onMouseDown,Qb=>{if(I)Ka.onItemFocus(sa);else Qb.preventDefault()}),onFocus:Je(b.onFocus,()=>Ka.onItemFocus(sa)),onKeyDown:Je(b.onKeyDown,Qb=>{if("Tab"===Qb.key&&Qb.shiftKey)Ka.onItemShiftTab();else if(Qb.target===Qb.currentTarget){var cc=
Nc(Qb,Ka.orientation,Ka.dir);if(void 0!==cc){Qb.preventDefault();let Ub=Za().filter(rc=>rc.focusable).map(rc=>rc.ref.current);if("last"===cc)Ub.reverse();else if("prev"===cc||"next"===cc)"prev"===cc&&Ub.reverse(),Qb=Ub.indexOf(Qb.currentTarget),Ub=Ka.loop?wd(Ub,Qb+1):Ub.slice(Qb+1);setTimeout(()=>Sc(Ub))}}})})))}),RE={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"},SE=function(b){return"undefined"===typeof document?null:(Array.isArray(b)?
b[0]:b).ownerDocument.body},Ar=new WeakMap,Zt=new WeakMap,$t={},Sv=0,Tv=function(b,g,n){void 0===g&&(g=SE(b));void 0===n&&(n="data-aria-hidden");var I=Array.isArray(b)?b:[b];$t[n]||($t[n]=new WeakMap);var W=$t[n],ia=[],sa=new Set,Ka=function(Za){Za&&!sa.has(Za)&&(sa.add(Za),Ka(Za.parentNode))};I.forEach(Ka);var Va=function(Za){!Za||0<=I.indexOf(Za)||Array.prototype.forEach.call(Za.children,function(lb){if(sa.has(lb))Va(lb);else{var vb=lb.getAttribute("aria-hidden");vb=null!==vb&&"false"!==vb;var Qb=
(Ar.get(lb)||0)+1,cc=(W.get(lb)||0)+1;Ar.set(lb,Qb);W.set(lb,cc);ia.push(lb);1===Qb&&vb&&Zt.set(lb,!0);1===cc&&lb.setAttribute(n,"true");vb||lb.setAttribute("aria-hidden","true")}})};Va(g);sa.clear();Sv++;return function(){ia.forEach(function(Za){var lb=Ar.get(Za)-1,vb=W.get(Za)-1;Ar.set(Za,lb);W.set(Za,vb);lb||(Zt.has(Za)||Za.removeAttribute("aria-hidden"),Zt.delete(Za));vb||Za.removeAttribute(n)});Sv--;Sv||(Ar=new WeakMap,Ar=new WeakMap,Zt=new WeakMap,$t={})}},TE=cb(wa(),1),{__assign:Pp,__rest:xz,
__spreadArray:UE}=TE.default,yz=cb(V(22)),op=cb(V(22)),VE=V(22),WE=cb(V(22)),zz=function(b){var g=b.sideCar;b=xz(b,["sideCar"]);if(!g)throw Error("Sidecar: please provide `sideCar` property to import the right car");g=g.read();if(!g)throw Error("Sidecar medium not found");return WE.createElement(g,Pp({},b))};zz.isSideCarExport=!0;var Az=function(b){void 0===b&&(b={});var g=Gd(null);g.options=Pp({async:!0,ssr:!1},b);return g}(),Uv=function(){},au=op.forwardRef(function(b,g){var n=op.useRef(null),I=
op.useState({onScrollCapture:Uv,onWheelCapture:Uv,onTouchMoveCapture:Uv}),W=I[0];I=I[1];var ia=b.forwardProps,sa=b.children,Ka=b.className,Va=b.removeScrollBar,Za=b.enabled,lb=b.shards,vb=b.sideCar,Qb=b.noIsolation,cc=b.inert,Ub=b.allowPinchZoom,rc=b.as;rc=void 0===rc?"div":rc;b=xz(b,"forwardProps children className removeScrollBar enabled shards sideCar noIsolation inert allowPinchZoom as".split(" "));g=Fd([n,g]);W=Pp(Pp({},b),W);return op.createElement(op.Fragment,null,Za&&op.createElement(vb,{sideCar:Az,
removeScrollBar:Va,shards:lb,noIsolation:Qb,inert:cc,setCallbacks:I,allowPinchZoom:!!Ub,lockRef:n}),ia?op.cloneElement(op.Children.only(sa),Pp(Pp({},W),{ref:g})):op.createElement(rc,Pp({},W,{className:Ka,ref:g}),sa))});au.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};au.classNames={fullWidth:"width-before-scroll-bar",zeroRight:"right-scroll-bar-position"};var hm=cb(V(22)),Bz=cb(V(22)),XE=cb(V(22)),YE=function(){var b=0,g=null;return{add:function(n){if(0==b){if(document){var I=document.createElement("style");
I.type="text/css";var W="undefined"!==typeof __webpack_nonce__?__webpack_nonce__:void 0;W&&I.setAttribute("nonce",W)}else I=null;if(g=I)I=g,I.styleSheet?I.styleSheet.cssText=n:I.appendChild(document.createTextNode(n)),n=g,(document.head||document.getElementsByTagName("head")[0]).appendChild(n)}b++},remove:function(){b--;!b&&g&&(g.parentNode&&g.parentNode.removeChild(g),g=null)}}},ZE=function(){var b=YE();return function(g,n){XE.useEffect(function(){b.add(g);return function(){b.remove()}},[g&&n])}},
Cz=function(){var b=ZE();return function(g){b(g.styles,g.dynamic);return null}},$E={left:0,top:0,right:0,gap:0},aF=Cz(),bF=function(b,g,n,I){var W=b.left,ia=b.top,sa=b.right;b=b.gap;void 0===n&&(n="margin");return"\n  .".concat("with-scroll-bars-hidden"," {\n   overflow: hidden ").concat(I,";\n   padding-right: ").concat(b,"px ").concat(I,";\n  }\n  body {\n    overflow: hidden ").concat(I,";\n    overscroll-behavior: contain;\n    ").concat([g&&"position: relative ".concat(I,";"),"margin"===n&&"\n    padding-left: ".concat(W,
"px;\n    padding-top: ").concat(ia,"px;\n    padding-right: ").concat(sa,"px;\n    margin-left:0;\n    margin-top:0;\n    margin-right: ").concat(b,"px ").concat(I,";\n    "),"padding"===n&&"padding-right: ".concat(b,"px ").concat(I,";")].filter(Boolean).join(""),"\n  }\n  \n  .").concat("right-scroll-bar-position"," {\n    right: ").concat(b,"px ").concat(I,";\n  }\n  \n  .").concat("width-before-scroll-bar"," {\n    margin-right: ").concat(b,"px ").concat(I,";\n  }\n  \n  .").concat("right-scroll-bar-position",
" .").concat("right-scroll-bar-position"," {\n    right: 0 ").concat(I,";\n  }\n  \n  .").concat("width-before-scroll-bar"," .").concat("width-before-scroll-bar"," {\n    margin-right: 0 ").concat(I,";\n  }\n  \n  body {\n    ").concat("--removed-body-scroll-bar-size",": ").concat(b,"px;\n  }\n")},cF=function(b){var g=b.noRelative,n=b.noImportant;b=b.gapMode;var I=void 0===b?"margin":b;b=Bz.useMemo(function(){var W=I;void 0===W&&(W="margin");if("undefined"===typeof window)W=$E;else{var ia=window.getComputedStyle(document.body),
sa=ia["padding"===W?"paddingTop":"marginTop"],Ka=ia["padding"===W?"paddingRight":"marginRight"];W=[parseInt(ia["padding"===W?"paddingLeft":"marginLeft"]||"",10)||0,parseInt(sa||"",10)||0,parseInt(Ka||"",10)||0];W={left:W[0],top:W[1],right:W[2],gap:Math.max(0,window.innerWidth-document.documentElement.clientWidth+W[2]-W[0])}}return W},[I]);return Bz.createElement(aF,{styles:bF(b,!g,I,n?"":"!important")})},Vv=!1;if("undefined"!==typeof window)try{var bu=Object.defineProperty({},"passive",{get:function(){return Vv=
!0}});window.addEventListener("test",bu,bu);window.removeEventListener("test",bu,bu)}catch(b){Vv=!1}var Br=Vv?{passive:!1}:!1,Dz=function(b,g){var n=window.getComputedStyle(b);return"hidden"!==n[g]&&!(n.overflowY===n.overflowX&&"TEXTAREA"!==b.tagName&&"visible"===n[g])},Ez=function(b,g){do{"undefined"!==typeof ShadowRoot&&g instanceof ShadowRoot&&(g=g.host);if(Fz(b,g)){var n=Gz(b,g);if(n[1]>n[2])return!0}g=g.parentNode}while(g&&g!==document.body);return!1},Fz=function(b,g){return"v"===b?Dz(g,"overflowY"):
Dz(g,"overflowX")},Gz=function(b,g){return"v"===b?[g.scrollTop,g.scrollHeight,g.clientHeight]:[g.scrollLeft,g.scrollWidth,g.clientWidth]},cu=function(b){return"changedTouches"in b?[b.changedTouches[0].clientX,b.changedTouches[0].clientY]:[0,0]},Hz=function(b){return b&&"current"in b?b.current:b},dF=function(b){return"\n  .block-interactivity-".concat(b," {pointer-events: none;}\n  .allow-interactivity-").concat(b," {pointer-events: all;}\n")},eF=0,Cr=[];Az.useMedium(function(b){var g=hm.useRef([]),
n=hm.useRef([0,0]),I=hm.useRef(),W=hm.useState(eF++)[0],ia=hm.useState(function(){return Cz()})[0],sa=hm.useRef(b);hm.useEffect(function(){sa.current=b},[b]);hm.useEffect(function(){if(b.inert){document.body.classList.add("block-interactivity-".concat(W));var Ub=UE([b.lockRef.current],(b.shards||[]).map(Hz),!0).filter(Boolean);Ub.forEach(function(rc){return rc.classList.add("allow-interactivity-".concat(W))});return function(){document.body.classList.remove("block-interactivity-".concat(W));Ub.forEach(function(rc){return rc.classList.remove("allow-interactivity-".concat(W))})}}},
[b.inert,b.lockRef.current,b.shards]);var Ka=hm.useCallback(function(Ub,rc){if("touches"in Ub&&2===Ub.touches.length)return!sa.current.allowPinchZoom;var lc=cu(Ub),Vb=n.current,sc="deltaX"in Ub?Ub.deltaX:Vb[0]-lc[0];Vb="deltaY"in Ub?Ub.deltaY:Vb[1]-lc[1];var Gc=Ub.target,Qc=Math.abs(sc)>Math.abs(Vb)?"h":"v";if("touches"in Ub&&"h"===Qc&&"range"===Gc.type)return!1;var Vc=Ez(Qc,Gc);if(!Vc)return!0;Vc?lc=Qc:(lc="v"===Qc?"h":"v",Vc=Ez(Qc,Gc));if(!Vc)return!1;!I.current&&"changedTouches"in Ub&&(sc||Vb)&&
(I.current=lc);if(!lc)return!0;lc=I.current||lc;Vb="h"===lc?sc:Vb;sc=window.getComputedStyle(rc).direction;sc="h"===lc&&"rtl"===sc?-1:1;Qc=sc*Vb;Ub=Ub.target;Vb=rc.contains(Ub);Gc=!1;Qc=0<Qc;var Vd=Vc=0;do{var $d=Gz(lc,Ub),Ee=$d[0];$d=$d[1]-$d[2]-sc*Ee;(Ee||$d)&&Fz(lc,Ub)&&(Vc+=$d,Vd+=Ee);Ub=Ub.parentNode}while(!Vb&&Ub!==document.body||Vb&&(rc.contains(Ub)||rc===Ub));Qc&&0===Vc?Gc=!0:Qc||0!==Vd||(Gc=!0);return Gc},[]),Va=hm.useCallback(function(Ub){if(Cr.length&&Cr[Cr.length-1]===ia){var rc="deltaY"in
Ub?[Ub.deltaX,Ub.deltaY]:cu(Ub),lc=g.current.filter(function(Vb){var sc;if(sc=Vb.name===Ub.type&&Vb.target===Ub.target)Vb=Vb.delta,sc=Vb[0]===rc[0]&&Vb[1]===rc[1];return sc})[0];lc&&lc.should?Ub.cancelable&&Ub.preventDefault():lc||(lc=(sa.current.shards||[]).map(Hz).filter(Boolean).filter(function(Vb){return Vb.contains(Ub.target)}),(0<lc.length?Ka(Ub,lc[0]):!sa.current.noIsolation)&&Ub.cancelable&&Ub.preventDefault())}},[]),Za=hm.useCallback(function(Ub,rc,lc,Vb){var sc={name:Ub,delta:rc,target:lc,
should:Vb};g.current.push(sc);setTimeout(function(){g.current=g.current.filter(function(Gc){return Gc!==sc})},1)},[]),lb=hm.useCallback(function(Ub){n.current=cu(Ub);I.current=void 0},[]),vb=hm.useCallback(function(Ub){Za(Ub.type,[Ub.deltaX,Ub.deltaY],Ub.target,Ka(Ub,b.lockRef.current))},[]),Qb=hm.useCallback(function(Ub){Za(Ub.type,cu(Ub),Ub.target,Ka(Ub,b.lockRef.current))},[]);hm.useEffect(function(){Cr.push(ia);b.setCallbacks({onScrollCapture:vb,onWheelCapture:vb,onTouchMoveCapture:Qb});document.addEventListener("wheel",
Va,Br);document.addEventListener("touchmove",Va,Br);document.addEventListener("touchstart",lb,Br);return function(){Cr=Cr.filter(function(Ub){return Ub!==ia});document.removeEventListener("wheel",Va,Br);document.removeEventListener("touchmove",Va,Br);document.removeEventListener("touchstart",lb,Br)}},[]);var cc=b.removeScrollBar;return hm.createElement(hm.Fragment,null,b.inert?hm.createElement(ia,{styles:dF(W)}):null,cc?hm.createElement(cF,{gapMode:"margin"}):null)});var du=yz.forwardRef(function(b,
g){return yz.createElement(au,Pp({},b,{ref:g,sideCar:zz}))});du.classNames=au.classNames;var Wv=["Enter"," "],Iz=["ArrowUp","PageDown","End"],fF=["ArrowDown","PageUp","Home",...Iz];[...Wv];[...Wv];var [Xv,gF,hF]=ec("Menu"),[Jq,eu]=Ui("Menu",[hF,zr,Yt]),Yv=zr(),Jz=Yt(),[iF,fu]=Jq("Menu"),[jF,Zv]=Jq("Menu"),Kz=(0,Ug.forwardRef)((b,g)=>{var {__scopeMenu:n}=b;b=Ia(b,["__scopeMenu"]);n=Yv(n);return(0,Ug.createElement)(Mv,yf({},n,b,{ref:g}))}),[,kF]=Jq("MenuPortal",{forceMount:void 0}),[lF,Lz]=Jq("MenuContent"),
Mz=(0,Ug.forwardRef)((b,g)=>{var n=kF("MenuContent",b.__scopeMenu);({forceMount:n=n.forceMount}=b);const I=Ia(b,["forceMount"]),W=fu("MenuContent",b.__scopeMenu),ia=Zv("MenuContent",b.__scopeMenu);return(0,Ug.createElement)(Xv.Provider,{scope:b.__scopeMenu},(0,Ug.createElement)(Os,{present:n||W.open},(0,Ug.createElement)(Xv.Slot,{scope:b.__scopeMenu},ia.modal?(0,Ug.createElement)(mF,yf({},I,{ref:g})):(0,Ug.createElement)(nF,yf({},I,{ref:g})))))}),mF=(0,Ug.forwardRef)((b,g)=>{const n=fu("MenuContent",
b.__scopeMenu),I=(0,Ug.useRef)(null);g=Lg(g,I);(0,Ug.useEffect)(()=>{const W=I.current;if(W)return Tv(W)},[]);return(0,Ug.createElement)(Qp,yf({},b,{ref:g,trapFocus:n.open,disableOutsidePointerEvents:n.open,disableOutsideScroll:!0,onFocusOutside:Je(b.onFocusOutside,W=>W.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>n.onOpenChange(!1)}))}),nF=(0,Ug.forwardRef)((b,g)=>{const n=fu("MenuContent",b.__scopeMenu);return(0,Ug.createElement)(Qp,yf({},b,{ref:g,trapFocus:!1,disableOutsidePointerEvents:!1,
disableOutsideScroll:!1,onDismiss:()=>n.onOpenChange(!1)}))}),Qp=(0,Ug.forwardRef)((b,g)=>{const {__scopeMenu:n,loop:I=!1,trapFocus:W,onOpenAutoFocus:ia,onCloseAutoFocus:sa,disableOutsidePointerEvents:Ka,onEscapeKeyDown:Va,onPointerDownOutside:Za,onFocusOutside:lb,onInteractOutside:vb,onDismiss:Qb,disableOutsideScroll:cc}=b,Ub=Ia(b,"__scopeMenu loop trapFocus onOpenAutoFocus onCloseAutoFocus disableOutsidePointerEvents onEscapeKeyDown onPointerDownOutside onFocusOutside onInteractOutside onDismiss disableOutsideScroll".split(" ")),
rc=fu("MenuContent",n),lc=Zv("MenuContent",n),Vb=Yv(n),sc=Jz(n),Gc=gF(n),[Qc,Vc]=(0,Ug.useState)(null),Vd=(0,Ug.useRef)(null);g=Lg(g,Vd,rc.onContentChange);const $d=(0,Ug.useRef)(0),Ee=(0,Ug.useRef)(""),Ne=(0,Ug.useRef)(0),uf=(0,Ug.useRef)(null),rf=(0,Ug.useRef)("right"),ff=(0,Ug.useRef)(0),Ge=cc?du:Ug.Fragment,Ad=cc?{as:Iq,allowPinchZoom:!0}:void 0,fd=nd=>{var Ed,xe;nd=Ee.current+nd;const Fe=Gc().filter(Ig=>!Ig.disabled),sf=document.activeElement,mf=null===(Ed=Fe.find(Ig=>Ig.ref.current===sf))||
void 0===Ed?void 0:Ed.textValue;Ed=Fe.map(Ig=>Ig.textValue);const lf=ue(Ed,nd,mf),Vg=null===(xe=Fe.find(Ig=>Ig.textValue===lf))||void 0===xe?void 0:xe.ref.current;(function Nk(oi){Ee.current=oi;window.clearTimeout($d.current);""!==oi&&($d.current=window.setTimeout(()=>Nk(""),1E3))})(nd);Vg&&setTimeout(()=>Vg.focus())};(0,Ug.useEffect)(()=>()=>window.clearTimeout($d.current),[]);Fb();const ld=(0,Ug.useCallback)(nd=>{var Ed,xe,Fe;if(Fe=rf.current===(null===(Ed=uf.current)||void 0===Ed?void 0:Ed.side)){if(Ed=
null===(xe=uf.current)||void 0===xe?void 0:xe.area){const {x:sf,y:mf}={x:nd.clientX,y:nd.clientY};nd=!1;for(let lf=0,Vg=Ed.length-1;lf<Ed.length;Vg=lf++){xe=Ed[lf].x;Fe=Ed[lf].y;const Ig=Ed[Vg].x,oi=Ed[Vg].y;Fe>mf!==oi>mf&&sf<(Ig-xe)*(mf-Fe)/(oi-Fe)+xe&&(nd=!nd)}Ed=nd}else Ed=!1;Fe=Ed}return Fe},[]);return(0,Ug.createElement)(lF,{scope:n,searchRef:Ee,onItemEnter:(0,Ug.useCallback)(nd=>{ld(nd)&&nd.preventDefault()},[ld]),onItemLeave:(0,Ug.useCallback)(nd=>{var Ed;ld(nd)||(null===(Ed=Vd.current)||void 0===
Ed||Ed.focus(),Vc(null))},[ld]),onTriggerLeave:(0,Ug.useCallback)(nd=>{ld(nd)&&nd.preventDefault()},[ld]),pointerGraceTimerRef:Ne,onPointerGraceIntentChange:(0,Ug.useCallback)(nd=>{uf.current=nd},[])},(0,Ug.createElement)(Ge,Ad,(0,Ug.createElement)(Qv,{asChild:!0,trapped:W,onMountAutoFocus:Je(ia,nd=>{var Ed;nd.preventDefault();null===(Ed=Vd.current)||void 0===Ed||Ed.focus()}),onUnmountAutoFocus:sa},(0,Ug.createElement)(St,{asChild:!0,disableOutsidePointerEvents:Ka,onEscapeKeyDown:Va,onPointerDownOutside:Za,
onFocusOutside:lb,onInteractOutside:vb,onDismiss:Qb},(0,Ug.createElement)(vz,yf({asChild:!0},sc,{dir:lc.dir,orientation:"vertical",loop:I,currentTabStopId:Qc,onCurrentTabStopIdChange:Vc,onEntryFocus:nd=>{lc.isUsingKeyboardRef.current||nd.preventDefault()}}),(0,Ug.createElement)(Ut,yf({role:"menu","aria-orientation":"vertical","data-state":rc.open?"open":"closed","data-radix-menu-content":"",dir:lc.dir},Vb,Ub,{ref:g,style:te({outline:"none"},Ub.style),onKeyDown:Je(Ub.onKeyDown,nd=>{var Ed=nd.target.closest("[data-radix-menu-content]")===
nd.currentTarget;const xe=nd.ctrlKey||nd.altKey||nd.metaKey,Fe=1===nd.key.length;Ed&&("Tab"===nd.key&&nd.preventDefault(),!xe&&Fe&&fd(nd.key));nd.target===Vd.current&&fF.includes(nd.key)&&(nd.preventDefault(),Ed=Gc().filter(sf=>!sf.disabled).map(sf=>sf.ref.current),Iz.includes(nd.key)&&Ed.reverse(),ze(Ed))}),onBlur:Je(b.onBlur,nd=>{nd.currentTarget.contains(nd.target)||(window.clearTimeout($d.current),Ee.current="")}),onPointerMove:Je(b.onPointerMove,We(nd=>{const Ed=ff.current!==nd.clientX;nd.currentTarget.contains(nd.target)&&
Ed&&(rf.current=nd.clientX>ff.current?"right":"left",ff.current=nd.clientX)}))})))))))}),Nz=(0,Ug.forwardRef)((b,g)=>{const {disabled:n=!1,onSelect:I}=b,W=Ia(b,["disabled","onSelect"]),ia=(0,Ug.useRef)(null),sa=Zv("MenuItem",b.__scopeMenu),Ka=Lz("MenuItem",b.__scopeMenu);g=Lg(g,ia);const Va=(0,Ug.useRef)(!1);return(0,Ug.createElement)(oF,yf({},W,{ref:g,disabled:n,onClick:Je(b.onClick,()=>{const Za=ia.current;if(!n&&Za){const lb=new CustomEvent("menu.itemSelect",{bubbles:!0,cancelable:!0});Za.addEventListener("menu.itemSelect",
vb=>null===I||void 0===I?void 0:I(vb),{once:!0});kg(Za,lb);if(lb.defaultPrevented)Va.current=!1;else sa.onClose()}}),onPointerDown:Za=>{var lb;null===(lb=b.onPointerDown)||void 0===lb||lb.call(b,Za);Va.current=!0},onPointerUp:Je(b.onPointerUp,Za=>{var lb;Va.current||null===(lb=Za.currentTarget)||void 0===lb||lb.click()}),onKeyDown:Je(b.onKeyDown,Za=>{const lb=""!==Ka.searchRef.current;n||lb&&" "===Za.key||!Wv.includes(Za.key)||(Za.currentTarget.click(),Za.preventDefault())})}))}),oF=(0,Ug.forwardRef)((b,
g)=>{const {__scopeMenu:n,disabled:I=!1,textValue:W}=b,ia=Ia(b,["__scopeMenu","disabled","textValue"]),sa=Lz("MenuItem",n),Ka=Jz(n),Va=(0,Ug.useRef)(null);g=Lg(g,Va);const [Za,lb]=(0,Ug.useState)(!1),[vb,Qb]=(0,Ug.useState)("");(0,Ug.useEffect)(()=>{const cc=Va.current;if(cc){var Ub;Qb((null!==(Ub=cc.textContent)&&void 0!==Ub?Ub:"").trim())}},[ia.children]);return(0,Ug.createElement)(Xv.ItemSlot,{scope:n,disabled:I,textValue:null!==W&&void 0!==W?W:vb},(0,Ug.createElement)(wz,yf({asChild:!0},Ka,{focusable:!I}),
(0,Ug.createElement)(Aj.div,yf({role:"menuitem","data-highlighted":Za?"":void 0,"aria-disabled":I||void 0,"data-disabled":I?"":void 0},ia,{ref:g,onPointerMove:Je(b.onPointerMove,We(cc=>{if(I)sa.onItemLeave(cc);else sa.onItemEnter(cc),cc.defaultPrevented||cc.currentTarget.focus()})),onPointerLeave:Je(b.onPointerLeave,We(cc=>sa.onItemLeave(cc))),onFocus:Je(b.onFocus,()=>lb(!0)),onBlur:Je(b.onBlur,()=>lb(!1))}))))});Jq("MenuRadioGroup",{value:void 0,onValueChange:()=>{}});Jq("MenuItemIndicator",{checked:!1});
var pF=(0,Ug.forwardRef)((b,g)=>{b=Ia(b,["__scopeMenu"]);return(0,Ug.createElement)(Aj.div,yf({role:"separator","aria-orientation":"horizontal"},b,{ref:g}))});Jq("MenuSub");var Oz=b=>{const {__scopeMenu:g,open:n=!1,children:I,dir:W,onOpenChange:ia,modal:sa=!0}=b;b=Yv(g);const [Ka,Va]=(0,Ug.useState)(null),Za=(0,Ug.useRef)(!1),lb=Vh(ia),vb=ja(W);(0,Ug.useEffect)(()=>{const Qb=()=>{Za.current=!0;document.addEventListener("pointerdown",cc,{capture:!0,once:!0});document.addEventListener("pointermove",
cc,{capture:!0,once:!0})},cc=()=>Za.current=!1;document.addEventListener("keydown",Qb,{capture:!0});return()=>{document.removeEventListener("keydown",Qb,{capture:!0});document.removeEventListener("pointerdown",cc,{capture:!0});document.removeEventListener("pointermove",cc,{capture:!0})}},[]);return(0,Ug.createElement)(Nv,b,(0,Ug.createElement)(iF,{scope:g,open:n,onOpenChange:lb,content:Ka,onContentChange:Va},(0,Ug.createElement)(jF,{scope:g,onClose:(0,Ug.useCallback)(()=>lb(!1),[lb]),isUsingKeyboardRef:Za,
dir:vb,modal:sa},I)))},[qF]=Ui("DropdownMenu",[eu]),gu=eu(),[rF,Pz]=qF("DropdownMenu"),sF=(0,ao.forwardRef)((b,g)=>{const {__scopeDropdownMenu:n,disabled:I=!1}=b,W=Ia(b,["__scopeDropdownMenu","disabled"]),ia=Pz("DropdownMenuTrigger",n),sa=gu(n);return(0,ao.createElement)(Kz,yf({asChild:!0},sa),(0,ao.createElement)(Aj.button,yf({type:"button",id:ia.triggerId,"aria-haspopup":"menu","aria-expanded":ia.open,"aria-controls":ia.open?ia.contentId:void 0,"data-state":ia.open?"open":"closed","data-disabled":I?
"":void 0,disabled:I},W,{ref:Sl(g,ia.triggerRef),onPointerDown:Je(b.onPointerDown,Ka=>{I||0!==Ka.button||!1!==Ka.ctrlKey||(ia.onOpenToggle(),ia.open||Ka.preventDefault())}),onKeyDown:Je(b.onKeyDown,Ka=>{if(!I){if(["Enter"," "].includes(Ka.key))ia.onOpenToggle();if("ArrowDown"===Ka.key)ia.onOpenChange(!0);["Enter"," ","ArrowDown"].includes(Ka.key)&&Ka.preventDefault()}})})))}),tF=(0,ao.forwardRef)((b,g)=>{var {__scopeDropdownMenu:n}=b;const I=Ia(b,["__scopeDropdownMenu"]),W=Pz("DropdownMenuContent",
n);n=gu(n);const ia=(0,ao.useRef)(!1);return(0,ao.createElement)(Mz,yf({id:W.contentId,"aria-labelledby":W.triggerId},n,I,{ref:g,onCloseAutoFocus:Je(b.onCloseAutoFocus,sa=>{var Ka;ia.current||null===(Ka=W.triggerRef.current)||void 0===Ka||Ka.focus();ia.current=!1;sa.preventDefault()}),onInteractOutside:Je(b.onInteractOutside,sa=>{sa=sa.detail.originalEvent;const Ka=0===sa.button&&!0===sa.ctrlKey;sa=2===sa.button||Ka;if(!W.modal||sa)ia.current=!0}),style:xf(te({},b.style),{["--radix-dropdown-menu-content-transform-origin"]:"var(--radix-popper-transform-origin)"})}))}),
Qs=(0,ao.forwardRef)((b,g)=>{var {__scopeDropdownMenu:n}=b;b=Ia(b,["__scopeDropdownMenu"]);n=gu(n);return(0,ao.createElement)(Nz,yf({},n,b,{ref:g}))}),uF=b=>{const {__scopeDropdownMenu:g,children:n,dir:I,open:W,defaultOpen:ia,onOpenChange:sa,modal:Ka=!0}=b;b=gu(g);const Va=(0,ao.useRef)(null),[Za=!1,lb]=Vf({prop:W,defaultProp:ia,onChange:sa});return(0,ao.createElement)(rF,{scope:g,triggerId:Fj(),triggerRef:Va,contentId:Fj(),open:Za,onOpenChange:lb,onOpenToggle:(0,ao.useCallback)(()=>lb(vb=>!vb),[lb]),
modal:Ka},(0,ao.createElement)(Oz,yf({},b,{open:Za,onOpenChange:lb,dir:I,modal:Ka}),n))};pb=V(587);var vF=bf(function(){const b=pg(),g=n=>{n.preventDefault()};return(0,pb.jsxs)(uF,{children:[(0,pb.jsx)(sF,{className:"tl-button text-sm px-2 important",id:"tl-zoom",children:(100*b.viewport.camera.zoom).toFixed(0)+"%"}),(0,pb.jsxs)(tF,{onCloseAutoFocus:n=>n.preventDefault(),className:"tl-menu",id:"zoomPopup",sideOffset:12,children:[(0,pb.jsxs)(Qs,{className:"tl-menu-item",onSelect:g,onClick:b.api.zoomToFit,
children:["Zoom to drawing",(0,pb.jsx)("div",{className:"tl-menu-right-slot",children:(0,pb.jsxs)("span",{className:"keyboard-shortcut",children:[(0,pb.jsx)("code",{children:"⇧"})," ",(0,pb.jsx)("code",{children:"1"})]})})]}),(0,pb.jsxs)(Qs,{className:"tl-menu-item",onSelect:g,onClick:b.api.zoomToSelection,disabled:0===b.selectedShapesArray.length,children:["Zoom to fit selection",(0,pb.jsx)("div",{className:"tl-menu-right-slot",children:(0,pb.jsxs)("span",{className:"keyboard-shortcut",children:[(0,pb.jsx)("code",
{children:zo})," ",(0,pb.jsx)("code",{children:"⇧"})," ",(0,pb.jsx)("code",{children:"1"})]})})]}),(0,pb.jsxs)(Qs,{className:"tl-menu-item",onSelect:g,onClick:b.api.zoomIn,children:["Zoom in",(0,pb.jsx)("div",{className:"tl-menu-right-slot",children:(0,pb.jsxs)("span",{className:"keyboard-shortcut",children:[(0,pb.jsx)("code",{children:zo})," ",(0,pb.jsx)("code",{children:"+"})]})})]}),(0,pb.jsxs)(Qs,{className:"tl-menu-item",onSelect:g,onClick:b.api.zoomOut,children:["Zoom out",(0,pb.jsx)("div",
{className:"tl-menu-right-slot",children:(0,pb.jsxs)("span",{className:"keyboard-shortcut",children:[(0,pb.jsx)("code",{children:zo})," ",(0,pb.jsx)("code",{children:"-"})]})})]}),(0,pb.jsxs)(Qs,{className:"tl-menu-item",onSelect:g,onClick:b.api.resetZoom,children:["Reset zoom",(0,pb.jsx)("div",{className:"tl-menu-right-slot",children:(0,pb.jsxs)("span",{className:"keyboard-shortcut",children:[(0,pb.jsx)("code",{children:"⇧"})," ",(0,pb.jsx)("code",{children:"0"})]})})]})]})]})}),Qz=V(22),Rz=["horizontal",
"vertical"],Kq=(0,Qz.forwardRef)((b,g)=>{const {decorative:n,orientation:I="horizontal"}=b;b=Ia(b,["decorative","orientation"]);const W=Rz.includes(I)?I:"horizontal";return(0,Qz.createElement)(Aj.div,yf({"data-orientation":W},n?{role:"none"}:{"aria-orientation":"vertical"===W?W:void 0,role:"separator"},b,{ref:g}))});Kq.propTypes={orientation(b,g,n){b=b[g];g=String(b);return b&&!Rz.includes(b)?Error(`Invalid prop \`orientation\` of value \`${g}\` supplied to \`${n}\`, expected one of:
  - horizontal
  - vertical

Defaulting to \`${"horizontal"}\`.`):null}};pb=V(587);var wF=bf(function(){const b=pg(),g=Qt.useCallback(()=>{b.api.undo()},[b]),n=Qt.useCallback(()=>{b.api.redo()},[b]),I=Qt.useCallback(()=>{b.api.zoomIn()},[b]),W=Qt.useCallback(()=>{b.api.zoomOut()},[b]);return(0,pb.jsxs)("div",{className:"tl-action-bar",children:[(0,pb.jsxs)("div",{className:"tl-toolbar tl-history-bar",children:[(0,pb.jsx)(dc,{tooltip:"Undo",onClick:g,children:(0,pb.jsx)(Fh,{name:"arrow-back-up"})}),(0,pb.jsx)(dc,{tooltip:"Redo",
onClick:n,children:(0,pb.jsx)(Fh,{name:"arrow-forward-up"})})]}),(0,pb.jsxs)("div",{className:"tl-toolbar tl-zoom-bar",children:[(0,pb.jsx)(dc,{tooltip:"Zoom in",onClick:I,id:"tl-zoom-in",children:(0,pb.jsx)(Fh,{name:"plus"})}),(0,pb.jsx)(dc,{tooltip:"Zoom out",onClick:W,id:"tl-zoom-out",children:(0,pb.jsx)(Fh,{name:"minus"})}),(0,pb.jsx)(Kq,{className:"tl-toolbar-separator",orientation:"vertical"}),(0,pb.jsx)(vF,{})]})]})}),Lq=cb(V(22)),$v=cb(V(31));pb=V(587);var hu=b=>`[${b.map(g=>{var n;return null!=
(n=null==g?void 0:g.toFixed(2))?n:"-"}).join(", ")}]`,xF=bf(function(){const b=pg(),g=Lq.default.useRef(),[,n]=Lq.default.useState(0);Lq.default.useEffect(()=>{g.current=document.createElement("div");g.current.style.display="contents";document.body.append(g.current);n(I=>I+1);return()=>{var I;null==(I=g.current)?void 0:I.remove()}},[]);Lq.default.useEffect(()=>{requestAnimationFrame(()=>{var I,W;null==(W=null==(I=g.current)?void 0:I.querySelector(`[data-item-index="${b.history.pointer}"]`))?void 0:
W.scrollIntoView()})},[b.history.pointer]);return g.current?$v.default.createPortal((0,pb.jsx)("div",{className:"fixed z-[1000] left-4 max-w-[400px] top-4 overflow-scroll bg-gray-200 flex gap-2 p-2",children:b.history.stack.map((I,W)=>(0,pb.jsx)("div",{"data-item-index":W,style:{background:b.history.pointer===W?"pink":"grey"},onClick:()=>b.history.setPointer(W),className:"flex items-center rounded-lg px-2 h-[32px] whitespace-nowrap",children:I.pages[0].nonce},W))}),g.current):null});bf(()=>{var b;
const {viewport:{bounds:g,camera:{point:n,zoom:I}},inputs:W}=Gh(),ia=Lq.default.useRef(),sa=Lq.default.useRef();Lq.default.useEffect(()=>{var Va=document.getElementById("tl-dev-tools-canvas-anchor");ia.current=Va;Va=document.getElementById("tl-statusbar-anchor");sa.current=Va},[]);var Ka=[["Z",null!=(b=null==I?void 0:I.toFixed(2))?b:"null"],["MP",hu(W.currentPoint)],["MS",hu(W.currentScreenPoint)],["VP",hu(n)],["VBR",hu([g.maxX,g.maxY])]].map(Va=>Va.join("")).join("|");b=ia.current?$v.default.createPortal((0,pb.jsx)("svg",
{className:"tl-renderer-dev-tools tl-grid",children:(0,pb.jsx)("circle",{cx:n[0]*I,cy:n[1]*I,r:"4",fill:"red"})}),ia.current):null;Ka=sa.current?$v.default.createPortal((0,pb.jsx)("div",{style:{flex:1,display:"flex",alignItems:"center"},children:Ka}),sa.current):null;return(0,pb.jsxs)(pb.Fragment,{children:[b,Ka,(0,pb.jsx)(xF,{})]})});var yF=cb(V(22)),zF=cb(V(22));pb=V(587);var Yo=bf(b=>{var {id:g,icon:n,tooltip:I}=b;b=Ia(b,["id","icon","tooltip"]);var W;const ia=pg(),sa=zF.useCallback(Va=>{(Va=Va.currentTarget.dataset.tool)&&
ia.selectTool(Va)},[ia]),Ka=(null==(W=[...ia.Tools,hr,er])?void 0:W.find(Va=>Va.id===g)).shortcut;W=Ka?(0,pb.jsxs)(pb.Fragment,{children:[I,(0,pb.jsx)("span",{className:"ml-2 keyboard-shortcut",children:Ka.map((Va,Za)=>(0,pb.jsx)("code",{children:Va.toUpperCase()},Za)).reduce((Va,Za)=>[Va," | ",Za])})]}):I;return(0,pb.jsx)(dc,xf(te({},b),{tooltipSide:"left",tooltip:W,"data-tool":g,"data-selected":g===ia.selectedTool.id,onClick:sa,children:"string"===typeof n?(0,pb.jsx)(Fh,{name:n}):n}))}),Sz=cb(V(22)),
Rj=V(22),[Tz]=Ui("Popover",[zr]),iu=zr(),[AF,Rs]=Tz("Popover"),Uz=(0,Rj.forwardRef)((b,g)=>{var {__scopePopover:n}=b;const I=Ia(b,["__scopePopover"]),W=Rs("PopoverTrigger",n);n=iu(n);g=Lg(g,W.triggerRef);b=(0,Rj.createElement)(Aj.button,yf({type:"button","aria-haspopup":"dialog","aria-expanded":W.open,"aria-controls":W.contentId,"data-state":W.open?"open":"closed"},I,{ref:g,onClick:Je(b.onClick,W.onOpenToggle)}));return W.hasCustomAnchor?b:(0,Rj.createElement)(Mv,yf({asChild:!0},n),b)}),[,BF]=Tz("PopoverPortal",
{forceMount:void 0}),Vz=(0,Rj.forwardRef)((b,g)=>{var n=BF("PopoverContent",b.__scopePopover);({forceMount:n=n.forceMount}=b);const I=Ia(b,["forceMount"]);b=Rs("PopoverContent",b.__scopePopover);return(0,Rj.createElement)(Os,{present:n||b.open},b.modal?(0,Rj.createElement)(CF,yf({},I,{ref:g})):(0,Rj.createElement)(DF,yf({},I,{ref:g})))}),CF=(0,Rj.forwardRef)((b,g)=>{const n=Rs("PopoverContent",b.__scopePopover),I=(0,Rj.useRef)(null);g=Lg(g,I);const W=(0,Rj.useRef)(!1);(0,Rj.useEffect)(()=>{const ia=
I.current;if(ia)return Tv(ia)},[]);return(0,Rj.createElement)(du,{as:Iq,allowPinchZoom:!0},(0,Rj.createElement)(Wz,yf({},b,{ref:g,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Je(b.onCloseAutoFocus,ia=>{var sa;ia.preventDefault();W.current||null===(sa=n.triggerRef.current)||void 0===sa||sa.focus()}),onPointerDownOutside:Je(b.onPointerDownOutside,ia=>{ia=ia.detail.originalEvent;const sa=0===ia.button&&!0===ia.ctrlKey;W.current=2===ia.button||sa},{checkForDefaultPrevented:!1}),onFocusOutside:Je(b.onFocusOutside,
ia=>ia.preventDefault(),{checkForDefaultPrevented:!1})})))}),DF=(0,Rj.forwardRef)((b,g)=>{const n=Rs("PopoverContent",b.__scopePopover),I=(0,Rj.useRef)(!1);return(0,Rj.createElement)(Wz,yf({},b,{ref:g,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:W=>{var ia;null===(ia=b.onCloseAutoFocus)||void 0===ia||ia.call(b,W);if(!W.defaultPrevented){var sa;I.current||null===(sa=n.triggerRef.current)||void 0===sa||sa.focus();W.preventDefault()}I.current=!1},onInteractOutside:W=>{var ia,sa;null===
(ia=b.onInteractOutside)||void 0===ia||ia.call(b,W);W.defaultPrevented||(I.current=!0);ia=W.target;(null===(sa=n.triggerRef.current)||void 0===sa?0:sa.contains(ia))&&W.preventDefault()}}))}),Wz=(0,Rj.forwardRef)((b,g)=>{const {__scopePopover:n,trapFocus:I,onOpenAutoFocus:W,onCloseAutoFocus:ia,disableOutsidePointerEvents:sa,onEscapeKeyDown:Ka,onPointerDownOutside:Va,onFocusOutside:Za,onInteractOutside:lb}=b;b=Ia(b,"__scopePopover trapFocus onOpenAutoFocus onCloseAutoFocus disableOutsidePointerEvents onEscapeKeyDown onPointerDownOutside onFocusOutside onInteractOutside".split(" "));
const vb=Rs("PopoverContent",n),Qb=iu(n);Fb();return(0,Rj.createElement)(Qv,{asChild:!0,loop:!0,trapped:I,onMountAutoFocus:W,onUnmountAutoFocus:ia},(0,Rj.createElement)(St,{asChild:!0,disableOutsidePointerEvents:sa,onInteractOutside:lb,onEscapeKeyDown:Ka,onPointerDownOutside:Va,onFocusOutside:Za,onDismiss:()=>vb.onOpenChange(!1)},(0,Rj.createElement)(Ut,yf({"data-state":vb.open?"open":"closed",role:"dialog",id:vb.contentId},Qb,b,{ref:g,style:xf(te({},b.style),{["--radix-popover-content-transform-origin"]:"var(--radix-popper-transform-origin)"})}))))}),
Xz=(0,Rj.forwardRef)((b,g)=>{var {__scopePopover:n}=b;b=Ia(b,["__scopePopover"]);n=iu(n);return(0,Rj.createElement)(jz,yf({},n,b,{ref:g}))}),Yz=b=>{const {__scopePopover:g,children:n,open:I,defaultOpen:W,onOpenChange:ia,modal:sa=!1}=b;b=iu(g);const Ka=(0,Rj.useRef)(null),[Va,Za]=(0,Rj.useState)(!1),[lb=!1,vb]=Vf({prop:I,defaultProp:W,onChange:ia});return(0,Rj.createElement)(Nv,b,(0,Rj.createElement)(AF,{scope:g,contentId:Fj(),triggerRef:Ka,open:lb,onOpenChange:vb,onOpenToggle:(0,Rj.useCallback)(()=>
vb(Qb=>!Qb),[vb]),hasCustomAnchor:Va,onCustomAnchorAdd:(0,Rj.useCallback)(()=>Za(!0),[]),onCustomAnchorRemove:(0,Rj.useCallback)(()=>Za(!1),[]),modal:sa},n))};pb=V(587);var EF=bf(function(){const b=[{id:"box",icon:"square",tooltip:"Rectangle"},{id:"ellipse",icon:"circle",tooltip:"Circle"},{id:"polygon",icon:"triangle",tooltip:"Triangle"}],g=pg(),[n,I]=Sz.useState(()=>{var W;return(null!=(W=b.find(ia=>ia.id===g.selectedTool.id))?W:b[0]).id});Sz.useEffect(()=>{I(W=>{var ia,sa;return null!=(sa=null==
(ia=b.find(Ka=>Ka.id===g.selectedTool.id))?void 0:ia.id)?sa:W})},[g.selectedTool.id]);return(0,pb.jsxs)(Yz,{children:[(0,pb.jsx)(Uz,{asChild:!0,children:(0,pb.jsxs)("div",{className:"tl-geometry-tools-pane-anchor",children:[(0,pb.jsx)(Yo,te({},b.find(W=>W.id===n))),(0,pb.jsx)(Fh,{"data-selected":b.some(W=>W.id===g.selectedTool.id),className:"tl-popover-indicator",name:"chevron-down-left"})]})}),(0,pb.jsxs)(Vz,{className:"tl-popover-content",side:"left",sideOffset:15,children:[(0,pb.jsx)("div",{className:"tl-toolbar tl-geometry-toolbar",
children:b.map(W=>(0,pb.jsx)(Yo,te({},W),W.id))}),(0,pb.jsx)(Xz,{className:"tl-popover-arrow"})]})]})}),ni=V(22),Zz=V(22),$z=["PageUp","PageDown"],aA=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],bA={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},[aw,FF,GF]=ec("Slider"),[cA]=Ui("Slider",[GF]),[HF,ju]=cA("Slider"),IF=(0,ni.forwardRef)((b,
g)=>{function n(ff){const Ge=Qf(Ne,ff);ia(ff,Ge)}function I(ff){ia(ff,Vd.current)}function W(){Ne[Vd.current]!==rf.current[Vd.current]&&lc(Ne)}function ia(ff,Ge,{commit:Ad}={commit:!1}){const fd=(String(Za).split(".")[1]||"").length;ff=Rg(Math.round((ff-Ka)/Za)*Za+Ka,fd);const ld=Oe(ff,[Ka,Va]);uf((nd=[])=>{const Ed=qg(nd,ld,Ge);var xe=Qb*Za;if(0<xe){const Fe=ih(Ed);xe=Math.min(...Fe)>=xe}else xe=!0;return xe?(Vd.current=Ed.indexOf(ld),(xe=String(Ed)!==String(nd))&&Ad&&lc(Ed),xe?Ed:nd):nd})}const {name:sa,
min:Ka=0,max:Va=100,step:Za=1,orientation:lb="horizontal",disabled:vb=!1,minStepsBetweenThumbs:Qb=0,defaultValue:cc=[Ka],value:Ub,onValueChange:rc=()=>{},onValueCommit:lc=()=>{},inverted:Vb=!1}=b,sc=Ia(b,"name min max step orientation disabled minStepsBetweenThumbs defaultValue value onValueChange onValueCommit inverted".split(" ")),[Gc,Qc]=(0,ni.useState)(null);g=Lg(g,ff=>Qc(ff));const Vc=(0,ni.useRef)(new Set),Vd=(0,ni.useRef)(0);var $d="horizontal"===lb;const Ee=Gc?!!Gc.closest("form"):!0;$d=$d?
JF:KF;const [Ne=[],uf]=Vf({prop:Ub,defaultProp:cc,onChange:ff=>{var Ge;null===(Ge=[...Vc.current][Vd.current])||void 0===Ge||Ge.focus();rc(ff)}}),rf=(0,ni.useRef)(Ne);return(0,ni.createElement)(HF,{scope:b.__scopeSlider,disabled:vb,min:Ka,max:Va,valueIndexToChangeRef:Vd,thumbs:Vc.current,values:Ne,orientation:lb},(0,ni.createElement)(aw.Provider,{scope:b.__scopeSlider},(0,ni.createElement)(aw.Slot,{scope:b.__scopeSlider},(0,ni.createElement)($d,yf({"aria-disabled":vb,"data-disabled":vb?"":void 0},
sc,{ref:g,onPointerDown:Je(sc.onPointerDown,()=>{vb||(rf.current=Ne)}),min:Ka,max:Va,inverted:Vb,onSlideStart:vb?void 0:n,onSlideMove:vb?void 0:I,onSlideEnd:vb?void 0:W,onHomeKeyDown:()=>!vb&&ia(Ka,0,{commit:!0}),onEndKeyDown:()=>!vb&&ia(Va,Ne.length-1,{commit:!0}),onStepKeyDown:({event:ff,direction:Ge})=>{if(!vb){ff=$z.includes(ff.key)||ff.shiftKey&&aA.includes(ff.key);const Ad=Vd.current;ia(Ne[Ad]+Za*(ff?10:1)*Ge,Ad,{commit:!0})}}})))),Ee&&Ne.map((ff,Ge)=>(0,ni.createElement)(PF,{key:Ge,name:sa?
sa+(1<Ne.length?"[]":""):void 0,value:ff})))}),[dA,eA]=cA("Slider",{startEdge:"left",endEdge:"right",size:"width",direction:1}),JF=(0,ni.forwardRef)((b,g)=>{function n(sc){const Gc=Ub.current||Qb.getBoundingClientRect(),Qc=Mg([0,Gc.width],Vb?[I,W]:[W,I]);Ub.current=Gc;return Qc(sc-Gc.left)}const {min:I,max:W,dir:ia,inverted:sa,onSlideStart:Ka,onSlideMove:Va,onSlideEnd:Za,onStepKeyDown:lb}=b,vb=Ia(b,"min max dir inverted onSlideStart onSlideMove onSlideEnd onStepKeyDown".split(" ")),[Qb,cc]=(0,ni.useState)(null);
g=Lg(g,sc=>cc(sc));const Ub=(0,ni.useRef)(),rc=ja(ia),lc="ltr"===rc,Vb=lc&&!sa||!lc&&sa;return(0,ni.createElement)(dA,{scope:b.__scopeSlider,startEdge:Vb?"left":"right",endEdge:Vb?"right":"left",direction:Vb?1:-1,size:"width"},(0,ni.createElement)(fA,yf({dir:rc,"data-orientation":"horizontal"},vb,{ref:g,style:xf(te({},vb.style),{["--radix-slider-thumb-transform"]:"translateX(-50%)"}),onSlideStart:sc=>{sc=n(sc.clientX);null===Ka||void 0===Ka||Ka(sc)},onSlideMove:sc=>{sc=n(sc.clientX);null===Va||void 0===
Va||Va(sc)},onSlideEnd:()=>{Ub.current=void 0;null===Za||void 0===Za||Za()},onStepKeyDown:sc=>{const Gc=bA[Vb?"from-left":"from-right"].includes(sc.key);null===lb||void 0===lb||lb({event:sc,direction:Gc?-1:1})}})))}),KF=(0,ni.forwardRef)((b,g)=>{function n(Ub){const rc=Qb.current||vb.current.getBoundingClientRect(),lc=Mg([0,rc.height],cc?[W,I]:[I,W]);Qb.current=rc;return lc(Ub-rc.top)}const {min:I,max:W,inverted:ia,onSlideStart:sa,onSlideMove:Ka,onSlideEnd:Va,onStepKeyDown:Za}=b,lb=Ia(b,"min max inverted onSlideStart onSlideMove onSlideEnd onStepKeyDown".split(" ")),
vb=(0,ni.useRef)(null);g=Lg(g,vb);const Qb=(0,ni.useRef)(),cc=!ia;return(0,ni.createElement)(dA,{scope:b.__scopeSlider,startEdge:cc?"bottom":"top",endEdge:cc?"top":"bottom",size:"height",direction:cc?1:-1},(0,ni.createElement)(fA,yf({"data-orientation":"vertical"},lb,{ref:g,style:xf(te({},lb.style),{["--radix-slider-thumb-transform"]:"translateY(50%)"}),onSlideStart:Ub=>{Ub=n(Ub.clientY);null===sa||void 0===sa||sa(Ub)},onSlideMove:Ub=>{Ub=n(Ub.clientY);null===Ka||void 0===Ka||Ka(Ub)},onSlideEnd:()=>
{Qb.current=void 0;null===Va||void 0===Va||Va()},onStepKeyDown:Ub=>{const rc=bA[cc?"from-bottom":"from-top"].includes(Ub.key);null===Za||void 0===Za||Za({event:Ub,direction:rc?-1:1})}})))}),fA=(0,ni.forwardRef)((b,g)=>{const {__scopeSlider:n,onSlideStart:I,onSlideMove:W,onSlideEnd:ia,onHomeKeyDown:sa,onEndKeyDown:Ka,onStepKeyDown:Va}=b,Za=Ia(b,"__scopeSlider onSlideStart onSlideMove onSlideEnd onHomeKeyDown onEndKeyDown onStepKeyDown".split(" ")),lb=ju("Slider",n);return(0,ni.createElement)(Aj.span,
yf({},Za,{ref:g,onKeyDown:Je(b.onKeyDown,vb=>{"Home"===vb.key?(sa(vb),vb.preventDefault()):"End"===vb.key?(Ka(vb),vb.preventDefault()):$z.concat(aA).includes(vb.key)&&(Va(vb),vb.preventDefault())}),onPointerDown:Je(b.onPointerDown,vb=>{const Qb=vb.target;Qb.setPointerCapture(vb.pointerId);vb.preventDefault();lb.thumbs.has(Qb)?Qb.focus():I(vb)}),onPointerMove:Je(b.onPointerMove,vb=>{vb.target.hasPointerCapture(vb.pointerId)&&W(vb)}),onPointerUp:Je(b.onPointerUp,vb=>{const Qb=vb.target;Qb.hasPointerCapture(vb.pointerId)&&
(Qb.releasePointerCapture(vb.pointerId),ia(vb))})}))}),LF=(0,ni.forwardRef)((b,g)=>{var {__scopeSlider:n}=b;b=Ia(b,["__scopeSlider"]);n=ju("SliderTrack",n);return(0,ni.createElement)(Aj.span,yf({"data-disabled":n.disabled?"":void 0,"data-orientation":n.orientation},b,{ref:g}))}),MF=(0,ni.forwardRef)((b,g)=>{var {__scopeSlider:n}=b;const I=Ia(b,["__scopeSlider"]),W=ju("SliderRange",n);n=eA("SliderRange",n);var ia=(0,ni.useRef)(null);g=Lg(g,ia);var sa=W.values.length;ia=W.values.map(Ka=>Rf(Ka,W.min,
W.max));sa=1<sa?Math.min(...ia):0;ia=100-Math.max(...ia);return(0,ni.createElement)(Aj.span,yf({"data-orientation":W.orientation,"data-disabled":W.disabled?"":void 0},I,{ref:g,style:xf(te({},b.style),{[n.startEdge]:sa+"%",[n.endEdge]:ia+"%"})}))}),NF=(0,ni.forwardRef)((b,g)=>{const n=FF(b.__scopeSlider),[I,W]=(0,ni.useState)(null);g=Lg(g,sa=>W(sa));const ia=(0,ni.useMemo)(()=>I?n().findIndex(sa=>sa.ref.current===I):-1,[n,I]);return(0,ni.createElement)(OF,yf({},b,{ref:g,index:ia}))}),OF=(0,ni.forwardRef)((b,
g)=>{const {__scopeSlider:n,index:I}=b,W=Ia(b,["__scopeSlider","index"]),ia=ju("SliderThumb",n),sa=eA("SliderThumb",n),[Ka,Va]=(0,ni.useState)(null);g=Lg(g,cc=>Va(cc));var Za=ug(Ka);const lb=ia.values[I],vb=void 0===lb?0:Rf(lb,ia.min,ia.max),Qb=Vi(I,ia.values.length);Za=(Za=null===Za||void 0===Za?void 0:Za[sa.size])?gg(Za,vb,sa.direction):0;(0,ni.useEffect)(()=>{if(Ka)return ia.thumbs.add(Ka),()=>{ia.thumbs.delete(Ka)}},[Ka,ia.thumbs]);return(0,ni.createElement)("span",{style:{transform:"var(--radix-slider-thumb-transform)",
position:"absolute",[sa.startEdge]:`calc(${vb}% + ${Za}px)`}},(0,ni.createElement)(aw.ItemSlot,{scope:b.__scopeSlider},(0,ni.createElement)(Aj.span,yf({role:"slider","aria-label":b["aria-label"]||Qb,"aria-valuemin":ia.min,"aria-valuenow":lb,"aria-valuemax":ia.max,"aria-orientation":ia.orientation,"data-orientation":ia.orientation,"data-disabled":ia.disabled?"":void 0,tabIndex:ia.disabled?void 0:0},W,{ref:g,style:void 0===lb?{display:"none"}:b.style,onFocus:Je(b.onFocus,()=>{ia.valueIndexToChangeRef.current=
I})}))))}),PF=b=>{const {value:g}=b;b=Ia(b,["value"]);const n=(0,ni.useRef)(null),I=Re(g);(0,ni.useEffect)(()=>{const W=n.current,ia=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"value").set;if(I!==g&&ia){const sa=new Event("input",{bubbles:!0});ia.call(W,g);W.dispatchEvent(sa)}},[I,g]);return(0,ni.createElement)("input",yf({style:{display:"none"}},b,{ref:n,defaultValue:g}))},QF=IF,RF=LF,SF=MF,TF=NF,ku=cb(V(22));pb=V(587);var gA=bf(b=>{var {side:g,align:n,alignOffset:I,label:W,
arrow:ia,children:sa,border:Ka}=b;b=Ia(b,"side align alignOffset label arrow children border".split(" "));const Va=ku.useRef(null),[Za,lb]=ku.useState(!1),{viewport:{bounds:vb,camera:{point:Qb,zoom:cc}}}=pg(),[Ub,rc]=ku.useState(0);ku.useEffect(()=>{if(Va.current&&Za){var lc=Va.current.getBoundingClientRect();Ve.boundsContain(vb,{minX:lc.x,minY:lc.y,maxX:lc.right,maxY:lc.bottom,width:lc.width,height:lc.height})||rc(Vb=>Vb+1)}},[Qb[0],Qb[1],cc,Za]);return(0,pb.jsxs)(Yz,{onOpenChange:lc=>lb(lc),children:[(0,pb.jsx)(Uz,
xf(te({},b),{"data-border":Ka,className:"tl-button tl-popover-trigger-button",children:W})),(0,pb.jsxs)(Vz,{ref:Va,className:"tl-popover-content",align:n,alignOffset:I,side:g,sideOffset:15,collisionBoundary:document.querySelector(".logseq-tldraw"),children:[sa,ia&&(0,pb.jsx)(Xz,{className:"tl-popover-arrow"})]},"popover-content-"+Ub)]})});pb=V(587);pb=V(587);var UF=bf(function(){const b=pg(),g=yF.useCallback(n=>{b.api.setColor(n)},[]);return(0,pb.jsx)("div",{className:"tl-primary-tools",children:(0,pb.jsxs)("div",
{className:"tl-toolbar tl-tools-floating-panel",children:[(0,pb.jsx)(Yo,{tooltip:"Select",id:"select",icon:"select-cursor"}),(0,pb.jsx)(Yo,{tooltip:"Move",id:"move",icon:b.isIn("move.panning")?"hand-grab":"hand-stop"}),(0,pb.jsx)(Kq,{className:"tl-toolbar-separator",orientation:"horizontal"}),(0,pb.jsx)(Yo,{tooltip:"Add block or page",id:"logseq-portal",icon:"circle-plus"}),(0,pb.jsx)(Yo,{tooltip:"Draw",id:"pencil",icon:"ballpen"}),(0,pb.jsx)(Yo,{tooltip:"Highlight",id:"highlighter",icon:"highlight"}),
(0,pb.jsx)(Yo,{tooltip:"Eraser",id:"erase",icon:"eraser"}),(0,pb.jsx)(Yo,{tooltip:"Connector",id:"line",icon:"connector"}),(0,pb.jsx)(Yo,{tooltip:"Text",id:"text",icon:"text"}),(0,pb.jsx)(EF,{}),(0,pb.jsx)(Kq,{className:"tl-toolbar-separator",orientation:"horizontal",style:{margin:"0 -4px"}}),(0,pb.jsx)(fh,{popoverSide:"left",color:b.settings.color,setColor:g})]})})});pb=V(587);bf(function(){const b=pg();return(0,pb.jsxs)("div",{className:"tl-statusbar",children:[b.selectedTool.id," | ",b.selectedTool.currentState.id,
(0,pb.jsx)("div",{style:{flex:1}}),(0,pb.jsx)("div",{id:"tl-statusbar-anchor",className:"flex gap-1"})]})});pb=V(587);var VF=bf(function(){return(0,pb.jsxs)(pb.Fragment,{children:[!1,!1,(0,pb.jsx)(UF,{}),(0,pb.jsx)(wF,{})]})}),Ss=cb(V(22)),pp=cb(V(22)),WF=cb(V(22)),Df=V(22),hA=V(31),XF=[" ","Enter","ArrowUp","ArrowDown"],YF=[" ","Enter"],[lu,bw,ZF]=ec("Select"),[Ts]=Ui("Select",[ZF]),[$F,Dr]=Ts("Select"),[aG,bG]=Ts("Select"),cG=(0,Df.forwardRef)((b,g)=>{const {__scopeSelect:n,disabled:I=!1}=b;b=Ia(b,
["__scopeSelect","disabled"]);const W=Dr("SelectTrigger",n),ia=W.disabled||I;g=Lg(g,W.onTriggerChange);const sa=bw(n),[Ka,Va,Za]=vg(lb=>{const vb=sa().filter(cc=>!cc.disabled),Qb=vb.find(cc=>cc.value===W.value);lb=hg(vb,lb,Qb);if(void 0!==lb)W.onValueChange(lb.value)});return(0,Df.createElement)(Aj.button,yf({type:"button",role:"combobox","aria-controls":W.contentId,"aria-expanded":W.open,"aria-required":W.required,"aria-autocomplete":"none",dir:W.dir,"data-state":W.open?"open":"closed",disabled:ia,
"data-disabled":ia?"":void 0,"data-placeholder":void 0===W.value?"":void 0},b,{ref:g,onClick:Je(b.onClick,lb=>{lb.currentTarget.focus()}),onPointerDown:Je(b.onPointerDown,lb=>{const vb=lb.target;vb.hasPointerCapture(lb.pointerId)&&vb.releasePointerCapture(lb.pointerId);0===lb.button&&!1===lb.ctrlKey&&(ia||(W.onOpenChange(!0),Za()),W.triggerPointerDownPosRef.current={x:Math.round(lb.pageX),y:Math.round(lb.pageY)},lb.preventDefault())}),onKeyDown:Je(b.onKeyDown,lb=>{const vb=""!==Ka.current;lb.ctrlKey||
lb.altKey||lb.metaKey||1!==lb.key.length||Va(lb.key);vb&&" "===lb.key||!XF.includes(lb.key)||(ia||(W.onOpenChange(!0),Za()),lb.preventDefault())})}))}),dG=(0,Df.forwardRef)((b,g)=>{const {__scopeSelect:n,children:I,placeholder:W}=b;b=Ia(b,["__scopeSelect","className","style","children","placeholder"]);const ia=Dr("SelectValue",n),{onValueNodeHasChildrenChange:sa}=ia,Ka=void 0!==I;g=Lg(g,ia.onValueNodeChange);zn(()=>{sa(Ka)},[sa,Ka]);return(0,Df.createElement)(Aj.span,yf({},b,{ref:g,style:{pointerEvents:"none"}}),
void 0===ia.value&&void 0!==W?W:I)}),eG=(0,Df.forwardRef)((b,g)=>{const {children:n}=b;b=Ia(b,["__scopeSelect","children"]);return(0,Df.createElement)(Aj.span,yf({"aria-hidden":!0},b,{ref:g}),n||"▼")}),fG=(0,Df.forwardRef)((b,g)=>{const n=Dr("SelectContent",b.__scopeSelect),[I,W]=(0,Df.useState)();zn(()=>{W(new DocumentFragment)},[]);return(0,Df.createElement)(Df.Fragment,null,n.open?(0,Df.createElement)(gG,yf({},b,{ref:g})):I?(0,hA.createPortal)((0,Df.createElement)(iA,{scope:b.__scopeSelect},(0,Df.createElement)(lu.Slot,
{scope:b.__scopeSelect},(0,Df.createElement)("div",null,b.children))),I):null)}),[iA,Er]=Ts("SelectContent"),gG=(0,Df.forwardRef)((b,g)=>{const {__scopeSelect:n,onCloseAutoFocus:I}=b;b=Ia(b,["__scopeSelect","onCloseAutoFocus"]);const W=Dr("SelectContent",n),[ia,sa]=(0,Df.useState)(null),[Ka,Va]=(0,Df.useState)(null),[Za,lb]=(0,Df.useState)(null);g=Lg(g,Ed=>Va(Ed));const [vb,Qb]=(0,Df.useState)(null),[cc,Ub]=(0,Df.useState)(null),rc=bw(n),[lc,Vb]=(0,Df.useState)(!1),sc=(0,Df.useRef)(!0),Gc=(0,Df.useRef)(!1),
Qc=(0,Df.useRef)(!1);(0,Df.useEffect)(()=>{if(Ka)return Tv(Ka)},[Ka]);Fb();const [Vc,Vd]=(0,Df.useState)();zn(()=>{Ka&&Vd(window.getComputedStyle(Ka).zIndex)},[Ka]);const $d=(0,Df.useCallback)(Ed=>{const [xe,...Fe]=rc().map(lf=>lf.ref.current),[sf]=Fe.slice(-1),mf=document.activeElement;for(const lf of Ed){if(lf===mf)break;null===lf||void 0===lf||lf.scrollIntoView({block:"nearest"});lf===xe&&Za&&(Za.scrollTop=0);lf===sf&&Za&&(Za.scrollTop=Za.scrollHeight);null===lf||void 0===lf||lf.focus();if(document.activeElement!==
mf)break}},[rc,Za]),Ee=(0,Df.useCallback)(()=>{if(W.trigger&&W.valueNode&&ia&&Ka&&Za&&vb&&cc){var Ed=W.trigger.getBoundingClientRect(),xe=Ka.getBoundingClientRect(),Fe=W.valueNode.getBoundingClientRect(),sf=cc.getBoundingClientRect();"rtl"!==W.dir?(sf=Fe.left-(sf.left-xe.left),Fe=Ed.width+(Ed.left-sf),xe=Oe(sf,[10,window.innerWidth-10-Math.max(Fe,xe.width)]),ia.style.minWidth=Fe+"px",ia.style.left=xe+"px"):(sf=window.innerWidth-Fe.right-(xe.right-sf.right),Fe=Ed.width+(window.innerWidth-Ed.right-
sf),xe=Oe(sf,[10,window.innerWidth-10-Math.max(Fe,xe.width)]),ia.style.minWidth=Fe+"px",ia.style.right=xe+"px");const Nk=rc();xe=window.innerHeight-20;var mf=Za.scrollHeight,lf=window.getComputedStyle(Ka);Fe=parseInt(lf.borderTopWidth,10);var Vg=parseInt(lf.paddingTop,10);sf=parseInt(lf.borderBottomWidth,10);lf=parseInt(lf.paddingBottom,10);var Ig=Fe+Vg+mf+lf+sf;mf=Math.min(5*vb.offsetHeight,Ig);var oi=window.getComputedStyle(Za);lf=parseInt(oi.paddingTop,10);oi=parseInt(oi.paddingBottom,10);const Xk=
Ed.top+Ed.height/2-10,Do=xe-Xk;Ed=vb.offsetHeight/2;Vg=Fe+Vg+(vb.offsetTop+Ed);Ig-=Vg;Vg<=Xk?(Fe=vb===Nk[Nk.length-1].ref.current,ia.style.bottom="0px",ia.style.height=Vg+Math.max(Do,Ed+(Fe?oi:0)+(Ka.clientHeight-Za.offsetTop-Za.offsetHeight)+sf)+"px"):(sf=vb===Nk[0].ref.current,ia.style.top="0px",ia.style.height=Math.max(Xk,Fe+Za.offsetTop+(sf?lf:0)+Ed)+Ig+"px",Za.scrollTop=Vg-Xk+Za.offsetTop);ia.style.margin="10px 0";ia.style.minHeight=mf+"px";ia.style.maxHeight=xe+"px";Vb(!0);requestAnimationFrame(()=>
Gc.current=!0)}},[rc,W.trigger,W.valueNode,ia,Ka,Za,vb,cc,W.dir]);zn(()=>Ee(),[Ee]);const Ne=(0,Df.useCallback)(()=>$d([vb,Ka]),[$d,vb,Ka]);(0,Df.useEffect)(()=>{lc&&Ne()},[lc,Ne]);const uf=(0,Df.useCallback)(Ed=>{Ed&&!0===sc.current&&(Ee(),Ne(),sc.current=!1)},[Ee,Ne]),{onOpenChange:rf,triggerPointerDownPosRef:ff}=W;(0,Df.useEffect)(()=>{if(Ka){var Ed=0,xe=0;const Fe=mf=>{var lf,Vg,Ig,oi;Ed=Math.abs(Math.round(mf.pageX)-(null!==(lf=null===(Vg=ff.current)||void 0===Vg?void 0:Vg.x)&&void 0!==lf?lf:
0));xe=Math.abs(Math.round(mf.pageY)-(null!==(Ig=null===(oi=ff.current)||void 0===oi?void 0:oi.y)&&void 0!==Ig?Ig:0))},sf=mf=>{10>=Ed&&10>=xe?mf.preventDefault():Ka.contains(mf.target)||rf(!1);document.removeEventListener("pointermove",Fe);ff.current=null};null!==ff.current&&(document.addEventListener("pointermove",Fe),document.addEventListener("pointerup",sf,{capture:!0,once:!0}));return()=>{document.removeEventListener("pointermove",Fe);document.removeEventListener("pointerup",sf,{capture:!0})}}},
[Ka,rf,ff]);(0,Df.useEffect)(()=>{const Ed=()=>rf(!1);window.addEventListener("blur",Ed);window.addEventListener("resize",Ed);return()=>{window.removeEventListener("blur",Ed);window.removeEventListener("resize",Ed)}},[rf]);const [Ge,Ad]=vg(Ed=>{const xe=rc().filter(mf=>!mf.disabled),Fe=xe.find(mf=>mf.ref.current===document.activeElement),sf=hg(xe,Ed,Fe);sf&&setTimeout(()=>sf.ref.current.focus())}),fd=(0,Df.useCallback)((Ed,xe,Fe)=>{Fe=!Qc.current&&!Fe;if(void 0!==W.value&&W.value===xe||Fe)Qb(Ed),
Fe&&(Qc.current=!0)},[W.value]),ld=(0,Df.useCallback)(()=>null===Ka||void 0===Ka?void 0:Ka.focus(),[Ka]),nd=(0,Df.useCallback)((Ed,xe,Fe)=>{Fe=!Qc.current&&!Fe;(void 0!==W.value&&W.value===xe||Fe)&&Ub(Ed)},[W.value]);return(0,Df.createElement)(iA,{scope:n,contentWrapper:ia,content:Ka,viewport:Za,onViewportChange:lb,itemRefCallback:fd,selectedItem:vb,onItemLeave:ld,itemTextRefCallback:nd,selectedItemText:cc,onScrollButtonChange:uf,isPositioned:lc,shouldExpandOnScrollRef:Gc,searchRef:Ge},(0,Df.createElement)(du,
{as:Iq,allowPinchZoom:!0},(0,Df.createElement)("div",{ref:sa,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:Vc}},(0,Df.createElement)(Qv,{asChild:!0,trapped:W.open,onMountAutoFocus:Ed=>{Ed.preventDefault()},onUnmountAutoFocus:Je(I,Ed=>{var xe;null===(xe=W.trigger)||void 0===xe||xe.focus({preventScroll:!0});Ed.preventDefault()})},(0,Df.createElement)(St,yf({role:"listbox",id:W.contentId,"data-state":W.open?"open":"closed",dir:W.dir,onContextMenu:Ed=>Ed.preventDefault()},b,{ref:g,
style:te({display:"flex",flexDirection:"column",boxSizing:"border-box",maxHeight:"100%",outline:"none"},b.style),disableOutsidePointerEvents:!0,onFocusOutside:Ed=>Ed.preventDefault(),onDismiss:()=>W.onOpenChange(!1),onKeyDown:Je(b.onKeyDown,Ed=>{var xe=Ed.ctrlKey||Ed.altKey||Ed.metaKey;"Tab"===Ed.key&&Ed.preventDefault();xe||1!==Ed.key.length||Ad(Ed.key);if(["ArrowUp","ArrowDown","Home","End"].includes(Ed.key)){let Fe=rc().filter(sf=>!sf.disabled).map(sf=>sf.ref.current);["ArrowUp","End"].includes(Ed.key)&&
(Fe=Fe.slice().reverse());["ArrowUp","ArrowDown"].includes(Ed.key)&&(xe=Fe.indexOf(Ed.target),Fe=Fe.slice(xe+1));setTimeout(()=>$d(Fe));Ed.preventDefault()}})}))))))}),hG=(0,Df.forwardRef)((b,g)=>{const {__scopeSelect:n}=b;b=Ia(b,["__scopeSelect"]);const I=Er("SelectViewport",n);g=Lg(g,I.onViewportChange);const W=(0,Df.useRef)(0);return(0,Df.createElement)(Df.Fragment,null,(0,Df.createElement)("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"}}),
(0,Df.createElement)(lu.Slot,{scope:n},(0,Df.createElement)(Aj.div,yf({"data-radix-select-viewport":"",role:"presentation"},b,{ref:g,style:te({position:"relative",flex:1,overflow:"auto"},b.style),onScroll:Je(b.onScroll,ia=>{ia=ia.currentTarget;const {contentWrapper:sa,shouldExpandOnScrollRef:Ka}=I;if(null!==Ka&&void 0!==Ka&&Ka.current&&sa){var Va=Math.abs(W.current-ia.scrollTop);if(0<Va){var Za=window.innerHeight-20,lb=parseFloat(sa.style.minHeight);const vb=parseFloat(sa.style.height);lb=Math.max(lb,
vb);lb<Za&&(Va=lb+Va,Za=Math.min(Za,Va),Va-=Za,sa.style.height=Za+"px","0px"===sa.style.bottom&&(ia.scrollTop=0<Va?Va:0,sa.style.justifyContent="flex-end"))}}W.current=ia.scrollTop})}))))});Ts("SelectGroup");var [iG,jG]=Ts("SelectItem"),kG=(0,Df.forwardRef)((b,g)=>{const {__scopeSelect:n,value:I,disabled:W=!1,textValue:ia}=b;b=Ia(b,["__scopeSelect","value","disabled","textValue"]);const sa=Dr("SelectItem",n),Ka=Er("SelectItem",n),Va=sa.value===I,[Za,lb]=(0,Df.useState)(null!==ia&&void 0!==ia?ia:""),
[vb,Qb]=(0,Df.useState)(!1);g=Lg(g,rc=>{var lc;return null===(lc=Ka.itemRefCallback)||void 0===lc?void 0:lc.call(Ka,rc,I,W)});const cc=Fj(),Ub=()=>{W||(sa.onValueChange(I),sa.onOpenChange(!1))};return(0,Df.createElement)(iG,{scope:n,value:I,disabled:W,textId:cc,isSelected:Va,onItemTextChange:(0,Df.useCallback)(rc=>{lb(lc=>{var Vb;return lc||(null!==(Vb=null===rc||void 0===rc?void 0:rc.textContent)&&void 0!==Vb?Vb:"").trim()})},[])},(0,Df.createElement)(lu.ItemSlot,{scope:n,value:I,disabled:W,textValue:Za},
(0,Df.createElement)(Aj.div,yf({role:"option","aria-labelledby":cc,"data-highlighted":vb?"":void 0,"aria-selected":Va&&vb,"data-state":Va?"checked":"unchecked","aria-disabled":W||void 0,"data-disabled":W?"":void 0,tabIndex:W?void 0:-1},b,{ref:g,onFocus:Je(b.onFocus,()=>Qb(!0)),onBlur:Je(b.onBlur,()=>Qb(!1)),onPointerUp:Je(b.onPointerUp,Ub),onPointerMove:Je(b.onPointerMove,rc=>{if(W){var lc;null===(lc=Ka.onItemLeave)||void 0===lc||lc.call(Ka)}else rc.currentTarget.focus({preventScroll:!0})}),onPointerLeave:Je(b.onPointerLeave,
rc=>{if(rc.currentTarget===document.activeElement){var lc;null===(lc=Ka.onItemLeave)||void 0===lc||lc.call(Ka)}}),onKeyDown:Je(b.onKeyDown,rc=>{var lc;if(""===(null===(lc=Ka.searchRef)||void 0===lc?void 0:lc.current)||" "!==rc.key)YF.includes(rc.key)&&Ub()," "===rc.key&&rc.preventDefault()})}))))}),lG=(0,Df.forwardRef)((b,g)=>{var {__scopeSelect:n}=b;b=Ia(b,["__scopeSelect","className","style"]);const I=Dr("SelectItemText",n),W=Er("SelectItemText",n),ia=jG("SelectItemText",n);n=bG("SelectItemText",
n);const [sa,Ka]=(0,Df.useState)(null);g=Lg(g,Qb=>Ka(Qb),ia.onItemTextChange,Qb=>{var cc;return null===(cc=W.itemTextRefCallback)||void 0===cc?void 0:cc.call(W,Qb,ia.value,ia.disabled)});const Va=null===sa||void 0===sa?void 0:sa.textContent,Za=(0,Df.useMemo)(()=>(0,Df.createElement)("option",{key:ia.value,value:ia.value,disabled:ia.disabled},Va),[ia.disabled,ia.value,Va]),{onNativeOptionAdd:lb,onNativeOptionRemove:vb}=n;zn(()=>{lb(Za);return()=>vb(Za)},[lb,vb,Za]);return(0,Df.createElement)(Df.Fragment,
null,(0,Df.createElement)(Aj.span,yf({id:ia.textId},b,{ref:g})),ia.isSelected&&I.valueNode&&!I.valueNodeHasChildren?(0,hA.createPortal)(b.children,I.valueNode):null)}),mG=(0,Df.forwardRef)((b,g)=>{const n=Er("SelectScrollUpButton",b.__scopeSelect),[I,W]=(0,Df.useState)(!1);g=Lg(g,n.onScrollButtonChange);zn(()=>{if(n.viewport&&n.isPositioned){let ia=function(){W(0<sa.scrollTop)};const sa=n.viewport;ia();sa.addEventListener("scroll",ia);return()=>sa.removeEventListener("scroll",ia)}},[n.viewport,n.isPositioned]);
return I?(0,Df.createElement)(jA,yf({},b,{ref:g,onAutoScroll:()=>{const {viewport:ia,selectedItem:sa}=n;ia&&sa&&(ia.scrollTop-=sa.offsetHeight)}})):null}),nG=(0,Df.forwardRef)((b,g)=>{const n=Er("SelectScrollDownButton",b.__scopeSelect),[I,W]=(0,Df.useState)(!1);g=Lg(g,n.onScrollButtonChange);zn(()=>{if(n.viewport&&n.isPositioned){let ia=function(){W(Math.ceil(sa.scrollTop)<sa.scrollHeight-sa.clientHeight)};const sa=n.viewport;ia();sa.addEventListener("scroll",ia);return()=>sa.removeEventListener("scroll",
ia)}},[n.viewport,n.isPositioned]);return I?(0,Df.createElement)(jA,yf({},b,{ref:g,onAutoScroll:()=>{const {viewport:ia,selectedItem:sa}=n;ia&&sa&&(ia.scrollTop+=sa.offsetHeight)}})):null}),jA=(0,Df.forwardRef)((b,g)=>{const {__scopeSelect:n,onAutoScroll:I}=b;b=Ia(b,["__scopeSelect","onAutoScroll"]);const W=Er("SelectScrollButton",n),ia=(0,Df.useRef)(null),sa=bw(n),Ka=(0,Df.useCallback)(()=>{null!==ia.current&&(window.clearInterval(ia.current),ia.current=null)},[]);(0,Df.useEffect)(()=>()=>Ka(),[Ka]);
zn(()=>{var Va;const Za=sa().find(lb=>lb.ref.current===document.activeElement);null===Za||void 0===Za||null===(Va=Za.ref.current)||void 0===Va||Va.scrollIntoView({block:"nearest"})},[sa]);return(0,Df.createElement)(Aj.div,yf({"aria-hidden":!0},b,{ref:g,style:te({flexShrink:0},b.style),onPointerMove:Je(b.onPointerMove,()=>{var Va;null===(Va=W.onItemLeave)||void 0===Va||Va.call(W);null===ia.current&&(ia.current=window.setInterval(I,50))}),onPointerLeave:Je(b.onPointerLeave,()=>{Ka()})}))}),kA=(0,Df.forwardRef)((b,
g)=>{const {value:n}=b;b=Ia(b,["value"]);const I=(0,Df.useRef)(null);g=Lg(g,I);const W=Re(n);(0,Df.useEffect)(()=>{const ia=I.current,sa=Object.getOwnPropertyDescriptor(window.HTMLSelectElement.prototype,"value").set;if(W!==n&&sa){const Ka=new Event("change",{bubbles:!0});sa.call(ia,n);ia.dispatchEvent(Ka)}},[W,n]);return(0,Df.createElement)(nz,{asChild:!0},(0,Df.createElement)("select",yf({},b,{ref:g,defaultValue:n})))});kA.displayName="BubbleSelect";var oG=b=>{const {__scopeSelect:g,children:n,
open:I,defaultOpen:W,onOpenChange:ia,value:sa,defaultValue:Ka,onValueChange:Va,dir:Za,name:lb,autoComplete:vb,disabled:Qb,required:cc}=b,[Ub,rc]=(0,Df.useState)(null),[lc,Vb]=(0,Df.useState)(null),[sc,Gc]=(0,Df.useState)(!1),Qc=ja(Za),[Vc=!1,Vd]=Vf({prop:I,defaultProp:W,onChange:ia}),[$d,Ee]=Vf({prop:sa,defaultProp:Ka,onChange:Va}),Ne=(0,Df.useRef)(null),uf=Ub?!!Ub.closest("form"):!0,[rf,ff]=(0,Df.useState)(new Set),Ge=Array.from(rf).map(Ad=>Ad.props.value).join(";");return(0,Df.createElement)($F,
{required:cc,scope:g,trigger:Ub,onTriggerChange:rc,valueNode:lc,onValueNodeChange:Vb,valueNodeHasChildren:sc,onValueNodeHasChildrenChange:Gc,contentId:Fj(),value:$d,onValueChange:Ee,open:Vc,onOpenChange:Vd,dir:Qc,triggerPointerDownPosRef:Ne,disabled:Qb},(0,Df.createElement)(lu.Provider,{scope:g},(0,Df.createElement)(aG,{scope:b.__scopeSelect,onNativeOptionAdd:(0,Df.useCallback)(Ad=>{ff(fd=>(new Set(fd)).add(Ad))},[]),onNativeOptionRemove:(0,Df.useCallback)(Ad=>{ff(fd=>{fd=new Set(fd);fd.delete(Ad);
return fd})},[])},n)),uf?(0,Df.createElement)(kA,{key:Ge,"aria-hidden":!0,required:cc,tabIndex:-1,name:lb,autoComplete:vb,value:$d,onChange:Ad=>Ee(Ad.target.value),disabled:Qb},void 0===$d?(0,Df.createElement)("option",{value:""}):null,Array.from(rf)):null)},pG=cG,qG=dG,rG=eG,sG=b=>(0,Df.createElement)(lz,yf({asChild:!0},b)),tG=fG,uG=hG,vG=kG,wG=lG,xG=mG,yG=nG;pb=V(587);var zG=cb(V(22)),ln=cb(V(22)).default.createContext({}),AG=cb(V(22));pb=V(587);var lA=({id:b,showReferenceContent:g=!1})=>{var n;
const {handlers:{isWhiteboardPage:I,redirectToPage:W,sidebarAddBlock:ia,queryBlockByUUID:sa},renderers:{Breadcrumb:Ka,PageName:Va}}=AG.default.useContext(ln);var Za="";let lb=Th(b)?"B":"P",vb="";if(Th(b)){Za=sa(b);if(!Za)return(0,pb.jsx)("span",{className:"p-2",children:"Invalid reference. Did you remove it?"});vb=Za.content;Za="whiteboard-shape"===(null==(n=Za.properties)?void 0:n["ls-type"])?"link-to-whiteboard":"link-to-block"}else Za=I(b)?"link-to-whiteboard":"link-to-page";n=vb&&23<vb.length?
vb.slice(0,20)+"...":vb;return(0,pb.jsxs)("button",{className:"inline-flex gap-1 items-center w-full",onPointerDown:Qb=>{Qb.stopPropagation();Qb.shiftKey?ia(b,"B"===lb?"block":"page"):W(b)},children:[(0,pb.jsx)(Fh,{name:Za}),(0,pb.jsx)("span",{className:"pointer-events-none block-link-reference-row",children:"P"===lb?(0,pb.jsx)(Va,{pageName:b}):(0,pb.jsxs)(pb.Fragment,{children:[(0,pb.jsx)(Ka,{levelLimit:1,blockId:b,endSeparator:g}),g&&n]})})]})},wm=cb(V(22)),An=V(22),BG=["children"],mu="undefined"!==
typeof document?An.useLayoutEffect:An.useEffect,ch=cb(V(22)),ci=V(22),CG=V(31),Us,im,DG="undefined"!=typeof document?ci.useLayoutEffect:ci.useEffect;!function(b){b[b.DEBUG=0]="DEBUG";b[b.INFO=1]="INFO";b[b.WARN=2]="WARN";b[b.ERROR=3]="ERROR"}(im||={});var EG=((Us={})[im.DEBUG]="debug",Us[im.INFO]="log",Us[im.WARN]="warn",Us[im.ERROR]="error",Us),Rp=nh(function(){var b=df(im.ERROR);return{log:df(function(g,n,I){var W;void 0===I&&(I=im.INFO);I>=(null!=(W=("undefined"==typeof globalThis?window:globalThis).VIRTUOSO_LOG_LEVEL)?
W:b(4))&&console[EG[I]]("%creact-virtuoso: %c%s %o","color: #0253b3; font-weight: bold","color: initial",g,n)}),logLevel:b}},[],{singleton:!0}),Bn=nh(function(){var b=$f(),g=$f(),n=df(0),I=$f(),W=df(0),ia=$f(),sa=$f(),Ka=df(0),Va=df(0),Za=df(0),lb=df(0),vb=$f(),Qb=$f(),cc=df(!1),Ub=df(!1);return jg(wf(b,je(function(rc){return rc.scrollTop})),g),jg(wf(b,je(function(rc){return rc.scrollHeight})),sa),jg(g,W),{scrollContainerState:b,scrollTop:g,viewportHeight:ia,headerHeight:Ka,fixedHeaderHeight:Va,fixedFooterHeight:Za,
footerHeight:lb,scrollHeight:sa,smoothScrollTargetReached:I,react18ConcurrentRendering:Ub,scrollTo:vb,scrollBy:Qb,statefulScrollTop:W,deviation:n,scrollingInProgress:cc}},[],{singleton:!0}),Li={lvl:0},cw=nh(function(){return{recalcInProgress:df(!1)}},[],{singleton:!0}),FG={offsetHeight:"height",offsetWidth:"width"},qp=nh(function(b){var g=b[0].log,n=b[1].recalcInProgress;b=$f();var I=$f(),W=ej(I,0),ia=$f(),sa=$f(),Ka=df(0),Va=df([]),Za=df(void 0),lb=df(void 0),vb=df(function(sc,Gc){return qh(sc,FG[Gc])}),
Qb=df(void 0),cc=df(0),Ub={offsetTree:[],sizeTree:Li,groupOffsetTree:Li,lastIndex:0,lastOffset:0,lastSize:0,groupIndices:[]},rc=ej(wf(b,le(Va,g,cc),Kg(ua,Ub),gf()),Ub);jg(wf(Va,oe(function(sc){return 0<sc.length}),le(rc,cc),je(function(sc){var Gc=sc[0],Qc=sc[1],Vc=sc[2];sc=Gc.reduce(function(Vd,$d,Ee){return ek(Vd,$d,Fa($d,Qc.offsetTree,Vc)||Ee)},Li);return Fg({},Qc,{groupIndices:Gc,groupOffsetTree:sc})})),rc);jg(wf(I,le(rc),oe(function(sc){return sc[0]<sc[1].lastIndex}),je(function(sc){var Gc=sc[1];
return[{startIndex:sc[0],endIndex:Gc.lastIndex,size:Gc.lastSize}]})),b);jg(Za,lb);var lc=ej(wf(Za,je(function(sc){return void 0===sc})),!0);jg(wf(lb,oe(function(sc){return void 0!==sc&&rc(4).sizeTree===Li}),je(function(sc){return[{startIndex:0,endIndex:0,size:sc}]})),b);Ub=oj(wf(b,le(rc),Kg(function(sc,Gc){Gc=Gc[1];return{changed:Gc!==sc.sizes,sizes:Gc}},{changed:!1,sizes:Ub}),je(function(sc){return sc.changed})));Cf(wf(Ka,Kg(function(sc,Gc){return{diff:sc.prev-Gc,prev:Gc}},{diff:0,prev:0}),je(function(sc){return sc.diff})),
function(sc){0<sc?(n(0,!0),ia(0,sc)):0>sc&&sa(0,sc)});Cf(wf(Ka,le(g)),function(sc){0>sc[0]&&(0,sc[1])("`firstItemIndex` prop should not be set to less than zero. If you don't know the total count, just use a very high value",{firstItemIndex:Ka},im.ERROR)});g=oj(ia);jg(wf(ia,le(rc),je(function(sc){var Gc=sc[0];sc=sc[1];if(0<sc.groupIndices.length)throw Error("Virtuoso: prepending items does not work with groups");return en(sc.sizeTree).reduce(function(Qc,Vc){var Vd=Vc.k;Vc=Vc.v;return{ranges:[].concat(Qc.ranges,
[{startIndex:Qc.prevIndex,endIndex:Vd+Gc-1,size:Qc.prevSize}]),prevIndex:Vd+Gc,prevSize:Vc}},{ranges:[],prevIndex:0,prevSize:sc.lastSize}).ranges})),b);var Vb=oj(wf(sa,le(rc,cc),je(function(sc){return Fa(-sc[0],sc[1].offsetTree,sc[2])})));return jg(wf(sa,le(rc,cc),je(function(sc){var Gc=sc[0],Qc=sc[1];sc=sc[2];if(0<Qc.groupIndices.length)throw Error("Virtuoso: shifting items does not work with groups");var Vc=en(Qc.sizeTree).reduce(function(Vd,$d){return ek(Vd,Math.max(0,$d.k+Gc),$d.v)},Li);return Fg({},
Qc,{sizeTree:Vc},xa(Qc.offsetTree,0,Vc,sc))})),rc),{data:Qb,totalCount:I,sizeRanges:b,groupIndices:Va,defaultItemSize:lb,fixedItemSize:Za,unshiftWith:ia,shiftWith:sa,shiftWithOffset:Vb,beforeUnshiftWith:g,firstItemIndex:Ka,gap:cc,sizes:rc,listRefresh:Ub,statefulTotalCount:W,trackItemSizes:lc,itemSize:vb}},wh(Rp,cw),{singleton:!0}),GG="undefined"!=typeof document&&"scrollBehavior"in document.documentElement.style,Vs=nh(function(b){function g(){lc&&(lc(),lc=null);sc&&(sc(),sc=null);Vb&&(clearTimeout(Vb),
Vb=null);Ka(0,!1)}var n=b[0],I=n.sizes,W=n.totalCount,ia=n.listRefresh;n=n.gap;var sa=b[1],Ka=sa.scrollingInProgress,Va=sa.viewportHeight,Za=sa.scrollTo,lb=sa.smoothScrollTargetReached,vb=sa.headerHeight,Qb=sa.footerHeight,cc=sa.fixedHeaderHeight;sa=sa.fixedFooterHeight;b=b[2].log;var Ub=$f(),rc=df(0),lc=null,Vb=null,sc=null;return jg(wf(Ub,le(I,Va,W,rc,vb,Qb,b),le(n,cc,sa),je(function(Gc){var Qc=Gc[0],Vc=Qc[0],Vd=Qc[1],$d=Qc[2],Ee=Qc[3],Ne=Qc[4],uf=Qc[5],rf=Qc[6],ff=Qc[7],Ge=Gc[1];Qc=Gc[2];Gc=Gc[3];
var Ad=ub(Vc),fd=Ad.align,ld=Ad.behavior,nd=Ad.offset;--Ee;Ad=ab(Ad,Vd,Ee);uf=Fa(Ad,Vd.offsetTree,Ge)+uf;"end"===fd?(uf+=Qc+Lj(Vd.sizeTree,Ad)[1]-$d+Gc,Ad===Ee&&(uf+=rf)):"center"===fd?uf+=(Qc+Lj(Vd.sizeTree,Ad)[1]-$d+Gc)/2:uf-=Ne;nd&&(uf+=nd);var Ed=function(Fe){g();Fe?(ff("retrying to scroll to",{location:Vc},im.DEBUG),Ub(0,Vc)):ff("list did not change, scroll successful",{},im.DEBUG)};if(g(),"smooth"===ld){var xe=!1;sc=Cf(ia,function(Fe){xe=xe||Fe});lc=Ri(lb,function(){Ed(xe)})}else lc=Ri(wf(ia,
function(Fe){var sf=setTimeout(function(){Fe(!1)},150);return function(mf){mf&&(Fe(!0),clearTimeout(sf))}}),Ed);Vb=setTimeout(function(){g()},1200);Ka(0,!0);return ff("scrolling from index to",{index:Ad,top:uf,behavior:ld},im.DEBUG),{top:uf,behavior:ld}})),Za),{scrollToIndex:Ub,topListHeight:rc}},wh(qp,Bn,Rp),{singleton:!0}),HG={atBottom:!1,notAtBottomBecause:"NOT_SHOWING_LAST_ITEM",state:{offsetBottom:0,scrollTop:0,viewportHeight:0,scrollHeight:0}},Ws=nh(function(b){var g=b[0],n=g.scrollContainerState;
b=g.scrollTop;var I=g.viewportHeight,W=g.headerHeight,ia=g.footerHeight,sa=g.scrollBy;g=df(!1);var Ka=df(!0),Va=$f(),Za=$f(),lb=df(4),vb=df(0),Qb=ej(wf(Te(wf(ng(b),Ni(1),ti(!0)),wf(ng(b),Ni(1),ti(!1),gl(100))),gf()),!1),cc=ej(wf(Te(wf(sa,ti(!0)),wf(sa,ti(!1),gl(200))),gf()),!1);jg(wf(pe(ng(b),ng(vb)),je(function(Ub){return Ub[0]<=Ub[1]}),gf()),Ka);jg(wf(Ka,jh(50)),Za);I=oj(wf(pe(n,ng(I),ng(W),ng(ia),ng(lb)),Kg(function(Ub,rc){var lc,Vb,sc=rc[0],Gc=sc.scrollTop;sc=sc.scrollHeight;var Qc=rc[1],Vc={viewportHeight:Qc,
scrollTop:Gc,scrollHeight:sc};return Gc+Qc-sc>-rc[4]?(Gc>Ub.state.scrollTop?(lc="SCROLLED_DOWN",Vb=Ub.state.scrollTop-Gc):(lc="SIZE_DECREASED",Vb=Ub.state.scrollTop-Gc||Ub.scrollTopDelta),{atBottom:!0,state:Vc,atBottomBecause:lc,scrollTopDelta:Vb}):{atBottom:!1,notAtBottomBecause:Vc.scrollHeight>Ub.state.scrollHeight?"SIZE_INCREASED":Qc<Ub.state.viewportHeight?"VIEWPORT_HEIGHT_DECREASING":Gc<Ub.state.scrollTop?"SCROLLING_UPWARDS":"NOT_FULLY_SCROLLED_TO_LAST_ITEM_BOTTOM",state:Vc}},HG),gf(function(Ub,
rc){return Ub&&Ub.atBottom===rc.atBottom})));W=ej(wf(n,Kg(function(Ub,rc){var lc=rc.scrollTop,Vb=rc.scrollHeight;rc=rc.viewportHeight;return 1.01>Math.abs(Ub.scrollHeight-Vb)?{scrollTop:lc,scrollHeight:Vb,jump:0,changed:!1}:Ub.scrollTop!==lc&&1>Vb-(lc+rc)?{scrollHeight:Vb,scrollTop:lc,jump:Ub.scrollTop-lc,changed:!0}:{scrollHeight:Vb,scrollTop:lc,jump:0,changed:!0}},{scrollHeight:0,jump:0,scrollTop:0,changed:!1}),oe(function(Ub){return Ub.changed}),je(function(Ub){return Ub.jump})),0);jg(wf(I,je(function(Ub){return Ub.atBottom})),
g);jg(wf(g,jh(50)),Va);ia=df("down");jg(wf(n,je(function(Ub){return Ub.scrollTop}),gf(),Kg(function(Ub,rc){return cc(4)?{direction:Ub.direction,prevScrollTop:rc}:{direction:rc<Ub.prevScrollTop?"up":"down",prevScrollTop:rc}},{direction:"down",prevScrollTop:0}),je(function(Ub){return Ub.direction})),ia);jg(wf(n,jh(50),ti("none")),ia);n=df(0);return jg(wf(Qb,oe(function(Ub){return!Ub}),ti(0)),n),jg(wf(b,jh(100),le(Qb),oe(function(Ub){return!!Ub[1]}),Kg(function(Ub,rc){return[Ub[1],rc[0]]},[0,0]),je(function(Ub){return Ub[1]-
Ub[0]})),n),{isScrolling:Qb,isAtTop:Ka,isAtBottom:g,atBottomState:I,atTopStateChange:Za,atBottomStateChange:Va,scrollDirection:ia,atBottomThreshold:lb,atTopThreshold:vb,scrollVelocity:n,lastJumpDueToItemResize:W}},wh(Bn)),Mq=nh(function(b){var g=b[0].log;b=df(!1);var n=oj(wf(b,oe(function(I){return I}),gf()));return Cf(b,function(I){I&&g(4)("props updated",{},im.DEBUG)}),{propsReady:b,didMount:n}},wh(Rp),{singleton:!0}),dw=nh(function(b){var g=b[0],n=g.sizes,I=g.listRefresh;g=g.defaultItemSize;var W=
b[1].scrollTop,ia=b[2].scrollToIndex;b=b[3].didMount;var sa=df(!0),Ka=df(0);return jg(wf(b,le(Ka),oe(function(Va){return!!Va[1]}),ti(!1)),sa),Cf(wf(pe(I,b),le(sa,n,g),oe(function(Va){var Za=Va[1],lb=Va[3];return Va[0][1]&&(Va[2].sizeTree!==Li||void 0!==lb)&&!Za}),le(Ka)),function(Va){var Za=Va[1];setTimeout(function(){Ri(W,function(){sa(0,!0)});ia(0,Za)})}),{scrolledToInitialItem:sa,initialTopMostItemIndex:Ka}},wh(qp,Bn,Vs,Mq),{singleton:!0}),IG=nh(function(b){function g(rc){Va(0,{index:"LAST",align:"end",
behavior:rc})}function n(rc){var lc=Ri(Ka,function(Vb){!rc||Vb.atBottom||"SIZE_INCREASED"!==Vb.notAtBottomBecause||Ub||(vb(4)("scrolling to bottom due to increased size",{},im.DEBUG),g("auto"))});setTimeout(lc,100)}var I=b[0],W=I.totalCount,ia=I.listRefresh,sa=b[1];I=sa.isAtBottom;var Ka=sa.atBottomState,Va=b[2].scrollToIndex;sa=b[3].scrolledToInitialItem;var Za=b[4],lb=Za.propsReady;Za=Za.didMount;var vb=b[5].log;b=b[6].scrollingInProgress;var Qb=df(!1),cc=$f(),Ub=null;return Cf(wf(pe(wf(ng(W),Ni(1)),
Za),le(ng(Qb),I,sa,b),je(function(rc){var lc=rc[0],Vb=lc[0];lc=lc[1]&&rc[3];var sc="auto";lc&&(sc=rc[1],rc=rc[2]||rc[4],sc="function"==typeof sc?Zb(sc(rc)):rc&&Zb(sc),lc=lc&&!!sc);return{totalCount:Vb,shouldFollow:lc,followOutputBehavior:sc}}),oe(function(rc){return rc.shouldFollow})),function(rc){var lc=rc.totalCount,Vb=rc.followOutputBehavior;Ub&&(Ub(),Ub=null);Ub=Ri(ia,function(){vb(4)("following output to ",{totalCount:lc},im.DEBUG);g(Vb);Ub=null})}),Cf(wf(pe(ng(Qb),W,lb),oe(function(rc){return rc[0]&&
rc[2]}),Kg(function(rc,lc){lc=lc[1];return{refreshed:rc.value===lc,value:lc}},{refreshed:!1,value:0}),oe(function(rc){return rc.refreshed}),le(Qb,W)),function(rc){n(!1!==rc[1])}),Cf(cc,function(){n(!1!==Qb(4))}),Cf(pe(ng(Qb),Ka),function(rc){var lc=rc[1];rc[0]&&!lc.atBottom&&"VIEWPORT_HEIGHT_DECREASING"===lc.notAtBottomBecause&&g("auto")}),{followOutput:Qb,autoscrollToBottom:cc}},wh(qp,Ws,Vs,dw,Mq,Rp,Bn)),mA=nh(function(b){var g=b[0],n=g.totalCount,I=g.groupIndices;g=g.sizes;var W=b[1];b=W.scrollTop;
W=W.headerHeight;var ia=$f(),sa=$f(),Ka=oj(wf(ia,je(zc)));return jg(wf(Ka,je(function(Va){return Va.totalCount})),n),jg(wf(Ka,je(function(Va){return Va.groupIndices})),I),jg(wf(pe(b,g,W),oe(function(Va){return Va[1].groupOffsetTree!==Li}),je(function(Va){return Lj(Va[1].groupOffsetTree,Math.max(Va[0]-Va[2],0),"v")[0]}),gf(),je(function(Va){return[Va]})),sa),{groupCounts:ia,topItemsIndexes:sa}},wh(qp,Bn)),ew=nh(function(b){var g=b[0];b=g.scrollTop;var n=g.viewportHeight,I=g.deviation,W=g.headerHeight,
ia=g.fixedHeaderHeight;g=$f();var sa=df(0),Ka=df(0),Va=df(0);b=ej(wf(pe(ng(b),ng(n),ng(W),ng(g,Bc),ng(Va),ng(sa),ng(ia),ng(I),ng(Ka)),je(function(Za){var lb=Za[0],vb=Za[1],Qb=Za[2],cc=Za[3],Ub=cc[0];cc=cc[1];var rc=Za[4],lc=Za[6],Vb=Za[7],sc=Za[8],Gc=lb-Vb;Za=Za[5]+lc;var Qc=Math.max(Qb-Gc,0),Vc="none",Vd="number"==typeof sc?sc:sc.top||0;sc="number"==typeof sc?sc:sc.bottom||0;return Ub-=Vb,cc+=Qb+lc,Ub+(Qb+lc)>lb+Za-Vd&&(Vc="up"),cc-Vb<lb-Qc+vb+sc&&(Vc="down"),"none"!==Vc?[Math.max(Gc-Qb-Md(rc,"top",
Vc)-Vd,0),Gc-Qc-lc+vb+Md(rc,"bottom",Vc)+sc]:null}),oe(function(Za){return null!=Za}),gf(Bc)),[0,0]);return{listBoundary:g,overscan:Va,topListHeight:sa,increaseViewportBy:Ka,visibleRange:b}},wh(Bn),{singleton:!0}),nA={items:[],topItems:[],offsetTop:0,offsetBottom:0,top:0,bottom:0,topListHeight:0,totalCount:0,firstItemIndex:0},Fr=nh(function(b){var g=b[0],n=g.sizes,I=g.totalCount,W=g.data,ia=g.firstItemIndex,sa=g.gap,Ka=b[1],Va=b[2],Za=Va.visibleRange;g=Va.listBoundary;Va=Va.topListHeight;var lb=b[3],
vb=lb.scrolledToInitialItem,Qb=lb.initialTopMostItemIndex;lb=b[4].topListHeight;var cc=b[5],Ub=b[6].didMount,rc=b[7].recalcInProgress;b=df([]);var lc=$f();jg(Ka.topItemsIndexes,b);n=ej(wf(pe(Ub,rc,ng(Za,Bc),ng(I),ng(n),ng(Qb),vb,ng(b),ng(ia),ng(sa),W),oe(function(Vb){return Vb[0]&&!Vb[1]}),je(function(Vb){var sc=Vb[2],Gc=sc[0],Qc=sc[1];sc=Vb[3];var Vc=Vb[5],Vd=Vb[6],$d=Vb[7],Ee=Vb[8],Ne=Vb[9],uf=Vb[10];Vb=Vb[4];var rf=Vb.sizeTree,ff=Vb.offsetTree;if(0===sc||0===Gc&&0===Qc)return Fg({},nA,{totalCount:sc});
if(rf===Li)return Be(function(mf,lf,Vg){return lf.groupOffsetTree!==Li?(mf=rb(mf,lf),[{index:Lj(lf.groupOffsetTree,mf)[0],size:0,offset:0},{index:mf,size:0,offset:0,data:Vg&&Vg[0]}]):[{index:mf,size:0,offset:0,data:Vg&&Vg[0]}]}("number"==typeof Vc?Vc:"LAST"===Vc.index?sc-1:Vc.index,Vb,uf),[],sc,Ne,Vb,Ee);Vc=[];if(0<$d.length){var Ge,Ad=$d[0],fd=$d[$d.length-1],ld=0;for(rf=dk(zm(rf,Ad,fd));!(Ge=rf()).done;){var nd=Ge.value;Ge=nd.value;var Ed=Math.min(nd.end,fd);for(nd=Math.max(nd.start,Ad);nd<=Ed;nd++)Vc.push({index:nd,
size:Ge,offset:ld,data:uf&&uf[nd]}),ld+=Ge}}if(!Vd)return Be([],Vc,sc,Ne,Vb,Ee);var xe=0<$d.length?$d[$d.length-1]+1:0,Fe=function(mf,lf,Vg,Ig){return void 0===Ig&&(Ig=0),0<Ig&&(lf=Math.max(lf,mf[ui(mf,Ig,Xl)].offset)),Pm((Nk=Vg,Do=ui(oi=mf,lf,Xk=y),Qr=ui(oi,Nk,Xk,Do),oi.slice(Do,Qr+1)),U);var oi,Nk,Xk,Do,Qr}(ff,Gc,Qc,xe);if(0===Fe.length)return null;var sf=sc-1;return Be(ii([],function(mf){for(var lf,Vg=dk(Fe);!(lf=Vg()).done;){var Ig=lf.value,oi=Ig.value;lf=oi.offset;var Nk=Ig.start,Xk=oi.size;
oi.offset<Gc&&(oi=(Nk+=Math.floor((Gc-oi.offset+Ne)/(Xk+Ne)))-Ig.start,lf+=oi*Xk+oi*Ne);Nk<xe&&(lf+=(xe-Nk)*Xk,Nk=xe);for(Ig=Math.min(Ig.end,sf);Nk<=Ig&&!(lf>=Qc);Nk++)mf.push({index:Nk,size:Xk,offset:lf,data:uf&&uf[Nk]}),lf+=Xk+Ne}}),Vc,sc,Ne,Vb,Ee)}),oe(function(Vb){return null!==Vb}),gf()),nA);return jg(wf(W,oe(function(Vb){return void 0!==Vb}),je(function(Vb){return Vb.length})),I),jg(wf(n,je(function(Vb){return Vb.topListHeight})),lb),jg(lb,Va),jg(wf(n,je(function(Vb){return[Vb.top,Vb.bottom]})),
g),jg(wf(n,je(function(Vb){return Vb.items})),lc),Fg({listState:n,topItemsIndexes:b,endReached:oj(wf(n,oe(function(Vb){return 0<Vb.items.length}),le(I,W),oe(function(Vb){var sc=Vb[0].items;return sc[sc.length-1].originalIndex===Vb[1]-1}),je(function(Vb){return[Vb[1]-1,Vb[2]]}),gf(Bc),je(function(Vb){return Vb[0]}))),startReached:oj(wf(n,jh(200),oe(function(Vb){var sc=Vb.items;return 0<sc.length&&sc[0].originalIndex===Vb.topItems.length}),je(function(Vb){return Vb.items[0].index}),gf())),rangeChanged:oj(wf(n,
oe(function(Vb){return 0<Vb.items.length}),je(function(Vb){Vb=Vb.items;for(var sc=0,Gc=Vb.length-1;"group"===Vb[sc].type&&sc<Gc;)sc++;for(;"group"===Vb[Gc].type&&Gc>sc;)Gc--;return{startIndex:Vb[sc].index,endIndex:Vb[Gc].index}}),gf(Id))),itemsRendered:lc},cc)},wh(qp,mA,ew,dw,Vs,Ws,Mq,cw),{singleton:!0}),JG=nh(function(b){var g=b[0],n=g.sizes,I=g.firstItemIndex,W=g.data;g=g.gap;var ia=b[1].listState;b=b[2].didMount;var sa=df(0);return jg(wf(b,le(sa),oe(function(Ka){return 0!==Ka[1]}),le(n,I,g,W),
je(function(Ka){var Va=Ka[0][1],Za=Ka[1],lb=Ka[2],vb=Ka[3];Ka=Ka[4];var Qb=void 0===Ka?[]:Ka;Ka=0;if(0<Za.groupIndices.length)for(var cc,Ub=dk(Za.groupIndices);!((cc=Ub()).done||cc.value-Ka>=Va);)Ka++;Va+=Ka;return Be(Array.from({length:Va}).map(function(rc,lc){return{index:lc,size:0,offset:0,data:Qb[lc]}}),[],Va,vb,Za,lb)})),ia),{initialItemCount:sa}},wh(qp,Fr,Mq),{singleton:!0}),oA=nh(function(b){b=b[0].scrollVelocity;var g=df(!1),n=$f(),I=df(!1);return jg(wf(b,le(I,g,n),oe(function(W){return!!W[1]}),
je(function(W){var ia=W[0],sa=W[1],Ka=W[2];W=W[3];var Va=sa.enter;if(Ka){if((0,sa.exit)(ia,W))return!1}else if(Va(ia,W))return!0;return Ka}),gf()),g),Cf(wf(pe(g,b,n),le(I)),function(W){var ia=W[0];W=W[1];return ia[0]&&W&&W.change&&W.change(ia[1],ia[2])}),{isSeeking:g,scrollSeekConfiguration:I,scrollVelocity:b,scrollSeekRangeChanged:n}},wh(Ws),{singleton:!0}),KG=nh(function(b){b=b[0].topItemsIndexes;var g=df(0);return jg(wf(g,oe(function(n){return 0<n}),je(function(n){return Array.from({length:n}).map(function(I,
W){return W})})),b),{topItemCount:g}},wh(Fr)),fw=nh(function(b){var g=b[0],n=g.footerHeight,I=g.headerHeight,W=g.fixedHeaderHeight;g=g.fixedFooterHeight;var ia=b[1].listState;b=$f();n=ej(wf(pe(n,g,I,W,ia),je(function(sa){var Ka=sa[4];return sa[0]+sa[1]+sa[2]+sa[3]+Ka.offsetBottom+Ka.bottom})),0);return jg(ng(n),b),{totalListHeight:n,totalListHeightChanged:b}},wh(Bn,Fr),{singleton:!0}),LG=Ef(function(){return/iP(ad|hone|od).+Version\/[\d.]+.*Safari/i.test(navigator.userAgent)}),MG=nh(function(b){function g(lc){0<
lc?(I(0,{top:-lc,behavior:"auto"}),ia(0,0)):(ia(0,0),I(0,{top:-lc,behavior:"auto"}))}var n=b[0],I=n.scrollBy,W=n.scrollTop,ia=n.deviation,sa=n.scrollingInProgress,Ka=b[1];n=Ka.isScrolling;var Va=Ka.isAtBottom,Za=Ka.scrollDirection,lb=b[3],vb=lb.beforeUnshiftWith,Qb=lb.shiftWithOffset,cc=lb.sizes;lb=lb.gap;var Ub=b[4].log,rc=b[5].recalcInProgress;b=oj(wf(b[2].listState,le(Ka.lastJumpDueToItemResize),Kg(function(lc,Vb){var sc=lc[1],Gc=Vb[0],Qc=Gc.items,Vc=Gc.totalCount;Gc=Gc.bottom+Gc.offsetBottom;
var Vd=0;return lc[2]===Vc&&0<sc.length&&0<Qc.length&&(0===Qc[0].originalIndex&&0===sc[0].originalIndex||0!=(Vd=Gc-lc[3])&&(Vd+=Vb[1])),[Vd,Qc,Vc,Gc]},[0,[],0,0]),oe(function(lc){return 0!==lc[0]}),le(W,Za,sa,Va,Ub),oe(function(lc){return!lc[3]&&0!==lc[1]&&"up"===lc[2]}),je(function(lc){var Vb=lc[0][0];return(0,lc[5])("Upward scrolling compensation",{amount:Vb},im.DEBUG),Vb})));return Cf(wf(b,le(ia,n)),function(lc){var Vb=lc[0],sc=lc[1];lc[2]&&LG()?ia(0,sc-Vb):g(-Vb)}),Cf(wf(pe(ej(n,!1),ia,rc),oe(function(lc){return!lc[0]&&
!lc[2]&&0!==lc[1]}),je(function(lc){return lc[1]}),jh(1)),g),jg(wf(Qb,je(function(lc){return{top:-lc}})),I),Cf(wf(vb,le(cc,lb),je(function(lc){var Vb=lc[0];return Vb*lc[1].lastSize+Vb*lc[2]})),function(lc){ia(0,lc);requestAnimationFrame(function(){ym(I,{top:lc});requestAnimationFrame(function(){ia(0,0);rc(0,!1)})})}),{deviation:ia}},wh(Bn,Ws,Fr,qp,Rp,cw)),NG=nh(function(b){var g=b[0].totalListHeight,n=b[1].didMount,I=b[2].scrollTo;b=df(0);return Cf(wf(n,le(b),oe(function(W){return 0!==W[1]}),je(function(W){return{top:W[1]}})),
function(W){Ri(wf(g,oe(function(ia){return 0!==ia})),function(){setTimeout(function(){I(0,W)})})}),{initialScrollTop:b}},wh(fw,Mq,Bn),{singleton:!0}),OG=nh(function(b){var g=b[0].viewportHeight;b=b[1].totalListHeight;var n=df(!1);return{alignToBottom:n,paddingTopAddition:ej(wf(pe(n,g,b),oe(function(I){return I[0]}),je(function(I){return Math.max(0,I[1]-I[2])}),gf()),0)}},wh(Bn,fw),{singleton:!0}),pA=nh(function(b){var g=b[0];b=g.scrollTo;g=g.scrollContainerState;var n=$f(),I=$f(),W=$f(),ia=df(!1),
sa=df(void 0);return jg(wf(pe(n,I),je(function(Ka){var Va=Ka[0];return{scrollTop:Math.max(0,Va.scrollTop-Ka[1].offsetTop),scrollHeight:Va.scrollHeight,viewportHeight:Va.viewportHeight}})),g),jg(wf(b,le(I),je(function(Ka){var Va=Ka[0];return Fg({},Va,{top:Va.top+Ka[1].offsetTop})})),W),{useWindowScroll:ia,customScrollParent:sa,windowScrollContainerState:n,windowViewportRect:I,windowScrollTo:W}},wh(Bn)),PG=["done","behavior","align"],QG=nh(function(b){var g=b[0],n=g.sizes,I=g.totalCount;g=g.gap;var W=
b[1],ia=W.scrollTop,sa=W.viewportHeight,Ka=W.headerHeight,Va=W.fixedHeaderHeight,Za=W.fixedFooterHeight,lb=W.scrollingInProgress;b=b[2].scrollToIndex;W=$f();return jg(wf(W,le(n,sa,I,Ka,Va,Za,ia),le(g),je(function(vb){var Qb=vb[0],cc=Qb[0],Ub=Qb[1],rc=Qb[2],lc=Qb[3],Vb=Qb[4],sc=Qb[5],Gc=Qb[6];Qb=Qb[7];var Qc=vb[1];vb=cc.done;var Vc=cc.behavior,Vd=cc.align,$d=Pf(cc,PG),Ee=null;cc=ab(cc,Ub,lc-1);Vb=Fa(cc,Ub.offsetTree,Qc)+Vb+sc;return Vb<Qb+sc?Ee=Fg({},$d,{behavior:Vc,align:null!=Vd?Vd:"start"}):Vb+
Lj(Ub.sizeTree,cc)[1]>Qb+rc-Gc&&(Ee=Fg({},$d,{behavior:Vc,align:null!=Vd?Vd:"end"})),Ee?vb&&Ri(wf(lb,Ni(1),oe(function(Ne){return!1===Ne})),vb):vb&&vb(),Ee}),oe(function(vb){return null!==vb})),b),{scrollIntoView:W}},wh(qp,Bn,Vs,Fr,Rp),{singleton:!0}),RG=["listState","topItemsIndexes"],SG=nh(function(b){return Fg({},b[0],b[1],b[2],b[3],b[4],b[5],b[6],b[7],b[8])},wh(ew,JG,Mq,oA,fw,NG,OG,pA,QG)),gw=nh(function(b){var g=b[0],n=g.totalCount,I=g.sizeRanges,W=g.fixedItemSize,ia=g.defaultItemSize,sa=g.trackItemSizes,
Ka=g.itemSize,Va=g.data,Za=g.firstItemIndex,lb=g.groupIndices,vb=g.statefulTotalCount;g=g.gap;var Qb=b[1],cc=Qb.initialTopMostItemIndex;Qb=Qb.scrolledToInitialItem;var Ub=b[2],rc=b[3],lc=b[4],Vb=lc.listState,sc=lc.topItemsIndexes;lc=Pf(lc,RG);var Gc=b[5].scrollToIndex,Qc=b[7].topItemCount,Vc=b[8].groupCounts,Vd=b[9];b=b[10];return jg(lc.rangeChanged,Vd.scrollSeekRangeChanged),jg(wf(Vd.windowViewportRect,je(function($d){return $d.visibleHeight})),Ub.viewportHeight),Fg({totalCount:n,data:Va,firstItemIndex:Za,
sizeRanges:I,initialTopMostItemIndex:cc,scrolledToInitialItem:Qb,topItemsIndexes:sc,topItemCount:Qc,groupCounts:Vc,fixedItemHeight:W,defaultItemHeight:ia,gap:g},rc,{statefulTotalCount:vb,listState:Vb,scrollToIndex:Gc,trackItemSizes:sa,itemSize:Ka,groupIndices:lb},lc,Vd,Ub,b)},wh(qp,dw,Bn,IG,Fr,Vs,MG,KG,mA,SG,Rp)),qA=Ef(function(){if("undefined"==typeof document)return"sticky";var b=document.createElement("div");return b.style.position="-webkit-sticky","-webkit-sticky"===b.style.position?"-webkit-sticky":
"sticky"}),nu=ch.createContext(void 0),rA=ch.createContext(void 0),TG=["placeholder"],UG=["style","children"],VG=["style","children"],WG=nh(function(){var b=df(function(Va){return"Item "+Va}),g=df(null),n=df(function(Va){return"Group "+Va}),I=df({}),W=df(lj),ia=df("div"),sa=df(Zk),Ka=function(Va,Za){return void 0===Za&&(Za=null),ej(wf(I,je(function(lb){return lb[Va]}),gf()),Za)};return{context:g,itemContent:b,groupContent:n,components:I,computeItemKey:W,headerFooterTag:ia,scrollerRef:sa,FooterComponent:Ka("Footer"),
HeaderComponent:Ka("Header"),TopItemListComponent:Ka("TopItemList"),ListComponent:Ka("List","div"),ItemComponent:Ka("Item","div"),GroupComponent:Ka("Group","div"),ScrollerComponent:Ka("Scroller","div"),EmptyPlaceholder:Ka("EmptyPlaceholder"),ScrollSeekPlaceholder:Ka("ScrollSeekPlaceholder")}}),XG=nh(function(b){function g(W,ia,sa){jg(wf(W,le(I.components),je(function(Ka){var Va,Za=Ka[0];Ka=Ka[1];return console.warn("react-virtuoso: "+sa+" property is deprecated. Pass components."+ia+" instead."),
Fg({},Ka,((Va={})[ia]=Za,Va))})),I.components)}var n=b[0],I=b[1];b={item:ag(I.itemContent,"Rename the %citem%c prop to %citemContent."),group:ag(I.groupContent,"Rename the %cgroup%c prop to %cgroupContent."),topItems:ag(n.topItemCount,"Rename the %ctopItems%c prop to %ctopItemCount."),itemHeight:ag(n.fixedItemHeight,"Rename the %citemHeight%c prop to %cfixedItemHeight."),scrollingStateChange:ag(n.isScrolling,"Rename the %cscrollingStateChange%c prop to %cisScrolling."),adjustForPrependedItems:$f(),
maxHeightCacheSize:$f(),footer:$f(),header:$f(),HeaderContainer:$f(),FooterContainer:$f(),ItemContainer:$f(),ScrollContainer:$f(),GroupContainer:$f(),ListContainer:$f(),emptyComponent:$f(),scrollSeek:$f()};return Cf(b.adjustForPrependedItems,function(){console.warn("react-virtuoso: adjustForPrependedItems is no longer supported. Use the firstItemIndex property instead - https://virtuoso.dev/prepend-items.","color: red;","color: inherit;","color: blue;")}),Cf(b.maxHeightCacheSize,function(){console.warn("react-virtuoso: maxHeightCacheSize is no longer necessary. Setting it has no effect - remove it from your code.")}),
Cf(b.HeaderContainer,function(){console.warn("react-virtuoso: HeaderContainer is deprecated. Use headerFooterTag if you want to change the wrapper of the header component and pass components.Header to change its contents.")}),Cf(b.FooterContainer,function(){console.warn("react-virtuoso: FooterContainer is deprecated. Use headerFooterTag if you want to change the wrapper of the footer component and pass components.Footer to change its contents.")}),Cf(b.scrollSeek,function(W){var ia=W.placeholder;
W=Pf(W,TG);console.warn("react-virtuoso: scrollSeek property is deprecated. Pass scrollSeekConfiguration and specify the placeholder in components.ScrollSeekPlaceholder instead.");ia=Fg({},(0,I.components)(4),{ScrollSeekPlaceholder:ia});(0,I.components)(0,ia);(0,n.scrollSeekConfiguration)(0,W)}),g(b.footer,"Footer","footer"),g(b.header,"Header","header"),g(b.ItemContainer,"Item","ItemContainer"),g(b.ListContainer,"List","ListContainer"),g(b.ScrollContainer,"Scroller","ScrollContainer"),g(b.emptyComponent,
"EmptyPlaceholder","emptyComponent"),g(b.GroupContainer,"Group","GroupContainer"),Fg({},n,I,b)},wh(gw,WG)),YG=function(b){return ch.createElement("div",{style:{height:b.height}})},ZG={position:qA(),zIndex:1,overflowAnchor:"none"},$G={overflowAnchor:"none"},sA=ch.memo(function(b){b=b.showTopList;b=void 0!==b&&b;var g=dj("listState"),n=bo("sizeRanges"),I=dj("useWindowScroll"),W=dj("customScrollParent"),ia=bo("windowScrollContainerState"),sa=bo("scrollContainerState");I=W||I?ia:sa;var Ka=dj("itemContent"),
Va=dj("context"),Za=dj("groupContent");ia=dj("trackItemSizes");sa=dj("itemSize");var lb=dj("log"),vb=bo("gap");n=Dh(n,sa,ia,b?Zk:I,lb,vb,W).callbackRef;W=ch.useState(0);var Qb=W[0],cc=W[1];hw("deviation",function(Qc){Qb!==Qc&&cc(Qc)});W=dj("EmptyPlaceholder");var Ub=dj("ScrollSeekPlaceholder")||YG;I=dj("ListComponent");var rc=dj("ItemComponent"),lc=dj("GroupComponent"),Vb=dj("computeItemKey"),sc=dj("isSeeking"),Gc=0<dj("groupIndices").length;ia=dj("paddingTopAddition");ia=b?{}:{boxSizing:"border-box",
paddingTop:g.offsetTop+ia,paddingBottom:g.offsetBottom,marginTop:Qb};return!b&&0===g.totalCount&&W?(0,ci.createElement)(W,og(W,Va)):(0,ci.createElement)(I,Fg({},og(I,Va),{ref:n,style:ia,"data-test-id":b?"virtuoso-top-item-list":"virtuoso-item-list"}),(b?g.topItems:g.items).map(function(Qc){var Vc=Qc.originalIndex,Vd=Vb(Vc+g.firstItemIndex,Qc.data,Va);return sc?(0,ci.createElement)(Ub,Fg({},og(Ub,Va),{key:Vd,index:Qc.index,height:Qc.size,type:Qc.type||"item"},"group"===Qc.type?{}:{groupIndex:Qc.groupIndex})):
"group"===Qc.type?(0,ci.createElement)(lc,Fg({},og(lc,Va),{key:Vd,"data-index":Vc,"data-known-size":Qc.size,"data-item-index":Qc.index,style:ZG}),Za(Qc.index)):(0,ci.createElement)(rc,Fg({},og(rc,Va),{key:Vd,"data-index":Vc,"data-known-size":Qc.size,"data-item-index":Qc.index,"data-item-group-index":Qc.groupIndex,style:$G}),Gc?Ka(Qc.index,Qc.groupIndex,Qc.data,Va):Ka(Qc.index,Qc.data,Va))}))}),aH={height:"100%",outline:"none",overflowY:"auto",position:"relative",WebkitOverflowScrolling:"touch"},Gr=
{width:"100%",height:"100%",position:"absolute",top:0},bH={width:"100%",position:qA(),top:0},cH=ch.memo(function(){var b=dj("HeaderComponent"),g=bo("headerHeight"),n=dj("headerFooterTag"),I=Jj(function(ia){return g(qh(ia,"height"))}),W=dj("context");return b?(0,ci.createElement)(n,{ref:I},(0,ci.createElement)(b,og(b,W))):null}),dH=ch.memo(function(){var b=dj("FooterComponent"),g=bo("footerHeight"),n=dj("headerFooterTag"),I=Jj(function(ia){return g(qh(ia,"height"))}),W=dj("context");return b?(0,ci.createElement)(n,
{ref:I},(0,ci.createElement)(b,og(b,W))):null}),eH=function(b){b=b.children;var g=(0,ci.useContext)(nu),n=bo("viewportHeight"),I=bo("fixedItemHeight"),W=Jj(ri(n,function(ia){return qh(ia,"height")}));return ch.useEffect(function(){g&&(n(g.viewportHeight),I(g.itemHeight))},[g,n,I]),ch.createElement("div",{style:Gr,ref:W,"data-viewport-type":"element"},b)},fH=function(b){b=b.children;var g=(0,ci.useContext)(nu),n=bo("windowViewportRect"),I=bo("fixedItemHeight"),W=dj("customScrollParent");W=Cg(n,W);
return ch.useEffect(function(){g&&(I(g.itemHeight),n({offsetTop:0,visibleHeight:g.viewportHeight,visibleWidth:100}))},[g,n,I]),ch.createElement("div",{ref:W,style:Gr,"data-viewport-type":"window"},b)},gH=function(b){b=b.children;var g=dj("TopItemListComponent"),n=dj("headerHeight");n=Fg({},bH,{marginTop:n+"px"});var I=dj("context");return(0,ci.createElement)(g||"div",{style:n,context:I},b)},ou=tl(XG,{required:{},optional:{context:"context",followOutput:"followOutput",firstItemIndex:"firstItemIndex",
itemContent:"itemContent",groupContent:"groupContent",overscan:"overscan",increaseViewportBy:"increaseViewportBy",totalCount:"totalCount",topItemCount:"topItemCount",initialTopMostItemIndex:"initialTopMostItemIndex",components:"components",groupCounts:"groupCounts",atBottomThreshold:"atBottomThreshold",atTopThreshold:"atTopThreshold",computeItemKey:"computeItemKey",defaultItemHeight:"defaultItemHeight",fixedItemHeight:"fixedItemHeight",itemSize:"itemSize",scrollSeekConfiguration:"scrollSeekConfiguration",
headerFooterTag:"headerFooterTag",data:"data",initialItemCount:"initialItemCount",initialScrollTop:"initialScrollTop",alignToBottom:"alignToBottom",useWindowScroll:"useWindowScroll",customScrollParent:"customScrollParent",scrollerRef:"scrollerRef",logLevel:"logLevel",react18ConcurrentRendering:"react18ConcurrentRendering",item:"item",group:"group",topItems:"topItems",itemHeight:"itemHeight",scrollingStateChange:"scrollingStateChange",maxHeightCacheSize:"maxHeightCacheSize",footer:"footer",header:"header",
ItemContainer:"ItemContainer",ScrollContainer:"ScrollContainer",ListContainer:"ListContainer",GroupContainer:"GroupContainer",emptyComponent:"emptyComponent",HeaderContainer:"HeaderContainer",FooterContainer:"FooterContainer",scrollSeek:"scrollSeek"},methods:{scrollToIndex:"scrollToIndex",scrollIntoView:"scrollIntoView",scrollTo:"scrollTo",scrollBy:"scrollBy",adjustForPrependedItems:"adjustForPrependedItems",autoscrollToBottom:"autoscrollToBottom"},events:{isScrolling:"isScrolling",endReached:"endReached",
startReached:"startReached",rangeChanged:"rangeChanged",atBottomStateChange:"atBottomStateChange",atTopStateChange:"atTopStateChange",totalListHeightChanged:"totalListHeightChanged",itemsRendered:"itemsRendered",groupIndices:"groupIndices"}},ch.memo(function(b){var g=dj("useWindowScroll"),n=0<dj("topItemsIndexes").length,I=dj("customScrollParent"),W=I||g?fH:eH;return ch.createElement(I||g?jH:iH,Fg({},b),ch.createElement(W,null,ch.createElement(cH,null),ch.createElement(sA,null),ch.createElement(dH,
null)),n&&ch.createElement(gH,null,ch.createElement(sA,{showTopList:!0})))})),hH=ou.Component,bo=ou.usePublisher,dj=ou.useEmitterValue,hw=ou.useEmitter,iH=Sh({usePublisher:bo,useEmitterValue:dj,useEmitter:hw}),jH=ji({usePublisher:bo,useEmitterValue:dj,useEmitter:hw}),tA={items:[],offsetBottom:0,offsetTop:0,top:0,bottom:0,itemHeight:0,itemWidth:0},kH={items:[{index:0}],offsetBottom:0,offsetTop:0,top:0,bottom:0,itemHeight:0,itemWidth:0},uA=Math.round,vA=Math.ceil,pu=Math.floor,iw=Math.min,Hr=Math.max,
lH=nh(function(b){var g=b[0],n=g.overscan,I=g.visibleRange,W=g.listBoundary,ia=b[1];g=ia.scrollTop;var sa=ia.viewportHeight,Ka=ia.scrollBy,Va=ia.scrollTo,Za=ia.smoothScrollTargetReached,lb=ia.scrollContainerState,vb=ia.footerHeight;ia=ia.headerHeight;var Qb=b[2],cc=b[3],Ub=b[4],rc=Ub.propsReady,lc=Ub.didMount,Vb=b[5];Ub=Vb.windowViewportRect;var sc=Vb.windowScrollTo,Gc=Vb.useWindowScroll,Qc=Vb.customScrollParent;Vb=Vb.windowScrollContainerState;b=b[6];var Vc=df(0),Vd=df(0),$d=df(tA),Ee=df({height:0,
width:0}),Ne=df({height:0,width:0}),uf=$f(),rf=$f(),ff=df(0),Ge=df(void 0),Ad=df({row:0,column:0});jg(wf(pe(lc,Vd,Ge),oe(function(fd){return 0!==fd[1]}),je(function(fd){return{items:Jh(0,fd[1]-1,fd[2]),top:0,bottom:0,offsetBottom:0,offsetTop:0,itemHeight:0,itemWidth:0}})),$d);jg(wf(pe(ng(Vc),I,ng(Ad,cg),ng(Ne,function(fd,ld){return fd&&fd.width===ld.width&&fd.height===ld.height}),Ge),le(Ee),je(function(fd){var ld=fd[0],nd=ld[0],Ed=ld[1],xe=Ed[0],Fe=Ed[1],sf=ld[2],mf=ld[3],lf=ld[4],Vg=fd[1];fd=sf.row;
var Ig=sf.column;ld=mf.height;Ed=mf.width;var oi=Vg.width;if(0===nd||0===oi)return tA;if(0===Ed)return Fg({},kH,{items:Jh(0,0,lf)});Ig=Hr(1,pu((oi+Ig)/(Ed+Ig)));xe=Ig*pu((xe+fd)/(ld+fd));Fe=Ig*vA((Fe+fd)/(ld+fd))-1;Fe=iw(nd-1,Hr(Fe,Ig-1));xe=Jh(iw(Fe,Hr(0,xe)),Fe,lf);mf=Of(Vg,sf,mf,xe);sf=mf.top;mf=mf.bottom;nd=vA(nd/Ig);return{items:xe,offsetTop:sf,offsetBottom:nd*ld+(nd-1)*fd-mf,top:sf,bottom:mf,itemHeight:ld,itemWidth:Ed}})),$d);jg(wf(Ge,oe(function(fd){return void 0!==fd}),je(function(fd){return fd.length})),
Vc);jg(wf(Ee,je(function(fd){return fd.height})),sa);jg(wf(pe(Ee,Ne,$d,Ad),je(function(fd){fd=Of(fd[0],fd[3],fd[1],fd[2].items);return[fd.top,fd.bottom]}),gf(Bc)),W);I=oj(wf(ng($d),oe(function(fd){return 0<fd.items.length}),le(Vc),oe(function(fd){var ld=fd[0].items;return ld[ld.length-1].index===fd[1]-1}),je(function(fd){return fd[1]-1}),gf()));W=oj(wf(ng($d),oe(function(fd){fd=fd.items;return 0<fd.length&&0===fd[0].index}),ti(0),gf()));sa=oj(wf(ng($d),oe(function(fd){return 0<fd.items.length}),je(function(fd){fd=
fd.items;return{startIndex:fd[0].index,endIndex:fd[fd.length-1].index}}),gf(Id)));jg(sa,cc.scrollSeekRangeChanged);jg(wf(uf,le(Ee,Ne,Vc,Ad),je(function(fd){var ld=fd[1],nd=fd[2],Ed=fd[3],xe=fd[4],Fe=ub(fd[0]);fd=Fe.align;var sf=Fe.behavior,mf=Fe.offset;Fe=Fe.index;"LAST"===Fe&&(Fe=Ed-1);Ed=xh(ld,xe,nd,Hr(0,Fe,iw(Ed-1,Fe)));return"end"===fd?Ed=uA(Ed-ld.height+nd.height):"center"===fd&&(Ed=uA(Ed-ld.height/2+nd.height/2)),mf&&(Ed+=mf),{top:Ed,behavior:sf}})),Va);lc=ej(wf($d,je(function(fd){return fd.offsetBottom+
fd.bottom})),0);return jg(wf(Ub,je(function(fd){return{width:fd.visibleWidth,height:fd.visibleHeight}})),Ee),Fg({data:Ge,totalCount:Vc,viewportDimensions:Ee,itemDimensions:Ne,scrollTop:g,scrollHeight:rf,overscan:n,scrollBy:Ka,scrollTo:Va,scrollToIndex:uf,smoothScrollTargetReached:Za,windowViewportRect:Ub,windowScrollTo:sc,useWindowScroll:Gc,customScrollParent:Qc,windowScrollContainerState:Vb,deviation:ff,scrollContainerState:lb,footerHeight:vb,headerHeight:ia,initialItemCount:Vd,gap:Ad},cc,{gridState:$d,
totalListHeight:lc},Qb,{startReached:W,endReached:I,rangeChanged:sa,propsReady:rc},b)},wh(ew,Bn,Ws,oA,Mq,pA,Rp)),mH=["placeholder"],nH=nh(function(){var b=df(function(Za){return"Item "+Za}),g=df({}),n=df(null),I=df("virtuoso-grid-item"),W=df("virtuoso-grid-list"),ia=df(lj),sa=df("div"),Ka=df(Zk),Va=function(Za,lb){return void 0===lb&&(lb=null),ej(wf(g,je(function(vb){return vb[Za]}),gf()),lb)};return{context:n,itemContent:b,components:g,computeItemKey:ia,itemClassName:I,listClassName:W,headerFooterTag:sa,
scrollerRef:Ka,FooterComponent:Va("Footer"),HeaderComponent:Va("Header"),ListComponent:Va("List","div"),ItemComponent:Va("Item","div"),ScrollerComponent:Va("Scroller","div"),ScrollSeekPlaceholder:Va("ScrollSeekPlaceholder","div")}}),oH=nh(function(b){function g(W,ia,sa){jg(wf(W,le(I.components),je(function(Ka){var Va,Za=Ka[0];Ka=Ka[1];return console.warn("react-virtuoso: "+sa+" property is deprecated. Pass components."+ia+" instead."),Fg({},Ka,((Va={})[ia]=Za,Va))})),I.components)}var n=b[0],I=b[1];
b={item:ag(I.itemContent,"Rename the %citem%c prop to %citemContent."),ItemContainer:$f(),ScrollContainer:$f(),ListContainer:$f(),emptyComponent:$f(),scrollSeek:$f()};return Cf(b.scrollSeek,function(W){var ia=W.placeholder;W=Pf(W,mH);console.warn("react-virtuoso: scrollSeek property is deprecated. Pass scrollSeekConfiguration and specify the placeholder in components.ScrollSeekPlaceholder instead.");ia=Fg({},(0,I.components)(4),{ScrollSeekPlaceholder:ia});(0,I.components)(0,ia);(0,n.scrollSeekConfiguration)(0,
W)}),g(b.ItemContainer,"Item","ItemContainer"),g(b.ListContainer,"List","ListContainer"),g(b.ScrollContainer,"Scroller","ScrollContainer"),Fg({},n,I,b)},wh(lH,nH)),pH=ch.memo(function(){var b=wl("gridState"),g=wl("listClassName"),n=wl("itemClassName"),I=wl("itemContent"),W=wl("computeItemKey"),ia=wl("isSeeking"),sa=Ao("scrollHeight"),Ka=wl("ItemComponent"),Va=wl("ListComponent"),Za=wl("ScrollSeekPlaceholder"),lb=wl("context"),vb=Ao("itemDimensions"),Qb=Ao("gap"),cc=wl("log"),Ub=Jj(function(rc){sa(rc.parentElement.parentElement.scrollHeight);
var lc=rc.firstChild;lc&&vb(lc.getBoundingClientRect());Qb({row:gh("row-gap",getComputedStyle(rc).rowGap,cc),column:gh("column-gap",getComputedStyle(rc).columnGap,cc)})});return(0,ci.createElement)(Va,Fg({ref:Ub,className:g},og(Va,lb),{style:{paddingTop:b.offsetTop,paddingBottom:b.offsetBottom}}),b.items.map(function(rc){var lc=W(rc.index,rc.data,lb);return ia?(0,ci.createElement)(Za,Fg({key:lc},og(Za,lb),{index:rc.index,height:b.itemHeight,width:b.itemWidth})):(0,ci.createElement)(Ka,Fg({},og(Ka,
lb),{className:n,"data-index":rc.index,key:lc}),I(rc.index,rc.data,lb))}))}),qH=ch.memo(function(){var b=wl("HeaderComponent"),g=Ao("headerHeight"),n=wl("headerFooterTag"),I=Jj(function(ia){return g(qh(ia,"height"))}),W=wl("context");return b?(0,ci.createElement)(n,{ref:I},(0,ci.createElement)(b,og(b,W))):null}),rH=ch.memo(function(){var b=wl("FooterComponent"),g=Ao("footerHeight"),n=wl("headerFooterTag"),I=Jj(function(ia){return g(qh(ia,"height"))}),W=wl("context");return b?(0,ci.createElement)(n,
{ref:I},(0,ci.createElement)(b,og(b,W))):null}),sH=function(b){b=b.children;var g=(0,ci.useContext)(rA),n=Ao("itemDimensions"),I=Ao("viewportDimensions"),W=Jj(function(ia){I(ia.getBoundingClientRect())});return ch.useEffect(function(){g&&(I({height:g.viewportHeight,width:g.viewportWidth}),n({height:g.itemHeight,width:g.itemWidth}))},[g,I,n]),ch.createElement("div",{style:Gr,ref:W},b)},tH=function(b){b=b.children;var g=(0,ci.useContext)(rA),n=Ao("windowViewportRect"),I=Ao("itemDimensions"),W=wl("customScrollParent");
W=Cg(n,W);return ch.useEffect(function(){g&&(I({height:g.itemHeight,width:g.itemWidth}),n({offsetTop:0,visibleHeight:g.viewportHeight,visibleWidth:g.viewportWidth}))},[g,n,I]),ch.createElement("div",{ref:W,style:Gr},b)},jw=tl(oH,{optional:{context:"context",totalCount:"totalCount",overscan:"overscan",itemContent:"itemContent",components:"components",computeItemKey:"computeItemKey",data:"data",initialItemCount:"initialItemCount",scrollSeekConfiguration:"scrollSeekConfiguration",headerFooterTag:"headerFooterTag",
listClassName:"listClassName",itemClassName:"itemClassName",useWindowScroll:"useWindowScroll",customScrollParent:"customScrollParent",scrollerRef:"scrollerRef",item:"item",ItemContainer:"ItemContainer",ScrollContainer:"ScrollContainer",ListContainer:"ListContainer",scrollSeek:"scrollSeek"},methods:{scrollTo:"scrollTo",scrollBy:"scrollBy",scrollToIndex:"scrollToIndex"},events:{isScrolling:"isScrolling",endReached:"endReached",startReached:"startReached",rangeChanged:"rangeChanged",atBottomStateChange:"atBottomStateChange",
atTopStateChange:"atTopStateChange"}},ch.memo(function(b){b=Fg({},b);var g=wl("useWindowScroll"),n=wl("customScrollParent"),I=n||g?tH:sH;return ch.createElement(n||g?vH:uH,Fg({},b),ch.createElement(I,null,ch.createElement(qH,null),ch.createElement(pH,null),ch.createElement(rH,null)))})),Ao=jw.usePublisher,wl=jw.useEmitterValue,wA=jw.useEmitter,uH=Sh({usePublisher:Ao,useEmitterValue:wl,useEmitter:wA}),vH=ji({usePublisher:Ao,useEmitterValue:wl,useEmitter:wA}),wH=nh(function(){var b=df(function(Va){return ch.createElement("td",
null,"Item $",Va)}),g=df(null),n=df(null),I=df(null),W=df({}),ia=df(lj),sa=df(Zk),Ka=function(Va,Za){return void 0===Za&&(Za=null),ej(wf(W,je(function(lb){return lb[Va]}),gf()),Za)};return{context:g,itemContent:b,fixedHeaderContent:n,fixedFooterContent:I,components:W,computeItemKey:ia,scrollerRef:sa,TableComponent:Ka("Table","table"),TableHeadComponent:Ka("TableHead","thead"),TableFooterComponent:Ka("TableFoot","tfoot"),TableBodyComponent:Ka("TableBody","tbody"),TableRowComponent:Ka("TableRow","tr"),
ScrollerComponent:Ka("Scroller","div"),EmptyPlaceholder:Ka("EmptyPlaceholder"),ScrollSeekPlaceholder:Ka("ScrollSeekPlaceholder"),FillerRow:Ka("FillerRow")}}),xH=nh(function(b){return Fg({},b[0],b[1])},wh(gw,wH)),yH=function(b){return ch.createElement("tr",null,ch.createElement("td",{style:{height:b.height}}))},zH=function(b){return ch.createElement("tr",null,ch.createElement("td",{style:{height:b.height,padding:0,border:0}}))},AH=ch.memo(function(){var b=Sj("listState"),g=Bo("sizeRanges"),n=Sj("useWindowScroll"),
I=Sj("customScrollParent"),W=Bo("windowScrollContainerState"),ia=Bo("scrollContainerState");n=I||n?W:ia;var sa=Sj("itemContent");W=Sj("trackItemSizes");I=Dh(g,Sj("itemSize"),W,n,Sj("log"),void 0,I);g=I.callbackRef;var Ka=I.ref;I=ch.useState(0);var Va=I[0],Za=I[1];lw("deviation",function(Vb){Va!==Vb&&(Ka.current.style.marginTop=Vb+"px",Za(Vb))});W=Sj("EmptyPlaceholder");var lb=Sj("ScrollSeekPlaceholder")||yH;n=Sj("FillerRow")||zH;I=Sj("TableBodyComponent");var vb=Sj("TableRowComponent"),Qb=Sj("computeItemKey"),
cc=Sj("isSeeking");ia=Sj("paddingTopAddition");var Ub=Sj("firstItemIndex"),rc=Sj("statefulTotalCount"),lc=Sj("context");if(0===rc&&W)return(0,ci.createElement)(W,og(W,lc));W=b.offsetTop+ia+Va;ia=b.offsetBottom;W=0<W?ch.createElement(n,{height:W,key:"padding-top"}):null;n=0<ia?ch.createElement(n,{height:ia,key:"padding-bottom"}):null;b=b.items.map(function(Vb){var sc=Vb.originalIndex,Gc=Qb(sc+Ub,Vb.data,lc);return cc?(0,ci.createElement)(lb,Fg({},og(lb,lc),{key:Gc,index:Vb.index,height:Vb.size,type:Vb.type||
"item"})):(0,ci.createElement)(vb,Fg({},og(vb,lc),{key:Gc,"data-index":sc,"data-known-size":Vb.size,"data-item-index":Vb.index,style:{overflowAnchor:"none"}}),sa(Vb.index,Vb.data,lc))});return(0,ci.createElement)(I,Fg({ref:g,"data-test-id":"virtuoso-item-list"},og(I,lc)),[W].concat(b,[n]))}),BH=function(b){b=b.children;var g=(0,ci.useContext)(nu),n=Bo("viewportHeight"),I=Bo("fixedItemHeight"),W=Jj(ri(n,function(ia){return qh(ia,"height")}));return ch.useEffect(function(){g&&(n(g.viewportHeight),I(g.itemHeight))},
[g,n,I]),ch.createElement("div",{style:Gr,ref:W,"data-viewport-type":"element"},b)},CH=function(b){b=b.children;var g=(0,ci.useContext)(nu),n=Bo("windowViewportRect"),I=Bo("fixedItemHeight"),W=Sj("customScrollParent");W=Cg(n,W);return ch.useEffect(function(){g&&(I(g.itemHeight),n({offsetTop:0,visibleHeight:g.viewportHeight,visibleWidth:100}))},[g,n,I]),ch.createElement("div",{ref:W,style:Gr,"data-viewport-type":"window"},b)},kw=tl(xH,{required:{},optional:{context:"context",followOutput:"followOutput",
firstItemIndex:"firstItemIndex",itemContent:"itemContent",fixedHeaderContent:"fixedHeaderContent",fixedFooterContent:"fixedFooterContent",overscan:"overscan",increaseViewportBy:"increaseViewportBy",totalCount:"totalCount",topItemCount:"topItemCount",initialTopMostItemIndex:"initialTopMostItemIndex",components:"components",groupCounts:"groupCounts",atBottomThreshold:"atBottomThreshold",atTopThreshold:"atTopThreshold",computeItemKey:"computeItemKey",defaultItemHeight:"defaultItemHeight",fixedItemHeight:"fixedItemHeight",
itemSize:"itemSize",scrollSeekConfiguration:"scrollSeekConfiguration",data:"data",initialItemCount:"initialItemCount",initialScrollTop:"initialScrollTop",alignToBottom:"alignToBottom",useWindowScroll:"useWindowScroll",customScrollParent:"customScrollParent",scrollerRef:"scrollerRef",logLevel:"logLevel",react18ConcurrentRendering:"react18ConcurrentRendering"},methods:{scrollToIndex:"scrollToIndex",scrollIntoView:"scrollIntoView",scrollTo:"scrollTo",scrollBy:"scrollBy"},events:{isScrolling:"isScrolling",
endReached:"endReached",startReached:"startReached",rangeChanged:"rangeChanged",atBottomStateChange:"atBottomStateChange",atTopStateChange:"atTopStateChange",totalListHeightChanged:"totalListHeightChanged",itemsRendered:"itemsRendered",groupIndices:"groupIndices"}},ch.memo(function(b){var g=Sj("useWindowScroll"),n=Sj("customScrollParent"),I=Bo("fixedHeaderHeight"),W=Bo("fixedFooterHeight"),ia=Sj("fixedHeaderContent"),sa=Sj("fixedFooterContent"),Ka=Sj("context");I=Jj(ri(I,function(vb){return qh(vb,
"height")}));var Va=Jj(ri(W,function(vb){return qh(vb,"height")}));W=n||g?EH:DH;g=n||g?CH:BH;n=Sj("TableComponent");var Za=Sj("TableHeadComponent"),lb=Sj("TableFooterComponent");ia=ia?ch.createElement(Za,Fg({key:"TableHead",style:{zIndex:1,position:"sticky",top:0},ref:I},og(Za,Ka)),ia()):null;sa=sa?ch.createElement(lb,Fg({key:"TableFoot",style:{zIndex:1,position:"sticky",bottom:0},ref:Va},og(lb,Ka)),sa()):null;return ch.createElement(W,Fg({},b),ch.createElement(g,null,ch.createElement(n,Fg({style:{borderSpacing:0}},
og(n,Ka)),[ia,ch.createElement(AH,{key:"TableBody"}),sa])))})),Bo=kw.usePublisher,Sj=kw.useEmitterValue,lw=kw.useEmitter,DH=Sh({usePublisher:Bo,useEmitterValue:Sj,useEmitter:lw}),EH=ji({usePublisher:Bo,useEmitterValue:Sj,useEmitter:lw}),xA=cb(V(22));pb=V(587);var Co=cb(V(22)),Mn=class{static insertTextFirefox(b,g){b.setRangeText(g,b.selectionStart||0,b.selectionEnd||0,"end");b.dispatchEvent(new InputEvent("input",{data:g,inputType:"insertText",isComposing:!1}))}static insert(b,g){const n=b.ownerDocument,
I=n.activeElement;I!==b&&b.focus();n.execCommand("insertText",!1,g)||Mn.insertTextFirefox(b,g);I===n.body?b.blur():I instanceof HTMLElement&&I!==b&&I.focus()}static set(b,g){b.select();Mn.insert(b,g)}static getSelection(b){const {selectionStart:g,selectionEnd:n}=b;return b.value.slice(g?g:void 0,n?n:void 0)}static wrapSelection(b,g,n){const {selectionStart:I,selectionEnd:W}=b,ia=Mn.getSelection(b);Mn.insert(b,g+ia+(null!=n?n:g));b.selectionStart=(I||0)+g.length;b.selectionEnd=(W||0)+g.length}static replace(b,
g,n){let I=0;b.value.replace(g,(...W)=>{const ia=I+W[W.length-2],sa=W[0].length;b.selectionStart=ia;b.selectionEnd=ia+sa;W="string"===typeof n?n:n(...W);Mn.insert(b,W);b.selectionStart=ia;I+=W.length-sa;return W})}static findLineEnd(b,g){const n=b.lastIndexOf("\n",g-1)+1;return"\t"!==b.charAt(n)?g:n+1}static indent(b){var g;const {selectionStart:n,selectionEnd:I,value:W}=b;var ia=W.slice(n,I);if((ia=null==(g=/\n/g.exec(ia))?void 0:g.length)&&0<ia){g=W.lastIndexOf("\n",n-1)+1;var sa=b.value.slice(g,
I-1);ia=sa.replace(/^|\n/g,"$\x26  ");sa=ia.length-sa.length;b.setSelectionRange(g,I-1);Mn.insert(b,ia);b.setSelectionRange(n+1,I+sa)}else Mn.insert(b,"  ")}static unindent(b){const {selectionStart:g,selectionEnd:n,value:I}=b;var W=I.lastIndexOf("\n",g-1)+1;const ia=Mn.findLineEnd(I,n);var sa=b.value.slice(W,ia);const Ka=sa.replace(/(^|\n)(\t| {1,2})/g,"$1");sa=sa.length-Ka.length;b.setSelectionRange(W,ia);Mn.insert(b,Ka);W=(W=/\t| {1,2}/.exec(I.slice(W,g)))?W[0].length:0;b.setSelectionRange(g-W,
Math.max(g-W,n-sa))}};pb=V(587);var qu=b=>b.stopPropagation(),ru=Co.memo(function({font:b,text:g,color:n,fontStyle:I,fontSize:W,fontWeight:ia,offsetX:sa=0,offsetY:Ka=0,scale:Va=1,isEditing:Za=!1,pointerEvents:lb=!1,onBlur:vb,onChange:Qb}){const cc=Co.useRef(null),Ub=Co.useRef(!1),rc=Co.useCallback(Vc=>{Qb(wr.normalizeText(Vc.currentTarget.value))},[Qb]),lc=Co.useCallback(Vc=>{if("Escape"!==Vc.key)if("Tab"===Vc.key&&0===g.length)Vc.preventDefault();else{if("Meta"!==Vc.key&&!Vc.metaKey)Vc.stopPropagation();
else if("z"===Vc.key&&Vc.metaKey){Vc.shiftKey?document.execCommand("redo",!1):document.execCommand("undo",!1);Vc.stopPropagation();Vc.preventDefault();return}"Tab"===Vc.key&&(Vc.preventDefault(),Vc.shiftKey?Mn.unindent(Vc.currentTarget):Mn.indent(Vc.currentTarget),null==Qb?void 0:Qb(wr.normalizeText(Vc.currentTarget.value)))}},[Qb]),Vb=Co.useCallback(Vc=>{Za&&(Vc.currentTarget.setSelectionRange(0,0),null==vb?void 0:vb())},[vb]),sc=Co.useCallback(Vc=>{Za&&Ub.current&&document.activeElement===Vc.currentTarget&&
Vc.currentTarget.select()},[Za]),Gc=Co.useCallback(Vc=>{Za&&Vc.stopPropagation()},[Za]);Co.useEffect(()=>{Za&&requestAnimationFrame(()=>{Ub.current=!0;const Vc=cc.current;Vc&&(Vc.focus(),Vc.select())})},[Za,vb]);const Qc=Co.useRef(null);Co.useLayoutEffect(()=>{const Vc=Qc.current;if(Vc){var Vd=rj(g,{fontFamily:"var(--ls-font-family)",fontSize:W,lineHeight:1,fontWeight:ia},4);Vc.style.transform=`scale(${Va}, ${Va}) translate(${sa}px, ${Ka}px)`;Vc.style.width=Vd[0]+1+"px";Vc.style.height=Vd[1]+1+"px"}},
[g,ia,W,Ka,sa,Va]);return(0,pb.jsx)("div",{className:"tl-text-label-wrapper",children:(0,pb.jsxs)("div",{className:"tl-text-label-inner-wrapper",ref:Qc,style:{font:b,fontStyle:I,fontSize:W,fontWeight:ia,color:n,pointerEvents:lb?"all":"none",userSelect:Za?"text":"none"},children:[Za?(0,pb.jsx)("textarea",{ref:cc,style:{font:b,color:n,fontStyle:I,fontSize:W,fontWeight:ia},className:"tl-text-label-textarea",name:"text",tabIndex:-1,autoComplete:"false",autoCapitalize:"false",autoCorrect:"false",autoSave:"false",
autoFocus:!0,placeholder:"",spellCheck:"true",wrap:"off",dir:"auto",datatype:"wysiwyg",defaultValue:g,color:n,onFocus:sc,onChange:rc,onKeyDown:lc,onBlur:Vb,onPointerDown:Gc,onContextMenu:qu,onCopy:qu,onPaste:qu,onCut:qu}):g,"​"]})})});pb=V(587);var FH={xs:10,sm:16,md:20,lg:32,xl:48,xxl:60},Ir=class extends fn{constructor(){super(...arguments);Ma(this,"canEdit",!0);Ma(this,"ReactComponent",bf(({events:b,isErasing:g,isBinding:n,isSelected:I,isEditing:W,onEditingEnd:ia})=>{const {props:{size:[sa,Ka],
stroke:Va,fill:Za,noFill:lb,strokeWidth:vb,strokeType:Qb,borderRadius:cc,opacity:Ub,label:rc,italic:lc,fontWeight:Vb,fontSize:sc}}=this;var Gc=rc||W?rj(rc,{fontFamily:"var(--ls-font-family)",fontSize:sc,lineHeight:1,fontWeight:Vb},4):[0,0];const Qc=Ud.mul(this.props.size,.5);Gc=Math.max(.5,Math.min(1,sa/Gc[0],Ka/Gc[1]));const Vc=this.getBounds(),Vd=xA.useMemo(()=>Ud.sub(Qc,Ud.toFixed([Vc.width/2,Vc.height/2])),[Vc,Gc,Qc]),$d=xA.useCallback(Ee=>{var Ne;null==(Ne=this.update)?void 0:Ne.call(this,{label:Ee})},
[rc]);return(0,pb.jsxs)("div",xf(te({},b),{style:{width:"100%",height:"100%",overflow:"hidden"},children:[(0,pb.jsx)(ru,{font:"20px / 1 var(--ls-font-family)",text:rc,color:Bf(Va,"text"),offsetX:Vd[0],offsetY:Vd[1],fontSize:sc,scale:Gc,isEditing:W,onChange:$d,onBlur:ia,fontStyle:lc?"italic":"normal",fontWeight:Vb,pointerEvents:!!rc}),(0,pb.jsxs)(Zn,{opacity:g?.2:Ub,children:[n&&(0,pb.jsx)(qi,{mode:"svg",strokeWidth:vb,size:[sa,Ka]}),(0,pb.jsx)("rect",{className:I||!lb?"tl-hitarea-fill":"tl-hitarea-stroke",
x:vb/2,y:vb/2,rx:cc,ry:cc,width:Math.max(.01,sa-vb),height:Math.max(.01,Ka-vb),pointerEvents:"all"}),(0,pb.jsx)("rect",{x:vb/2,y:vb/2,rx:cc,ry:cc,width:Math.max(.01,sa-vb),height:Math.max(.01,Ka-vb),strokeWidth:vb,stroke:Bf(Va,"stroke"),strokeDasharray:"dashed"===Qb?"8 2":void 0,fill:lb?"none":Bf(Za,"background")})]})]}))}));Ma(this,"setScaleLevel",b=>Pc(this,null,function*(){this.update({scaleLevel:b,fontSize:FH[null!=b?b:"md"]});this.onResetBounds()}));Ma(this,"ReactIndicator",bf(()=>{const {props:{size:[b,
g],borderRadius:n}}=this;return(0,pb.jsx)("g",{children:(0,pb.jsx)("rect",{width:b,height:g,rx:n,ry:n,fill:"transparent"})})}));Ma(this,"validateProps",b=>{void 0!==b.size&&(b.size[0]=Math.max(b.size[0],1),b.size[1]=Math.max(b.size[1],1));void 0!==b.borderRadius&&(b.borderRadius=Math.max(0,b.borderRadius));return gi(this,b)})}get scaleLevel(){var b;return null!=(b=this.props.scaleLevel)?b:"md"}};Ma(Ir,"id","box");Ma(Ir,"defaultProps",{id:"box",parentId:"page",type:"box",point:[0,0],size:[100,100],
borderRadius:2,stroke:"",fill:"",noFill:!1,fontWeight:400,fontSize:20,italic:!1,strokeType:"line",strokeWidth:2,opacity:1,label:""});mb([Eg],Ir.prototype,"scaleLevel",1);mb([af],Ir.prototype,"setScaleLevel",2);var yA=cb(V(22));pb=V(587);var GH={xs:10,sm:16,md:20,lg:32,xl:48,xxl:60},Jr=class extends ov{constructor(){super(...arguments);Ma(this,"canEdit",!0);Ma(this,"ReactComponent",bf(({isSelected:b,isErasing:g,events:n,isEditing:I,onEditingEnd:W})=>{const {size:[ia,sa],stroke:Ka,fill:Va,noFill:Za,
strokeWidth:lb,strokeType:vb,opacity:Qb,label:cc,italic:Ub,fontWeight:rc,fontSize:lc}=this.props;var Vb=cc||I?rj(cc,{fontFamily:"var(--ls-font-family)",fontSize:lc,lineHeight:1,fontWeight:rc},4):[0,0];const sc=Ud.mul(this.props.size,.5);Vb=Math.max(.5,Math.min(1,ia/Vb[0],sa/Vb[1]));const Gc=this.getBounds(),Qc=yA.useMemo(()=>Ud.sub(sc,Ud.toFixed([Gc.width/2,Gc.height/2])),[Gc,Vb,sc]),Vc=yA.useCallback(Vd=>{var $d;null==($d=this.update)?void 0:$d.call(this,{label:Vd})},[cc]);return(0,pb.jsxs)("div",
xf(te({},n),{style:{width:"100%",height:"100%",overflow:"hidden"},children:[(0,pb.jsx)(ru,{font:"18px / 1 var(--ls-font-family)",text:cc,color:Bf(Ka,"text"),offsetX:Qc[0],offsetY:Qc[1],scale:Vb,isEditing:I,onChange:Vc,onBlur:W,fontStyle:Ub?"italic":"normal",fontSize:lc,fontWeight:rc,pointerEvents:!!cc}),(0,pb.jsxs)(Zn,xf(te({},n),{opacity:g?.2:Qb,children:[(0,pb.jsx)("ellipse",{className:b||!Za?"tl-hitarea-fill":"tl-hitarea-stroke",cx:ia/2,cy:sa/2,rx:Math.max(.01,(ia-lb)/2),ry:Math.max(.01,(sa-lb)/
2)}),(0,pb.jsx)("ellipse",{cx:ia/2,cy:sa/2,rx:Math.max(.01,(ia-lb)/2),ry:Math.max(.01,(sa-lb)/2),strokeWidth:lb,stroke:Bf(Ka,"stroke"),strokeDasharray:"dashed"===vb?"8 2":void 0,fill:Za?"none":Bf(Va,"background")})]}))]}))}));Ma(this,"setScaleLevel",b=>Pc(this,null,function*(){this.update({scaleLevel:b,fontSize:GH[null!=b?b:"md"]});this.onResetBounds()}));Ma(this,"ReactIndicator",bf(()=>{const {size:[b,g]}=this.props;return(0,pb.jsx)("g",{children:(0,pb.jsx)("ellipse",{cx:b/2,cy:g/2,rx:b/2,ry:g/2,
strokeWidth:2,fill:"transparent"})})}));Ma(this,"validateProps",b=>{void 0!==b.size&&(b.size[0]=Math.max(b.size[0],1),b.size[1]=Math.max(b.size[1],1));return gi(this,b)})}get scaleLevel(){var b;return null!=(b=this.props.scaleLevel)?b:"md"}getShapeSVGJsx(b){const {size:[g,n],stroke:I,fill:W,noFill:ia,strokeWidth:sa,strokeType:Ka,opacity:Va}=this.props;return(0,pb.jsxs)("g",{opacity:Va,children:[(0,pb.jsx)("ellipse",{className:ia?"tl-hitarea-stroke":"tl-hitarea-fill",cx:g/2,cy:n/2,rx:Math.max(.01,
(g-sa)/2),ry:Math.max(.01,(n-sa)/2)}),(0,pb.jsx)("ellipse",{cx:g/2,cy:n/2,rx:Math.max(.01,(g-sa)/2),ry:Math.max(.01,(n-sa)/2),strokeWidth:sa,stroke:Bf(I,"stroke"),strokeDasharray:"dashed"===Ka?"8 2":void 0,fill:ia?"none":Bf(W,"background")})]})}};Ma(Jr,"id","ellipse");Ma(Jr,"defaultProps",{id:"ellipse",parentId:"page",type:"ellipse",point:[0,0],size:[100,100],stroke:"",fill:"",noFill:!1,fontWeight:400,fontSize:20,italic:!1,strokeType:"line",strokeWidth:2,opacity:1,label:""});mb([Eg],Jr.prototype,
"scaleLevel",1);mb([af],Jr.prototype,"setScaleLevel",2);pb=V(587);var mw=class extends Ht{constructor(){super(...arguments);Ma(this,"ReactComponent",bf(({events:b})=>{const g=this.getBounds(),n=pg(),I=n.selectedShapesArray.some(ia=>n.shapesInGroups([this]).includes(ia)),W=this.ReactIndicator;return(0,pb.jsxs)(Zn,xf(te({},b),{children:[(0,pb.jsx)("rect",{className:"tl-hitarea-fill",x:1,y:1,width:Math.max(.01,g.width-2),height:Math.max(.01,g.height-2),pointerEvents:"all"}),I&&(0,pb.jsx)("g",{stroke:"var(--color-selectedFill)",
children:(0,pb.jsx)(W,{})})]}))}));Ma(this,"ReactIndicator",bf(()=>{const b=this.getBounds();return(0,pb.jsx)("rect",{strokeDasharray:"8 2",x:-8,y:-8,rx:4,ry:4,width:b.width+16,height:b.height+16,fill:"transparent"})}))}};Ma(mw,"id","group");Ma(mw,"defaultProps",{id:"group",type:"group",parentId:"page",point:[0,0],size:[0,0],children:[]});pb=V(587);var HH={xs:1,sm:1.6,md:2,lg:3.2,xl:4.8,xxl:6},Nq=class extends mr{constructor(b={}){super(b);Ma(this,"ReactComponent",bf(({events:g,isErasing:n})=>{const {pointsPath:I,
props:{stroke:W,strokeWidth:ia,opacity:sa}}=this;return(0,pb.jsx)(Zn,xf(te({},g),{opacity:n?.2:1,children:(0,pb.jsx)("path",{d:I,strokeWidth:16*ia,stroke:Bf(W,"stroke"),fill:"none",pointerEvents:"all",strokeLinejoin:"round",strokeLinecap:"round",opacity:sa})}))}));Ma(this,"setScaleLevel",g=>Pc(this,null,function*(){this.update({scaleLevel:g,strokeWidth:HH[null!=g?g:"md"]});this.onResetBounds()}));Ma(this,"ReactIndicator",bf(()=>{const {pointsPath:g}=this;return(0,pb.jsx)("path",{d:g,fill:"none"})}));
Ma(this,"validateProps",g=>{g=gi(this,g);void 0!==g.strokeWidth&&(g.strokeWidth=Math.max(g.strokeWidth,1));return g});rg(this)}get pointsPath(){const {points:b}=this.props;return po.getCurvedPathForPoints(b)}get scaleLevel(){var b;return null!=(b=this.props.scaleLevel)?b:"md"}getShapeSVGJsx(){const {pointsPath:b,props:{stroke:g,strokeWidth:n,opacity:I}}=this;return(0,pb.jsx)("path",{d:b,strokeWidth:16*n,stroke:Bf(g,"stroke"),fill:"none",pointerEvents:"all",strokeLinejoin:"round",strokeLinecap:"round",
opacity:I})}};Ma(Nq,"id","highlighter");Ma(Nq,"defaultProps",{id:"highlighter",parentId:"page",type:"highlighter",point:[0,0],points:[],isComplete:!1,stroke:"",fill:"",noFill:!0,strokeType:"line",strokeWidth:2,opacity:.5});mb([Eg],Nq.prototype,"pointsPath",1);mb([Eg],Nq.prototype,"scaleLevel",1);mb([af],Nq.prototype,"setScaleLevel",2);var nw=cb(V(22));pb=V(587);var ow={xs:.5,sm:.8,md:1,lg:1.5,xl:2,xxl:3},Sp=class extends fn{constructor(){super(...arguments);Ma(this,"canChangeAspectRatio",!0);Ma(this,
"canFlip",!1);Ma(this,"canEdit",!0);Ma(this,"htmlAnchorRef",nw.createRef());Ma(this,"setScaleLevel",b=>Pc(this,null,function*(){var g;const n=Ud.mul(this.props.size,ow[null!=b?b:"md"]/ow[null!=(g=this.props.scaleLevel)?g:"md"]);this.update({scaleLevel:b});yield sh();this.update({size:n})}));Ma(this,"onResetBounds",b=>{var g;if(this.htmlAnchorRef.current){const n=this.htmlAnchorRef.current.getBoundingClientRect(),[I,W]=Ud.div([n.width,n.height],null!=(g=null==b?void 0:b.zoom)?g:1);this.update({size:[Math.max(Math.min(I||
400,1400),10),Math.max(Math.min(W||400,1400),10)]})}return this});Ma(this,"ReactComponent",bf(({events:b,isErasing:g,isEditing:n})=>{const {props:{html:I,scaleLevel:W}}=this,ia=Kj(),sa=pg(),Ka=sa.selectedIds.has(this.id),Va=ia||Ka&&!n||"select"!==sa.selectedTool.id,Za=nw.useCallback(vb=>{Va||vb.stopPropagation()},[Va]),lb=ow[null!=W?W:"md"];nw.useEffect(()=>{0===this.props.size[1]&&(this.onResetBounds({zoom:sa.viewport.camera.zoom}),sa.persist(!0))},[]);return(0,pb.jsx)(Yn,xf(te({style:{overflow:"hidden",
pointerEvents:"all",opacity:g?.2:1}},b),{children:(0,pb.jsx)("div",{onWheelCapture:Za,onPointerDown:Za,onPointerUp:Za,className:"tl-html-container",style:{pointerEvents:ia||!n&&!Ka?"none":"all",overflow:n?"auto":"hidden",width:`calc(100% / ${lb})`,height:`calc(100% / ${lb})`,transform:`scale(${lb})`},children:(0,pb.jsx)("div",{ref:this.htmlAnchorRef,className:"tl-html-anchor",dangerouslySetInnerHTML:{__html:I.trim()}})})}))}));Ma(this,"ReactIndicator",bf(()=>{const {props:{size:[b,g]}}=this;return(0,pb.jsx)("rect",
{width:b,height:g,fill:"transparent"})}));Ma(this,"validateProps",b=>{void 0!==b.size&&(b.size[0]=Math.max(b.size[0],1),b.size[1]=Math.max(b.size[1],1));return gi(this,b)})}get scaleLevel(){var b;return null!=(b=this.props.scaleLevel)?b:"md"}};Ma(Sp,"id","html");Ma(Sp,"defaultProps",{id:"html",type:"html",parentId:"page",point:[0,0],size:[600,0],html:""});mb([Eg],Sp.prototype,"scaleLevel",1);mb([af],Sp.prototype,"setScaleLevel",2);var zA=cb(V(22));pb=V(587);var Oq=class extends fn{constructor(){super(...arguments);
Ma(this,"frameRef",zA.createRef());Ma(this,"canEdit",!0);Ma(this,"onIFrameSourceChange",b=>{this.update({url:b})});Ma(this,"reload",()=>{var b,g;this.frameRef.current&&(this.frameRef.current.src=null==(g=null==(b=this.frameRef)?void 0:b.current)?void 0:g.src)});Ma(this,"ReactComponent",bf(({events:b,isErasing:g,isEditing:n})=>{zA.useRef(null);return(0,pb.jsx)(Yn,xf(te({style:{overflow:"hidden",pointerEvents:"all",opacity:g?.2:1}},b),{children:(0,pb.jsx)("div",{className:"tl-iframe-container",style:{pointerEvents:n?
"all":"none",userSelect:"none"},children:this.props.url&&(0,pb.jsx)("div",{style:{overflow:"hidden",position:"relative",height:"100%"},children:(0,pb.jsx)("iframe",{ref:this.frameRef,className:"absolute inset-0 w-full h-full m-0",width:"100%",height:"100%",src:`${this.props.url}`,frameBorder:"0",sandbox:"allow-scripts allow-same-origin"})})})}))}));Ma(this,"ReactIndicator",bf(()=>{const {props:{size:[b,g]}}=this;return(0,pb.jsx)("rect",{width:b,height:g,fill:"transparent",rx:8,ry:8})}))}};Ma(Oq,"id",
"iframe");Ma(Oq,"defaultProps",{id:"iframe",type:"iframe",parentId:"page",point:[0,0],size:[853,480],url:""});mb([af],Oq.prototype,"onIFrameSourceChange",2);mb([af],Oq.prototype,"reload",2);var IH=cb(V(22));pb=V(587);var su=class extends pv{constructor(){super(...arguments);Ma(this,"ReactComponent",bf(({events:b,isErasing:g,isBinding:n,asset:I})=>{const {props:{opacity:W,objectFit:ia,clipping:sa,size:[Ka,Va]}}=this,[Za,lb,vb,Qb]=Array.isArray(sa)?sa:[sa,sa,sa,sa],{handlers:cc}=IH.useContext(ln);return(0,pb.jsxs)(Yn,
xf(te({},b),{opacity:g?.2:W,children:[n&&(0,pb.jsx)(qi,{mode:"html",strokeWidth:4,size:[Ka,Va]}),(0,pb.jsx)("div",{"data-asset-loaded":!!I,className:"tl-image-shape-container",children:I?(0,pb.jsx)("img",{src:cc?cc.makeAssetUrl(I.src):I.src,draggable:!1,style:{position:"relative",top:-Za,left:-Qb,width:Ka+(Qb-lb),height:Va+(Za-vb),objectFit:ia}}):"Asset is missing"})]}))}));Ma(this,"ReactIndicator",bf(()=>{const {props:{size:[b,g]}}=this;return(0,pb.jsx)("rect",{width:b,height:g,fill:"transparent"})}))}getShapeSVGJsx({assets:b}){var g,
n;const I=this.getBounds(),{assetId:W,clipping:ia}=this.props;if(b=b.find(sa=>sa.id===W)){Array.isArray(ia);const sa=null==(n=null==(g=window.logseq)?void 0:g.api)?void 0:n.make_asset_url;return(0,pb.jsx)("image",{width:I.width,height:I.height,href:sa?sa(b.src):b.src})}return super.getShapeSVGJsx({})}};Ma(su,"id","image");Ma(su,"defaultProps",{id:"image1",parentId:"page",type:"image",point:[0,0],size:[100,100],opacity:1,assetId:"",clipping:0,objectFit:"fill",isAspectRatioLocked:!0});var pw=cb(V(22)),
JH=cb(V(22));pb=V(587);pb=V(587);var AA={xs:10,sm:16,md:20,lg:32,xl:48,xxl:60},KH=JH.memo(function({style:b,start:g,end:n,decorationStart:I,decorationEnd:W,scaleLevel:ia}){const sa=Ud.dist(g,n);if(2>sa)return null;const {strokeWidth:Ka}=b,Va=1+Ka*AA[null!=ia?ia:"md"]/10,Za="M"+Ud.toFixed(g)+"L"+Ud.toFixed(n);ia=Math.min(sa/3,Ka*AA[null!=ia?ia:"md"]);I=I?Bk(g,n,ia):null;W=W?Bk(n,g,ia):null;return(0,pb.jsxs)(pb.Fragment,{children:[(0,pb.jsx)("path",{className:"tl-stroke-hitarea",d:Za}),(0,pb.jsx)("path",
{d:Za,strokeWidth:Va,stroke:b.stroke,strokeLinecap:"round",strokeLinejoin:"round",strokeDasharray:"dashed"===b.strokeType?"8 4":void 0,pointerEvents:"stroke"}),I&&(0,pb.jsx)(Bl,{left:I.left,middle:g,right:I.right,stroke:b.stroke,strokeWidth:Va}),W&&(0,pb.jsx)(Bl,{left:W.left,middle:n,right:W.right,stroke:b.stroke,strokeWidth:Va})]})});pb=V(587);pb=V(587);var LH={xs:10,sm:16,md:20,lg:32,xl:48,xxl:60},Kr=class extends ws{constructor(){super(...arguments);Ma(this,"hideSelection",!0);Ma(this,"canEdit",
!0);Ma(this,"ReactComponent",bf(({events:b,isErasing:g,isEditing:n,onEditingEnd:I})=>{const {stroke:W,handles:{start:ia,end:sa},opacity:Ka,label:Va,italic:Za,fontWeight:lb,fontSize:vb,id:Qb}=this.props,cc=Va||n?rj(Va,{fontFamily:"var(--ls-font-family)",fontSize:vb,lineHeight:1,fontWeight:lb},6):[0,0],Ub=Ud.med(ia.point,sa.point);var rc=Ud.dist(ia.point,sa.point);rc=Math.max(.5,Math.min(1,Math.max(rc/(cc[1]+128),rc/(cc[0]+128))));const lc=this.getBounds(),Vb=pw.useMemo(()=>Ud.sub(Ub,Ud.toFixed([lc.width/
2,lc.height/2])),[lc,rc,Ub]),sc=pw.useCallback(Gc=>{var Qc;null==(Qc=this.update)?void 0:Qc.call(this,{label:Gc})},[Va]);return(0,pb.jsxs)("div",xf(te({},b),{style:{width:"100%",height:"100%",overflow:"hidden"},children:[(0,pb.jsx)(ru,{font:"20px / 1 var(--ls-font-family)",text:Va,fontSize:vb,color:Bf(W,"text"),offsetX:Vb[0],offsetY:Vb[1],scale:rc,isEditing:n,onChange:sc,onBlur:I,fontStyle:Za?"italic":"normal",fontWeight:lb,pointerEvents:!!Va}),(0,pb.jsxs)(Zn,{opacity:g?.2:Ka,id:Qb+"_svg",children:[(0,pb.jsx)(sn,
{id:Qb,bounds:lc,labelSize:cc,offset:Vb,scale:rc}),(0,pb.jsx)("g",{pointerEvents:"none",mask:Va||n?`url(#${Qb}_clip)`:"",children:this.getShapeSVGJsx({preview:!1})})]})]}))}));Ma(this,"setScaleLevel",b=>Pc(this,null,function*(){this.update({scaleLevel:b,fontSize:LH[null!=b?b:"md"]});this.onResetBounds()}));Ma(this,"ReactIndicator",bf(({isEditing:b})=>{const {id:g,decorations:n,label:I,strokeWidth:W,fontSize:ia,fontWeight:sa,handles:{start:Ka,end:Va}}=this.props,Za=this.getBounds(),lb=I||b?rj(I,{fontFamily:"var(--ls-font-family)",
fontSize:ia,lineHeight:1,fontWeight:sa},6):[0,0],vb=Ud.med(Ka.point,Va.point);var Qb=Ud.dist(Ka.point,Va.point);Qb=Math.max(.5,Math.min(1,Math.max(Qb/(lb[1]+128),Qb/(lb[0]+128))));const cc=pw.useMemo(()=>Ud.sub(vb,Ud.toFixed([Za.width/2,Za.height/2])),[Za,Qb,vb]);return(0,pb.jsxs)("g",{children:[(0,pb.jsx)("path",{mask:I?`url(#${g}_clip)`:"",d:ep({strokeWidth:W},Ka.point,Va.point,null==n?void 0:n.start,null==n?void 0:n.end)}),I&&!b&&(0,pb.jsx)("rect",{x:Za.width/2-lb[0]/2*Qb+cc[0],y:Za.height/2-lb[1]/
2*Qb+cc[1],width:lb[0]*Qb,height:lb[1]*Qb,rx:4*Qb,ry:4*Qb,fill:"transparent"})]})}));Ma(this,"validateProps",b=>gi(this,b))}get scaleLevel(){var b;return null!=(b=this.props.scaleLevel)?b:"md"}getShapeSVGJsx({preview:b}){const {stroke:g,fill:n,strokeWidth:I,strokeType:W,decorations:ia,label:sa,scaleLevel:Ka,handles:{start:Va,end:Za}}=this.props,lb=Ud.med(Va.point,Za.point);return(0,pb.jsxs)(pb.Fragment,{children:[(0,pb.jsx)(KH,{style:{stroke:Bf(g,"text"),fill:n,strokeWidth:I,strokeType:W},scaleLevel:Ka,
start:Va.point,end:Za.point,decorationStart:null==ia?void 0:ia.start,decorationEnd:null==ia?void 0:ia.end}),b&&(0,pb.jsx)(pb.Fragment,{children:(0,pb.jsx)("text",{style:{transformOrigin:"top left"},fontFamily:"Inter",fontSize:20,transform:`translate(${lb[0]}, ${lb[1]})`,textAnchor:"middle",fill:Bf(g,"text"),stroke:Bf(g,"text"),children:sa})})]})}};Ma(Kr,"id","line");Ma(Kr,"defaultProps",{id:"line",parentId:"page",type:"line",point:[0,0],handles:{start:{id:"start",canBind:!0,point:[0,0]},end:{id:"end",
canBind:!0,point:[1,1]}},stroke:"",fill:"",noFill:!0,fontWeight:400,fontSize:20,italic:!1,strokeType:"line",strokeWidth:1,opacity:1,decorations:{end:"arrow"},label:""});mb([Eg],Kr.prototype,"scaleLevel",1);mb([af],Kr.prototype,"setScaleLevel",2);var Nn=cb(V(22));pb=V(587);var Xs={xs:.5,sm:.8,md:1,lg:1.5,xl:2,xxl:3},MH=bf(({type:b,fill:g,opacity:n,children:I})=>{g="var(--ls-secondary-background-color)"!==g?Bf(g,"background"):"var(--ls-tertiary-background-color)";return(0,pb.jsxs)("div",{className:`tl-logseq-portal-header tl-logseq-portal-header-${"P"===
b?"page":"block"}`,children:[(0,pb.jsx)("div",{className:"absolute inset-0 tl-logseq-portal-header-bg",style:{opacity:n,background:"P"===b?g:`linear-gradient(0deg, transparent, ${g}`}}),(0,pb.jsx)("div",{className:"relative",children:I})]})}),xl=class extends fn{constructor(b={}){var g;super(b);Ma(this,"hideRotateHandle",!0);Ma(this,"canChangeAspectRatio",!0);Ma(this,"canFlip",!0);Ma(this,"canEdit",!0);Ma(this,"persist",null);Ma(this,"initialHeightCalculated",!0);Ma(this,"getInnerHeight",null);Ma(this,
"toggleCollapsed",()=>Pc(this,null,function*(){var n;const I=!this.collapsed;"B"===this.props.blockType?(this.update({compact:I}),this.canResize[1]=!I,I||(yield sh(),this.onResetBounds()),null==(n=this.persist)?void 0:n.call(this)):(n=this.props.size[1],this.canResize[1]=!I,console.log(I,I?this.getHeaderHeight():this.props.collapsedHeight,this.getHeaderHeight(),this.props.collapsedHeight),this.update({isAutoResizing:!I,collapsed:I,size:[this.props.size[0],I?this.getHeaderHeight():this.props.collapsedHeight],
collapsedHeight:I?n:this.props.collapsedHeight}))}));Ma(this,"setScaleLevel",n=>Pc(this,null,function*(){var I;const W=Ud.mul(this.props.size,Xs[null!=n?n:"md"]/Xs[null!=(I=this.props.scaleLevel)?I:"md"]);this.update({scaleLevel:n});yield sh();this.update({size:W})}));Ma(this,"onResetBounds",n=>{n=this.getAutoResizeHeight();null!==n&&1<Math.abs(n-this.props.size[1])&&(this.update({size:[this.props.size[0],n]}),this.initialHeightCalculated=!0);return this});Ma(this,"onResize",(n,I)=>{var W;const {bounds:ia,
rotation:sa,scale:[Ka,Va]}=I;n=[...this.scale];0>Ka&&(n[0]*=-1);0>Va&&(n[1]*=-1);I=ia.height;this.props.isAutoResizing&&(I=null!=(W=this.getAutoResizeHeight())?W:I);return this.update({point:[ia.minX,ia.minY],size:[Math.max(1,ia.width),Math.max(1,I)],scale:n,rotation:sa})});Ma(this,"PortalComponent",bf(({})=>{const {props:{pageId:n,fill:I,opacity:W}}=this,{renderers:ia}=Nn.useContext(ln),sa=pg(),Ka=Nn.useRef(null),[,Va]=this.useComponentSize(Ka,this.props.compact?".tl-logseq-cp-container \x3e .single-block":
".tl-logseq-cp-container \x3e .page");if(null==ia||!ia.Page)return null;const {Page:Za,Block:lb}=ia;Nn.useEffect(()=>{var cc,Ub;if(this.props.isAutoResizing){const rc=(null!=(Ub=null==(cc=this.getInnerHeight)?void 0:cc.call(this))?Ub:Va)+this.getHeaderHeight();Va&&1<Math.abs(rc-this.props.size[1])&&(this.update({size:[this.props.size[0],rc]}),sa.persist(!0))}},[Va,this.props.isAutoResizing]);const [vb,Qb]=Nn.useState(!1);Nn.useEffect(()=>{setTimeout(function(){Qb(!0)})},[]);return(0,pb.jsxs)(pb.Fragment,
{children:[(0,pb.jsx)("div",{className:"absolute inset-0 tl-logseq-cp-container-bg",style:{textRendering:.5>sa.viewport.camera.zoom?"optimizeSpeed":"auto",background:I&&"var(--ls-secondary-background-color)"!==I?`var(--ls-highlight-color-${I})`:"var(--ls-secondary-background-color)",opacity:W}}),(0,pb.jsx)("div",{ref:Ka,className:"relative tl-logseq-cp-container",style:{overflow:this.props.isAutoResizing?"visible":"auto"},children:(vb||!this.initialHeightCalculated)&&("B"===this.props.blockType&&
this.props.compact?(0,pb.jsx)(lb,{blockId:n}):(0,pb.jsx)(Za,{pageName:n}))})]})}));Ma(this,"ReactComponent",bf(n=>{var I;const {events:W,isErasing:ia,isEditing:sa,isBinding:Ka}=n,{props:{opacity:Va,pageId:Za,fill:lb,scaleLevel:vb,strokeWidth:Qb,size:cc}}=this,Ub=pg(),{renderers:rc,handlers:lc}=Nn.useContext(ln);this.persist=()=>Ub.persist();const Vb=Kj(),sc=Ub.selectedIds.has(this.id)&&1===Ub.selectedIds.size,Gc=Ub.isIn("logseq-portal.creating")&&!Za,Qc=(Vb||sc&&!sa||"select"!==Ub.selectedTool.id)&&
!Gc,Vc=Nn.useCallback(fd=>{Qc||fd.stopPropagation()},[Qc]),Vd=1===Ub.selectedShapesArray.length&&Ub.selectedShapesArray.some(fd=>"logseq-portal"===fd.type&&fd.props.id!==this.props.id&&Za&&fd.props.pageId===Za),$d=Xs[null!=vb?vb:"md"];Nn.useEffect(()=>this.props.collapsed&&sa?(this.update({size:[this.props.size[0],this.props.collapsedHeight]}),()=>{this.update({size:[this.props.size[0],this.getHeaderHeight()]})}):()=>{},[sa,this.props.collapsed]);Nn.useEffect(()=>{if(Gc){const fd=[Ub.viewport.bounds.width,
Ub.viewport.bounds.height],ld=Ub.viewport.getScreenPoint([this.bounds.minX,this.bounds.minY]);(ld[0]>fd[0]-400||ld[1]>fd[1]-240||1.5<Ub.viewport.camera.zoom||.5>Ub.viewport.camera.zoom)&&Ub.viewport.zoomToBounds(xf(te({},this.bounds),{minY:this.bounds.maxY+25}))}},[Ub.viewport.bounds.height.toFixed(2)]);const Ee=Nn.useCallback(fd=>{this.initialHeightCalculated=!1;const ld=Th(fd)?"B":"P";this.update({pageId:fd,size:[400,320],blockType:ld,compact:"B"===ld});Ub.selectTool("select");Ub.history.resume();
Ub.history.persist()},[]),Ne=this.PortalComponent;var uf=Nn.useMemo(()=>{var fd;if(Za&&"B"===this.props.blockType)return null==(fd=null==lc?void 0:lc.queryBlockByUUID(Za))?void 0:fd.content},[null==lc?void 0:lc.queryBlockByUUID,Za]);uf="B"===this.props.blockType&&"string"!==typeof uf;const rf=(!this.props.collapsed||sa)&&!uf;if(null==rc||!rc.Page)return null;const {Breadcrumb:ff,PageName:Ge}=rc,Ad={width:`calc(100% / ${$d})`,height:`calc(100% / ${$d})`,opacity:ia?.2:1};1!==$d&&(Ad.transform=`scale(${$d})`);
return(0,pb.jsxs)(Yn,xf(te({style:{pointerEvents:"all"}},W),{children:[Ka&&(0,pb.jsx)(qi,{mode:"html",strokeWidth:Qb,size:cc}),(0,pb.jsx)("div",{"data-inner-events":!Qc,onWheelCapture:Vc,onPointerDown:Vc,onPointerUp:Vc,style:{width:"100%",height:"100%",pointerEvents:Vb||!sa&&!sc?"none":"all"},children:Gc?(0,pb.jsx)(PA,{onChange:Ee,onAddBlock:fd=>{setTimeout(()=>{var ld,nd,Ed;Ub.api.editShape(this);null==(Ed=null==(nd=null==(ld=window.logseq)?void 0:ld.api)?void 0:nd.edit_block)?void 0:Ed.call(nd,
fd)})},placeholder:"Create or search your graph..."}):(0,pb.jsxs)(pb.Fragment,{children:[(0,pb.jsxs)("div",{className:"tl-logseq-portal-container","data-collapsed":this.collapsed,"data-page-id":Za,"data-portal-selected":Vd,"data-editing":sa,style:Ad,children:[!this.props.compact&&!uf&&(0,pb.jsx)(MH,{type:null!=(I=this.props.blockType)?I:"P",fill:lb,opacity:Va,children:"P"===this.props.blockType?(0,pb.jsx)(Ge,{pageName:Za}):(0,pb.jsx)(ff,{blockId:Za})}),uf&&(0,pb.jsx)("div",{className:"tl-target-not-found",
children:"Target not found"}),rf&&(0,pb.jsx)(Ne,te({},n))]}),(0,pb.jsx)(qz,{active:!!this.collapsed,style:{opacity:sc?1:0},icon:"B"===this.props.blockType?"block":"page",onClick:this.toggleCollapsed,otherIcon:"whiteboard-element"})]})})]}))}));Ma(this,"ReactIndicator",bf(()=>{const n=this.getBounds();return(0,pb.jsx)("rect",{width:n.width,height:n.height,fill:"transparent",rx:8,ry:8})}));Ma(this,"validateProps",n=>{var I;if(void 0!==n.size){const W=Xs[null!=(I=this.props.scaleLevel)?I:"md"];n.size[0]=
Math.max(n.size[0],60*W);n.size[1]=Math.max(n.size[1],40*W)}return gi(this,n)});rg(this);b.collapsed&&Object.assign(this.canResize,[!0,!1]);0===(null==(g=b.size)?void 0:g[1])&&(this.initialHeightCalculated=!1)}static isPageOrBlock(b){return b?/^\(\(.*\)\)$/.test(b)&&40===b.length?"B":"P":!1}get collapsed(){return"B"===this.props.blockType?this.props.compact:this.props.collapsed}get scaleLevel(){var b;return null!=(b=this.props.scaleLevel)?b:"md"}useComponentSize(b,g=""){const [n,I]=Nn.useState([0,
0]),W=pg();Nn.useEffect(()=>{if(null==b?0:b.current){const ia=g?b.current.querySelector(g):b.current;if(ia){const sa=()=>{const {width:Va,height:Za}=ia.getBoundingClientRect(),lb=Ud.div([Va,Za],W.viewport.camera.zoom);I(lb);return lb};sa();this.getInnerHeight=()=>sa()[1];const Ka=new ResizeObserver(()=>{sa()});Ka.observe(ia);return()=>{Ka.disconnect()}}}return()=>{}},[b,g]);return n}getHeaderHeight(){var b;const g=Xs[null!=(b=this.props.scaleLevel)?b:"md"];return this.props.compact?0:40*g}getAutoResizeHeight(){return this.getInnerHeight?
this.getHeaderHeight()+this.getInnerHeight():null}getShapeSVGJsx({}){var b,g,n;const I=this.getBounds();return(0,pb.jsxs)(pb.Fragment,{children:[(0,pb.jsx)("rect",{fill:this.props.fill&&"var(--ls-secondary-background-color)"!==this.props.fill?`var(--ls-highlight-color-${this.props.fill})`:"var(--ls-secondary-background-color)",stroke:Bf(this.props.fill,"background"),strokeWidth:null!=(b=this.props.strokeWidth)?b:2,fillOpacity:null!=(g=this.props.opacity)?g:.2,width:I.width,rx:8,ry:8,height:I.height}),
!this.props.compact&&(0,pb.jsx)("rect",{fill:this.props.fill&&"var(--ls-secondary-background-color)"!==this.props.fill?Bf(this.props.fill,"background"):"var(--ls-tertiary-background-color)",fillOpacity:null!=(n=this.props.opacity)?n:.2,x:1,y:1,width:I.width-2,height:38,rx:8,ry:8}),(0,pb.jsx)("text",{style:{transformOrigin:"top left"},transform:`translate(${I.width/2}, ${10+I.height/2})`,textAnchor:"middle",fontFamily:"var(--ls-font-family)",fontSize:"32",fill:"var(--ls-secondary-text-color)",stroke:"var(--ls-secondary-text-color)",
children:"P"===this.props.blockType?this.props.pageId:""})]})}};Ma(xl,"id","logseq-portal");Ma(xl,"defaultSearchQuery","");Ma(xl,"defaultSearchFilter",null);Ma(xl,"defaultProps",{id:"logseq-portal",type:"logseq-portal",parentId:"page",point:[0,0],size:[400,50],collapsedHeight:0,stroke:"",fill:"",noFill:!1,borderRadius:8,strokeWidth:2,strokeType:"line",opacity:1,pageId:"",collapsed:!1,compact:!1,scaleLevel:"md",isAutoResizing:!0});mb([Eg],xl.prototype,"collapsed",1);mb([af],xl.prototype,"toggleCollapsed",
2);mb([Eg],xl.prototype,"scaleLevel",1);mb([af],xl.prototype,"setScaleLevel",2);var {min:Lr,PI:NH}=Math,Ys=NH+1E-4;pb=V(587);var OH={xs:1,sm:1.6,md:2,lg:3.2,xl:4.8,xxl:6},PH={easing:b=>Math.sin(b*Math.PI/2),simulatePressure:!0},QH={easing:b=>b*b,simulatePressure:!1},Pq=class extends mr{constructor(b={}){super(b);Ma(this,"ReactComponent",bf(({events:g,isErasing:n})=>{const {props:{opacity:I}}=this;return(0,pb.jsx)(Zn,xf(te({},g),{opacity:n?.2:I,children:this.getShapeSVGJsx()}))}));Ma(this,"setScaleLevel",
g=>Pc(this,null,function*(){this.update({scaleLevel:g,strokeWidth:OH[null!=g?g:"md"]});this.onResetBounds()}));Ma(this,"ReactIndicator",bf(()=>{const {pointsPath:g}=this;return(0,pb.jsx)("path",{d:g})}));Ma(this,"validateProps",g=>{g=gi(this,g);void 0!==g.strokeWidth&&(g.strokeWidth=Math.max(g.strokeWidth,1));return g});rg(this)}get pointsPath(){var b=this.props;if(2>b.points.length)var g="";else g=xf(te({size:1+1.5*b.strokeWidth,thinning:.65,streamline:.65,smoothing:.65},.5===b.points[1][2]?PH:QH),
{last:b.isComplete}),b=bp(b.points,g),g=po.getSvgPathFromStroke(cn(b,g));return g}get scaleLevel(){var b;return null!=(b=this.props.scaleLevel)?b:"md"}getShapeSVGJsx(){const {pointsPath:b,props:{stroke:g,strokeWidth:n,strokeType:I}}=this;return(0,pb.jsx)("path",{pointerEvents:"all",d:b,strokeWidth:n/2,strokeLinejoin:"round",strokeLinecap:"round",stroke:Bf(g,"text"),fill:Bf(g,"text"),strokeDasharray:"dashed"===I?"12 4":void 0})}};Ma(Pq,"id","pencil");Ma(Pq,"defaultProps",{id:"pencil",parentId:"page",
type:"pencil",point:[0,0],points:[],isComplete:!1,stroke:"",fill:"",noFill:!0,strokeType:"line",strokeWidth:2,opacity:1});mb([Eg],Pq.prototype,"pointsPath",1);mb([Eg],Pq.prototype,"scaleLevel",1);mb([af],Pq.prototype,"setScaleLevel",2);var BA=cb(V(22));pb=V(587);var RH={xs:10,sm:16,md:20,lg:32,xl:48,xxl:60},Mr=class extends Gp{constructor(){super(...arguments);Ma(this,"canEdit",!0);Ma(this,"ReactComponent",bf(({events:b,isErasing:g,isSelected:n,isEditing:I,onEditingEnd:W})=>{const {offset:[ia,sa],
props:{stroke:Ka,fill:Va,noFill:Za,strokeWidth:lb,opacity:vb,strokeType:Qb,label:cc,italic:Ub,fontWeight:rc,fontSize:lc}}=this,Vb=this.getVertices(lb/2).join();var sc=cc||I?rj(cc,{fontFamily:"var(--ls-font-family)",fontSize:lc,lineHeight:1,fontWeight:rc},4):[0,0];const Gc=[this.props.size[0]/2,2*this.props.size[1]/3];sc=Math.max(.5,Math.min(1,this.props.size[0]/(2*sc[0]),this.props.size[1]/(2*sc[1])));const Qc=this.getBounds(),Vc=BA.useMemo(()=>Ud.sub(Gc,Ud.toFixed([Qc.width/2,Qc.height/2])),[Qc,
sc,Gc]),Vd=BA.useCallback($d=>{var Ee;null==(Ee=this.update)?void 0:Ee.call(this,{label:$d})},[cc]);return(0,pb.jsxs)("div",xf(te({},b),{style:{width:"100%",height:"100%",overflow:"hidden"},children:[(0,pb.jsx)(ru,{font:"20px / 1 var(--ls-font-family)",text:cc,fontSize:lc,color:Bf(Ka,"text"),offsetX:Vc[0],offsetY:Vc[1]/sc,scale:sc,isEditing:I,onChange:Vd,onBlur:W,fontStyle:Ub?"italic":"normal",fontWeight:rc,pointerEvents:!!cc}),(0,pb.jsx)(Zn,{opacity:g?.2:vb,children:(0,pb.jsxs)("g",{transform:`translate(${ia}, ${sa})`,
children:[(0,pb.jsx)("polygon",{className:n||!Za?"tl-hitarea-fill":"tl-hitarea-stroke",points:Vb}),(0,pb.jsx)("polygon",{points:Vb,stroke:Bf(Ka,"stroke"),fill:Za?"none":Bf(Va,"background"),strokeWidth:lb,rx:2,ry:2,strokeLinejoin:"round",strokeDasharray:"dashed"===Qb?"8 2":void 0})]})})]}))}));Ma(this,"setScaleLevel",b=>Pc(this,null,function*(){this.update({scaleLevel:b,fontSize:RH[null!=b?b:"md"]});this.onResetBounds()}));Ma(this,"ReactIndicator",bf(()=>{const {offset:[b,g],props:{strokeWidth:n}}=
this;return(0,pb.jsx)("g",{children:(0,pb.jsx)("polygon",{transform:`translate(${b}, ${g})`,points:this.getVertices(n/2).join()})})}));Ma(this,"validateProps",b=>{void 0!==b.sides&&(b.sides=Math.max(b.sides,3));return gi(this,b)})}get scaleLevel(){var b;return null!=(b=this.props.scaleLevel)?b:"md"}getShapeSVGJsx(b){const {offset:[g,n],props:{stroke:I,fill:W,noFill:ia,strokeWidth:sa,opacity:Ka,strokeType:Va}}=this;b=this.getVertices(sa/2).join();return(0,pb.jsxs)("g",{transform:`translate(${g}, ${n})`,
opacity:Ka,children:[(0,pb.jsx)("polygon",{className:ia?"tl-hitarea-stroke":"tl-hitarea-fill",points:b}),(0,pb.jsx)("polygon",{points:b,stroke:Bf(I,"stroke"),fill:ia?"none":Bf(W,"background"),strokeWidth:sa,rx:2,ry:2,strokeLinejoin:"round",strokeDasharray:"dashed"===Va?"8 2":void 0})]})}};Ma(Mr,"id","polygon");Ma(Mr,"defaultProps",{id:"polygon",parentId:"page",type:"polygon",point:[0,0],size:[100,100],sides:3,ratio:1,isFlippedY:!1,stroke:"",fill:"",fontWeight:400,fontSize:20,italic:!1,noFill:!1,strokeType:"line",
strokeWidth:2,opacity:1,label:""});mb([Eg],Mr.prototype,"scaleLevel",1);mb([af],Mr.prototype,"setScaleLevel",2);var Zo=cb(V(22));pb=V(587);var SH={xs:10,sm:16,md:20,lg:32,xl:48,xxl:60},Nr=class extends nv{constructor(){super(...arguments);Ma(this,"ReactComponent",bf(({events:b,isErasing:g,isEditing:n,onEditingEnd:I})=>{const {props:{opacity:W,fontFamily:ia,fontSize:sa,fontWeight:Ka,italic:Va,lineHeight:Za,text:lb,stroke:vb,padding:Qb}}=this,cc=Zo.useRef(null),Ub=Zo.useRef(!1),rc=Zo.useRef(null),lc=
Zo.useCallback(Vc=>{const {isSizeLocked:Vd}=this.props;Vc=wr.normalizeText(Vc.currentTarget.value);Vd?this.update({text:Vc,size:this.getAutoSizedBoundingBox({text:Vc})}):this.update({text:Vc})},[]),Vb=Zo.useCallback(Vc=>{if("Escape"!==Vc.key)if("Tab"===Vc.key&&0===lb.length)Vc.preventDefault();else{if("Meta"!==Vc.key&&!Vc.metaKey)Vc.stopPropagation();else if("z"===Vc.key&&Vc.metaKey){Vc.shiftKey?document.execCommand("redo",!1):document.execCommand("undo",!1);Vc.stopPropagation();Vc.preventDefault();
return}"Tab"===Vc.key&&(Vc.preventDefault(),Vc.shiftKey?Mn.unindent(Vc.currentTarget):Mn.indent(Vc.currentTarget),this.update({text:wr.normalizeText(Vc.currentTarget.value)}))}},[]),sc=Zo.useCallback(Vc=>{n&&(Vc.currentTarget.setSelectionRange(0,0),null==I?void 0:I())},[I]),Gc=Zo.useCallback(Vc=>{n&&Ub.current&&document.activeElement===Vc.currentTarget&&Vc.currentTarget.select()},[n]),Qc=Zo.useCallback(Vc=>{n&&Vc.stopPropagation()},[n]);Zo.useEffect(()=>{n?requestAnimationFrame(()=>{Ub.current=!0;
const Vc=cc.current;Vc&&(Vc.focus(),Vc.select())}):null==I?void 0:I()},[n,I]);Zo.useLayoutEffect(()=>{if(0===this.props.size[0]||0===this.props.size[1])this.onResetBounds()},[]);return(0,pb.jsx)(Yn,xf(te({},b),{opacity:g?.2:W,children:(0,pb.jsx)("div",{ref:rc,className:"tl-text-shape-wrapper","data-hastext":!!lb,"data-isediting":n,style:{fontFamily:ia,fontStyle:Va?"italic":"normal",fontSize:sa,fontWeight:Ka,padding:Qb,lineHeight:Za,color:Bf(vb,"text")},children:n?(0,pb.jsx)("textarea",{ref:cc,className:"tl-text-shape-input",
name:"text",tabIndex:-1,autoComplete:"false",autoCapitalize:"false",autoCorrect:"false",autoSave:"false",placeholder:"",spellCheck:"true",wrap:"off",dir:"auto",datatype:"wysiwyg",defaultValue:lb,onFocus:Gc,onChange:lc,onKeyDown:Vb,onBlur:sc,onPointerDown:Qc}):(0,pb.jsxs)(pb.Fragment,{children:[lb,"​"]})})}))}));Ma(this,"setScaleLevel",b=>Pc(this,null,function*(){this.update({scaleLevel:b,fontSize:SH[null!=b?b:"md"]});this.onResetBounds()}));Ma(this,"ReactIndicator",bf(({isEditing:b})=>{const {props:{borderRadius:g},
bounds:n}=this;return b?null:(0,pb.jsx)("rect",{width:n.width,height:n.height,rx:g,ry:g,fill:"transparent"})}));Ma(this,"validateProps",b=>gi(this,b));Ma(this,"getBounds",()=>{const [b,g]=this.props.point,[n,I]=this.props.size;return{minX:b,minY:g,maxX:b+n,maxY:g+I,width:n,height:I}});Ma(this,"onResizeStart",({isSingle:b})=>{var g;if(!b)return this;this.scale=[...(null!=(g=this.props.scale)?g:[1,1])];return this.update({isSizeLocked:!1})});Ma(this,"onResetBounds",()=>{this.update({size:this.getAutoSizedBoundingBox(),
isSizeLocked:!0});return this})}get scaleLevel(){var b;return null!=(b=this.props.scaleLevel)?b:"md"}getAutoSizedBoundingBox(b={}){const {text:g=this.props.text,fontFamily:n=this.props.fontFamily,fontSize:I=this.props.fontSize,fontWeight:W=this.props.fontWeight,lineHeight:ia=this.props.lineHeight,padding:sa=this.props.padding}=b,[Ka,Va]=rj(g,{fontFamily:n,fontSize:I,lineHeight:ia,fontWeight:W},sa);return[Ka,Va]}getShapeSVGJsx(){var b=window.navigator.userAgent.toLowerCase();if(b.includes("webkit")&&
!b.includes("chrome"))return super.getShapeSVGJsx(null);const {props:{text:g,stroke:n,fontSize:I,fontFamily:W}}=this;b=this.getBounds();return(0,pb.jsx)("foreignObject",{width:b.width,height:b.height,children:(0,pb.jsx)("div",{style:{color:Bf(n,"text"),fontSize:I,fontFamily:W,display:"contents"},children:g})})}};Ma(Nr,"id","text");Ma(Nr,"defaultProps",{id:"box",parentId:"page",type:"text",point:[0,0],size:[0,0],isSizeLocked:!0,text:"",lineHeight:1.2,fontSize:20,fontWeight:400,italic:!1,padding:4,
fontFamily:"var(--ls-font-family)",borderRadius:0,stroke:"",fill:"",noFill:!0,strokeType:"line",strokeWidth:2,opacity:1});mb([Eg],Nr.prototype,"scaleLevel",1);mb([af],Nr.prototype,"setScaleLevel",2);var CA=cb(V(22));pb=V(587);var tu=class extends fn{constructor(){super(...arguments);Ma(this,"canFlip",!1);Ma(this,"canEdit",!0);Ma(this,"canChangeAspectRatio",!1);Ma(this,"ReactComponent",bf(({events:b,isErasing:g,asset:n,isEditing:I})=>{const {props:{opacity:W}}=this,ia=Kj();var sa=pg();const Ka=sa.selectedIds.has(this.id),
Va=ia||Ka&&!I||"select"!==sa.selectedTool.id;sa=CA.useCallback(lb=>{Va||lb.stopPropagation()},[Va]);const {handlers:Za}=CA.useContext(ln);return(0,pb.jsx)(Yn,xf(te({style:{overflow:"hidden",pointerEvents:"all",opacity:g?.2:W}},b),{children:(0,pb.jsx)("div",{onWheelCapture:sa,onPointerDown:sa,onPointerUp:sa,className:"tl-video-container",style:{pointerEvents:ia||!I&&!Ka?"none":"all",overflow:I?"auto":"hidden"},children:n&&(0,pb.jsx)("video",{controls:!0,src:Za?Za.makeAssetUrl(n.src):n.src})})}))}));
Ma(this,"ReactIndicator",bf(()=>{const {props:{size:[b,g]}}=this;return(0,pb.jsx)("rect",{width:b,height:g,fill:"transparent"})}))}};Ma(tu,"id","video");Ma(tu,"defaultProps",{id:"video1",parentId:"page",type:"video",point:[0,0],size:[100,100],opacity:1,assetId:"",clipping:0,isAspectRatioLocked:!0});pb=V(587);var DA=/^(?:https?:\/\/)?(?:www\.)?(?:youtu\.be\/|youtube\.com\/(?:embed\/|v\/|watch\?v=|watch\?.+&v=))((\w|-){11})(?:\S+)?$/,EA=class extends fn{constructor(){super(...arguments);Ma(this,"aspectRatio",
480/853);Ma(this,"canChangeAspectRatio",!1);Ma(this,"canFlip",!1);Ma(this,"canEdit",!0);Ma(this,"onYoutubeLinkChange",b=>{this.update({url:b,size:EA.defaultProps.size})});Ma(this,"ReactComponent",bf(({events:b,isErasing:g,isEditing:n})=>(0,pb.jsx)(Yn,xf(te({style:{overflow:"hidden",pointerEvents:"all",opacity:g?.2:1}},b),{children:(0,pb.jsx)("div",{className:"rounded-lg w-full h-full relative overflow-hidden shadow-xl",style:{pointerEvents:n?"all":"none",userSelect:"none"},children:this.embedId?(0,pb.jsx)("div",
{style:{overflow:"hidden",position:"relative",height:"100%"},children:(0,pb.jsx)("iframe",{className:"absolute inset-0 w-full h-full m-0",width:"853",height:"480",src:`https://www.youtube.com/embed/${this.embedId}`,frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0,title:"Embedded youtube"})}):(0,pb.jsx)("div",{className:"w-full h-full flex items-center justify-center p-4",style:{backgroundColor:"var(--ls-primary-background-color)"},
children:(0,pb.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 502 210.649",height:"210.65",width:"128",children:(0,pb.jsxs)("g",{children:[(0,pb.jsx)("path",{d:"M498.333 45.7s-2.91-20.443-11.846-29.447C475.157 4.44 462.452 4.38 456.627 3.687c-41.7-3-104.25-3-104.25-3h-.13s-62.555 0-104.255 3c-5.826.693-18.523.753-29.86 12.566-8.933 9.004-11.84 29.447-11.84 29.447s-2.983 24.003-2.983 48.009v22.507c0 24.006 2.983 48.013 2.983 48.013s2.907 20.44 11.84 29.446c11.337 11.817 26.23 11.44 32.86 12.677 23.84 2.28 101.315 2.983 101.315 2.983s62.62-.094 104.32-3.093c5.824-.694 18.527-.75 29.857-12.567 8.936-9.006 11.846-29.446 11.846-29.446s2.98-24.007 2.98-48.013V93.709c0-24.006-2.98-48.01-2.98-48.01",
fill:"#cd201f"}),(0,pb.jsx)("g",{children:(0,pb.jsx)("path",{d:"M187.934 169.537h-18.96V158.56c-7.19 8.24-13.284 12.4-19.927 12.4-5.826 0-9.876-2.747-11.9-7.717-1.23-3.02-2.103-7.736-2.103-14.663V68.744h18.957v81.833c.443 2.796 1.636 3.823 4.043 3.823 3.63 0 6.913-3.153 10.93-8.817V68.744h18.96v100.793zM102.109 139.597c.996 9.98-2.1 14.93-7.987 14.93s-8.98-4.95-7.98-14.93v-39.92c-1-9.98 2.093-14.657 7.98-14.657 5.89 0 8.993 4.677 7.996 14.657l-.01 39.92zm18.96-37.923c0-10.77-2.164-18.86-5.987-23.95-5.054-6.897-12.973-9.72-20.96-9.72-9.033 0-15.913 2.823-20.957 9.72-3.886 5.09-5.97 13.266-5.97 24.036l-.016 35.84c0 10.71 1.853 18.11 5.736 23.153 5.047 6.873 13.227 10.513 21.207 10.513 7.986 0 16.306-3.64 21.36-10.513 3.823-5.043 5.586-12.443 5.586-23.153v-35.926zM46.223 114.647v54.889h-19.96v-54.89S5.582 47.358 1.314 34.815H22.27L36.277 87.38l13.936-52.566H71.17l-24.947 79.833z"})}),
(0,pb.jsxs)("g",{fill:"#fff",children:[(0,pb.jsx)("path",{d:"M440.413 96.647c0-9.33 2.557-11.874 8.59-11.874 5.99 0 8.374 2.777 8.374 11.997v10.893l-16.964.02V96.647zm35.96 25.986l-.003-20.4c0-10.656-2.1-18.456-5.88-23.5-5.06-6.823-12.253-10.436-21.317-10.436-9.226 0-16.42 3.613-21.643 10.436-3.84 5.044-6.076 13.28-6.076 23.943v34.927c0 10.596 2.46 18.013 6.296 23.003 5.227 6.813 12.42 10.216 21.87 10.216 9.44 0 16.853-3.566 21.85-10.81 2.2-3.196 3.616-6.82 4.226-10.823.164-1.81.64-5.933.64-11.753v-2.827h-18.96c0 7.247.037 11.557-.133 12.54-1.033 4.834-3.623 7.25-8.07 7.25-6.203 0-8.826-4.636-8.76-13.843v-17.923h35.96zM390.513 140.597c0 9.98-2.353 13.806-7.563 13.806-2.973 0-6.4-1.53-9.423-4.553l.02-60.523c3.02-2.98 6.43-4.55 9.403-4.55 5.21 0 7.563 2.93 7.563 12.91v42.91zm2.104-72.453c-6.647 0-13.253 4.087-19.09 11.27l.02-43.603h-17.963V169.54h17.963l.027-10.05c6.036 7.47 12.62 11.333 19.043 11.333 7.193 0 12.45-3.85 14.863-11.267 1.203-4.226 1.993-10.733 1.993-19.956V99.684c0-9.447-1.21-15.907-2.416-19.917-2.41-7.466-7.247-11.623-14.44-11.623M340.618 169.537h-18.956V158.56c-7.193 8.24-13.283 12.4-19.926 12.4-5.827 0-9.877-2.747-11.9-7.717-1.234-3.02-2.107-7.736-2.107-14.663V69.744h18.96v80.833c.443 2.796 1.633 3.823 4.043 3.823 3.63 0 6.913-3.153 10.93-8.817V69.744h18.957v99.793z"}),
(0,pb.jsx)("path",{d:"M268.763 169.537h-19.956V54.77h-20.956V35.835l62.869-.024v18.96h-21.957v114.766z"})]})]})})})})}))));Ma(this,"ReactIndicator",bf(()=>{const {props:{size:[b,g]}}=this;return(0,pb.jsx)("rect",{width:b,height:g,fill:"transparent",rx:8,ry:8})}));Ma(this,"validateProps",b=>{void 0!==b.size&&(b.size[0]=Math.max(b.size[0],1),b.size[1]=Math.max(b.size[0]*this.aspectRatio,1));return gi(this,b)})}get embedId(){var b,g;const n=this.props.url,I=n.match(DA);return null!=(g=null!=(b=null==
I?void 0:I[1])?b:n)?g:""}getShapeSVGJsx(){const b=this.getBounds(),g=this.embedId;return g?(0,pb.jsxs)("g",{children:[(0,pb.jsx)("image",{width:b.width,height:b.height,href:`https://img.youtube.com/vi/${g}/mqdefault.jpg`,className:"grayscale-[50%]"}),(0,pb.jsx)("svg",{x:b.width/4,y:b.height/4,width:b.width/2,height:b.height/2,viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,pb.jsx)("path",{d:"M4.76447 3.12199C5.63151 3.04859 6.56082 3 7.5 3C8.43918 3 9.36849 3.04859 10.2355 3.12199C11.2796 3.21037 11.9553 3.27008 12.472 3.39203C12.9425 3.50304 13.2048 3.64976 13.4306 3.88086C13.4553 3.90618 13.4902 3.94414 13.5133 3.97092C13.7126 4.20149 13.8435 4.4887 13.918 5.03283C13.9978 5.6156 14 6.37644 14 7.52493C14 8.66026 13.9978 9.41019 13.9181 9.98538C13.8439 10.5206 13.7137 10.8061 13.5125 11.0387C13.4896 11.0651 13.4541 11.1038 13.4296 11.1287C13.2009 11.3625 12.9406 11.5076 12.4818 11.6164C11.9752 11.7365 11.3143 11.7942 10.2878 11.8797C9.41948 11.9521 8.47566 12 7.5 12C6.52434 12 5.58052 11.9521 4.7122 11.8797C3.68572 11.7942 3.02477 11.7365 2.51816 11.6164C2.05936 11.5076 1.7991 11.3625 1.57037 11.1287C1.54593 11.1038 1.51035 11.0651 1.48748 11.0387C1.28628 10.8061 1.15612 10.5206 1.08193 9.98538C1.00221 9.41019 1 8.66026 1 7.52493C1 6.37644 1.00216 5.6156 1.082 5.03283C1.15654 4.4887 1.28744 4.20149 1.48666 3.97092C1.5098 3.94414 1.54468 3.90618 1.56942 3.88086C1.7952 3.64976 2.05752 3.50304 2.52796 3.39203C3.04473 3.27008 3.7204 3.21037 4.76447 3.12199ZM0 7.52493C0 5.28296 0 4.16198 0.729985 3.31713C0.766457 3.27491 0.815139 3.22194 0.854123 3.18204C1.63439 2.38339 2.64963 2.29744 4.68012 2.12555C5.56923 2.05028 6.52724 2 7.5 2C8.47276 2 9.43077 2.05028 10.3199 2.12555C12.3504 2.29744 13.3656 2.38339 14.1459 3.18204C14.1849 3.22194 14.2335 3.27491 14.27 3.31713C15 4.16198 15 5.28296 15 7.52493C15 9.74012 15 10.8477 14.2688 11.6929C14.2326 11.7348 14.1832 11.7885 14.1444 11.8281C13.3629 12.6269 12.3655 12.71 10.3709 12.8763C9.47971 12.9505 8.50782 13 7.5 13C6.49218 13 5.52028 12.9505 4.62915 12.8763C2.63446 12.71 1.63712 12.6269 0.855558 11.8281C0.816844 11.7885 0.767442 11.7348 0.731221 11.6929C0 10.8477 0 9.74012 0 7.52493ZM5.25 5.38264C5.25 5.20225 5.43522 5.08124 5.60041 5.15369L10.428 7.27105C10.6274 7.35853 10.6274 7.64147 10.428 7.72895L5.60041 9.84631C5.43522 9.91876 5.25 9.79775 5.25 9.61736V5.38264Z",
fill:"#D10014",fillRule:"evenodd",clipRule:"evenodd"})})]}):super.getShapeSVGJsx({})}},Qq=EA;Ma(Qq,"id","youtube");Ma(Qq,"defaultProps",{id:"youtube",type:"youtube",parentId:"page",point:[0,0],size:[853,480],url:""});mb([Eg],Qq.prototype,"embedId",1);mb([af],Qq.prototype,"onYoutubeLinkChange",2);var Or=cb(V(22));pb=V(587);var FA=/https?:\/\/twitter.com\/[0-9a-zA-Z_]{1,20}\/status\/([0-9]*)/,GA=class extends fn{constructor(){super(...arguments);Ma(this,"canFlip",!1);Ma(this,"canEdit",!0);Ma(this,"initialHeightCalculated",
!0);Ma(this,"getInnerHeight",null);Ma(this,"onTwitterLinkChange",b=>{this.update({url:b,size:GA.defaultProps.size})});Ma(this,"ReactComponent",bf(({events:b,isErasing:g,isEditing:n})=>{const {renderers:{Tweet:I}}=Or.useContext(ln),W=pg(),ia=Or.useRef(null),[,sa]=this.useComponentSize(ia);Or.useEffect(()=>{var Ka,Va;const Za=null!=(Va=null==(Ka=this.getInnerHeight)?void 0:Ka.call(this))?Va:sa;sa&&1<Math.abs(Za-this.props.size[1])&&(this.update({size:[this.props.size[0],Za]}),W.persist(!0))},[sa]);
Or.useEffect(()=>{this.initialHeightCalculated||setTimeout(()=>{this.onResetBounds();W.persist(!0)})},[this.initialHeightCalculated]);return(0,pb.jsx)(Yn,xf(te({style:{overflow:"hidden",pointerEvents:"all",opacity:g?.2:1}},b),{children:(0,pb.jsx)("div",{className:"rounded-xl w-full h-full relative shadow-xl",style:{pointerEvents:n?"all":"none",userSelect:"none"},children:this.embedId?(0,pb.jsx)("div",{ref:ia,children:(0,pb.jsx)(I,{tweetId:this.embedId})}):null})}))}));Ma(this,"ReactIndicator",bf(()=>
{const {props:{size:[b,g]}}=this;return(0,pb.jsx)("rect",{width:b,height:g,fill:"transparent",rx:8,ry:8})}));Ma(this,"onResetBounds",b=>{b=this.getAutoResizeHeight();null!==b&&1<Math.abs(b-this.props.size[1])&&(this.update({size:[this.props.size[0],b]}),this.initialHeightCalculated=!0);return this});Ma(this,"onResize",(b,g)=>{var n;const {bounds:I,rotation:W,scale:[ia,sa]}=g;b=[...this.scale];0>ia&&(b[0]*=-1);0>sa&&(b[1]*=-1);g=null!=(n=this.getAutoResizeHeight())?n:I.height;return this.update({point:[I.minX,
I.minY],size:[Math.max(1,I.width),Math.max(1,g)],scale:b,rotation:W})});Ma(this,"validateProps",b=>{void 0!==b.size&&(b.size[0]=Math.min(Math.max(b.size[0],300),550),b.size[1]=Math.max(b.size[1],1));return gi(this,b)})}get embedId(){var b,g;const n=this.props.url,I=n.match(FA);return null!=(g=null!=(b=null==I?void 0:I[1])?b:n)?g:""}useComponentSize(b,g=""){const [n,I]=Or.useState([0,0]),W=pg();Or.useEffect(()=>{if(null==b?0:b.current){const ia=g?b.current.querySelector(g):b.current;if(ia){const sa=
()=>{const {width:Va,height:Za}=ia.getBoundingClientRect(),lb=Ud.div([Va,Za],W.viewport.camera.zoom);I(lb);return lb};sa();this.getInnerHeight=()=>sa()[1];const Ka=new ResizeObserver(()=>{sa()});Ka.observe(ia);return()=>{Ka.disconnect()}}}return()=>{}},[b,g]);return n}getAutoResizeHeight(){return this.getInnerHeight?this.getInnerHeight():null}getShapeSVGJsx(){const b=this.getBounds();return this.embedId?(0,pb.jsxs)("g",{children:[(0,pb.jsx)("rect",{width:b.width,height:b.height,fill:"#15202b",rx:8,
ry:8}),(0,pb.jsx)("svg",{x:b.width/4,y:b.height/4,width:b.width/2,height:b.height/2,viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,pb.jsx)("path",{d:"m13.464 4.4401c0.0091 0.13224 0.0091 0.26447 0.0091 0.39793 0 4.0664-3.0957 8.7562-8.7562 8.7562v-0.0024c-1.6721 0.0024-3.3095-0.47658-4.7172-1.3797 0.24314 0.02925 0.48751 0.04387 0.73248 0.04448 1.3857 0.0013 2.7319-0.46374 3.8221-1.3199-1.3169-0.024981-2.4717-0.8836-2.8751-2.1371 0.4613 0.08897 0.93662 0.070688 1.3894-0.053016-1.4357-0.29007-2.4686-1.5515-2.4686-3.0165v-0.039001c0.42779 0.23827 0.90676 0.37051 1.3967 0.38513-1.3522-0.90372-1.769-2.7026-0.95247-4.1091 1.5625 1.9226 3.8678 3.0914 6.3425 3.2151-0.24802-1.0689 0.090798-2.1889 0.89031-2.9403 1.2395-1.1651 3.1889-1.1054 4.3541 0.13346 0.68921-0.13589 1.3498-0.38879 1.9543-0.74711-0.22974 0.71237-0.71054 1.3175-1.3528 1.702 0.60999-0.071907 1.206-0.23522 1.7672-0.48446-0.41316 0.61913-0.93358 1.1584-1.5356 1.5942z",
fill:"#1d9bf0",fillRule:"evenodd",clipRule:"evenodd"})})]}):super.getShapeSVGJsx({})}},Pr=GA;Ma(Pr,"id","tweet");Ma(Pr,"defaultProps",{id:"tweet",type:"tweet",parentId:"page",point:[0,0],size:[331,290],url:""});mb([Eg],Pr.prototype,"embedId",1);mb([af],Pr.prototype,"onTwitterLinkChange",2);pb=V(587);var HA=[Ir,Jr,Nq,su,tu,Kr,Pq,Mr,Nr,Qq,Pr,Oq,Sp,xl,mw],qw=class extends gp{constructor(){super(...arguments);Ma(this,"Shape",Ir)}};Ma(qw,"id","box");Ma(qw,"shortcut",["9","r"]);var rw=class extends gp{constructor(){super(...arguments);
Ma(this,"Shape",Jr)}};Ma(rw,"id","ellipse");Ma(rw,"shortcut",["o"]);var sw=class extends Ft{};Ma(sw,"id","erase");Ma(sw,"shortcut",["6","e"]);var tw=class extends ts{constructor(){super(...arguments);Ma(this,"Shape",Nq);Ma(this,"simplify",!0);Ma(this,"simplifyTolerance",.618)}};Ma(tw,"id","highlighter");Ma(tw,"shortcut",["5","h"]);var uw=class extends Gt{constructor(){super(...arguments);Ma(this,"Shape",Kr)}};Ma(uw,"id","line");Ma(uw,"shortcut",["7","c"]);var vw=class extends ts{constructor(){super(...arguments);
Ma(this,"Shape",Pq);Ma(this,"simplify",!1)}};Ma(vw,"id","pencil");Ma(vw,"shortcut",["4","d"]);var IA=class extends gp{constructor(){super(...arguments);Ma(this,"Shape",Mr)}};Ma(IA,"id","polygon");var ww=class extends Et{constructor(){super(...arguments);Ma(this,"Shape",Nr)}};Ma(ww,"id","text");Ma(ww,"shortcut",["8","t"]);var JA=class extends gp{constructor(){super(...arguments);Ma(this,"Shape",Qq)}};Ma(JA,"id","youtube");var KA=class extends yi{constructor(){super(...arguments);Ma(this,"creatingShape");
Ma(this,"offset",[0,0]);Ma(this,"onEnter",()=>{this.app.history.pause();Hd(()=>{const b=new xl({id:$e(),parentId:this.app.currentPage.id,point:Ud.sub(this.app.inputs.originPoint,this.offset),size:xl.defaultProps.size,fill:this.app.settings.color,stroke:this.app.settings.color});this.creatingShape=b;this.app.currentPage.addShapes(b);this.app.setEditingShape(b);this.app.setSelectedShapes([b])})});Ma(this,"onPointerDown",b=>{switch(b.type){case "shape":if(b.shape===this.creatingShape)break;this.app.selectTool("select");
break;case "canvas":b.order||this.app.selectTool("select")}});Ma(this,"onExit",()=>{var b;this.creatingShape&&(this.app.history.resume(),(null==(b=this.creatingShape)?0:b.props.pageId)?this.app.setSelectedShapes([this.creatingShape.id]):(this.app.deleteShapes([this.creatingShape.id]),this.app.setEditingShape()),this.creatingShape=void 0)})}};Ma(KA,"id","creating");var LA=class extends yi{constructor(){super(...arguments);Ma(this,"cursor","crosshair");Ma(this,"onPointerDown",b=>{this.tool.transition("creating")})}};
Ma(LA,"id","idle");var Zs=class extends Ap{constructor(){super(...arguments);Ma(this,"Shape",xl);Ma(this,"onPinch",b=>{this.app.viewport.pinchZoom(b.point,b.delta,b.delta[2])})}};Ma(Zs,"id","logseq-portal");Ma(Zs,"shortcut",["3"]);Ma(Zs,"states",[LA,KA]);Ma(Zs,"initial","idle");var MA=class extends gp{constructor(){super(...arguments);Ma(this,"Shape",Sp)}};Ma(MA,"id","youtube");var NA=class extends gp{constructor(){super(...arguments);Ma(this,"Shape",Oq)}};Ma(NA,"id","iframe");var TH=cb(V(590));pb=
V(587);var UH=new Map(HA.map(b=>[b.id,b])),xw=class{constructor(b){Ma(this,"shapes");Ma(this,"pageId");Ma(this,"assets");b&&this.load(b)}load(b){const g=b.pages[0];this.pageId=null==g?void 0:g.id;this.assets=b.assets;this.shapes=null==g?void 0:g.shapes.map(n=>{var I=n.type;if(!I)throw Error("No shape type provided.");const W=UH.get(I);if(!W)throw Error(`Could not find shape class for ${I}`);return new W(n)}).filter(n=>"group"!==n.type)}generatePreviewJsx(b,g){var n,I;const W=[...(null!=(n=this.shapes)?
n:[]).map(Za=>Za.getRotatedBounds())];(n=null==b?void 0:b.currentView)&&W.push(n);let ia=Ve.getCommonBounds(W);if(!ia)return null;ia=Ve.expandBounds(ia,16);ia=g?Ve.ensureRatio(ia,g):ia;const sa=Za=>[(Za[0]-ia.minX).toFixed(2),(Za[1]-ia.minY).toFixed(2)],[Ka,Va]=n?sa([n.minX,n.minY]):[0,0];return ia&&(0,pb.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg","data-common-bound-x":ia.minX.toFixed(2),"data-common-bound-y":ia.minY.toFixed(2),"data-common-bound-width":ia.width.toFixed(2),"data-common-bound-height":ia.height.toFixed(2),
viewBox:[0,0,ia.width,ia.height].join(" "),children:[(0,pb.jsx)("defs",{children:n&&(0,pb.jsxs)(pb.Fragment,{children:[(0,pb.jsx)("rect",{id:this.pageId+"-camera-rect",transform:`translate(${Ka}, ${Va})`,width:n.width,height:n.height}),(0,pb.jsxs)("mask",{id:this.pageId+"-camera-mask",children:[(0,pb.jsx)("rect",{width:ia.width,height:ia.height,fill:"white"}),(0,pb.jsx)("use",{href:`#${this.pageId}-camera-rect`,fill:"black"})]})]})}),(0,pb.jsx)("g",{id:this.pageId+"-preview-shapes",children:null==
(I=this.shapes)?void 0:I.map(Za=>{var lb,vb;const {bounds:Qb,props:{rotation:cc}}=Za,[Ub,rc]=sa([Qb.minX,Qb.minY]),lc=+(180*((null!=cc?cc:0)+(null!=(lb=Qb.rotation)?lb:0))/Math.PI).toFixed(2),[Vb,sc]=[(Qb.width/2).toFixed(2),(Qb.height/2).toFixed(2)];return(0,pb.jsx)("g",{transform:[`translate(${Ub}, ${rc})`,`rotate(${lc}, ${Vb}, ${sc})`].join(" "),children:Za.getShapeSVGJsx({assets:null!=(vb=this.assets)?vb:[]})},Za.id)})}),(0,pb.jsx)("rect",{mask:n?`url(#${this.pageId}-camera-mask)`:"",width:ia.width,
height:ia.height,fill:"transparent"}),n&&(0,pb.jsx)("use",{id:"minimap-camera-rect","data-x":Ka,"data-y":Va,"data-width":n.width,"data-height":n.height,href:`#${this.pageId}-camera-rect`,fill:"transparent",stroke:"red",strokeWidth:4/b.camera.zoom})]})}exportAsSVG(b){return(b=this.generatePreviewJsx(void 0,b))?TH.default.renderToString(b):""}},VH=cb(V(22));pb=V(587);var uu=VH.forwardRef((b,g)=>{var {value:n,className:I}=b;b=Ia(b,["autoResize","value","className"]);return(0,pb.jsx)("div",{className:"tl-input"+
(I?" "+I:""),children:(0,pb.jsxs)("div",{className:"tl-input-sizer",children:[(0,pb.jsx)("div",{className:"tl-input-hidden",children:n}),(0,pb.jsx)("input",te({ref:g,value:n,className:"tl-text-input",type:"text"},b))]})})});pb=V(587);var Tp=({type:b,active:g})=>(0,pb.jsx)("span",{className:"tl-type-tag","data-active":g,children:(0,pb.jsx)("i",{className:`tie tie-${({B:"block",P:"page",WP:"whiteboard",BA:"new-block",PA:"new-page",WA:"new-whiteboard",BS:"block-search",PS:"page-search"})[b]}`})}),OA=
(b,g)=>(0,pb.jsx)("span",{children:b.split(new RegExp(`(${g.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$\x26")})`,"gi")).map((n,I)=>1===I%2?(0,pb.jsx)("mark",{className:"tl-highlighted",children:n}):n).map((n,I)=>(0,pb.jsx)(wm.default.Fragment,{children:n},I))}),WH=(b,g)=>{const {handlers:n}=wm.default.useContext(ln),[I,W]=wm.default.useState(null),ia=pm(b,200);wm.default.useEffect(()=>{let sa=!1;if(0<ia.length){const Ka={"pages?":!0,"blocks?":!0,"files?":!1};"B"===g?Ka["pages?"]=!1:"P"===g&&(Ka["blocks?"]=
!1);n.search(ia,Ka).then(Va=>{sa||W(Va)})}else W(null);return()=>{sa=!0}},[ia,null==n?void 0:n.search]);return I},PA=bf(({className:b,style:g,placeholder:n,onChange:I,onBlur:W,onAddBlock:ia})=>{const [sa,Ka]=wm.default.useState(xl.defaultSearchQuery),[Va,Za]=wm.default.useState(xl.defaultSearchFilter),lb=wm.default.useRef(null),{handlers:vb,renderers:Qb}=wm.default.useContext(ln),cc=wm.default.useCallback(Ee=>{var Ne;I(Ee);null==(Ne=lb.current)?void 0:Ne.blur();Ee&&(xl.defaultSearchQuery="",xl.defaultSearchFilter=
null)},[]),Ub=wm.default.useCallback(Ee=>{if(Ee=null==vb?void 0:vb.addNewBlock(Ee))cc(Ee),null==ia?void 0:ia(Ee);return Ee},[ia]),rc=wm.default.useRef(null),[lc,Vb]=wm.default.useState(0),sc=WH(sa,Va),[Gc,Qc]=wm.default.useState("circle-plus"),[Vc,Vd]=wm.default.useState(!1);wm.default.useEffect(()=>{setTimeout(()=>{var Ee;null==(Ee=lb.current)?void 0:Ee.focus()})},[Va]);wm.default.useEffect(()=>{xl.defaultSearchQuery=sa;xl.defaultSearchFilter=Va},[sa,Va]);const $d=wm.default.useMemo(()=>{var Ee;
const Ne=[],uf=null==Qb?void 0:Qb.Breadcrumb;if(!uf||!vb)return[];ia&&Ne.push({actionIcon:"circle-plus",onChosen:()=>!!Ub(sa),element:(0,pb.jsxs)("div",{className:"tl-quick-search-option-row",children:[(0,pb.jsx)(Tp,{active:!0,type:"BA"}),0<sa.length?(0,pb.jsxs)(pb.Fragment,{children:[(0,pb.jsx)("strong",{children:"New block:"}),sa]}):(0,pb.jsx)("strong",{children:"New block"})]})});(null==(Ee=null==sc?void 0:sc.pages)?0:Ee.some(rf=>rf.toLowerCase()===sa.toLowerCase()))||!sa||Ne.push({actionIcon:"circle-plus",
onChosen:()=>{cc(sa);return!0},element:(0,pb.jsxs)("div",{className:"tl-quick-search-option-row",children:[(0,pb.jsx)(Tp,{active:!0,type:"PA"}),(0,pb.jsx)("strong",{children:"New page:"}),sa]})},{actionIcon:"circle-plus",onChosen:()=>{null==vb?void 0:vb.addNewWhiteboard(sa);cc(sa);return!0},element:(0,pb.jsxs)("div",{className:"tl-quick-search-option-row",children:[(0,pb.jsx)(Tp,{active:!0,type:"WA"}),(0,pb.jsx)("strong",{children:"New whiteboard:"}),sa]})});0===sa.length&&null===Va&&Ne.push({actionIcon:"search",
onChosen:()=>{Za("B");return!0},element:(0,pb.jsxs)("div",{className:"tl-quick-search-option-row",children:[(0,pb.jsx)(Tp,{type:"BS"}),"Search only blocks"]})},{actionIcon:"search",onChosen:()=>{Za("P");return!0},element:(0,pb.jsxs)("div",{className:"tl-quick-search-option-row",children:[(0,pb.jsx)(Tp,{type:"PS"}),"Search only pages"]})});Va&&"P"!==Va||!sc||!sc.pages||Ne.push(...sc.pages.map(rf=>({actionIcon:"search",onChosen:()=>{cc(rf);return!0},element:(0,pb.jsxs)("div",{className:"tl-quick-search-option-row",
children:[(0,pb.jsx)(Tp,{type:vb.isWhiteboardPage(rf)?"WP":"P"}),OA(rf,sa)]})})));Va&&"B"!==Va||!sc||!sc.blocks||Ne.push(...sc.blocks.filter(rf=>rf.content&&rf.uuid).map(({content:rf,uuid:ff})=>{const Ge=vb.queryBlockByUUID(ff);return{actionIcon:"search",onChosen:()=>{var Ad,fd,ld;return Ge?(cc(ff),null==(ld=null==(fd=null==(Ad=window.logseq)?void 0:Ad.api)?void 0:fd.set_blocks_id)?void 0:ld.call(fd,[ff]),!0):!1},element:Ge?(0,pb.jsxs)(pb.Fragment,{children:[(0,pb.jsxs)("div",{className:"tl-quick-search-option-row",
children:[(0,pb.jsx)(Tp,{type:"B"}),(0,pb.jsx)("div",{className:"tl-quick-search-option-breadcrumb",children:(0,pb.jsx)(uf,{blockId:ff})})]}),(0,pb.jsxs)("div",{className:"tl-quick-search-option-row",children:[(0,pb.jsx)("div",{className:"tl-quick-search-option-placeholder"}),OA(rf,sa)]})]}):(0,pb.jsx)("div",{className:"tl-quick-search-option-row",children:"Cache is outdated. Please click the 'Re-index' button in the graph's dropdown menu."})}}));return Ne},[sa,Va,sc,null==Qb?void 0:Qb.Breadcrumb,
vb]);wm.default.useEffect(()=>{const Ee=Ne=>{var uf,rf;let ff=lc;"ArrowDown"===Ne.key?ff=Math.min($d.length-1,lc+1):"ArrowUp"===Ne.key?ff=Math.max(0,lc-1):"Enter"===Ne.key?(null==(uf=$d[lc])?void 0:uf.onChosen(),Ne.stopPropagation(),Ne.preventDefault()):"Backspace"===Ne.key&&0===sa.length?Za(null):"Escape"===Ne.key&&cc("");ff!==lc&&(uf=$d[ff],Vb(ff),Qc(uf.actionIcon),Ne.stopPropagation(),Ne.preventDefault(),(Ne=null==(rf=rc.current)?void 0:rf.querySelector(".tl-quick-search-option:nth-child("+(ff+
1)+")"))&&(null==Ne?void 0:Ne.scrollIntoViewIfNeeded(!1)))};document.addEventListener("keydown",Ee,!0);return()=>{document.removeEventListener("keydown",Ee,!0)}},[$d,lc,sa]);return(0,pb.jsxs)("div",{className:"tl-quick-search "+(null!=b?b:""),style:g,children:[(0,pb.jsx)(qz,{icon:Gc,onClick:()=>{var Ee;null==(Ee=$d[lc])?void 0:Ee.onChosen()}}),(0,pb.jsxs)("div",{className:"tl-quick-search-input-container",children:[Va&&(0,pb.jsxs)("div",{className:"tl-quick-search-input-filter",children:[(0,pb.jsx)(Tp,
{type:Va}),"B"===Va?"Search blocks":"Search pages",(0,pb.jsx)("div",{className:"tl-quick-search-input-filter-remove",onClick:()=>Za(null),children:(0,pb.jsx)(Fh,{name:"x"})})]}),(0,pb.jsx)(uu,{ref:lb,type:"text",value:sa,className:"tl-quick-search-input",placeholder:null!=n?n:"Create or search your graph...",onChange:Ee=>Ka(Ee.target.value),onKeyDown:Ee=>{"Enter"===Ee.key&&cc(sa);Ee.stopPropagation()},onFocus:()=>{Vd(!0)},onBlur:()=>{Vd(!1);null==W?void 0:W()}})]}),0<$d.length&&(0,pb.jsx)("div",{onWheelCapture:Ee=>
Ee.stopPropagation(),className:"tl-quick-search-options",ref:rc,style:{visibility:Vc?"visible":"hidden",pointerEvents:Vc?"all":"none"},children:(0,pb.jsx)(hH,{style:{height:40*Math.min(Math.max(1,$d.length),12)},totalCount:$d.length,itemContent:Ee=>{const {actionIcon:Ne,onChosen:uf,element:rf}=$d[Ee];return(0,pb.jsx)("div",{"data-focused":Ee===lc,className:"tl-quick-search-option",tabIndex:0,onMouseEnter:()=>{Qc(Ne);Vb(Ee)},onPointerDownCapture:ff=>{uf()&&(ff.stopPropagation(),ff.preventDefault())},
children:rf},Ee)}})})]})});pb=V(587);var XH=bf(function(b){var {pageId:g,portalType:n,refs:I,side:W,onRefsChange:ia}=b;b=Ia(b,"pageId portalType shapeType refs side onRefsChange".split(" "));const sa=I.length+(g?1:0),Ka=0===I.length,Va=lb=>{lb&&!I.includes(lb)&&Ka&&ia([...I,lb])},Za=!(!g||!n);return(0,pb.jsx)(gA,xf(te({},b),{side:W,align:"start",alignOffset:-6,label:(0,pb.jsx)(Pb,{content:"Link",sideOffset:14,children:(0,pb.jsxs)("div",{className:"flex gap-1 relative items-center justify-center px-1",
children:[(0,pb.jsx)(Fh,{name:0<sa?"link":"add-link"}),0<sa&&(0,pb.jsx)("div",{className:"tl-shape-links-count",children:sa})]})}),children:(0,pb.jsxs)("div",{className:"color-level rounded-lg","data-show-reference-panel":Za,children:[Za&&(0,pb.jsxs)("div",{className:"tl-shape-links-reference-panel",children:[(0,pb.jsxs)("div",{className:"text-base inline-flex gap-1 items-center",children:[(0,pb.jsx)(Fh,{className:"opacity-50",name:"internal-link"}),"References"]}),(0,pb.jsx)(ql,{type:n,id:g})]}),
(0,pb.jsxs)("div",{className:"tl-shape-links-panel color-level",children:[(0,pb.jsxs)("div",{className:"text-base inline-flex gap-1 items-center",children:[(0,pb.jsx)(Fh,{className:"opacity-50",name:"add-link"}),"Link to any page or block"]}),Ka&&(0,pb.jsx)(PA,{style:{width:"calc(100% - 46px)",marginLeft:"46px"},placeholder:"Start typing to search...",onChange:Va}),0<I.length&&(0,pb.jsx)("div",{className:"flex flex-col items-stretch gap-2",children:I.map((lb,vb)=>(0,pb.jsx)(ql,{id:lb,type:Th(lb)?
"B":"P",onRemove:()=>{ia(I.filter((Qb,cc)=>vb!==cc))},showContent:!0},lb))})]})]})}))}),Wk=cb(V(22)),QA=V(22),RA=(0,QA.forwardRef)((b,g)=>{const {pressed:n,defaultPressed:I=!1,onPressedChange:W}=b,ia=Ia(b,["pressed","defaultPressed","onPressedChange"]),[sa=!1,Ka]=Vf({prop:n,onChange:W,defaultProp:I});return(0,QA.createElement)(Aj.button,yf({type:"button","aria-pressed":sa,"data-state":sa?"on":"off","data-disabled":b.disabled?"":void 0},ia,{ref:g,onClick:Je(b.onClick,()=>{b.disabled||Ka(!sa)})}))}),
YH=RA,[SA]=Ui("ToggleGroup",[Yt]),TA=Yt(),ZH=Wk.default.forwardRef((b,g)=>{const {type:n}=b;b=Ia(b,["type"]);if("single"===n)return Wk.default.createElement($H,yf({},b,{ref:g}));if("multiple"===n)return Wk.default.createElement(aI,yf({},b,{ref:g}));throw Error("Missing prop `type` expected on `ToggleGroup`");}),[UA,VA]=SA("ToggleGroup"),$H=Wk.default.forwardRef((b,g)=>{const {value:n,defaultValue:I,onValueChange:W=()=>{}}=b,ia=Ia(b,["value","defaultValue","onValueChange"]),[sa,Ka]=Vf({prop:n,defaultProp:I,
onChange:W});return Wk.default.createElement(UA,{scope:b.__scopeToggleGroup,type:"single",value:sa?[sa]:[],onItemActivate:Ka,onItemDeactivate:Wk.default.useCallback(()=>Ka(""),[Ka])},Wk.default.createElement(WA,yf({},ia,{ref:g})))}),aI=Wk.default.forwardRef((b,g)=>{const {value:n,defaultValue:I,onValueChange:W=()=>{}}=b,ia=Ia(b,["value","defaultValue","onValueChange"]),[sa=[],Ka]=Vf({prop:n,defaultProp:I,onChange:W}),Va=Wk.default.useCallback(lb=>Ka((vb=[])=>[...vb,lb]),[Ka]),Za=Wk.default.useCallback(lb=>
Ka((vb=[])=>vb.filter(Qb=>Qb!==lb)),[Ka]);return Wk.default.createElement(UA,{scope:b.__scopeToggleGroup,type:"multiple",value:sa,onItemActivate:Va,onItemDeactivate:Za},Wk.default.createElement(WA,yf({},ia,{ref:g})))}),[bI,cI]=SA("ToggleGroup"),WA=Wk.default.forwardRef((b,g)=>{const {__scopeToggleGroup:n,disabled:I=!1,rovingFocus:W=!0,orientation:ia,dir:sa,loop:Ka=!0}=b;var Va=Ia(b,"__scopeToggleGroup disabled rovingFocus orientation dir loop".split(" "));b=TA(n);const Za=ja(sa);Va=te({role:"group",
dir:Za},Va);return Wk.default.createElement(bI,{scope:n,rovingFocus:W,disabled:I},W?Wk.default.createElement(vz,yf({asChild:!0},b,{orientation:ia,dir:Za,loop:Ka}),Wk.default.createElement(Aj.div,yf({},Va,{ref:g}))):Wk.default.createElement(Aj.div,yf({},Va,{ref:g})))}),dI=Wk.default.forwardRef((b,g)=>{var n=VA("ToggleGroupItem",b.__scopeToggleGroup);const I=cI("ToggleGroupItem",b.__scopeToggleGroup),W=TA(b.__scopeToggleGroup);n=n.value.includes(b.value);const ia=I.disabled||b.disabled;b=xf(te({},b),
{pressed:n,disabled:ia});const sa=Wk.default.useRef(null);return I.rovingFocus?Wk.default.createElement(wz,yf({asChild:!0},W,{focusable:!ia,active:n,ref:sa}),Wk.default.createElement(XA,yf({},b,{ref:g}))):Wk.default.createElement(XA,yf({},b,{ref:g}))}),XA=Wk.default.forwardRef((b,g)=>{const {__scopeToggleGroup:n,value:I}=b,W=Ia(b,["__scopeToggleGroup","value"]),ia=VA("ToggleGroupItem",n);b={role:"radio","aria-checked":b.pressed,"aria-pressed":void 0};return Wk.default.createElement(RA,yf({},"single"===
ia.type?b:void 0,W,{ref:g,onPressedChange:sa=>{if(sa)ia.onItemActivate(I);else ia.onItemDeactivate(I)}}))}),YA=ZH,ZA=dI;pb=V(587);pb=V(587);pb=V(587);var $A="Edit AutoResizing Swatch NoFill StrokeType ScaleLevel TextStyle YoutubeLink TwitterLink IFrameSource LogseqPortalViewMode ArrowMode Links".split(" "),eI=["Edit","YoutubeLink","TwitterLink","IFrameSource","Links"],Cn=new Map,yw={"logseq-portal":"Swatch Edit LogseqPortalViewMode ScaleLevel AutoResizing Links".split(" "),youtube:["YoutubeLink",
"Links"],tweet:["TwitterLink","Links"],iframe:["IFrameSource","Links"],box:"Edit TextStyle Swatch ScaleLevel NoFill StrokeType Links".split(" "),ellipse:"Edit TextStyle Swatch ScaleLevel NoFill StrokeType Links".split(" "),polygon:"Edit TextStyle Swatch ScaleLevel NoFill StrokeType Links".split(" "),line:"Edit TextStyle Swatch ScaleLevel ArrowMode Links".split(" "),pencil:["Swatch","Links","ScaleLevel"],highlighter:["Swatch","Links","ScaleLevel"],text:"Edit TextStyle Swatch ScaleLevel AutoResizing Links".split(" "),
html:["ScaleLevel","AutoResizing","Links"],image:["Links"],video:["Links"]};Object.entries(yw).filter(([,b])=>b.includes("NoFill")&&b.includes("Swatch")).map(([b])=>b);var fI=bf(()=>{const {handlers:{isWhiteboardPage:b,redirectToPage:g,getRedirectPageName:n,insertFirstPageBlock:I}}=pp.default.useContext(ln),W=pg(),ia=bl(W.selectedShapesArray,"Edit")[0];return(0,pb.jsx)(dc,{type:"button",tooltip:"Edit",onClick:()=>{var sa,Ka,Va,Za,lb,vb,Qb,cc,Ub;W.api.editShape(ia);if("logseq-portal"===ia.props.type){var rc=
ia.props.pageId;if("P"===ia.props.blockType){b(rc)&&g(rc);rc=n(ia.props.pageId);let lc=null==(Va=null==(Ka=null==(sa=window.logseq)?void 0:sa.api)?void 0:Ka.get_page_blocks_tree)?void 0:Va.call(Ka,rc);0===(null==lc?void 0:lc.length)&&(I(rc),lc=null==(vb=null==(lb=null==(Za=window.logseq)?void 0:Za.api)?void 0:lb.get_page_blocks_tree)?void 0:vb.call(lb,rc));sa=(null==lc?void 0:lc.find(Vb=>!("propertiesOrder"in Vb)))||lc[0];rc=null==sa?void 0:sa.uuid}null==(Ub=null==(cc=null==(Qb=window.logseq)?void 0:
Qb.api)?void 0:cc.edit_block)?void 0:Ub.call(cc,rc)}},children:(0,pb.jsx)(Fh,{name:"label"in ia.props&&ia.props.label||"text"in ia.props&&ia.props.text?"forms":"text"})})}),gI=bf(()=>{const b=pg(),g=bl(b.selectedShapesArray,"AutoResizing"),n=g.every(I=>I.props.isAutoResizing);return(0,pb.jsx)(mm,{tooltip:"Auto Resize",toggle:g.every(I=>"logseq-portal"===I.props.type),className:"tl-button",pressed:n,onPressedChange:I=>{g.forEach(W=>{if("logseq-portal"===W.props.type)W.update({isAutoResizing:I});else W.onResetBounds({zoom:b.viewport.camera.zoom})});
b.persist()},children:(0,pb.jsx)(Fh,{name:"dimensions"})})}),hI=bf(()=>{const b=pg(),g=bl(b.selectedShapesArray,"LogseqPortalViewMode"),n=g.every(I=>I.collapsed);return(0,pb.jsx)(Qo,{title:"View Mode",options:[{value:"1",icon:"object-compact",tooltip:"Collapse"},{value:"0",icon:"object-expanded",tooltip:"Expand"}],value:n?"1":"0",onValueChange:I=>{g.forEach(W=>{W.toggleCollapsed()});b.persist()}})}),iI=bf(()=>{var {handlers:{isMobile:b}}=pp.default.useContext(ln);const g=pg(),n=bl(g.selectedShapesArray,
"ScaleLevel"),I=1<(new Set(n.map(W=>W.scaleLevel))).size?"":n[0].scaleLevel;b=[{label:b()?"XS":"Extra Small",value:"xs"},{label:b()?"SM":"Small",value:"sm"},{label:b()?"MD":"Medium",value:"md"},{label:b()?"LG":"Large",value:"lg"},{label:b()?"XL":"Extra Large",value:"xl"},{label:b()?"XXL":"Huge",value:"xxl"}];return(0,pb.jsx)(Nf,{tooltip:"Scale level",options:b,value:I,onValueChange:W=>{n.forEach(ia=>{ia.setScaleLevel(W)});g.persist()}})}),jI=bf(()=>{const b=pg(),g=bl(b.selectedShapesArray,"IFrameSource")[0],
n=pp.default.useCallback(W=>{g.onIFrameSourceChange(W.target.value.trim().toLowerCase());b.persist()},[]),I=pp.default.useCallback(()=>{g.reload()},[]);return(0,pb.jsxs)("span",{className:"flex gap-3",children:[(0,pb.jsx)(dc,{tooltip:"Reload",type:"button",onClick:I,children:(0,pb.jsx)(Fh,{name:"refresh"})}),(0,pb.jsx)(uu,{title:"Website Url",className:"tl-iframe-src",value:`${g.props.url}`,onChange:n}),(0,pb.jsx)(dc,{tooltip:"Open website url",type:"button",onClick:()=>window.open(g.props.url),children:(0,pb.jsx)(Fh,
{name:"external-link"})})]})}),kI=bf(()=>{const b=pg(),g=bl(b.selectedShapesArray,"YoutubeLink")[0],n=pp.default.useCallback(I=>{g.onYoutubeLinkChange(I.target.value);b.persist()},[]);return(0,pb.jsxs)("span",{className:"flex gap-3",children:[(0,pb.jsx)(uu,{title:"YouTube Link",className:"tl-youtube-link",value:`${g.props.url}`,onChange:n}),(0,pb.jsx)(dc,{tooltip:"Open YouTube Link",type:"button",onClick:()=>{var I,W,ia;return null==(ia=null==(W=null==(I=window.logseq)?void 0:I.api)?void 0:W.open_external_link)?
void 0:ia.call(W,g.props.url)},children:(0,pb.jsx)(Fh,{name:"external-link"})})]})}),lI=bf(()=>{const b=pg(),g=bl(b.selectedShapesArray,"TwitterLink")[0],n=pp.default.useCallback(I=>{g.onTwitterLinkChange(I.target.value);b.persist()},[]);return(0,pb.jsxs)("span",{className:"flex gap-3",children:[(0,pb.jsx)(uu,{title:"Twitter Link",className:"tl-twitter-link",value:`${g.props.url}`,onChange:n}),(0,pb.jsx)(dc,{tooltip:"Open Twitter Link",type:"button",onClick:()=>{var I,W,ia;return null==(ia=null==
(W=null==(I=window.logseq)?void 0:I.api)?void 0:W.open_external_link)?void 0:ia.call(W,g.props.url)},children:(0,pb.jsx)(Fh,{name:"external-link"})})]})}),mI=bf(()=>{const b=pg(),g=bl(b.selectedShapesArray,"NoFill"),n=pp.default.useCallback(W=>{g.forEach(ia=>ia.update({noFill:W}));b.persist()},[]),I=g.every(W=>W.props.noFill);return(0,pb.jsx)(mm,{tooltip:"Fill",className:"tl-button",pressed:I,onPressedChange:n,children:(0,pb.jsx)(Fh,{name:I?"droplet-off":"droplet"})})}),nI=bf(()=>{const b=pg(),g=
bl(b.selectedShapesArray,"Swatch"),n=pp.default.useCallback(W=>{g.forEach(ia=>{ia.update({fill:W,stroke:W})});b.persist()},[]),I=pp.default.useCallback(W=>{g.forEach(ia=>{ia.update({opacity:W})});b.persist()},[]);return(0,pb.jsx)(fh,{popoverSide:"top",color:g[0].props.noFill?g[0].props.stroke:g[0].props.fill,opacity:g[0].props.opacity,setOpacity:I,setColor:n})}),oI=bf(()=>{const b=pg(),g=bl(b.selectedShapesArray,"StrokeType"),n=g.every(I=>"dashed"===I.props.strokeType)?"dashed":g.every(I=>"line"===
I.props.strokeType)?"line":"mixed";return(0,pb.jsx)(Qo,{title:"Stroke Type",options:[{value:"line",icon:"circle",tooltip:"Solid"},{value:"dashed",icon:"circle-dashed",tooltip:"Dashed"}],value:n,onValueChange:I=>{g.forEach(W=>{W.update({strokeType:I})});b.persist()}})}),pI=bf(()=>{const b=pg(),g=bl(b.selectedShapesArray,"ArrowMode");var n=g.every(W=>{var ia;return"arrow"===(null==(ia=W.props.decorations)?void 0:ia.start)});const I=g.every(W=>{var ia;return"arrow"===(null==(ia=W.props.decorations)?
void 0:ia.end)});n=[n?"start":null,I?"end":null].filter(Ii);return(0,pb.jsx)(Ro,{title:"Arrow Head",options:[{value:"start",icon:"arrow-narrow-left"},{value:"end",icon:"arrow-narrow-right"}],value:n,onValueChange:W=>{g.forEach(ia=>{var sa=ia.update;var Ka={start:W.includes("start")?"arrow":null,end:W.includes("end")?"arrow":null};sa.call(ia,{decorations:Ka})});b.persist()}})}),qI=bf(()=>{const b=pg(),g=bl(b.selectedShapesArray,"TextStyle"),n=g.every(W=>500<W.props.fontWeight),I=g.every(W=>W.props.italic);
return(0,pb.jsxs)("span",{className:"flex gap-1",children:[(0,pb.jsx)(mm,{tooltip:"Bold",className:"tl-button",pressed:n,onPressedChange:W=>{g.forEach(ia=>{ia.update({fontWeight:W?700:400});ia.onResetBounds()});b.persist()},children:(0,pb.jsx)(Fh,{name:"bold"})}),(0,pb.jsx)(mm,{tooltip:"Italic",className:"tl-button",pressed:I,onPressedChange:W=>{g.forEach(ia=>{ia.update({italic:W});ia.onResetBounds()});b.persist()},children:(0,pb.jsx)(Fh,{name:"italic"})})]})}),rI=bf(()=>{var b;const g=pg(),n=g.selectedShapesArray[0];
return(0,pb.jsx)(XH,{onRefsChange:I=>{n.update({refs:I});g.persist()},refs:null!=(b=n.props.refs)?b:[],shapeType:n.props.type,side:"right",pageId:"logseq-portal"===n.props.type?n.props.pageId:void 0,portalType:"logseq-portal"===n.props.type?n.props.blockType:void 0})});Cn.set("Edit",fI);Cn.set("AutoResizing",gI);Cn.set("LogseqPortalViewMode",hI);Cn.set("ScaleLevel",iI);Cn.set("YoutubeLink",kI);Cn.set("TwitterLink",lI);Cn.set("IFrameSource",jI);Cn.set("NoFill",mI);Cn.set("Swatch",nI);Cn.set("StrokeType",
oI);Cn.set("ArrowMode",pI);Cn.set("TextStyle",qI);Cn.set("Links",rI);var aB=b=>{var g;return(null!=(g=yw[b])?g:[]).filter(Ii)},sI=b=>{const g=b.map(I=>I.props.type),n=new Set(0<b.length?aB(g[0]):[]);for(let I=1;I<g.length&&0<n.size;I++){const W=aB(g[I]);n.forEach(ia=>{W.includes(ia)||n.delete(ia)})}1<b.length&&eI.forEach(I=>{n.has(I)&&n.delete(I)});return Array.from(n).sort((I,W)=>$A.indexOf(I)-$A.indexOf(W)).map(I=>Cn.get(I))};pb=V(587);var tI=bf(({shapes:b,offsets:g,hidden:n})=>{const I=pg(),W=
Ss.useRef(null),ia=Ss.useRef(null);Ss.useLayoutEffect(()=>{setTimeout(()=>{const Ka=ia.current;if(Ka){var {offsetWidth:Va,offsetHeight:Za}=Ka;W.current=[Va,Za]}})});Ss.useLayoutEffect(()=>{var Ka;const Va=ia.current;if(Va){var Za=null!=(Ka=W.current)?Ka:[0,0];Ka=0;if(116>g.top){var lb=g.height/2+40;140>g.bottom&&(lb+=g.bottom-140)}else lb=-(g.height/2+40);16>g.left+g.width/2-Za[0]/2?Ka+=-(g.left+g.width/2-Za[0]/2-16):16>g.right+g.width/2-Za[0]/2&&(Ka+=g.right+g.width/2-Za[0]/2-16);var [vb,Qb]=[Ka,
lb];Va.style.transform=`translateX(${vb}px) translateY(${Qb}px)`}},[g]);if(!I)return null;const sa=sI(b);return(0,pb.jsx)(Yn,{centered:!0,children:0<sa.length&&(0,pb.jsx)("div",{ref:ia,className:"tl-toolbar tl-context-bar",style:{visibility:n?"hidden":"visible",pointerEvents:n?"none":"all"},children:sa.map((Ka,Va)=>(0,pb.jsxs)(Ss.Fragment,{children:[(0,pb.jsx)(Ka,{}),Va<sa.length-1&&(0,pb.jsx)(Kq,{className:"tl-toolbar-separator",orientation:"vertical"})]},Va))})})}),bB=cb(V(22)),yl=V(22),[uI]=Ui("ContextMenu",
[eu]),$s=eu(),[vI,cB]=uI("ContextMenu"),wI=(0,yl.forwardRef)((b,g)=>{const {__scopeContextMenu:n,disabled:I=!1}=b,W=Ia(b,["__scopeContextMenu","disabled"]),ia=cB("ContextMenuTrigger",n),sa=$s(n),Ka=(0,yl.useRef)({x:0,y:0}),Va=(0,yl.useRef)({getBoundingClientRect:()=>DOMRect.fromRect(te({width:0,height:0},Ka.current))}),Za=(0,yl.useRef)(0),lb=(0,yl.useCallback)(()=>window.clearTimeout(Za.current),[]);(0,yl.useEffect)(()=>lb,[lb]);(0,yl.useEffect)(()=>void(I&&lb()),[I,lb]);return(0,yl.createElement)(yl.Fragment,
null,(0,yl.createElement)(Kz,yf({},sa,{virtualRef:Va})),(0,yl.createElement)(Aj.span,yf({"data-state":ia.open?"open":"closed","data-disabled":I?"":void 0},W,{ref:g,style:te({WebkitTouchCallout:"none"},b.style),onContextMenu:I?b.onContextMenu:Je(b.onContextMenu,vb=>{lb();Ka.current={x:vb.clientX,y:vb.clientY};ia.onOpenChange(!0);vb.preventDefault()}),onPointerDown:I?b.onPointerDown:Je(b.onPointerDown,Bm(vb=>{lb();Za.current=window.setTimeout(()=>{Ka.current={x:vb.clientX,y:vb.clientY};ia.onOpenChange(!0)},
700)})),onPointerMove:I?b.onPointerMove:Je(b.onPointerMove,Bm(lb)),onPointerCancel:I?b.onPointerCancel:Je(b.onPointerCancel,Bm(lb)),onPointerUp:I?b.onPointerUp:Je(b.onPointerUp,Bm(lb))})))}),xI=(0,yl.forwardRef)((b,g)=>{var {__scopeContextMenu:n}=b;const I=Ia(b,["__scopeContextMenu"]),W=cB("ContextMenuContent",n);n=$s(n);const ia=(0,yl.useRef)(!1);return(0,yl.createElement)(Mz,yf({},n,I,{ref:g,side:"right",sideOffset:2,align:"start",onCloseAutoFocus:sa=>{var Ka;null===(Ka=b.onCloseAutoFocus)||void 0===
Ka||Ka.call(b,sa);!sa.defaultPrevented&&ia.current&&sa.preventDefault();ia.current=!1},onInteractOutside:sa=>{var Ka;null===(Ka=b.onInteractOutside)||void 0===Ka||Ka.call(b,sa);sa.defaultPrevented||W.modal||(ia.current=!0)},style:xf(te({},b.style),{["--radix-context-menu-content-transform-origin"]:"var(--radix-popper-transform-origin)"})}))}),Km=(0,yl.forwardRef)((b,g)=>{var {__scopeContextMenu:n}=b;b=Ia(b,["__scopeContextMenu"]);n=$s(n);return(0,yl.createElement)(Nz,yf({},n,b,{ref:g}))}),Rq=(0,yl.forwardRef)((b,
g)=>{var {__scopeContextMenu:n}=b;b=Ia(b,["__scopeContextMenu"]);n=$s(n);return(0,yl.createElement)(pF,yf({},n,b,{ref:g}))}),yI=b=>{const {__scopeContextMenu:g,children:n,onOpenChange:I,dir:W,modal:ia=!0}=b,[sa,Ka]=(0,yl.useState)(!1);b=$s(g);const Va=Vh(I),Za=(0,yl.useCallback)(lb=>{Ka(lb);Va(lb)},[Va]);return(0,yl.createElement)(vI,{scope:g,open:sa,onOpenChange:Za,modal:ia},(0,yl.createElement)(Oz,yf({},b,{dir:W,open:sa,onOpenChange:Za,modal:ia}),n))};pb=V(587);var zI=bf(function({children:b,collisionRef:g}){var n,
I,W,ia,sa,Ka,Va;const Za=pg(),lb=bB.useRef(null),vb=cc=>{cc();Za.transition("select")},Qb=bB.useMemo(()=>{var cc,Ub,rc;return(null==(rc=null==(Ub=null==(cc=null==window?void 0:window.logseq)?void 0:cc.api)?void 0:Ub.get_state_from_store)?void 0:rc.call(Ub,"ui/developer-mode?"))||!1},[]);return(0,pb.jsxs)(yI,{onOpenChange:cc=>{cc&&!Za.isIn("select.contextMenu")?Za.transition("select").selectedTool.transition("contextMenu"):!cc&&Za.isIn("select.contextMenu")&&Za.selectedTool.transition("idle")},children:[(0,pb.jsx)(wI,
{disabled:Za.editingShape&&0!==Object.keys(Za.editingShape).length,children:b}),(0,pb.jsx)(xI,{className:"tl-menu tl-context-menu",ref:lb,onEscapeKeyDown:()=>Za.transition("select"),collisionBoundary:g.current,asChild:!0,tabIndex:-1,children:(0,pb.jsxs)("div",{children:[1<(null==(n=Za.selectedShapes)?void 0:n.size)&&(0,pb.jsxs)(pb.Fragment,{children:[(0,pb.jsxs)(Km,{children:[(0,pb.jsxs)("div",{className:"tl-menu-button-row pb-0",children:[(0,pb.jsx)(dc,{tooltip:"Align left",onClick:()=>vb(()=>Za.align("left")),
children:(0,pb.jsx)(Fh,{name:"layout-align-left"})}),(0,pb.jsx)(dc,{tooltip:"Align center horizontally",onClick:()=>vb(()=>Za.align("centerHorizontal")),children:(0,pb.jsx)(Fh,{name:"layout-align-center"})}),(0,pb.jsx)(dc,{tooltip:"Align right",onClick:()=>vb(()=>Za.align("right")),children:(0,pb.jsx)(Fh,{name:"layout-align-right"})}),(0,pb.jsx)(Kq,{className:"tl-toolbar-separator",orientation:"vertical"}),(0,pb.jsx)(dc,{tooltip:"Distribute horizontally",onClick:()=>vb(()=>Za.distribute("horizontal")),
children:(0,pb.jsx)(Fh,{name:"layout-distribute-vertical"})})]}),(0,pb.jsxs)("div",{className:"tl-menu-button-row pt-0",children:[(0,pb.jsx)(dc,{tooltip:"Align top",onClick:()=>vb(()=>Za.align("top")),children:(0,pb.jsx)(Fh,{name:"layout-align-top"})}),(0,pb.jsx)(dc,{tooltip:"Align center vertically",onClick:()=>vb(()=>Za.align("centerVertical")),children:(0,pb.jsx)(Fh,{name:"layout-align-middle"})}),(0,pb.jsx)(dc,{tooltip:"Align bottom",onClick:()=>vb(()=>Za.align("bottom")),children:(0,pb.jsx)(Fh,
{name:"layout-align-bottom"})}),(0,pb.jsx)(Kq,{className:"tl-toolbar-separator",orientation:"vertical"}),(0,pb.jsx)(dc,{tooltip:"Distribute vertically",onClick:()=>vb(()=>Za.distribute("vertical")),children:(0,pb.jsx)(Fh,{name:"layout-distribute-horizontal"})})]})]}),(0,pb.jsx)(Rq,{className:"menu-separator"}),(0,pb.jsxs)(Km,{className:"tl-menu-item",onClick:()=>vb(Za.packIntoRectangle),children:[(0,pb.jsx)(Fh,{className:"tl-menu-icon",name:"layout-grid"}),"Pack into rectangle"]}),(0,pb.jsx)(Rq,{className:"menu-separator"})]}),
0<(null==(I=Za.selectedShapes)?void 0:I.size)&&(0,pb.jsxs)(pb.Fragment,{children:[(0,pb.jsxs)(Km,{className:"tl-menu-item",onClick:()=>vb(Za.api.zoomToSelection),children:["Zoom to fit",(0,pb.jsx)("div",{className:"tl-menu-right-slot",children:(0,pb.jsxs)("span",{className:"keyboard-shortcut",children:[(0,pb.jsx)("code",{children:zo})," ",(0,pb.jsx)("code",{children:"⇧"})," ",(0,pb.jsx)("code",{children:"1"})]})})]}),(0,pb.jsx)(Rq,{className:"menu-separator"})]}),(Za.selectedShapesArray.some(cc=>
"group"===cc.type||Za.getParentGroup(cc))||1<Za.selectedShapesArray.length)&&(0,pb.jsxs)(pb.Fragment,{children:[Za.selectedShapesArray.some(cc=>"group"===cc.type||Za.getParentGroup(cc))&&(0,pb.jsxs)(Km,{className:"tl-menu-item",onClick:()=>vb(Za.api.unGroup),children:[(0,pb.jsx)(Fh,{className:"tl-menu-icon",name:"ungroup"}),"Ungroup",(0,pb.jsx)("div",{className:"tl-menu-right-slot",children:(0,pb.jsxs)("span",{className:"keyboard-shortcut",children:[(0,pb.jsx)("code",{children:zo})," ",(0,pb.jsx)("code",
{children:"⇧"})," ",(0,pb.jsx)("code",{children:"G"})]})})]}),1<Za.selectedShapesArray.length&&(0,pb.jsxs)(Km,{className:"tl-menu-item",onClick:()=>vb(Za.api.doGroup),children:[(0,pb.jsx)(Fh,{className:"tl-menu-icon",name:"group"}),"Group",(0,pb.jsx)("div",{className:"tl-menu-right-slot",children:(0,pb.jsxs)("span",{className:"keyboard-shortcut",children:[(0,pb.jsx)("code",{children:zo})," ",(0,pb.jsx)("code",{children:"G"})]})})]}),(0,pb.jsx)(Rq,{className:"menu-separator"})]}),0<(null==(W=Za.selectedShapes)?
void 0:W.size)&&(0,pb.jsxs)(pb.Fragment,{children:[(0,pb.jsxs)(Km,{className:"tl-menu-item",onClick:()=>vb(Za.cut),children:[(0,pb.jsx)(Fh,{className:"tl-menu-icon",name:"cut"}),"Cut",(0,pb.jsx)("div",{className:"tl-menu-right-slot",children:(0,pb.jsxs)("span",{className:"keyboard-shortcut",children:[(0,pb.jsx)("code",{children:zo})," ",(0,pb.jsx)("code",{children:"X"})]})})]}),(0,pb.jsxs)(Km,{className:"tl-menu-item",onClick:()=>vb(Za.copy),children:[(0,pb.jsx)(Fh,{className:"tl-menu-icon",name:"copy"}),
"Copy",(0,pb.jsx)("div",{className:"tl-menu-right-slot",children:(0,pb.jsxs)("span",{className:"keyboard-shortcut",children:[(0,pb.jsx)("code",{children:zo})," ",(0,pb.jsx)("code",{children:"C"})]})})]})]}),(0,pb.jsxs)(Km,{className:"tl-menu-item",onClick:()=>vb(Za.paste),children:[(0,pb.jsx)(Fh,{className:"tl-menu-icon",name:"clipboard"}),"Paste",(0,pb.jsx)("div",{className:"tl-menu-right-slot",children:(0,pb.jsxs)("span",{className:"keyboard-shortcut",children:[(0,pb.jsx)("code",{children:zo}),
" ",(0,pb.jsx)("code",{children:"V"})]})})]}),1===(null==(ia=Za.selectedShapes)?void 0:ia.size)&&(0,pb.jsxs)(Km,{className:"tl-menu-item",onClick:()=>vb(()=>Za.paste(void 0,!0)),children:["Paste as link",(0,pb.jsx)("div",{className:"tl-menu-right-slot",children:(0,pb.jsxs)("span",{className:"keyboard-shortcut",children:[(0,pb.jsx)("code",{children:zo})," ",(0,pb.jsx)("code",{children:"⇧"})," ",(0,pb.jsx)("code",{children:"V"})]})})]}),(0,pb.jsx)(Rq,{className:"menu-separator"}),(0,pb.jsxs)(Km,{className:"tl-menu-item",
onClick:()=>vb(Za.api.selectAll),children:["Select all",(0,pb.jsx)("div",{className:"tl-menu-right-slot",children:(0,pb.jsxs)("span",{className:"keyboard-shortcut",children:[(0,pb.jsx)("code",{children:zo})," ",(0,pb.jsx)("code",{children:"A"})]})})]}),1<(null==(sa=Za.selectedShapes)?void 0:sa.size)&&(0,pb.jsx)(Km,{className:"tl-menu-item",onClick:()=>vb(Za.api.deselectAll),children:"Deselect all"}),0<(null==(Ka=Za.selectedShapes)?void 0:Ka.size)&&(0,pb.jsxs)(pb.Fragment,{children:[(0,pb.jsxs)(Km,
{className:"tl-menu-item",onClick:()=>vb(Za.api.deleteShapes),children:[(0,pb.jsx)(Fh,{className:"tl-menu-icon",name:"backspace"}),"Delete",(0,pb.jsx)("div",{className:"tl-menu-right-slot",children:(0,pb.jsx)("span",{className:"keyboard-shortcut",children:(0,pb.jsx)("code",{children:"Del"})})})]}),1<(null==(Va=Za.selectedShapes)?void 0:Va.size)&&(0,pb.jsxs)(pb.Fragment,{children:[(0,pb.jsx)(Rq,{className:"menu-separator"}),(0,pb.jsxs)(Km,{className:"tl-menu-item",onClick:()=>vb(Za.flipHorizontal),
children:[(0,pb.jsx)(Fh,{className:"tl-menu-icon",name:"flip-horizontal"}),"Flip horizontally"]}),(0,pb.jsxs)(Km,{className:"tl-menu-item",onClick:()=>vb(Za.flipVertical),children:[(0,pb.jsx)(Fh,{className:"tl-menu-icon",name:"flip-vertical"}),"Flip vertically"]})]}),(0,pb.jsx)(Rq,{className:"menu-separator"}),(0,pb.jsxs)(Km,{className:"tl-menu-item",onClick:()=>vb(Za.bringToFront),children:["Move to front",(0,pb.jsx)("div",{className:"tl-menu-right-slot",children:(0,pb.jsxs)("span",{className:"keyboard-shortcut",
children:[(0,pb.jsx)("code",{children:"⇧"})," ",(0,pb.jsx)("code",{children:"]"})]})})]}),(0,pb.jsxs)(Km,{className:"tl-menu-item",onClick:()=>vb(Za.sendToBack),children:["Move to back",(0,pb.jsx)("div",{className:"tl-menu-right-slot",children:(0,pb.jsxs)("span",{className:"keyboard-shortcut",children:[(0,pb.jsx)("code",{children:"⇧"})," ",(0,pb.jsx)("code",{children:"["})]})})]}),Qb&&(0,pb.jsx)(Km,{className:"tl-menu-item",onClick:()=>{1===Za.selectedShapesArray.length?console.log(Cc(Za.selectedShapesArray[0].serialized)):
console.log(Za.selectedShapesArray.map(cc=>Cc(cc.serialized)))},children:"(Dev) Print shape props"})]})]})})]})}),dB=cb(V(22));pb=V(587);var AI=bf(({shape:b})=>{const g=pg(),{handlers:n}=dB.default.useContext(ln),I=dB.default.useMemo(()=>{var W;const ia=[...(null!=(W=b.props.refs)?W:[])].map(sa=>[sa,!0]);"logseq-portal"===b.props.type&&b.props.pageId&&ia.unshift([b.props.pageId,!1]);return ia.filter(sa=>sa[0].toLowerCase()!==g.currentPage.name&&n.getBlockPageName(sa[0])!==g.currentPage.name)},[b.props.type,
b.props.parentId,b.props.refs]);return 0===I.length?null:(0,pb.jsx)("div",{className:"tl-quick-links",title:"Shape Quick Links",children:I.map(([W,ia])=>(0,pb.jsx)("div",{className:"tl-quick-links-row",children:(0,pb.jsx)(lA,{id:W,showReferenceContent:ia})},W))})}),BI=cb(V(22)),eB=cb(V(22)),CI=[".png",".svg",".jpg",".jpeg",".gif"],DI=[".mp4",".webm",".ogg"],EI=(b,g,n)=>Pc(void 0,[b,g,n],function*(I,{point:W,shiftKey:ia,dataTransfer:sa,fromDrop:Ka},Va){function Za(ld,nd){return Pc(this,null,function*(){const Ed=
Object.values(I.assets).find(xe=>xe.src===ld);return Ed?Ed:{id:$e(),type:nd?"video":"image",src:ld,size:yield Cj(Va.makeAssetUrl(ld),nd)}})}function lb(ld){return Pc(this,null,function*(){const nd=ld.filter(Ed=>"unknown"!==ho(Ed.name)).map(Ed=>Pc(this,null,function*(){try{const xe=yield Va.saveAsset(Ed);return yield Za(xe,"video"===ho(Ed.name))}catch(xe){console.error(xe)}return null}));return(yield Promise.all(nd)).filter(Ii)})}function vb(ld){return[xf(te({},Sp.defaultProps),{html:ld,point:[W[0],
W[1]]})]}function Qb(ld){return Pc(this,null,function*(){return Gn(Ub,Vb,lc,sc,rc,$d)(ld)})}function cc(){return Pc(this,null,function*(){const ld=yield navigator.clipboard.read(),nd=Gn(sc,rc,$d);return(yield Promise.all(ld.map(Ed=>nd(Ed)))).flat().filter(Ii)})}function Ub(ld){return Pc(this,null,function*(){var nd=Array.from(ld.files);return 0<nd.length?(uf=nd=yield lb(nd),nd.map((Ed,xe)=>{const Fe=xf(te({},"video"===Ed.type?tu.defaultProps:su.defaultProps),{id:$e(),assetId:Ed.id,opacity:1});Ed.size&&
Object.assign(Fe,{point:[W[0]-Ed.size[0]/4+16*xe,W[1]-Ed.size[1]/4+16*xe],size:Ud.div(Ed.size,2)});return Fe})):null})}function rc(ld){return Pc(this,null,function*(){if(ld.types.includes("text/plain")&&(ia||Ka))return null;const nd=yield Tn(ld,"text/html");return nd?Gn(Gc,vb)(nd):null})}function lc(ld){return Pc(this,null,function*(){var nd,Ed,xe,Fe,sf,mf,lf=ld.getData("block-uuid");if(lf){lf=lf.trim();const Vg=null==(xe=null==(Ed=null==(nd=window.logseq)?void 0:nd.api)?void 0:Ed.get_selected_blocks)?
void 0:xe.call(Ed);nd=Vg&&1<(null==Vg?void 0:Vg.length)?Vg.map(Ig=>Ig.uuid):[lf];null==(mf=null==(sf=null==(Fe=window.logseq)?void 0:Fe.api)?void 0:sf.set_blocks_id)?void 0:mf.call(sf,nd);Fe=nd.map(Ig=>Vd(`((${Ig}))`));return(yield Promise.all(Fe)).flat().filter(Ii).map((Ig,oi)=>xf(te({},Ig),{point:[W[0]+(xl.defaultProps.size[0]+16)*oi,W[1]]}))}return null})}function Vb(ld){return Pc(this,null,function*(){var nd=ld.getData("page-name");return nd?(nd=nd.trim(),Vd(`[[${nd}]]`)):null})}function sc(ld){return Pc(this,
null,function*(){var nd=yield Tn(ld,"text/plain");return nd?(nd=nd.trim(),Gn(Qc,Vc,Vd)(nd)):null})}function Gc(ld){if(ld=I.api.getClonedShapesFromTldrString(decodeURIComponent(ld),W)){const {shapes:nd,assets:Ed,bindings:xe}=ld;rf.push(...Ed);ff.push(...xe);return nd}return null}function Qc(ld){return Pc(this,null,function*(){try{new URL(ld);var nd=!0}catch(Ed){nd=!1}return!nd||ia||Ka?null:DA.test(ld)?[xf(te({},Qq.defaultProps),{url:ld,point:[W[0],W[1]]})]:FA.test(ld)?[xf(te({},Pr.defaultProps),{url:ld,
point:[W[0],W[1]]})]:[xf(te({},Oq.defaultProps),{url:ld,point:[W[0],W[1]]})]})}function Vc(ld){return ld.startsWith("\x3ciframe")?[xf(te({},Sp.defaultProps),{html:ld,point:[W[0],W[1]]})]:null}function Vd(ld){return Pc(this,null,function*(){if(/^\(\(.*\)\)$/.test(ld)&&40===ld.length){var nd=ld.slice(2,-2);if(Th(nd))return[xf(te({},xl.defaultProps),{point:[W[0],W[1]],size:[400,0],pageId:nd,fill:I.settings.color,stroke:I.settings.color,blockType:"B"})]}else if(/^\[\[.*\]\]$/.test(ld))return nd=ld.slice(2,
-2),[xf(te({},xl.defaultProps),{point:[W[0],W[1]],size:[400,0],pageId:nd,fill:I.settings.color,stroke:I.settings.color,blockType:"P"})];return null})}function $d(ld){return Pc(this,null,function*(){var nd=yield Tn(ld,"text/plain");return nd&&(nd=nd.trim(),nd=null==Va?void 0:Va.addNewBlock(nd))?[xf(te({},xl.defaultProps),{size:[400,0],point:[W[0],W[1]],pageId:nd,fill:I.settings.color,stroke:I.settings.color,blockType:"B",compact:!0})]:null})}var Ee,Ne;let uf=[],rf=[];const ff=[];I.cursors.setCursor("progress");
let Ge=[];try{sa?Ge.push(...(null!=(Ee=yield Qb(sa))?Ee:[])):Ge.push(...(null!=(Ne=yield cc())?Ne:[]))}catch(ld){console.error(ld)}const Ad=Ge.map(ld=>xf(te({},ld),{parentId:I.currentPageId,id:Th(ld.id)?ld.id:$e()})),fd=null==sa?void 0:sa.types.every(ld=>"Files"===ld);I.wrapUpdate(()=>{var ld=[...uf,...rf];0<ld.length&&I.createAssets(ld);0<Ad.length&&I.createShapes(Ad);I.currentPage.updateBindings(Object.fromEntries(ff.map(nd=>[nd.id,nd])));if(1===I.selectedShapesArray.length&&1===Ad.length&&!Ka){ld=
I.selectedShapesArray[0];const nd=I.getShapeById(Ad[0].id);I.createNewLineBinding(ld,nd)}I.setSelectedShapes(Ad.map(nd=>nd.id));I.selectedTool.transition("idle");I.cursors.setCursor("default");(Ka||fd)&&I.packIntoRectangle()})}),FI=cb(V(22));pb=V(587);var GI=[qw,rw,IA,sw,tw,uw,vw,ww,JA,NA,MA,Zs],HI=b=>{const {renderers:g}=yr.useContext(ln);return(0,pb.jsx)(g.BacklinksCount,xf(te({},b),{options:{"portal?":!1}}))},II=()=>{const b=yr.useRef(null),g=pg(),n=yr.useMemo(()=>({ContextBar:tI,BacklinksCount:HI,
QuickLinks:AI}),[]);return(0,pb.jsx)(zI,{collisionRef:b,children:(0,pb.jsx)("div",{ref:b,className:"logseq-tldraw logseq-tldraw-wrapper","data-tlapp":g.uuid,children:(0,pb.jsx)(tD,{components:n,children:(0,pb.jsx)(VF,{})})})})},JI=b=>{var {onPersist:g,model:n}=b;b=Ia(b,["onPersist","model"]);const I=cm(),W=oo(),ia=Nm(),sa=yr.useCallback((Ka,Va)=>{null==g?void 0:g(Ka,Va)},[n]);return(0,pb.jsx)(wD,xf(te({Shapes:HA,Tools:GI,onDrop:I,onPaste:W,onCanvasDBClick:ia,onPersist:sa,model:n},b),{children:(0,pb.jsx)(II,
{})}))},KI=function(b){var {renderers:g,handlers:n}=b;b=Ia(b,["renderers","handlers"]);const I={renderers:yr.useMemo(()=>Object.fromEntries(Object.entries(g).map(([W,ia])=>[W,yr.memo(ia)])),[]),handlers:n};return(0,pb.jsx)(ln.Provider,{value:I,children:(0,pb.jsx)(JI,te({},b))})}};
'use strict';var Idd=function(a){return a},Jdd=function(a,b){return $APP.uh.j(function(c){var d=$APP.lf(c);c=$APP.H.j(d,$APP.LC);d=$APP.H.j(d,$APP.tF);return new $APP.m(null,2,[$APP.sl,$APP.u.C(c),$APP.cEb,$APP.ky.j(d,new $APP.O(null,2,5,$APP.Q,[$APP.gE,$APP.cEb],null))],null)},$APP.Pf.j(function(c){return $APP.gE.C($APP.tF.C(c))},$APP.UG(a,b,new $APP.m(null,1,[$APP.it,new $APP.O(null,2,5,$APP.Q,[$APP.LC,$APP.tF],null)],null))))},Kdd=function(a){return $APP.sq.G(a,$APP.E([$APP.tq,!0]))},Ldd=function(a,
b,c,d){var e=$APP.$G(a);b=new $APP.m(null,2,[$APP.hE,$APP.xib,$APP.iE,new $APP.m(null,6,[$APP.sl,$APP.wa(b,"id"),$APP.W,$APP.wa(b,"name"),$APP.YH,Kdd($APP.wa(b,"bindings")),$APP.cEb,$APP.wa(b,"nonce"),$APP.qR,Kdd(c),$APP.$Db,d],null)],null);c=$APP.Fw();e=$APP.yH.C(e);e=$APP.n(e)?e:$APP.Fw();return new $APP.m(null,5,[$APP.hr,a,$APP.BG,"whiteboard",$APP.tF,b,$APP.zH,c,$APP.yH,e],null)},Mdd=function(a,b,c,d,e){a=Kdd(a.getCleanUpAssets());var f=$APP.uh.j(function(y){return $APP.wa(y,"id")},b.shapes),
g=$APP.Zg($APP.uh.j(function(y){y=$APP.lf(y);y=$APP.H.j(y,$APP.sl);return Kdd(b.getShapeById(y).serialized)},$APP.lA.j(c,d)));d=$APP.Zg($APP.uh.j($APP.sl,d));var h=$APP.Zg($APP.uh.j($APP.sl,c)),l=$APP.Zg($APP.Cm.j($APP.Qj,$APP.lA.j(h,d)));c=$APP.Zg($APP.Pf.j(function(y){y=$APP.sl.C(y);return l.C?l.C(y):l.call(null,y)},g));var p=$APP.Cm.j($APP.Qj,$APP.lA.j(d,h)),q=$APP.LB();d=$APP.x(p)?$APP.uh.j(function(y){return $APP.ky.j(y,new $APP.O(null,2,5,$APP.Q,[$APP.tF,$APP.gE],null))},function(){var y=new $APP.O(null,
1,5,$APP.Q,[$APP.Wy],null),z=$APP.pj.j(function(F){return new $APP.O(null,2,5,$APP.Q,[$APP.LC,$APP.Xh(F)],null)},p);return $APP.SE?$APP.SE(q,y,z):$APP.TE.call(null,q,y,z)}()):null;h=$APP.pj.j(function(y){return new $APP.O(null,2,5,$APP.Q,[$APP.nLa,new $APP.O(null,2,5,$APP.Q,[$APP.LC,$APP.Xh(y)],null)],null)},p);var r=$APP.lA.j(g,c),t=$APP.x(r)?function(){var y=new $APP.O(null,1,5,$APP.Q,[$APP.Wy],null),z=$APP.pj.j(function(F){return new $APP.O(null,2,5,$APP.Q,[$APP.LC,$APP.Xh($APP.sl.C(F))],null)},
r);return $APP.SE?$APP.SE(q,y,z):$APP.TE.call(null,q,y,z)}():null;return new $APP.m(null,4,[$APP.jnc,Ldd(e,b,a,f),$APP.CBc,$APP.uh.j(function(y){return $APP.Wd(l,$APP.u.C($APP.LC.C(y)))?$APP.R.F(y,$APP.zH,$APP.Fw()):$APP.esb(y)},$APP.uh.j(function(y){y=new $APP.m(null,2,[$APP.hE,$APP.WM,$APP.gE,y],null);y=new $APP.m(null,3,[$APP.NE,new $APP.m(null,1,[$APP.hr,$APP.gr.C?$APP.gr.C(e):$APP.gr.call(null,e)],null),$APP.cF,new $APP.m(null,1,[$APP.hr,e],null),$APP.tF,y],null);var z=$APP.Dib(y,e);return $APP.Kl.G($APP.E([y,
z]))},g)),$APP.rF,h,$APP.MTb,new $APP.m(null,2,[$APP.WAb,!0,$APP.Qv,new $APP.m(null,5,[$APP.TM,e,$APP.rEb,d,$APP.sEb,c,$APP.tEb,r,$APP.uEb,t],null)],null)],null)},Ndd=function(a,b){var c=$APP.bd($APP.A(b.pages)),d=$APP.Zg($APP.uh.j(function(l){return new $APP.m(null,2,[$APP.sl,l.id,$APP.cEb,l.nonce],null)},c.shapes)),e=$APP.LB(),f=function(){var l=$APP.ky.j($APP.v($APP.x0c),new $APP.O(null,2,5,$APP.Q,[e,a],null));return $APP.n(l)?l:$APP.Zg($APP.uh.j(function(p){return $APP.pr.F(p,$APP.sl,$APP.u)},
Jdd(e,a)))}();b=Mdd(b,c,d,f,a);var g=$APP.lf(b);f=$APP.H.j(g,$APP.jnc);b=$APP.H.j(g,$APP.CBc);c=$APP.H.j(g,$APP.rF);g=$APP.H.j(g,$APP.MTb);f=$APP.Rk.G(c,new $APP.O(null,1,5,$APP.Q,[f],null),$APP.E([b]));var h=$APP.ky.j(g,new $APP.O(null,2,5,$APP.Q,[$APP.Qv,$APP.sEb],null));h=$APP.n($APP.wf(function(l){return $APP.B.j("group",$APP.Em.C(l))},h))?$APP.R.F(g,$APP.vEb,$APP.Hv):$APP.n($APP.wf(function(l){return $APP.B.j("group",$APP.Em.C(l))},$APP.ky.j(g,new $APP.O(null,2,5,$APP.Q,[$APP.Qv,$APP.rEb],null))))?
$APP.R.F(g,$APP.vEb,$APP.loc):$APP.n($APP.wf(function(l){return $APP.B.j("line",$APP.Em.C(l))&&$APP.B.j("arrow ",$APP.Lo.C($APP.jmc.C(l)))},h))?$APP.R.F(g,$APP.vEb,$APP.byc):g;b=$APP.x($APP.Rk.j(b,c))?h:$APP.R.F(g,$APP.lYa,!0);$APP.Ih.R($APP.x0c,$APP.iv,new $APP.O(null,2,5,$APP.Q,[e,a],null),d);if($APP.Wd(new $APP.Vg(null,new $APP.m(null,1,[$APP.byc,null],null),null),$APP.vEb.C(b)))return $APP.OB($APP.CNc,new $APP.m(null,2,[$APP.uy,f,$APP.MTb,b],null));d=$APP.CNc.C($APP.v($APP.MB));$APP.Rk.j($APP.uy.C(d),
f);$APP.Kl.G($APP.E([b,$APP.MTb.C(d)]));$APP.OB($APP.CNc,$APP.kf);return null},Odd=function(a){a=$APP.TG(a);return $APP.Cm.j($APP.vib,a)},Pdd=function(a){var b=$APP.vy.C($APP.$G(a));a=Odd(a);a=$APP.Pf.j(function(d){return $APP.B.j(b,$APP.vy.C($APP.cF.C(d)))},a);var c=$APP.Zg($APP.Cm.j($APP.Fb,$APP.uh.j(function(d){return $APP.ky.F(d,new $APP.O(null,2,5,$APP.Q,[$APP.dF,$APP.vy],null),null)},a)));a=$APP.Cm.j(function(d){d=$APP.vy.C(d);return c.C?c.C(d):c.call(null,d)},a);return $APP.x(a)?$APP.A(a):
null},Qdd=function(){return $APP.am(null,function(){return $APP.am(fetch("./whiteboard/onboarding.edn"),function(a){return $APP.am(a.text(),function(b){return $APP.am($APP.Oxa(b),function(c){return $APP.Vl(c)})})})})},Rdd=function(a){var b=$APP.l1a();return($APP.rd(b)||$APP.B.j(1,$APP.Yc(b))&&$APP.B.j(a,$APP.hr.C($APP.A(b))))&&$APP.Jb($APP.ky.j($APP.v($APP.MB),new $APP.O(null,1,5,$APP.Q,[$APP.G$b],null)))},Sdd=function(a){return null!=a?$APP.dm($APP.am(null,function(){return $APP.am(Qdd(),function(b){var c=
$APP.lf(b);b=$APP.H.j(c,$APP.wH);c=$APP.H.j(c,$APP.bF);var d=$APP.A(b);b=$APP.aEb(d,c);d=$APP.uib(d);c=$APP.qR.C(d);d=$APP.YH.C(d);a.cloneShapesIntoCurrentPage($APP.Fi(new $APP.m(null,3,[$APP.lEb,b,$APP.qR,c,$APP.YH,d],null)));$APP.OB($APP.G$b,!0);b=$APP.rB($APP.Wdc,!0);return $APP.Vl(b)})}),function(b){return console.warn("Failed to populate onboarding whiteboard",b)}):null},Vdd=function(a,b){b=$APP.sq.G(b,$APP.E([new $APP.m(null,1,[$APP.tq,!0],null)]));b=$APP.lf(b);var c=$APP.H.j(b,Tdd),d=$APP.H.j(b,
$APP.KJ),e=$APP.H.j(b,Udd),f=$APP.LB();return $APP.am(null,function(){return $APP.am($APP.n(d)?$APP.tdb(f,a,new $APP.m(null,1,[$APP.bx,100],null)):null,function(g){return $APP.am($APP.n(c)?$APP.ydb(a,10):null,function(h){return $APP.am($APP.n(e)?$APP.zdb(a,100):null,function(l){return $APP.Vl($APP.Fi(new $APP.m(null,3,[$APP.wH,h,$APP.bF,g,$APP.jK,l],null)))})})})})},Wdd=function(a){return $APP.$l($APP.vyb($APP.LB(),new $APP.O(null,1,5,$APP.Q,[$APP.sq.C(a)],null)),function(b){var c=(c=$APP.x(b))?$APP.A(b):
c;return $APP.n(c)?(b=$APP.C.F(c,0,null),$APP.C.F(c,1,null),c=$APP.C.F(c,2,null),$APP.xyb($APP.n(c)?c:b)):null})},Xdd=function(){return $APP.ZAb(null)},Ydd=function(){return $APP.bBb(null)},ked=function(a){return $APP.Hg([Zdd,$dd,aed,bed,ced,ded,$APP.kD,eed,fed,ged,hed,ied,jed],[function(b){return $APP.hr.C($APP.v_a($APP.LB(),$APP.yi(b)))},function(b){return $APP.aH(b,!1)},function(b){return $APP.dEb(b)},$APP.Yw,function(b){return $APP.Gxb(b,new $APP.m(null,1,[$APP.oS,!1],null))},$APP.xH,Vdd,Wdd,
Idd,function(b){var c=$APP.u,d=c.C,e=$APP.QA(),f=$APP.$G(a),g=Pdd(a);b=new $APP.m(null,6,[$APP.dF,$APP.Tg($APP.n(g)?g:f,new $APP.O(null,1,5,$APP.Q,[$APP.vy],null)),$APP.LC,e,$APP.tG,$APP.n(b)?b:"",$APP.zF,$APP.ir,$APP.NE,new $APP.m(null,1,[$APP.hr,$APP.gr.C?$APP.gr.C(a):$APP.gr.call(null,a)],null),$APP.cF,new $APP.m(null,1,[$APP.hr,a],null)],null);$APP.UE(new $APP.O(null,1,5,$APP.Q,[b],null));return d.call(c,e)},function(b,c){return $APP.IC($APP.LB(),$APP.vy.C($APP.$G(b)),$APP.vh.C(c))},function(b){var c=
$APP.fw(b)?$APP.hr.C($APP.v_a($APP.LB(),$APP.yi(b))):null;c=$APP.n(c)?c:b;var d=$APP.VG(c),e=$APP.xH(c);return $APP.n(d)?$APP.n(e)?$APP.uM(c,new $APP.m(null,1,[$APP.tM,b],null)):$APP.sM($APP.aH(b,!1)):null},function(b){return $APP.Fi($APP.pG($APP.yi(b)))}])},jed=new $APP.N(null,"queryBlockByUUID","queryBlockByUUID",2091812895),ged=new $APP.N(null,"addNewBlock","addNewBlock",1426762680),Udd=new $APP.N(null,"files?","files?",-1267491104),Zdd=new $APP.N(null,"getBlockPageName","getBlockPageName",-1656908032),
led=new $APP.N(null,"renderers","renderers",-1460292282),med=new $APP.N(null,"model","model",331153215),$dd=new $APP.N(null,"getRedirectPageName","getRedirectPageName",-1858136925),bed=new $APP.N(null,"isMobile","isMobile",-2043133877),ned=new $APP.N(null,"onMount","onMount",-876858467),ced=new $APP.N(null,"insertFirstPageBlock","insertFirstPageBlock",-1676658548),fed=new $APP.N(null,"makeAssetUrl","makeAssetUrl",217779988),oed=new $APP.N(null,"onPersist","onPersist",-1848738852),ped=new $APP.N(null,
"Breadcrumb","Breadcrumb",-1351298906),ied=new $APP.N(null,"redirectToPage","redirectToPage",87147838),aed=new $APP.N(null,"addNewWhiteboard","addNewWhiteboard",554297706),eed=new $APP.N(null,"saveAsset","saveAsset",-668047853),qed=new $APP.N(null,"BacklinksCount","BacklinksCount",364670631),red=new $APP.N(null,"Block","Block",-1959785792),hed=new $APP.N(null,"sidebarAddBlock","sidebarAddBlock",-1204903203),sed=new $APP.N(null,"Page","Page",-1267059506),Tdd=new $APP.N(null,"pages?","pages?",-2065014049),
ted=new $APP.N(null,"PageName","PageName",-164991013),ued=new $APP.N(null,"Tweet","Tweet",-452258680),ded=new $APP.N(null,"isWhiteboardPage","isWhiteboardPage",-134150579),ved=new $APP.N(null,"BlockReference","BlockReference",-120254741);$APP.$ca("tldraw");var wed=$APP.lm(591);var xed,yed;$APP.H5c={};xed=$APP.NS($APP.wa(wed,"App"));$APP.K5c=$APP.wa(wed,"generateJSXFromModel");
yed=new $APP.m(null,7,[sed,$APP.Ir($APP.Mr,function(a){return(0,$APP.T4c)(new $APP.m(null,2,[$APP.TM,$APP.aH($APP.wa(a,"pageName"),!1),$APP.JCb,!0],null))},null,"frontend.extensions.tldraw/page-cp"),red,$APP.Ir($APP.Mr,function(a){a=$APP.Xh($APP.wa(a,"blockId"));var b=$APP.YTa($APP.C4b);a=b.C?b.C(a):b.call(null,a);return $APP.ur(a)},null,"frontend.extensions.tldraw/block-cp"),ped,$APP.Ir($APP.Mr,function(a){return $APP.ur($APP.QV(new $APP.m(null,1,[$APP.SZ,!0],null),$APP.LB(),$APP.Xh($APP.wa(a,"blockId")),
new $APP.m(null,2,[$APP.sVb,$APP.wa(a,"endSeparator"),$APP.tVb,$APP.wa(a,"levelLimit",3)],null)))},null,"frontend.extensions.tldraw/breadcrumb"),ued,$APP.Ir($APP.Mr,function(a){return(0,$APP.tUb)($APP.wa(a,"tweetId"))},null,"frontend.extensions.tldraw/tweet"),ted,$APP.Ir($APP.Mr,function(a){return(0,$APP.BV)(new $APP.m(null,1,[$APP.SZ,!0],null),new $APP.m(null,1,[$APP.hr,$APP.wa(a,"pageName")],null))},null,"frontend.extensions.tldraw/page-name-link"),qed,function(a){return $APP.yf.j($APP.N5c,$APP.uh.j(function(b){return $APP.sq.G($APP.wa(a,
b),$APP.E([new $APP.m(null,1,[$APP.tq,!0],null)]))},new $APP.O(null,3,5,$APP.Q,["id","className","options"],null)))},ved,$APP.Ir($APP.Mr,function(a){return(0,$APP.ITb)($APP.kf,$APP.wa(a,"blockId"),null)},null,"frontend.extensions.tldraw/block-reference")],null);
$APP.I5c=$APP.Ir($APP.Mr,function(a,b){function c(l){if($APP.n(l)){l.appUndo=Xdd;l.appRedo=Ydd;var p=$APP.wa(l,"api");return $APP.n(p)?$APP.$l(d?Sdd(p):null,function(){$APP.RUa(l,b);return h.C?h.C(l):h.call(null,l)}):null}return null}var d=Rdd(a),e=$APP.mEb(a),f=$APP.Wr(null),g=$APP.C.F(f,0,null),h=$APP.C.F(f,1,null);$APP.Xr(function(){$APP.n($APP.n(g)?b:g)&&$APP.RUa(g,b);return function(){return $APP.Fc}},new $APP.O(null,2,5,$APP.Q,[b,g],null));return $APP.n(e)?$APP.X("div",{style:{overscrollBehavior:"none"},
onBlur:function(l){l=$APP.wa(l,"target").tagName;var p=new $APP.Vg(null,new $APP.m(null,2,["INPUT",null,"TEXTAREA",null],null),null);l=p.C?p.C(l):p.call(null,l);return $APP.n(l)?$APP.KC():null},onWheel:$APP.sw,className:"draw tldraw whiteboard relative w-full h-full"},[d&&$APP.Jb(g)?$APP.X("div",{style:{zIndex:200},className:"absolute inset-0 flex items-center justify-center"},[$APP.ur($APP.WS("Loading onboarding whiteboard ..."))]):null,$APP.ur(function(){var l=new $APP.m(null,5,[led,yed,$APP.jB,
ked(a),ned,c,oed,function(p){$APP.OB(new $APP.O(null,2,5,$APP.Q,[$APP.UEc,$APP.LB()],null),$APP.Fw());return $APP.n(!1)?(console.time("tldraw persist"),p=Ndd(a,p),console.timeEnd("tldraw persist"),p):Ndd(a,p)},med,e],null);return xed.C?xed.C(l):xed.call(null,l)}())]):null},null,"frontend.extensions.tldraw/tldraw-app");$APP.$a.Yi();
}).call(this);