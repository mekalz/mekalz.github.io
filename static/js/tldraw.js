(function(){
shadow$provide[584]=function(wa,V,Ta,E){function p(r,B,C){var a,G={},v=null,k=null;void 0!==C&&(v=""+C);void 0!==B.key&&(v=""+B.key);void 0!==B.ref&&(k=B.ref);for(a in B)q.call(B,a)&&!d.hasOwnProperty(a)&&(G[a]=B[a]);if(r&&r.defaultProps)for(a in B=r.defaultProps,B)void 0===G[a]&&(G[a]=B[a]);return{$$typeof:S,type:r,key:v,ref:k,props:G,_owner:A.current}}V(19);wa=V(22);var S=60103;E.Fragment=60107;"function"===typeof Symbol&&Symbol.for&&(V=Symbol.for,S=V("react.element"),E.Fragment=V("react.fragment"));
var A=wa.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,q=Object.prototype.hasOwnProperty,d={key:!0,ref:!0,__self:!0,__source:!0};E.jsx=p;E.jsxs=p};
shadow$provide[586]=function(wa,V,Ta,E){Ta.exports=V(584)};
shadow$provide[587]=function(wa,V,Ta,E){function p(pc){for(var Fd="https://reactjs.org/docs/error-decoder.html?invariant\x3d"+pc,yd=1;yd<arguments.length;yd++)Fd+="\x26args[]\x3d"+encodeURIComponent(arguments[yd]);return"Minified React error #"+pc+"; visit "+Fd+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function S(pc){if(null==pc)return null;if("function"===typeof pc)return pc.displayName||pc.name||null;if("string"===typeof pc)return pc;
switch(pc){case M:return"Fragment";case aa:return"Portal";case D:return"Profiler";case Q:return"StrictMode";case X:return"Suspense";case F:return"SuspenseList"}if("object"===typeof pc)switch(pc.$$typeof){case P:return(pc.displayName||"Context")+".Consumer";case O:return(pc._context.displayName||"Context")+".Provider";case ba:var Fd=pc.render;Fd=Fd.displayName||Fd.name||"";return pc.displayName||(""!==Fd?"ForwardRef("+Fd+")":"ForwardRef");case ha:return S(pc.type);case Z:return S(pc._render);case K:Fd=
pc._payload;pc=pc._init;try{return S(pc(Fd))}catch(yd){}}return null}function A(pc,Fd){for(var yd=pc._threadCount|0;yd<=Fd;yd++)pc[yd]=pc._currentValue2,pc._threadCount=yd+1}function q(pc,Fd,yd,Zd){if(Zd&&(Zd=pc.contextType,"object"===typeof Zd&&null!==Zd))return A(Zd,yd),Zd[yd];if(pc=pc.contextTypes){yd={};for(var wd in pc)yd[wd]=Fd[wd];Fd=yd}else Fd=ya;return Fd}function d(pc){if(Ea.call(Za,pc))return!0;if(Ea.call(Oa,pc))return!1;if(Ua.test(pc))return Za[pc]=!0;Oa[pc]=!0;return!1}function r(pc,
Fd,yd,Zd){if(null!==yd&&0===yd.type)return!1;switch(typeof Fd){case "function":case "symbol":return!0;case "boolean":if(Zd)return!1;if(null!==yd)return!yd.acceptsBooleans;pc=pc.toLowerCase().slice(0,5);return"data-"!==pc&&"aria-"!==pc;default:return!1}}function B(pc,Fd,yd,Zd){if(null===Fd||"undefined"===typeof Fd||r(pc,Fd,yd,Zd))return!0;if(Zd)return!1;if(null!==yd)switch(yd.type){case 3:return!Fd;case 4:return!1===Fd;case 5:return isNaN(Fd);case 6:return isNaN(Fd)||1>Fd}return!1}function C(pc,Fd,
yd,Zd,wd,Qd,nd){this.acceptsBooleans=2===Fd||3===Fd||4===Fd;this.attributeName=Zd;this.attributeNamespace=wd;this.mustUseProperty=yd;this.propertyName=pc;this.type=Fd;this.sanitizeURL=Qd;this.removeEmptyString=nd}function a(pc){return pc[1].toUpperCase()}function G(pc){if("boolean"===typeof pc||"number"===typeof pc)return""+pc;pc=""+pc;var Fd=eb.exec(pc);if(Fd){var yd="",Zd,wd=0;for(Zd=Fd.index;Zd<pc.length;Zd++){switch(pc.charCodeAt(Zd)){case 34:Fd="\x26quot;";break;case 38:Fd="\x26amp;";break;case 39:Fd=
"\x26#x27;";break;case 60:Fd="\x26lt;";break;case 62:Fd="\x26gt;";break;default:continue}wd!==Zd&&(yd+=pc.substring(wd,Zd));wd=Zd+1;yd+=Fd}pc=wd!==Zd?yd+pc.substring(wd,Zd):yd}return pc}function v(pc,Fd){var yd=Ma.hasOwnProperty(pc)?Ma[pc]:null,Zd;if(Zd="style"!==pc)Zd=null!==yd?0===yd.type:!(2<pc.length)||"o"!==pc[0]&&"O"!==pc[0]||"n"!==pc[1]&&"N"!==pc[1]?!1:!0;if(Zd||B(pc,Fd,yd,!1))return"";if(null!==yd){pc=yd.attributeName;Zd=yd.type;if(3===Zd||4===Zd&&!0===Fd)return pc+'\x3d""';yd.sanitizeURL&&
(Fd=""+Fd);return pc+'\x3d"'+(G(Fd)+'"')}return d(pc)?pc+'\x3d"'+(G(Fd)+'"'):""}function k(pc,Fd){return pc===Fd&&(0!==pc||1/pc===1/Fd)||pc!==pc&&Fd!==Fd}function h(){if(null===oa)throw Error(p(321));return oa}function f(){if(0<Bb)throw Error(p(312));return{memoizedState:null,queue:null,next:null}}function w(){null===ra?null===Ca?(Aa=!1,Ca=ra=f()):(Aa=!0,ra=Ca):null===ra.next?(Aa=!1,ra=ra.next=f()):(Aa=!0,ra=ra.next);return ra}function x(pc,Fd,yd,Zd){for(;Ja;)Ja=!1,Bb+=1,ra=null,yd=pc(Fd,Zd);J();
return yd}function J(){oa=null;Ja=!1;Ca=null;Bb=0;ra=Sa=null}function z(pc,Fd){return"function"===typeof Fd?Fd(pc):Fd}function u(pc,Fd,yd){oa=h();ra=w();if(Aa){var Zd=ra.queue;Fd=Zd.dispatch;if(null!==Sa&&(yd=Sa.get(Zd),void 0!==yd)){Sa.delete(Zd);Zd=ra.memoizedState;do Zd=pc(Zd,yd.action),yd=yd.next;while(null!==yd);ra.memoizedState=Zd;return[Zd,Fd]}return[ra.memoizedState,Fd]}pc=pc===z?"function"===typeof Fd?Fd():Fd:void 0!==yd?yd(Fd):Fd;ra.memoizedState=pc;pc=ra.queue={last:null,dispatch:null};
pc=pc.dispatch=n.bind(null,oa,pc);return[ra.memoizedState,pc]}function t(pc,Fd){oa=h();ra=w();Fd=void 0===Fd?null:Fd;if(null!==ra){var yd=ra.memoizedState;if(null!==yd&&null!==Fd){var Zd=yd[1];a:if(null===Zd)Zd=!1;else{for(var wd=0;wd<Zd.length&&wd<Fd.length;wd++)if(!Na(Fd[wd],Zd[wd])){Zd=!1;break a}Zd=!0}if(Zd)return yd[0]}}pc=pc();ra.memoizedState=[pc,Fd];return pc}function n(pc,Fd,yd){if(!(25>Bb))throw Error(p(301));if(pc===oa)if(Ja=!0,pc={action:yd,next:null},null===Sa&&(Sa=new Map),yd=Sa.get(Fd),
void 0===yd)Sa.set(Fd,pc);else{for(Fd=yd;null!==Fd.next;)Fd=Fd.next;Fd.next=pc}}function R(){}function ka(pc){switch(pc){case "svg":return"http://www.w3.org/2000/svg";case "math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function L(pc){if(void 0===pc||null===pc)return pc;var Fd="";H.Children.forEach(pc,function(yd){null!=yd&&(Fd+=yd)});return Fd}function ma(pc,Fd){if(void 0===pc)throw Error(p(152,S(Fd)||"Component"));}function Y(pc,Fd,yd){function Zd(nd,
Sd){var Nb=Sd.prototype&&Sd.prototype.isReactComponent,gc=q(Sd,Fd,yd,Nb),Yb=[],rb=!1,mb={isMounted:function(){return!1},enqueueForceUpdate:function(){if(null===Yb)return null},enqueueReplaceState:function(oe,sd){rb=!0;Yb=[sd]},enqueueSetState:function(oe,sd){if(null===Yb)return null;Yb.push(sd)}};if(Nb){if(Nb=new Sd(nd.props,gc,mb),"function"===typeof Sd.getDerivedStateFromProps){var cc=Sd.getDerivedStateFromProps.call(null,nd.props,Nb.state);null!=cc&&(Nb.state=fa({},Nb.state,cc))}}else if(oa={},
Nb=Sd(nd.props,gc,mb),Nb=x(Sd,nd.props,Nb,gc),null==Nb||null==Nb.render){pc=Nb;ma(pc,Sd);return}Nb.props=nd.props;Nb.context=gc;Nb.updater=mb;mb=Nb.state;void 0===mb&&(Nb.state=mb=null);if("function"===typeof Nb.UNSAFE_componentWillMount||"function"===typeof Nb.componentWillMount)if("function"===typeof Nb.componentWillMount&&"function"!==typeof Sd.getDerivedStateFromProps&&Nb.componentWillMount(),"function"===typeof Nb.UNSAFE_componentWillMount&&"function"!==typeof Sd.getDerivedStateFromProps&&Nb.UNSAFE_componentWillMount(),
Yb.length){mb=Yb;var uc=rb;Yb=null;rb=!1;if(uc&&1===mb.length)Nb.state=mb[0];else{cc=uc?mb[0]:Nb.state;var Tc=!0;for(uc=uc?1:0;uc<mb.length;uc++){var bd=mb[uc];bd="function"===typeof bd?bd.call(Nb,cc,nd.props,gc):bd;null!=bd&&(Tc?(Tc=!1,cc=fa({},cc,bd)):fa(cc,bd))}Nb.state=cc}}else Yb=null;pc=Nb.render();ma(pc,Sd);if("function"===typeof Nb.getChildContext&&(nd=Sd.childContextTypes,"object"===typeof nd)){var Od=Nb.getChildContext(),be;for(be in Od)if(!(be in nd))throw Error(p(108,S(Sd)||"Unknown",
be));}Od&&(Fd=fa({},Fd,Od))}for(;H.isValidElement(pc);){var wd=pc,Qd=wd.type;if("function"!==typeof Qd)break;Zd(wd,Qd)}return{child:pc,context:Fd}}var fa=V(19),H=V(22),aa=60106,M=60107,Q=60108,D=60114,O=60109,P=60110,ba=60112,X=60113,F=60120,ha=60115,K=60116,Z=60121,ea=60117,ca=60119,pa=60129,za=60131;"function"===typeof Symbol&&Symbol.for&&(wa=Symbol.for,aa=wa("react.portal"),M=wa("react.fragment"),Q=wa("react.strict_mode"),D=wa("react.profiler"),O=wa("react.provider"),P=wa("react.context"),ba=wa("react.forward_ref"),
X=wa("react.suspense"),F=wa("react.suspense_list"),ha=wa("react.memo"),K=wa("react.lazy"),Z=wa("react.block"),ea=wa("react.fundamental"),ca=wa("react.scope"),pa=wa("react.debug_trace_mode"),za=wa("react.legacy_hidden"));wa=H.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;var ya={},Ha=new Uint16Array(16);for(V=0;15>V;V++)Ha[V]=V+1;Ha[15]=0;var Ua=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,
Ea=Object.prototype.hasOwnProperty,Oa={},Za={},Ma={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(pc){Ma[pc]=new C(pc,0,!1,pc,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(pc){var Fd=pc[0];Ma[Fd]=new C(Fd,1,!1,pc[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(pc){Ma[pc]=
new C(pc,2,!1,pc.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(pc){Ma[pc]=new C(pc,2,!1,pc,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(pc){Ma[pc]=new C(pc,3,!1,pc.toLowerCase(),null,!1,!1)});["checked",
"multiple","muted","selected"].forEach(function(pc){Ma[pc]=new C(pc,3,!0,pc,null,!1,!1)});["capture","download"].forEach(function(pc){Ma[pc]=new C(pc,4,!1,pc,null,!1,!1)});["cols","rows","size","span"].forEach(function(pc){Ma[pc]=new C(pc,6,!1,pc,null,!1,!1)});["rowSpan","start"].forEach(function(pc){Ma[pc]=new C(pc,5,!1,pc.toLowerCase(),null,!1,!1)});var fb=/[\-:]([a-z])/g;"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(pc){var Fd=
pc.replace(fb,a);Ma[Fd]=new C(Fd,1,!1,pc,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(pc){var Fd=pc.replace(fb,a);Ma[Fd]=new C(Fd,1,!1,pc,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(pc){var Fd=pc.replace(fb,a);Ma[Fd]=new C(Fd,1,!1,pc,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(pc){Ma[pc]=new C(pc,1,!1,pc.toLowerCase(),null,!1,!1)});
Ma.xlinkHref=new C("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(pc){Ma[pc]=new C(pc,1,!1,pc.toLowerCase(),null,!0,!0)});var eb=/["'&<>]/,Na="function"===typeof Object.is?Object.is:k,oa=null,Ca=null,ra=null,Aa=!1,Ja=!1,Sa=null,Bb=0,ib=null,Ob={readContext:function(pc){var Fd=ib.threadID;A(pc,Fd);return pc[Fd]},useContext:function(pc){h();var Fd=ib.threadID;A(pc,Fd);return pc[Fd]},useMemo:t,useReducer:u,useRef:function(pc){oa=
h();ra=w();var Fd=ra.memoizedState;return null===Fd?(pc={current:pc},ra.memoizedState=pc):Fd},useState:function(pc){return u(z,pc)},useLayoutEffect:function(){},useCallback:function(pc,Fd){return t(function(){return pc},Fd)},useImperativeHandle:R,useEffect:R,useDebugValue:R,useDeferredValue:function(pc){h();return pc},useTransition:function(){h();return[function(pc){pc()},!1]},useOpaqueIdentifier:function(){return(ib.identifierPrefix||"")+"R:"+(ib.uniqueID++).toString(36)},useMutableSource:function(pc,
Fd){h();return Fd(pc._source)}},Xb={area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0},ic=fa({menuitem:!0},Xb),Pa={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,
gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},nb=["Webkit","ms","Moz","O"];Object.keys(Pa).forEach(function(pc){nb.forEach(function(Fd){Fd=Fd+pc.charAt(0).toUpperCase()+pc.substring(1);Pa[Fd]=Pa[pc]})});var pb=/([A-Z])/g,Zb=/^ms-/,Jc=H.Children.toArray,
$c=wa.ReactCurrentDispatcher,Nc={listing:!0,pre:!0,textarea:!0},Gb=/^[a-zA-Z][a-zA-Z:_\.\-\d]*$/,xc={},Vc={},hd=Object.prototype.hasOwnProperty,Nd={children:null,dangerouslySetInnerHTML:null,suppressContentEditableWarning:null,suppressHydrationWarning:null},Md=function(){function pc(yd,Zd,wd){H.isValidElement(yd)?yd.type!==M?yd=[yd]:(yd=yd.props.children,yd=H.isValidElement(yd)?[yd]:Jc(yd)):yd=Jc(yd);yd={type:null,domNamespace:"http://www.w3.org/1999/xhtml",children:yd,childIndex:0,context:ya,footer:""};
var Qd=Ha[0];if(0===Qd){var nd=Ha;Qd=nd.length;var Sd=2*Qd;if(!(65536>=Sd))throw Error(p(304));var Nb=new Uint16Array(Sd);Nb.set(nd);Ha=Nb;Ha[0]=Qd+1;for(nd=Qd;nd<Sd-1;nd++)Ha[nd]=nd+1;Ha[Sd-1]=0}else Ha[0]=Ha[Qd];this.threadID=Qd;this.stack=[yd];this.exhausted=!1;this.currentSelectValue=null;this.previousWasTextNode=!1;this.makeStaticMarkup=Zd;this.suspenseDepth=0;this.contextIndex=-1;this.contextStack=[];this.contextValueStack=[];this.uniqueID=0;this.identifierPrefix=wd&&wd.identifierPrefix||""}
var Fd=pc.prototype;Fd.destroy=function(){if(!this.exhausted){this.exhausted=!0;this.clearProviders();var yd=this.threadID;Ha[yd]=Ha[0];Ha[0]=yd}};Fd.pushProvider=function(yd){var Zd=++this.contextIndex,wd=yd.type._context,Qd=this.threadID;A(wd,Qd);var nd=wd[Qd];this.contextStack[Zd]=wd;this.contextValueStack[Zd]=nd;wd[Qd]=yd.props.value};Fd.popProvider=function(){var yd=this.contextIndex,Zd=this.contextStack[yd],wd=this.contextValueStack[yd];this.contextStack[yd]=null;this.contextValueStack[yd]=
null;this.contextIndex--;Zd[this.threadID]=wd};Fd.clearProviders=function(){for(var yd=this.contextIndex;0<=yd;yd--)this.contextStack[yd][this.threadID]=this.contextValueStack[yd]};Fd.read=function(yd){if(this.exhausted)return null;var Zd=ib;ib=this;var wd=$c.current;$c.current=Ob;try{for(var Qd=[""],nd=!1;Qd[0].length<yd;){if(0===this.stack.length){this.exhausted=!0;var Sd=this.threadID;Ha[Sd]=Ha[0];Ha[0]=Sd;break}var Nb=this.stack[this.stack.length-1];if(nd||Nb.childIndex>=Nb.children.length){var gc=
Nb.footer;""!==gc&&(this.previousWasTextNode=!1);this.stack.pop();if("select"===Nb.type)this.currentSelectValue=null;else if(null!=Nb.type&&null!=Nb.type.type&&Nb.type.type.$$typeof===O)this.popProvider(Nb.type);else if(Nb.type===X){this.suspenseDepth--;var Yb=Qd.pop();if(nd){nd=!1;var rb=Nb.fallbackFrame;if(!rb)throw Error(p(303));this.stack.push(rb);Qd[this.suspenseDepth]+="\x3c!--$!--\x3e";continue}else Qd[this.suspenseDepth]+=Yb}Qd[this.suspenseDepth]+=gc}else{var mb=Nb.children[Nb.childIndex++],
cc="";try{cc+=this.render(mb,Nb.context,Nb.domNamespace)}catch(uc){if(null!=uc&&"function"===typeof uc.then)throw Error(p(294));throw uc;}finally{}Qd.length<=this.suspenseDepth&&Qd.push("");Qd[this.suspenseDepth]+=cc}}return Qd[0]}finally{$c.current=wd,ib=Zd,J()}};Fd.render=function(yd,Zd,wd){if("string"===typeof yd||"number"===typeof yd){wd=""+yd;if(""===wd)return"";if(this.makeStaticMarkup)return G(wd);if(this.previousWasTextNode)return"\x3c!-- --\x3e"+G(wd);this.previousWasTextNode=!0;return G(wd)}Zd=
Y(yd,Zd,this.threadID);yd=Zd.child;Zd=Zd.context;if(null===yd||!1===yd)return"";if(!H.isValidElement(yd)){if(null!=yd&&null!=yd.$$typeof){wd=yd.$$typeof;if(wd===aa)throw Error(p(257));throw Error(p(258,wd.toString()));}yd=Jc(yd);this.stack.push({type:null,domNamespace:wd,children:yd,childIndex:0,context:Zd,footer:""});return""}var Qd=yd.type;if("string"===typeof Qd)return this.renderDOM(yd,Zd,wd);switch(Qd){case za:case pa:case Q:case D:case F:case M:return yd=Jc(yd.props.children),this.stack.push({type:null,
domNamespace:wd,children:yd,childIndex:0,context:Zd,footer:""}),"";case X:throw Error(p(294));case ca:throw Error(p(343));}if("object"===typeof Qd&&null!==Qd)switch(Qd.$$typeof){case ba:oa={};var nd=Qd.render(yd.props,yd.ref);nd=x(Qd.render,yd.props,nd,yd.ref);nd=Jc(nd);this.stack.push({type:null,domNamespace:wd,children:nd,childIndex:0,context:Zd,footer:""});return"";case ha:return yd=[H.createElement(Qd.type,fa({ref:yd.ref},yd.props))],this.stack.push({type:null,domNamespace:wd,children:yd,childIndex:0,
context:Zd,footer:""}),"";case O:return Qd=Jc(yd.props.children),wd={type:yd,domNamespace:wd,children:Qd,childIndex:0,context:Zd,footer:""},this.pushProvider(yd),this.stack.push(wd),"";case P:Qd=yd.type;nd=yd.props;var Sd=this.threadID;A(Qd,Sd);Qd=Jc(nd.children(Qd[Sd]));this.stack.push({type:yd,domNamespace:wd,children:Qd,childIndex:0,context:Zd,footer:""});return"";case ea:throw Error(p(338));case K:return Qd=yd.type,nd=Qd._init,Qd=nd(Qd._payload),yd=[H.createElement(Qd,fa({ref:yd.ref},yd.props))],
this.stack.push({type:null,domNamespace:wd,children:yd,childIndex:0,context:Zd,footer:""}),""}throw Error(p(130,null==Qd?Qd:typeof Qd,""));};Fd.renderDOM=function(yd,Zd,wd){var Qd=yd.type.toLowerCase();"http://www.w3.org/1999/xhtml"===wd&&ka(Qd);if(!xc.hasOwnProperty(Qd)){if(!Gb.test(Qd))throw Error(p(65,Qd));xc[Qd]=!0}var nd=yd.props;if("input"===Qd)nd=fa({type:void 0},nd,{defaultChecked:void 0,defaultValue:void 0,value:null!=nd.value?nd.value:nd.defaultValue,checked:null!=nd.checked?nd.checked:
nd.defaultChecked});else if("textarea"===Qd){var Sd=nd.value;if(null==Sd){Sd=nd.defaultValue;var Nb=nd.children;if(null!=Nb){if(null!=Sd)throw Error(p(92));if(Array.isArray(Nb)){if(!(1>=Nb.length))throw Error(p(93));Nb=Nb[0]}Sd=""+Nb}null==Sd&&(Sd="")}nd=fa({},nd,{value:void 0,children:""+Sd})}else if("select"===Qd)this.currentSelectValue=null!=nd.value?nd.value:nd.defaultValue,nd=fa({},nd,{value:void 0});else if("option"===Qd){Nb=this.currentSelectValue;var gc=L(nd.children);if(null!=Nb){var Yb=
null!=nd.value?nd.value+"":gc;Sd=!1;if(Array.isArray(Nb))for(var rb=0;rb<Nb.length;rb++){if(""+Nb[rb]===Yb){Sd=!0;break}}else Sd=""+Nb===Yb;nd=fa({selected:void 0,children:void 0},nd,{selected:Sd,children:gc})}}if(Sd=nd){if(ic[Qd]&&(null!=Sd.children||null!=Sd.dangerouslySetInnerHTML))throw Error(p(137,Qd));if(null!=Sd.dangerouslySetInnerHTML){if(null!=Sd.children)throw Error(p(60));if(!("object"===typeof Sd.dangerouslySetInnerHTML&&"__html"in Sd.dangerouslySetInnerHTML))throw Error(p(61));}if(null!=
Sd.style&&"object"!==typeof Sd.style)throw Error(p(62));}Sd=nd;Nb=this.makeStaticMarkup;gc=1===this.stack.length;Yb="\x3c"+yd.type;a:if(-1===Qd.indexOf("-"))rb="string"===typeof Sd.is;else switch(Qd){case "annotation-xml":case "color-profile":case "font-face":case "font-face-src":case "font-face-uri":case "font-face-format":case "font-face-name":case "missing-glyph":rb=!1;break a;default:rb=!0}for(sd in Sd)if(hd.call(Sd,sd)){var mb=Sd[sd];if(null!=mb){if("style"===sd){var cc=void 0,uc="",Tc="";for(cc in mb)if(mb.hasOwnProperty(cc)){var bd=
0===cc.indexOf("--"),Od=mb[cc];if(null!=Od){if(bd)var be=cc;else if(be=cc,Vc.hasOwnProperty(be))be=Vc[be];else{var oe=be.replace(pb,"-$1").toLowerCase().replace(Zb,"-ms-");be=Vc[be]=oe}uc+=Tc+be+":";Tc=cc;bd=null==Od||"boolean"===typeof Od||""===Od?"":bd||"number"!==typeof Od||0===Od||Pa.hasOwnProperty(Tc)&&Pa[Tc]?(""+Od).trim():Od+"px";uc+=bd;Tc=";"}}mb=uc||null}cc=null;rb?Nd.hasOwnProperty(sd)||(cc=sd,cc=d(cc)&&null!=mb?cc+'\x3d"'+(G(mb)+'"'):""):cc=v(sd,mb);cc&&(Yb+=" "+cc)}}Nb||gc&&(Yb+=' data-reactroot\x3d""');
var sd=Yb;Sd="";Xb.hasOwnProperty(Qd)?sd+="/\x3e":(sd+="\x3e",Sd="\x3c/"+yd.type+"\x3e");a:{Nb=nd.dangerouslySetInnerHTML;if(null!=Nb){if(null!=Nb.__html){Nb=Nb.__html;break a}}else if(Nb=nd.children,"string"===typeof Nb||"number"===typeof Nb){Nb=G(Nb);break a}Nb=null}null!=Nb?(nd=[],Nc.hasOwnProperty(Qd)&&"\n"===Nb.charAt(0)&&(sd+="\n"),sd+=Nb):nd=Jc(nd.children);yd=yd.type;wd=null==wd||"http://www.w3.org/1999/xhtml"===wd?ka(yd):"http://www.w3.org/2000/svg"===wd&&"foreignObject"===yd?"http://www.w3.org/1999/xhtml":
wd;this.stack.push({domNamespace:wd,type:Qd,children:nd,childIndex:0,context:Zd,footer:Sd});this.previousWasTextNode=!1;return sd};return pc}();E.renderToNodeStream=function(){throw Error(p(207));};E.renderToStaticMarkup=function(pc,Fd){pc=new Md(pc,!0,Fd);try{return pc.read(Infinity)}finally{pc.destroy()}};E.renderToStaticNodeStream=function(){throw Error(p(208));};E.renderToString=function(pc,Fd){pc=new Md(pc,!1,Fd);try{return pc.read(Infinity)}finally{pc.destroy()}};E.version="17.0.2"};
shadow$provide[589]=function(wa,V,Ta,E){Ta.exports=V(587)};
shadow$provide[590]=function(wa,V,Ta,E){function p(){if(!wc&&(wc="undefined"!==typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!wc))throw Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return wc(Wc)}function S(b,g=0){return(vd[b[g+0]]+vd[b[g+1]]+vd[b[g+2]]+vd[b[g+3]]+"-"+vd[b[g+4]]+vd[b[g+5]]+"-"+vd[b[g+6]]+vd[b[g+7]]+"-"+vd[b[g+8]]+vd[b[g+9]]+"-"+vd[b[g+10]]+vd[b[g+11]]+vd[b[g+12]]+vd[b[g+13]]+vd[b[g+14]]+
vd[b[g+15]]).toLowerCase()}function A(b){let g=0;var m=0;for(var I of b)g+=I.w*I.h,m=Math.max(m,I.w);b.sort((sa,La)=>La.h-sa.h);m=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(g/.95)),m),h:Infinity}];let W=I=0;for(const sa of b)for(b=m.length-1;0<=b;b--){var ia=m[b];if(!(sa.w>ia.w||sa.h>ia.h)){sa.x=ia.x;sa.y=ia.y;W=Math.max(W,sa.y+sa.h);I=Math.max(I,sa.x+sa.w);sa.w===ia.w&&sa.h===ia.h?(ia=m.pop(),b<m.length&&(m[b]=ia)):sa.h===ia.h?(ia.x+=sa.w,ia.w-=sa.w):(sa.w!==ia.w&&m.push({x:ia.x+sa.w,y:ia.y,w:ia.w-
sa.w,h:sa.h}),ia.y+=sa.h,ia.h-=sa.h);break}}return{w:I,h:W,fill:g/(I*W)||0}}function q(b,...g){return{didIntersect:0<g.length,message:b,points:g}}function d(b,g,m=0){const I=[b[0]+g[0]/2,b[1]+g[1]/2],W=ud.rotWith(b,I,m),ia=ud.rotWith(ud.add(b,[g[0],0]),I,m),sa=ud.rotWith(ud.add(b,g),I,m);b=ud.rotWith(ud.add(b,[0,g[1]]),I,m);return[["top",[W,ia]],["right",[ia,sa]],["bottom",[sa,b]],["left",[b,W]]]}function r(b,g,m,I){const [W,ia]=b,[sa,La]=g,[Va,$a]=m,[lb,ub]=I;return La/sa!==(ub-$a)/(lb-Va)&&(g=sa*
(ub-$a)-La*(lb-Va),0!==g&&(b=((ia-$a)*(lb-Va)-(W-Va)*(ub-$a))/g,g=((ia-$a)*sa-(W-Va)*La)/g,0<=b&&0<=g&&1>=g))?q("intersection",[W+b*sa,ia+b*La]):q("no intersection")}function B(b,g,m,I,W=0){return h(m,I,W,b,g)}function C(b,g,m,I=0){const {minX:W,minY:ia,width:sa,height:La}=m;return B(b,g,[W,ia],[sa,La],I)}function a(b,g,m,I){var W=ud.sub(b,m);m=ud.sub(I,m);g=ud.sub(g,b);I=m[0]*W[1]-m[1]*W[0];W=g[0]*W[1]-g[1]*W[0];m=m[1]*g[0]-m[0]*g[1];return 0===I||0===W?q("coincident"):0===m?q("parallel"):0!==m&&
(I/=m,W/=m,0<=I&&1>=I&&0<=W&&1>=W)?q("intersection",ud.add(b,ud.mul(g,I))):q("no intersection")}function G(b,g,m,I){var W=(g[0]-b[0])*(g[0]-b[0])+(g[1]-b[1])*(g[1]-b[1]),ia=2*((g[0]-b[0])*(b[0]-m[0])+(g[1]-b[1])*(b[1]-m[1]));m=ia*ia-4*W*(m[0]*m[0]+m[1]*m[1]+b[0]*b[0]+b[1]*b[1]-2*(m[0]*b[0]+m[1]*b[1])-I*I);if(0>m)return q("outside");if(0===m)return q("tangent");I=Math.sqrt(m);m=(-ia+I)/(2*W);W=(-ia-I)/(2*W);if((0>m||1<m)&&(0>W||1<W))return 0>m&&0>W||1<m&&1<W?q("outside"):q("inside");ia=[];0<=m&&1>=
m&&ia.push(ud.lrp(b,g,m));0<=W&&1>=W&&ia.push(ud.lrp(b,g,W));return q("intersection",...ia)}function v(b,g,m,I,W,ia=0){if(0===I||0===W||ud.isEqual(b,g))return q("no intersection");I=0>I?I:-I;W=0>W?W:-W;b=ud.sub(ud.rotWith(b,m,-ia),m);g=ud.sub(ud.rotWith(g,m,-ia),m);var sa=ud.sub(g,b),La=sa[0]*sa[0]/I/I+sa[1]*sa[1]/W/W;sa=2*b[0]*sa[0]/I/I+2*b[1]*sa[1]/W/W;const Va=[];I=sa*sa-4*La*(b[0]*b[0]/I/I+b[1]*b[1]/W/W-1);0===I?Va.push(-sa/2/La):0<I&&(I=Math.sqrt(I),Va.push((-sa+I)/2/La),Va.push((-sa-I)/2/La));
La=Va.filter($a=>0<=$a&&1>=$a).map($a=>ud.add(m,ud.add(b,ud.mul(ud.sub(g,b),$a)))).map($a=>ud.rotWith($a,m,ia));return q("intersection",...La)}function k(b,g,m){const I=[];for(let W=1;W<m.length;W++){const ia=a(b,g,m[W-1],m[W]);ia&&I.push(...ia.points)}return 0===I.length?q("no intersection"):q("intersection",...m)}function h(b,g,m,I,W){return d(b,g,m).reduce((ia,[sa,[La,Va]])=>{(La=r(I,W,La,Va))&&ia.push(q(sa,...La.points));return ia},[]).filter(ia=>ia.didIntersect)}function f(b,g,m,I){return d(b,
g).reduce((W,[ia,[sa,La]])=>{(sa=a(m,I,sa,La))&&W.push(q(ia,...sa.points));return W},[]).filter(W=>W.didIntersect)}function w(b,g,m,I){return d(b,g).reduce((W,[ia,[sa,La]])=>{(sa=G(sa,La,m,I))&&W.push(Ga(re({},sa),{message:ia}));return W},[]).filter(W=>W.didIntersect)}function x(b,g,m,I,W,ia=0){return d(b,g).reduce((sa,[La,[Va,$a]])=>{(Va=v(Va,$a,m,I,W,ia))&&sa.push(Ga(re({},Va),{message:La}));return sa},[]).filter(sa=>sa.didIntersect)}function J(b,g,m){return d(b,g).reduce((I,[W,[ia,sa]])=>{ia=k(ia,
sa,m);ia.didIntersect&&I.push(q(W,...ia.points));return I},[]).filter(I=>I.didIntersect)}function z(b,g,m){return d(b,g).reduce((I,[W,[ia,sa]])=>{{const La=[];for(let Va=1;Va<m.length+1;Va++){const $a=a(ia,sa,m[Va-1],m[Va%m.length]);$a&&La.push(...$a.points)}ia=0===La.length?q("no intersection"):q("intersection",...m)}ia.didIntersect&&I.push(q(W,...ia.points));return I},[]).filter(I=>I.didIntersect)}function u(b,g,m,I=0,W,ia){return g===m?w(W,ia,b,g):x(W,ia,b,g,m,I)}function t(b,g,m){const {minX:I,
minY:W,width:ia,height:sa}=b;return f([I,W],[ia,sa],g,m)}function n(b){for(var g=arguments.length,m=Array(1<g?g-1:0),I=1;I<g;I++)m[I-1]=arguments[I];throw Error("number"===typeof b?"[MobX] minified error nr: "+b+(m.length?" "+m.map(String).join(","):"")+". Find the full error at: https://github.com/mobxjs/mobx/blob/main/packages/mobx/src/errors.ts":"[MobX] "+b);}function R(){return"undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof wa?wa:"undefined"!==
typeof self?self:cm}function ka(){ts||n("Proxy not available")}function L(b){var g=!1;return function(){if(!g)return g=!0,b.apply(this,arguments)}}function ma(b){return"function"===typeof b}function Y(b){switch(typeof b){case "string":case "symbol":case "number":return!0}return!1}function fa(b){return null!==b&&"object"===typeof b}function H(b){if(!fa(b))return!1;b=Object.getPrototypeOf(b);if(null==b)return!0;b=Object.hasOwnProperty.call(b,"constructor")&&b.constructor;return"function"===typeof b&&
b.toString()===ss}function aa(b){return(b=null==b?void 0:b.constructor)?"GeneratorFunction"===b.name||"GeneratorFunction"===b.displayName?!0:!1:!1}function M(b,g,m){dn(b,g,{enumerable:!1,writable:!0,configurable:!0,value:m})}function Q(b,g,m){dn(b,g,{enumerable:!1,writable:!1,configurable:!0,value:m})}function D(b,g){var m="isMobX"+b;g.prototype[m]=!0;return function(I){return fa(I)&&!0===I[m]}}function O(b){return b instanceof Map}function P(b){return b instanceof Set}function ba(b){var g=Object.keys(b);
if(!mq)return g;var m=Object.getOwnPropertySymbols(b);return m.length?[].concat(g,m.filter(function(I){return Vn.propertyIsEnumerable.call(b,I)})):g}function X(b){return null===b?null:"object"===typeof b?""+b:b}function F(b,g){return Vn.hasOwnProperty.call(b,g)}function ha(b,g){for(var m=0;m<g.length;m++){var I=g[m];I.enumerable=I.enumerable||!1;I.configurable=!0;"value"in I&&(I.writable=!0);Object.defineProperty(b,I.key,I)}}function K(b,g,m){g&&ha(b.prototype,g);m&&ha(b,m);Object.defineProperty(b,
"prototype",{writable:!1});return b}function Z(){Z=Object.assign||function(b){for(var g=1;g<arguments.length;g++){var m=arguments[g],I;for(I in m)Object.prototype.hasOwnProperty.call(m,I)&&(b[I]=m[I])}return b};return Z.apply(this,arguments)}function ea(b,g){b.prototype=Object.create(g.prototype);b.prototype.constructor=b;ca(b,g)}function ca(b,g){ca=Object.setPrototypeOf||function(m,I){m.__proto__=I;return m};return ca(b,g)}function pa(b){if(void 0===b)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
return b}function za(b,g){if(b){if("string"===typeof b)return ya(b,g);var m=Object.prototype.toString.call(b).slice(8,-1);"Object"===m&&b.constructor&&(m=b.constructor.name);if("Map"===m||"Set"===m)return Array.from(b);if("Arguments"===m||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(m))return ya(b,g)}}function ya(b,g){if(null==g||g>b.length)g=b.length;for(var m=0,I=Array(g);m<g;m++)I[m]=b[m];return I}function Ha(b,g){var m="undefined"!==typeof Symbol&&b[Symbol.iterator]||b["@@iterator"];if(m)return(m=
m.call(b)).next.bind(m);if(Array.isArray(b)||(m=za(b))||g&&b&&"number"===typeof b.length){m&&(b=m);var I=0;return function(){return I>=b.length?{done:!0}:{done:!1,value:b[I++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}function Ua(b){return Object.assign(function(g,m){Ea(g,m,b)},b)}function Ea(b,g,m){F(b,Sl)||M(b,Sl,Z({},b[Sl]));m.annotationType_!==qo&&(b[Sl][g]=m)}function Oa(b){F(b,
Sl)||M(b,Sl,Z({},b[Sl]));return b[Sl]}function Za(b,g,m){void 0===g&&(g=cg);void 0===m&&(m=cg);b=new ro(b);g!==cg&&Mc(dv,b,g,void 0);m!==cg&&vc(b,m);return b}function Ma(b,g,m){return Ub(b)?b:Array.isArray(b)?zg.array(b,{name:m}):H(b)?zg.object(b,void 0,{name:m}):O(b)?zg.map(b,{name:m}):P(b)?zg.set(b,{name:m}):"function"!==typeof b||bd(b)||Lc(b)?b:aa(b)?ws(b):yh(m,b)}function fb(b){return b}function eb(b,g){return{annotationType_:b,options_:g,make_:Na,extend_:oa}}function Na(b,g,m,I){var W;if(null!=
(W=this.options_)&&W.bound)return null===this.extend_(b,g,m,!1)?0:1;if(I===b.target_)return null===this.extend_(b,g,m,!1)?0:2;if(bd(m.value))return 1;b=Ca(b,this,g,m,!1);dn(I,g,b);return 2}function oa(b,g,m,I){m=Ca(b,this,g,m);return b.defineProperty_(g,m,I)}function Ca(b,g,m,I,W){var ia,sa,La,Va,$a,lb,ub;void 0===W&&(W=Ge.safeDescriptors);I=I.value;if(null!=(ia=g.options_)&&ia.bound){var Rb;I=I.bind(null!=(Rb=b.proxy_)?Rb:b.target_)}return{value:Nc(null!=(sa=null==(La=g.options_)?void 0:La.name)?
sa:m.toString(),I,null!=(Va=null==($a=g.options_)?void 0:$a.autoAction)?Va:!1,null!=(lb=g.options_)&&lb.bound?null!=(ub=b.proxy_)?ub:b.target_:void 0),configurable:W?b.isPlainObject_:!0,enumerable:!1,writable:W?!1:!0}}function ra(b,g){return{annotationType_:b,options_:g,make_:Aa,extend_:Ja}}function Aa(b,g,m,I){var W;if(I===b.target_)return null===this.extend_(b,g,m,!1)?0:2;if(null!=(W=this.options_)&&W.bound&&(!F(b.target_,g)||!Lc(b.target_[g]))&&null===this.extend_(b,g,m,!1))return 0;if(Lc(m.value))return 1;
b=Sa(b,this,g,m,!1,!1);dn(I,g,b);return 2}function Ja(b,g,m,I){var W;m=Sa(b,this,g,m,null==(W=this.options_)?void 0:W.bound);return b.defineProperty_(g,m,I)}function Sa(b,g,m,I,W,ia){void 0===ia&&(ia=Ge.safeDescriptors);g=I.value;Lc(g)||(g=ws(g));if(W){var sa;g=g.bind(null!=(sa=b.proxy_)?sa:b.target_);g.isMobXFlow=!0}return{value:g,configurable:ia?b.isPlainObject_:!0,enumerable:!1,writable:ia?!1:!0}}function Bb(b,g){return{annotationType_:b,options_:g,make_:ib,extend_:Ob}}function ib(b,g,m){return null===
this.extend_(b,g,m,!1)?0:1}function Ob(b,g,m,I){return b.defineComputedProperty_(g,Z({},this.options_,{get:m.get,set:m.set}),I)}function Xb(b,g){return{annotationType_:b,options_:g,make_:ic,extend_:Pa}}function ic(b,g,m){return null===this.extend_(b,g,m,!1)?0:1}function Pa(b,g,m,I){var W,ia;return b.defineObservableProperty_(g,m.value,null!=(W=null==(ia=this.options_)?void 0:ia.enhancer)?W:Ma,I)}function nb(b){return{annotationType_:"true",options_:b,make_:pb,extend_:Zb}}function pb(b,g,m,I){var W,
ia;if(m.get)return yg.make_(b,g,m,I);if(m.set){m=Nc(g.toString(),m.set);if(I===b.target_)return null===b.defineProperty_(g,{configurable:Ge.safeDescriptors?b.isPlainObject_:!0,set:m})?0:2;dn(I,g,{configurable:!0,set:m});return 2}if(I!==b.target_&&"function"===typeof m.value){var sa;if(aa(m.value)){var La;return(null!=(La=this.options_)&&La.autoBind?ws.bound:ws).make_(b,g,m,I)}return(null!=(sa=this.options_)&&sa.autoBind?yh.bound:yh).make_(b,g,m,I)}sa=!1===(null==(W=this.options_)?void 0:W.deep)?zg.ref:
zg;if("function"===typeof m.value&&null!=(ia=this.options_)&&ia.autoBind){var Va;m.value=m.value.bind(null!=(Va=b.proxy_)?Va:b.target_)}return sa.make_(b,g,m,I)}function Zb(b,g,m,I){var W,ia;if(m.get)return yg.extend_(b,g,m,I);if(m.set)return b.defineProperty_(g,{configurable:Ge.safeDescriptors?b.isPlainObject_:!0,set:Nc(g.toString(),m.set)},I);if("function"===typeof m.value&&null!=(W=this.options_)&&W.autoBind){var sa;m.value=m.value.bind(null!=(sa=b.proxy_)?sa:b.target_)}return(!1===(null==(ia=
this.options_)?void 0:ia.deep)?zg.ref:zg).extend_(b,g,m,I)}function Jc(b){if(!0===b.deep)var g=Ma;else{if(!1===b.deep)b=fb;else{b=b.defaultDecorator;var m;b=b?null!=(g=null==(m=b.options_)?void 0:m.enhancer)?g:Ma:Ma}g=b}return g}function $c(b,g,m){if(Y(g))Ea(b,g,nq);else return Ub(b)?b:H(b)?zg.object(b,g,m):Array.isArray(b)?zg.array(b,g):O(b)?zg.map(b,g):P(b)?zg.set(b,g):"object"===typeof b&&null!==b?b:zg.box(b,g)}function Nc(b,g,m,I){function W(){a:{var ia=I||this,sa=arguments,La=Ge.trackingDerivation,
Va=!m||!La;nd();var $a=Ge.allowStateChanges;Va&&(pc(),$a=xc(!0));var lb=Fd(!0),ub=jr++,Rb=ir;ir=ub;try{var ec=g.apply(ia,sa);break a}catch(rc){var Vb=rc;throw rc;}finally{ir!==ub&&n(30),ir=Rb,void 0!==Vb&&(Ge.suppressReactionErrors=!0),Ge.allowStateChanges=$a,Ge.allowStateReads=lb,Sd(),Va&&(Ge.trackingDerivation=La),Ge.suppressReactionErrors=!1}ec=void 0}return ec}void 0===m&&(m=!1);W.isMobxAction=!0;T&&(la.value=b,Object.defineProperty(W,"name",la));return W}function Gb(b,g){b=xc(b);try{return g()}finally{Ge.allowStateChanges=
b}}function xc(b){var g=Ge.allowStateChanges;Ge.allowStateChanges=b;return g}function Vc(b){switch(b.dependenciesState_){case Cd.UP_TO_DATE_:return!1;case Cd.NOT_TRACKING_:case Cd.STALE_:return!0;case Cd.POSSIBLY_STALE_:for(var g=Fd(!0),m=pc(),I=b.observing_,W=I.length,ia=0;ia<W;ia++){var sa=I[ia];if(cd(sa)){if(Ge.disableErrorBoundaries)sa.get();else try{sa.get()}catch(La){return Ge.trackingDerivation=m,Ge.allowStateReads=g,!0}if(b.dependenciesState_===Cd.STALE_)return Ge.trackingDerivation=m,Ge.allowStateReads=
g,!0}}yd(b);Ge.trackingDerivation=m;Ge.allowStateReads=g;return!1}}function hd(b,g,m){var I=Fd(!0);yd(b);b.newObserving_=Array(b.observing_.length+100);b.unboundDepsCount_=0;b.runId_=++Ge.runId;var W=Ge.trackingDerivation;Ge.trackingDerivation=b;Ge.inBatch++;if(!0===Ge.disableErrorBoundaries)var ia=g.call(m);else try{ia=g.call(m)}catch(lb){ia=new Xf(lb)}Ge.inBatch--;Ge.trackingDerivation=W;var sa=b.observing_;g=b.observing_=b.newObserving_;m=Cd.UP_TO_DATE_;W=0;for(var La=b.unboundDepsCount_,Va=0;Va<
La;Va++){var $a=g[Va];0===$a.diffValue_&&($a.diffValue_=1,W!==Va&&(g[W]=$a),W++);$a.dependenciesState_>m&&(m=$a.dependenciesState_)}g.length=W;b.newObserving_=null;for(La=sa.length;La--;)Va=sa[La],0===Va.diffValue_&&wd(Va,b),Va.diffValue_=0;for(;W--;)sa=g[W],1===sa.diffValue_&&(sa.diffValue_=0,La=b,sa.observers_.add(La),sa.lowestObserverState_>La.dependenciesState_&&(sa.lowestObserverState_=La.dependenciesState_));m!==Cd.UP_TO_DATE_&&(b.dependenciesState_=m,b.onBecomeStale_());Ge.allowStateReads=
I;return ia}function Nd(b){var g=b.observing_;b.observing_=[];for(var m=g.length;m--;)wd(g[m],b);b.dependenciesState_=Cd.NOT_TRACKING_}function Md(b){var g=pc();try{return b()}finally{Ge.trackingDerivation=g}}function pc(){var b=Ge.trackingDerivation;Ge.trackingDerivation=null;return b}function Fd(b){var g=Ge.allowStateReads;Ge.allowStateReads=b;return g}function yd(b){if(b.dependenciesState_!==Cd.UP_TO_DATE_){b.dependenciesState_=Cd.UP_TO_DATE_;b=b.observing_;for(var g=b.length;g--;)b[g].lowestObserverState_=
Cd.UP_TO_DATE_}}function Zd(){(Ge.pendingReactions.length||Ge.inBatch||Ge.isRunningReactions)&&n(36);Dg=!0;if(jf){var b=R();0===--b.__mobxInstanceCount&&(b.__mobxGlobals=void 0);Ge=new oh}}function wd(b,g){b.observers_["delete"](g);0===b.observers_.size&&Qd(b)}function Qd(b){!1===b.isPendingUnobservation_&&(b.isPendingUnobservation_=!0,Ge.pendingUnobservations.push(b))}function nd(){Ge.inBatch++}function Sd(){if(0===--Ge.inBatch){0<Ge.inBatch||Ge.isRunningReactions||Wd(mb);for(var b=Ge.pendingUnobservations,
g=0;g<b.length;g++){var m=b[g];m.isPendingUnobservation_=!1;0===m.observers_.size&&(m.isBeingObserved_&&(m.isBeingObserved_=!1,m.onBUO()),m instanceof Ic&&m.suspend_())}Ge.pendingUnobservations=[]}}function Nb(b){var g=Ge.trackingDerivation;if(null!==g)return g.runId_!==b.lastAccessedBy_&&(b.lastAccessedBy_=g.runId_,g.newObserving_[g.unboundDepsCount_++]=b,!b.isBeingObserved_&&Ge.trackingContext&&(b.isBeingObserved_=!0,b.onBO())),b.isBeingObserved_;0===b.observers_.size&&0<Ge.inBatch&&Qd(b);return!1}
function gc(b){b.lowestObserverState_!==Cd.STALE_&&(b.lowestObserverState_=Cd.STALE_,b.observers_.forEach(function(g){if(g.dependenciesState_===Cd.UP_TO_DATE_)g.onBecomeStale_();g.dependenciesState_=Cd.STALE_}))}function Yb(b){b.lowestObserverState_!==Cd.STALE_&&(b.lowestObserverState_=Cd.STALE_,b.observers_.forEach(function(g){g.dependenciesState_===Cd.POSSIBLY_STALE_?g.dependenciesState_=Cd.STALE_:g.dependenciesState_===Cd.UP_TO_DATE_&&(b.lowestObserverState_=Cd.UP_TO_DATE_)}))}function rb(b){b.lowestObserverState_===
Cd.UP_TO_DATE_&&(b.lowestObserverState_=Cd.POSSIBLY_STALE_,b.observers_.forEach(function(g){g.dependenciesState_===Cd.UP_TO_DATE_&&(g.dependenciesState_=Cd.POSSIBLY_STALE_,g.onBecomeStale_())}))}function mb(){Ge.isRunningReactions=!0;for(var b=Ge.pendingReactions,g=0;0<b.length;){++g===me&&(console.error("[mobx] cycle in reaction: "+b[0]),b.splice(0));for(var m=b.splice(0),I=0,W=m.length;I<W;I++)m[I].runReaction_()}Ge.isRunningReactions=!1}function cc(b){var g=Wd;Wd=function(m){return b(function(){return g(m)})}}
function uc(b){console.warn("[mobx.spy] Is a no-op in production builds");return function(){}}function Tc(b){return function(g,m){if(ma(g))return Nc(g.name||"\x3cunnamed action\x3e",g,b);if(ma(m))return Nc(g,m,b);if(Y(m))return Ea(g,m,b?vg:kf);if(Y(g))return Ua(eb(b?"autoAction":af,{name:g,autoAction:b}))}}function bd(b){return ma(b)&&!0===b.isMobxAction}function Od(b,g){function m(){b(Va)}var I,W;void 0===g&&(g=oq);var ia=null!=(I=null==(W=g)?void 0:W.name)?I:"Autorun";if(g.scheduler||g.delay){var sa=
be(g),La=!1;var Va=new Wg(ia,function(){La||(La=!0,sa(function(){La=!1;Va.isDisposed_||Va.track(m)}))},g.onError,g.requiresObservable)}else Va=new Wg(ia,function(){this.track(m)},g.onError,g.requiresObservable);Va.schedule_();return Va.getDisposer_()}function be(b){return b.scheduler?b.scheduler:b.delay?function(g){return setTimeout(g,b.delay)}:Lo}function oe(b,g,m){function I(){lb=!1;if(!Vb.isDisposed_){var rc=!1;Vb.track(function(){var mc=Gb(!1,function(){return b(Vb)});rc=$a||!ec(ub,mc);Rb=ub;
ub=mc});$a&&m.fireImmediately?sa(ub,Rb,Vb):!$a&&rc&&sa(ub,Rb,Vb);$a=!1}}var W;void 0===m&&(m=oq);var ia=null!=(W=m.name)?W:"Reaction",sa=cf(ia,m.onError?sd(m.onError,g):g),La=!m.scheduler&&!m.delay,Va=be(m),$a=!0,lb=!1,ub,Rb,ec=m.compareStructural?No.structural:m.equals||No["default"],Vb=new Wg(ia,function(){$a||La?I():lb||(lb=!0,Va(I))},m.onError,m.requiresObservable);Vb.schedule_();return Vb.getDisposer_()}function sd(b,g){return function(){try{return g.apply(this,arguments)}catch(m){b.call(this,
m)}}}function vc(b,g,m){return Mc(tC,b,g,m)}function Mc(b,g,m,I){var W="function"===typeof I?wg(g,m):wg(g),ia=ma(I)?I:m,sa=b+"L";W[sa]?W[sa].add(ia):W[sa]=new Set([ia]);return function(){var La=W[sa];La&&(La["delete"](ia),0===La.size&&delete W[sa])}}function Me(b){!0===b.isolateGlobalState&&Zd();var g=b.useProxies,m=b.enforceActions;void 0!==g&&(Ge.useProxies="always"===g?!0:"never"===g?!1:"undefined"!==typeof Proxy);"ifavailable"===g&&(Ge.verifyProxies=!0);void 0!==m&&(g="always"===m?"always":"observed"===
m,Ge.enforceActions=g,Ge.allowStateChanges=!0===g||"always"===g?!1:!0);["computedRequiresReaction","reactionRequiresObservable","observableRequiresReaction","disableErrorBoundaries","safeDescriptors"].forEach(function(I){I in b&&(Ge[I]=!!b[I])});Ge.allowStateReads=!Ge.observableRequiresReaction;b.reactionScheduler&&cc(b.reactionScheduler)}function qc(b,g,m,I){var W=Wn(g),ia=Ed(b,I)[Zg];nd();try{vp(W).forEach(function(sa){ia.extend_(sa,W[sa],m?sa in m?m[sa]:!0:!0)})}finally{Sd()}return b}function Le(b){var g=
{name:b.name_};b.observing_&&0<b.observing_.length&&(g.dependencies=Array.from(new Set(b.observing_)).map(Le));return g}function Sb(){this.message="FLOW_CANCELLED"}function Lc(b){return!0===(null==b?void 0:b.isMobXFlow)}function Ub(b,g){return b?void 0!==g?Xd(b)?b[Zg].values_.has(g):!1:Xd(b)||!!b[Zg]||uq(b)||je(b)||cd(b):!1}function dd(b){if(Xd(b))return b[Zg].ownKeys_();n(38)}function pe(b,g,m){b.set(g,m);return m}function le(b,g){if(null==b||"object"!==typeof b||b instanceof Date||!Ub(b))return b;
if(Ib(b)||cd(b))return le(b.get(),g);if(g.has(b))return g.get(b);if(jb(b)){var m=pe(g,b,Array(b.length));b.forEach(function(sa,La){m[La]=le(sa,g)});return m}if(Jq(b)){var I=pe(g,b,new Set);b.forEach(function(sa){I.add(le(sa,g))});return I}if(Jp(b)){var W=pe(g,b,new Map);b.forEach(function(sa,La){W.set(La,le(sa,g))});return W}var ia=pe(g,b,{});dd(b).forEach(function(sa){Vn.propertyIsEnumerable.call(b,sa)&&(ia[sa]=le(b[sa],g))});return ia}function Dc(b,g){return le(b,new Map)}function Cb(){n("trace() is not available in production builds");
for(var b=!1,g=arguments.length,m=Array(g),I=0;I<g;I++)m[I]=arguments[I];"boolean"===typeof m[m.length-1]&&(b=m.pop());a:{switch(m.length){case 0:g=Ge.trackingDerivation;break a;case 1:g=wg(m[0]);break a;case 2:g=wg(m[0],m[1]);break a}g=void 0}if(!g)return n("'trace(break?)' can only be used inside a tracked computed value or a Reaction. Consider passing in the computed value or reaction explicitly");g.isTracing_===Ee.NONE&&console.log("[mobx.trace] '"+g.name_+"' tracing enabled");g.isTracing_=b?
Ee.BREAK:Ee.LOG}function Ld(b,g){void 0===g&&(g=void 0);nd();try{return b.apply(g)}finally{Sd()}}function ce(b){return void 0!==b.interceptors_&&0<b.interceptors_.length}function qd(b,g){var m=b.interceptors_||(b.interceptors_=[]);m.push(g);return L(function(){var I=m.indexOf(g);-1!==I&&m.splice(I,1)})}function nc(b,g){var m=pc();try{var I=[].concat(b.interceptors_||[]);b=0;for(var W=I.length;b<W&&((g=I[b](g))&&!g.type&&n(14),g);b++);return g}finally{Ge.trackingDerivation=m}}function Ne(b){return void 0!==
b.changeListeners_&&0<b.changeListeners_.length}function Wf(b,g){var m=b.changeListeners_||(b.changeListeners_=[]);m.push(g);return L(function(){var I=m.indexOf(g);-1!==I&&m.splice(I,1)})}function bf(b,g){var m=pc();if(b=b.changeListeners_){b=b.slice();for(var I=0,W=b.length;I<W;I++)b[I](g);Ge.trackingDerivation=m}}function pg(b,g,m){var I=Ed(b,m)[Zg];nd();try{var W;null!=(W=g)?W:g=Oa(b);vp(g).forEach(function(ia){return I.make_(ia,g[ia])})}finally{Sd()}return b}function bb(b,g,m,I){void 0===m&&(m=
"ObservableArray");void 0===I&&(I=!1);ka();g=new pv(m,g,I,!1);Q(g.values_,Zg,g);m=new Proxy(g.values_,rC);g.proxy_=m;b&&b.length&&(I=xc(!0),g.spliceWithArray_(0,0,b),Ge.allowStateChanges=I);return m}function Db(b,g){"function"===typeof Array.prototype[b]&&(It[b]=g(b))}function db(b){return function(){var g=this[Zg];g.atom_.reportObserved();g=g.dehanceValues_(g.values_);return g[b].apply(g,arguments)}}function Eb(b){return function(g,m){var I=this,W=this[Zg];W.atom_.reportObserved();return W.dehanceValues_(W.values_)[b](function(ia,
sa){return g.call(m,ia,sa,I)})}}function hc(b){return function(){var g=this,m=this[Zg];m.atom_.reportObserved();m=m.dehanceValues_(m.values_);var I=arguments[0];arguments[0]=function(W,ia,sa){return I(W,ia,sa,g)};return m[b].apply(m,arguments)}}function jb(b){return fa(b)&&wC(b[Zg])}function gd(b){if(O(b)||Jp(b))return b;if(Array.isArray(b))return new Map(b);if(H(b)){var g=new Map,m;for(m in b)g.set(m,b[m]);return g}return n(21,b)}function Ed(b,g){var m;if(F(b,Zg))return b;var I=null!=(m=null==g?
void 0:g.name)?m:"ObservableObject";m=fy;var W=new Map;I=String(I);var ia;var sa=g?null!=(ia=g.defaultDecorator)?ia:nb(g):void 0;g=new m(b,W,I,sa);M(b,Zg,g);return b}function ke(b){return ey[b]||(ey[b]={get:function(){return this[Zg].getObservablePropValue_(b)},set:function(g){return this[Zg].setObservablePropValue_(b,g)}})}function Xd(b){return fa(b)?DC(b[Zg]):!1}function Xe(b){return{enumerable:!1,configurable:!0,get:function(){return this[Zg].get_(b)},set:function(g){this[Zg].set_(b,g)}}}function qe(b){if(b>
lv){for(var g=lv;g<b+100;g++)dn(mv.prototype,""+g,Xe(g));lv=b}}function ff(b,g,m){return new mv(b,g,m)}function wg(b,g){if("object"===typeof b&&null!==b){if(jb(b))return void 0!==g&&n(23),b[Zg].atom_;if(Jq(b))return b[Zg];if(Jp(b)){if(void 0===g)return b.keysAtom_;var m=b.data_.get(g)||b.hasMap_.get(g);m||n(25,g,Ab(b));return m}if(Xd(b)){if(!g)return n(26);(m=b[Zg].values_.get(g))||n(27,g,Ab(b));return m}if(uq(b)||cd(b)||je(b))return b}else if(ma(b)&&je(b[Zg]))return b[Zg];n(28)}function uf(b,g){b||
n(29);if(void 0!==g)return uf(wg(b,g));if(uq(b)||cd(b)||je(b)||Jp(b)||Jq(b))return b;if(b[Zg])return b[Zg];n(24,b)}function Ab(b,g){if(void 0!==g)b=wg(b,g);else{if(bd(b))return b.name;b=Xd(b)||Jp(b)||Jq(b)?uf(b):wg(b)}return b.name_}function ta(b,g,m){void 0===m&&(m=-1);return qa(b,g,m)}function qa(b,g,m,I,W){if(b===g)return 0!==b||1/b===1/g;if(null==b||null==g)return!1;if(b!==b)return g!==g;var ia=typeof b;if("function"!==ia&&"object"!==ia&&"object"!=typeof g)return!1;ia=$x.call(b);if(ia!==$x.call(g))return!1;
switch(ia){case "[object RegExp]":case "[object String]":return""+b===""+g;case "[object Number]":return+b!==+b?+g!==+g:0===+b?1/+b===1/g:+b===+g;case "[object Date]":case "[object Boolean]":return+b===+g;case "[object Symbol]":return"undefined"!==typeof Symbol&&Symbol.valueOf.call(b)===Symbol.valueOf.call(g);case "[object Map]":case "[object Set]":0<=m&&m++}b=Ia(b);g=Ia(g);ia="[object Array]"===ia;if(!ia){if("object"!=typeof b||"object"!=typeof g)return!1;var sa=b.constructor,La=g.constructor;if(sa!==
La&&!(ma(sa)&&sa instanceof sa&&ma(La)&&La instanceof La)&&"constructor"in b&&"constructor"in g)return!1}if(0===m)return!1;0>m&&(m=-1);I=I||[];W=W||[];for(sa=I.length;sa--;)if(I[sa]===b)return W[sa]===g;I.push(b);W.push(g);if(ia){sa=b.length;if(sa!==g.length)return!1;for(;sa--;)if(!qa(b[sa],g[sa],m-1,I,W))return!1}else{ia=Object.keys(b);sa=ia.length;if(Object.keys(g).length!==sa)return!1;for(;sa--;)if(La=ia[sa],!F(g,La)||!qa(b[La],g[La],m-1,I,W))return!1}I.pop();W.pop();return!0}function Ia(b){return jb(b)?
b.slice():O(b)||Jp(b)||P(b)||Jq(b)?Array.from(b.entries()):b}function cb(b){b[Symbol.iterator]=Jb;return b}function Jb(){return this}function lc(b,g){const m=new Set(g),I=Object.values(b),W=new Set(I.filter(ia=>m.has(ia.toId)||m.has(ia.fromId)));b=W.size;for(g=-1;0!==g;)W.forEach(ia=>{ia=ia.fromId;for(const sa of I)sa.fromId===ia&&W.add(sa),sa.toId===ia&&W.add(sa)}),g=W.size-b,b=W.size;return Array.from(W.values())}function Rc(b,g,m,I,W,ia,sa,La){if(W=g.getBindingPoint(W,ia,sa,La))return{id:I,type:"line",
fromId:b.id,toId:g.id,handleId:m,point:Yd.toFixed(W.point),distance:W.distance}}function md(b,g){const m=b.getCenter(),I=g.getCenter();var W=Of();W=Ga(re({},ys.defaultProps),{id:W,type:ys.id,parentId:b.props.parentId,point:m});b=Rc(W,b,"start",Of(),m,m,Yd.uni(Yd.sub(I,m)),!1);g=Rc(W,g,"end",Of(),I,I,Yd.uni(Yd.sub(m,I)),!1);return b&&g?(W.handles.start.point=[0,0],W.handles.end.point=Yd.sub(I,m),W.handles.start.bindingId=b.id,W.handles.end.bindingId=g.id,[W,[b,g]]):null}function ve(){return new lC}
function Ue(){return new WeakMap}function Kf(b){if(!b)return fv(null);var g=b.constructor;if(g===Object)return b===Object.prototype?{}:fv(b);if(~jC.call(g).indexOf("[native code]"))try{return new g}catch(m){}return fv(b)}function eg(b){var g="";b.global&&(g+="g");b.ignoreCase&&(g+="i");b.multiline&&(g+="m");b.unicode&&(g+="u");b.sticky&&(g+="y");return g}function Hf(b){return b.flags}function xf(b){b=kC.call(b);return b.substring(8,b.length-1)}function Qf(b){return b[Symbol.toStringTag]||xf(b)}function Qg(b){return hy(b).concat(rv(b))}
function ei(b,g,m){for(var I=KC(b),W=0,ia=I.length,sa,La;W<ia;++W)if(sa=I[W],"callee"!==sa&&"caller"!==sa)if(La=IC(b,sa)){La.get||La.set||(La.value=m.copier(La.value,m));try{GC(g,sa,La)}catch(Va){g[sa]=La.value}}else g[sa]=m.copier(b[sa],m);return g}function uh(b,g){var m=new g.Constructor;g.cache.set(b,m);b.forEach(function(I,W){m.set(W,g.copier(I,g))});return m}function li(b,g){var m=Kf(g.prototype);g.cache.set(b,m);for(var I in b)jy.call(b,I)&&(m[I]=g.copier(b[I],g));return m}function Zh(b,g){var m=
Kf(g.prototype);g.cache.set(b,m);for(var I in b)jy.call(b,I)&&(m[I]=g.copier(b[I],g));I=rv(b);for(var W=0,ia=I.length,sa;W<ia;++W)sa=I[W],JC.call(b,sa)&&(m[sa]=g.copier(b[sa],g));return m}function qg(b,g){return new g.Constructor(b.valueOf())}function Rh(b,g){return b}function ef(b,g){var m=new g.Constructor;g.cache.set(b,m);b.forEach(function(I){m.add(g.copier(I,g))});return m}function Sh(b){function g(ia,sa){sa.prototype=sa.Constructor=void 0;if(!ia||"object"!==typeof ia)return ia;if(sa.cache.has(ia))return sa.cache.get(ia);
sa.prototype=ia.__proto__||EC(ia);sa.Constructor=sa.prototype&&sa.prototype.constructor;if(!sa.Constructor||sa.Constructor===Object)return W(ia,sa);if(LC(ia))return I(ia,sa);var La=m[FC(ia)];return La?La(ia,sa):"function"===typeof ia.then?ia:W(ia,sa)}b=qv({},gy,b);var m={Arguments:b.object,Array:b.array,ArrayBuffer:b.arrayBuffer,Blob:b.blob,Boolean:qg,DataView:b.dataView,Date:b.date,Error:b.error,Float32Array:b.arrayBuffer,Float64Array:b.arrayBuffer,Int8Array:b.arrayBuffer,Int16Array:b.arrayBuffer,
Int32Array:b.arrayBuffer,Map:b.map,Number:qg,Object:b.object,Promise:Rh,RegExp:b.regExp,Set:b.set,String:qg,WeakMap:Rh,WeakSet:Rh,Uint8Array:b.arrayBuffer,Uint8ClampedArray:b.arrayBuffer,Uint16Array:b.arrayBuffer,Uint32Array:b.arrayBuffer,Uint64Array:b.arrayBuffer},I=m.Array,W=m.Object;return function(ia){return g(ia,{Constructor:void 0,cache:hC(),copier:g,prototype:void 0})}}function yi(b,g){return(0,MC.default)(b,g,{arrayMerge:(m,I,W)=>I})}function Cl(b,g,m,I=!1){const [W,ia]=g,[sa,La]=m;b=sa+(b-
W)/(ia-W)*(La-sa);return I?sa<La?Math.max(Math.min(b,La),sa):Math.max(Math.min(b,sa),La):b}function vj(b,g){return new Promise((m,I)=>{if(g){const W=document.createElement("video");W.addEventListener("loadedmetadata",function(){m([this.videoWidth,this.videoHeight])},!1);W.src=b}else{const W=new Image;W.onload=()=>m([W.width,W.height]);W.src=b;W.onerror=ia=>I(ia)}})}function zf(b,g){return Object.values(bc).includes(b)||null==b?`var(--ls-wb-${g}-color-${b?b:"default"})`:b}function Bj(){var b;null==
(b=document.getElementById("__textLabelMeasure"))?void 0:b.remove();b=document.createElement("pre");b.id="__textLabelMeasure";Object.assign(b.style,{whiteSpace:"pre",width:"auto",borderLeft:"2px solid transparent",borderRight:"1px solid transparent",borderBottom:"2px solid transparent",padding:"0px",margin:"0px",opacity:"0",position:"absolute",top:"-500px",left:"0px",zIndex:"9999",userSelect:"none",pointerEvents:"none",font:"var(--ls-font-family)"});b.tabIndex=-1;document.body.appendChild(b);return b}
function oj(b,g,m=0){var I,W,ia;if(!b)return[16,32];let sa;sa="string"===typeof g?g:`${null!=(I=g.fontStyle)?I:"normal"} ${null!=(W=g.fontVariant)?W:"normal"} ${null!=(ia=g.fontWeight)?ia:"normal"} ${g.fontSize}px/${g.fontSize*g.lineHeight}px ${g.fontFamily}`;if(!wv.has(`${b}-${sa}-${m}`)){if(!Kp)return[10,10];Kp.parentNode||document.body.appendChild(Kp);Kp.innerHTML=`${b}&#8203;`;Kp.style.font=sa;Kp.style.padding=m+"px";g=Kp.getBoundingClientRect();wv.set(`${b}-${sa}-${m}`,[Math.ceil(g.width||1),
Math.ceil(g.height||1)])}return wv.get(`${b}-${sa}-${m}`)}function Wh(b){try{if("string"!==typeof b||!od.test(b))throw TypeError("Invalid UUID");let g;const m=new Uint8Array(16);m[0]=(g=parseInt(b.slice(0,8),16))>>>24;m[1]=g>>>16&255;m[2]=g>>>8&255;m[3]=g&255;m[4]=(g=parseInt(b.slice(9,13),16))>>>8;m[5]=g&255;m[6]=(g=parseInt(b.slice(14,18),16))>>>8;m[7]=g&255;m[8]=(g=parseInt(b.slice(19,23),16))>>>8;m[9]=g&255;m[10]=(g=parseInt(b.slice(24,36),16))/1099511627776&255;m[11]=g/4294967296&255;m[12]=g>>>
24&255;m[13]=g>>>16&255;m[14]=g>>>8&255;m[15]=g&255;return!0}catch(g){return!1}}function Dl(b,g=0,m){let I;return function(...W){null==m?void 0:m(...W);clearTimeout(I);I=setTimeout(()=>b.apply(W),g)}}function xk(b,g){return Ya(b,["symbol"===typeof g?g:g+""])}function yk(){return/Mac|iPod|iPhone|iPad/.test(window.navigator.platform)}function Lg(b){return!!b}function Oj(b=0){return new Promise(g=>setTimeout(g,b))}function Cj(b="noid"){vv[b]||(vv[b]=oy.createContext({}));return vv[b]}function Ki(b="noid"){return oy.useContext(Cj(b))}
function lk(b){const {callbacks:g}=Ki(),m=py.useRef(-1);return py.useMemo(()=>{const I=W=>{var ia,sa;const {order:La=0}=W;if(!La){var Va=W.target;Va.removeEventListener("pointerup",I);Va.releasePointerCapture(W.pointerId);null==(ia=g.onPointerUp)?void 0:ia.call(g,{type:"selection",handle:b,order:La},W);ia=Date.now();Va=ia-m.current;300<Va?m.current=ia:300>=Va&&(null==(sa=g.onDoubleClick)?void 0:sa.call(g,{type:"selection",handle:b,order:La},W),m.current=-1);W.order=La+1}};return{onPointerDown:W=>
{var ia;const {order:sa=0}=W;if(!sa){var La=Yj(W.currentTarget);La.setPointerCapture(W.pointerId);La.addEventListener("pointerup",I);null==(ia=g.onPointerDown)?void 0:ia.call(g,{type:"selection",handle:b,order:sa},W);W.order=sa+1}},onPointerMove:W=>{var ia;const {order:sa=0}=W;sa||(null==(ia=g.onPointerMove)?void 0:ia.call(g,{type:"selection",handle:b,order:sa},W),W.order=sa+1)},onPointerEnter:W=>{var ia;const {order:sa=0}=W;sa||(null==(ia=g.onPointerEnter)?void 0:ia.call(g,{type:"selection",handle:b,
order:sa},W),W.order=sa+1)},onPointerLeave:W=>{var ia;const {order:sa=0}=W;sa||(null==(ia=g.onPointerLeave)?void 0:ia.call(g,{type:"selection",handle:b,order:sa},W),W.order=sa+1)},onKeyDown:W=>{var ia;null==(ia=g.onKeyDown)?void 0:ia.call(g,{type:"selection",handle:b,order:-1},W)},onKeyUp:W=>{var ia;null==(ia=g.onKeyUp)?void 0:ia.call(g,{type:"selection",handle:b,order:-1},W)}}},[g])}function Yj(b){var g;if(null==(g=b.namespaceURI)?0:g.endsWith("svg")){if(b.parentElement)return Yj(b.parentElement);
throw Error("Could not find a parent element of an HTML type!");}return b}function Pj(b,g,m){const I=Is.useRef(!1),W=Is.useCallback(()=>{var ia;if(I.current){const sa=null==(ia=b.current)?void 0:ia.getBoundingClientRect();sa&&(ia={minX:sa.left,maxX:sa.left+sa.width,minY:sa.top,maxY:sa.top+sa.height,width:sa.width,height:sa.height},g.updateBounds(ia),null==m?void 0:m(ia))}else I.current=!0},[b,m]);Is.useEffect(()=>{const ia=b.current?QC(b.current):document,sa=Dl(W,100);ia.addEventListener("scroll",
sa);window.addEventListener("resize",sa);return()=>{ia.removeEventListener("scroll",sa);window.removeEventListener("resize",sa)}},[]);Is.useLayoutEffect(()=>{const ia=new ResizeObserver(sa=>{sa[0].contentRect&&W()});b.current&&ia.observe(b.current);return()=>{ia.disconnect()}},[b]);Is.useEffect(()=>{W();setTimeout(()=>{var ia,sa;null==(sa=null==(ia=b.current)?void 0:ia.querySelector(".tl-canvas"))?void 0:sa.focus()})},[b])}function kl(b,g){return Object.keys(g).reduce((m,I)=>{const W=g[I];return W?
m+`${`--${b}-${I}`}: ${W};
`:m},"")}function Xk(b,g,m=".logseq-tldraw"){uv.useLayoutEffect(()=>{const I=document.createElement("style"),W=kl(b,g);I.setAttribute("id",`${b}-theme`);I.setAttribute("data-selector",m);I.innerHTML=`
        ${m} {
          ${W}
        }
      `;document.head.appendChild(I);return()=>{I&&document.head.contains(I)&&document.head.removeChild(I)}},[b,g,m])}function El(b,g){uv.useLayoutEffect(()=>{if(tv.get(b))return()=>{};const m=document.createElement("style");m.innerHTML=g;m.setAttribute("id",b);document.head.appendChild(m);tv.set(b,m);return()=>{m&&document.head.contains(m)&&(document.head.removeChild(m),tv.delete(b))}},[b,g])}function Zj(b,g){const m=uv.useMemo(()=>re(re({},PC),b),[b]);Xk("tl",m,g);El("tl-canvas",OC)}function Qj(b=
"noid"){Dv[b]||(Dv[b]=ny.createContext({}));return Dv[b]}function sg(b="noid"){return ny.useContext(Qj(b))}function jg(){const b=sg(),{callbacks:g}=Ki(),m=sv.useRef(-1);return sv.useMemo(()=>({onPointerDown:I=>{var W,ia,sa;const {order:La=0}=I;La||(null==(W=I.currentTarget)?void 0:W.setPointerCapture(I.pointerId));I.isPrimary&&(null==(ia=g.onPointerDown)?void 0:ia.call(g,{type:"canvas",order:La},I),W=Date.now(),ia=W-m.current,300<ia?m.current=W:300>=ia&&(null==(sa=g.onDoubleClick)?void 0:sa.call(g,
{type:"canvas",order:La},I),m.current=-1))},onPointerMove:I=>{var W;const {order:ia=0}=I;null==(W=g.onPointerMove)?void 0:W.call(g,{type:"canvas",order:ia},I)},onPointerUp:I=>{var W,ia;const {order:sa=0}=I;sa||(null==(W=I.currentTarget)?void 0:W.releasePointerCapture(I.pointerId));null==(ia=g.onPointerUp)?void 0:ia.call(g,{type:"canvas",order:sa},I)},onPointerEnter:I=>{var W;const {order:ia=0}=I;null==(W=g.onPointerEnter)?void 0:W.call(g,{type:"canvas",order:ia},I)},onPointerLeave:I=>{var W;const {order:ia=
0}=I;null==(W=g.onPointerLeave)?void 0:W.call(g,{type:"canvas",order:ia},I)},onDrop:I=>td(this,null,function*(){I.preventDefault();b.drop(I.dataTransfer,[I.clientX,I.clientY])}),onDragOver:I=>{I.preventDefault()},onTouchEnd:I=>{I.preventDefault()}}),[g])}function lg(b,g,m){return 0===g||Infinity===Math.abs(g)?Math.pow(b,5*m):b*g*m/(g+m*b)}function dj(b,g,m,I=.15){return 0===I?Math.max(g,Math.min(b,m)):b<g?-lg(g-b,m-g,I)+g:b>m?+lg(b-m,m-g,I)+m:b}function Fh(b,[g,m],[I,W]){const [[ia,sa],[La,Va]]=b;
return[dj(g,ia,sa,I),dj(m,La,Va,W)]}function Xg(b,g,m){g in b?Object.defineProperty(b,g,{value:m,enumerable:!0,configurable:!0,writable:!0}):b[g]=m;return b}function ak(b,g){var m=Object.keys(b);if(Object.getOwnPropertySymbols){var I=Object.getOwnPropertySymbols(b);g&&(I=I.filter(function(W){return Object.getOwnPropertyDescriptor(b,W).enumerable}));m.push.apply(m,I)}return m}function Bg(b){for(var g=1;g<arguments.length;g++){var m=null!=arguments[g]?arguments[g]:{};g%2?ak(Object(m),!0).forEach(function(I){Xg(b,
I,m[I])}):Object.getOwnPropertyDescriptors?Object.defineProperties(b,Object.getOwnPropertyDescriptors(m)):ak(Object(m)).forEach(function(I){Object.defineProperty(b,I,Object.getOwnPropertyDescriptor(m,I))})}return b}function Th(b){return b?b[0].toUpperCase()+b.slice(1):""}function nk(b=!1,g){return b&&!kD.includes(g)}function zk(b,g="",m=!1){const I=uy[b];g=I?I[g]||g:g;return"on"+Th(b)+Th(g)+(nk(m,g)?"Capture":"")}function Lh(b){b=b.substring(2).toLowerCase();const g=!!~b.indexOf("passive");g&&(b=
b.replace("passive",""));var m=lD.includes(b)?"capturecapture":"capture";(m=!!~b.indexOf(m))&&(b=b.replace("capture",""));return{device:b,capture:m,passive:g}}function Di(b,g=""){const m=uy[b];return b+(m?m[g]||g:g)}function Mh(b){return"touches"in b?"touch":"pointerType"in b?b.pointerType:"mouse"}function Yk(b){return Array.from(b.touches).filter(g=>{var m,I;return g.target===b.currentTarget||(null===(m=b.currentTarget)||void 0===m?void 0:null===(I=m.contains)||void 0===I?void 0:I.call(m,g.target))})}
function bk(b){return"touches"in b?("touchend"===b.type||"touchcancel"===b.type?b.changedTouches:b.targetTouches)[0]:b}function wj(b,g){const m=g.clientX-b.clientX,I=g.clientY-b.clientY;return{angle:-(180*Math.atan2(m,I))/Math.PI,distance:Math.hypot(m,I),origin:[(g.clientX+b.clientX)/2,(g.clientY+b.clientY)/2]}}function Fl(b){return Yk(b).map(g=>g.identifier)}function Em(b,g){const [m,I]=Array.from(b.touches).filter(W=>g.includes(W.identifier));return wj(m,I)}function Rj(b){const g=bk(b);return"touches"in
b?g.identifier:g.pointerId}function fi(b){b=bk(b);return[b.clientX,b.clientY]}function Sj(b){let {deltaX:g,deltaY:m,deltaMode:I}=b;1===I?(g*=40,m*=40):2===I&&(g*=800,m*=800);return[g,m]}function Nh(b,...g){return"function"===typeof b?b(...g):b}function ej(){}function Oh(...b){return 0===b.length?ej:1===b.length?b[0]:function(){let g;for(const m of b)g=m.apply(this,arguments)||g;return g}}function Yi([b,g],m){b=Math.abs(b);g=Math.abs(g);if(b>g&&b>m)return"x";if(g>b&&g>m)return"y"}function mi(b){const [g,
m]=b.overflow,[I,W]=b._delta,[ia,sa]=b._direction;if(0>g&&0<I&&0>ia||0<g&&0>I&&0<ia)b._movement[0]=b._movementBound[0];if(0>m&&0<W&&0>sa||0<m&&0>W&&0<sa)b._movement[1]=b._movementBound[1]}function Zk(b){zv.set(b.key,b.engine);yv.set(b.key,b.resolver)}function ck(b={},g){const m={};for(const [I,W]of Object.entries(g))switch(typeof W){case "function":m[I]=W.call(m,b[I],I,b);break;case "object":m[I]=ck(b[I],W);break;case "boolean":W&&(m[I]=b[I])}return m}function fj(b,g,m={}){const {target:I,eventOptions:W,
window:ia,enabled:sa,transform:La}=b;var Va=ED;if(null==b)b={};else{if(null==b)var $a={};else{$a={};var lb=Object.keys(b),ub;for(ub=0;ub<lb.length;ub++){var Rb=lb[ub];0<=Va.indexOf(Rb)||($a[Rb]=b[Rb])}}if(Object.getOwnPropertySymbols)for(ub=Object.getOwnPropertySymbols(b),Rb=0;Rb<ub.length;Rb++)lb=ub[Rb],0<=Va.indexOf(lb)||Object.prototype.propertyIsEnumerable.call(b,lb)&&($a[lb]=b[lb]);b=$a}m.shared=ck({target:I,eventOptions:W,window:ia,enabled:sa,transform:La},UC);if(g){var ec=yv.get(g);m[g]=ck(Bg({shared:m.shared},
b),ec)}else for(ec in b)(g=yv.get(ec))&&(m[ec]=ck(Bg({shared:m.shared},b[ec]),g));return m}function Ag(b,g){b.gestures.add(g);b.gestureEventStores[g]=new Qy(b,g);b.gestureTimeoutStores[g]=new ry}function Ei(b,g,m,I,W,ia){if(b.has(m)&&zv.has(I)){var sa=m+"Start",La=m+"End";W[I]=Va=>{let $a=void 0;if(Va.first&&sa in g)g[sa](Va);m in g&&($a=g[m](Va));if(Va.last&&La in g)g[La](Va);return $a};ia[I]=ia[I]||{}}}function ni(b,g={},m,I){const W=xv.default.useMemo(()=>new sy(b),[]);W.applyHandlers(b,I);W.applyConfig(g,
m);xv.default.useEffect(W.effect.bind(W));xv.default.useEffect(()=>W.clean.bind(W),[]);if(void 0===g.target)return W.bind.bind(W)}function Ej(b){b.forEach(Zk);return function(g,m){m=m||{};const I={},W={},ia=new Set;for(let Rb in g)Av.test(Rb)?(ia.add(RegExp.lastMatch),W[Rb]=g[Rb]):I[Rb]=g[Rb];const [sa,La,Va]=[W,I,ia];g={};Ei(Va,sa,"onDrag","drag",g,m);Ei(Va,sa,"onWheel","wheel",g,m);Ei(Va,sa,"onScroll","scroll",g,m);Ei(Va,sa,"onPinch","pinch",g,m);Ei(Va,sa,"onMove","move",g,m);Ei(Va,sa,"onHover",
"hover",g,m);const {handlers:$a,nativeHandlers:lb,config:ub}={handlers:g,config:m,nativeHandlers:La};return ni($a,ub,void 0,lb)}}function Gh(b,g){return Ej([WC,ip,zo,iD,VC,XC])(b,g||{})}function zi(b){const {viewport:g,inputs:m,callbacks:I}=Ki(),W=Kq.useRef(void 0),ia=Kq.useRef([0,0]),sa=Kq.useRef(0),La=Kq.useMemo(()=>({onWheel:Va=>{var $a;({event:Va}=Va);Va.preventDefault();const {deltaY:lb,deltaX:ub}=Va;var Rb=0;if(Va.ctrlKey||Va.metaKey){Rb=Math.sign(Va.deltaY);let mc=lb;10<Math.abs(Va.deltaY)&&
(mc=10*Rb);Rb=mc}const [ec,Vb,rc]=[ub,lb,Rb];"pinching"===m.state||sa.current>=Va.timeStamp||(sa.current=Va.timeStamp,(Va.altKey||Va.ctrlKey||Va.metaKey)&&0===Va.buttons?(Rb=g.bounds,Va=null!=($a=m.currentScreenPoint)?$a:[Rb.width/2,Rb.height/2],$a=g.camera.zoom,g.onZoom(Va,$a-rc/100*$a)):($a=Yd.mul(Va.shiftKey&&!yk()?[Vb,0]:[ec,Vb],.8),Yd.isEqual($a,[0,0])||g.panCamera($a)))},onPinchStart:({event:Va,delta:$a,offset:lb,origin:ub})=>{var Rb;const ec=b.current;Va instanceof WheelEvent||!(Va.target===
ec||null!=ec&&ec.contains(Va.target))||(null==(Rb=I.onPinchStart)?void 0:Rb.call(I,{type:"canvas",order:0,delta:[...$a,lb[0]],offset:lb,point:Yd.sub(ub,m.containerOffset)},Va),W.current=ub,ia.current=[0,0])},onPinchEnd:({event:Va,offset:$a,origin:lb})=>{var ub;const Rb=b.current;Va instanceof WheelEvent||!(Va.target===Rb||null!=Rb&&Rb.contains(Va.target))||"pinching"!==m.state||(null==(ub=I.onPinchEnd)?void 0:ub.call(I,{type:"canvas",order:0,delta:[0,0,$a[0]],offset:$a,point:Yd.sub(lb,m.containerOffset)},
Va),ia.current=[0,0])},onPinch:({event:Va,offset:$a,origin:lb})=>{var ub,Rb=b.current;if(!(Va instanceof WheelEvent)&&(Va.target===Rb||null!=Rb&&Rb.contains(Va.target))){W.current||(W.current=lb);Rb=Yd.sub(W.current,lb);var ec=Yd.sub(Rb,ia.current);null==(ub=I.onPinch)?void 0:ub.call(I,{type:"canvas",order:0,delta:[...ec,$a[0]],offset:$a,point:Yd.sub(lb,m.containerOffset)},Va);ia.current=Rb}}}),[I]);Gh(La,{target:b,eventOptions:{passive:!1},pinch:{from:[g.camera.zoom,g.camera.zoom],scaleBounds:()=>
({from:g.camera.zoom,max:Po.maxZoom,min:Po.minZoom})}})}function ok(b,g,m,I){Bv.useLayoutEffect(()=>{b.current.style.transform=`translate(
        calc(${g.minX}px - var(--tl-padding)),
        calc(${g.minY}px - var(--tl-padding)))
        scale(var(--tl-scale))`},[g.minX,g.minY,m,g.rotation]);Bv.useLayoutEffect(()=>{const W=b.current;W.style.width=`calc(${Math.floor(g.width)}px + (var(--tl-padding) * 2))`;W.style.height=`calc(${Math.floor(g.height)}px + (var(--tl-padding) * 2))`},[g.width,g.height]);Bv.useLayoutEffect(()=>{const W=b.current;void 0!==I&&(W.style.zIndex=I.toString())},[I])}function hj(b,g){const {onPersist:m,onSave:I,onSaveAs:W,onError:ia,onMount:sa,onCreateAssets:La,onCreateShapes:Va,onDeleteAssets:$a,onDeleteShapes:lb,
onDrop:ub,onPaste:Rb,onCanvasDBClick:ec}=g;Ry.useLayoutEffect(()=>{const Vb=[];if(b)return b.history.reset(),window.tlapps=window.tlapps||{},window.tlapps[b.uuid]=b,sa&&sa(b,null),()=>{Vb.forEach(rc=>rc());window.tlapps&&delete window.tlapps[b.uuid]}},[b]);Ry.useLayoutEffect(()=>{const Vb=[];m&&Vb.push(b.subscribe("persist",m));I&&Vb.push(b.subscribe("save",I));W&&Vb.push(b.subscribe("saveAs",W));ia&&Vb.push(b.subscribe("error",ia));Va&&Vb.push(b.subscribe("create-shapes",Va));La&&Vb.push(b.subscribe("create-assets",
La));lb&&Vb.push(b.subscribe("delete-shapes",lb));$a&&Vb.push(b.subscribe("delete-assets",$a));ub&&Vb.push(b.subscribe("drop",ub));Rb&&Vb.push(b.subscribe("paste",Rb));ec&&Vb.push(b.subscribe("canvas-dbclick",ec));return()=>Vb.forEach(rc=>rc())},[b,m,I,W,ia])}function pj(b){if("app"in b)return b.app;const [g]=Jy.useState(()=>new SC(b.model,b.Shapes,b.Tools));Jy.useLayoutEffect(()=>{g.initKeyboardShortcuts();return()=>{g.dispose()}},[g]);return g}function en(b,g){FD.useEffect(()=>{"model"in g&&g.model&&
b.loadDocumentModel(g.model)},[g.model])}function Bk(b){const g=Ki(),{viewport:{bounds:m}}=g;GD.useEffect(()=>{const I=sa=>{sa.preventDefault()},W=sa=>{if(0!==sa.touches.length){var La=sa.touches[0].pageX,Va=sa.touches[0].radiusX||0;(10>La-Va||La+Va>m.width-10)&&sa.preventDefault()}},ia=b.current;if(!ia)return()=>{};ia.addEventListener("touchstart",I,{passive:!0});ia.addEventListener("gestureend",I,{passive:!0});ia.addEventListener("gesturechange",I,{passive:!0});ia.addEventListener("gesturestart",
I,{passive:!0});ia.addEventListener("touchstart",W,{passive:!0});return()=>{ia&&(ia.removeEventListener("touchstart",I),ia.removeEventListener("gestureend",I),ia.removeEventListener("gesturechange",I),ia.removeEventListener("gesturestart",I),ia.removeEventListener("touchstart",W))}},[b,m.width])}function nl(b,g){const {inputs:m,callbacks:I}=Ki();return HD.useMemo(()=>({onPointerDown:W=>{var ia,sa;const {order:La=0}=W;La||(null==(ia=W.currentTarget)?void 0:ia.setPointerCapture(W.pointerId));ia=b.props.handles[g];
null==(sa=I.onPointerDown)?void 0:sa.call(I,{type:"handle",shape:b,handle:ia,id:g,order:La},W);W.order=La+1},onPointerMove:W=>{var ia;const {order:sa=0}=W,La=b.props.handles[g];null==(ia=I.onPointerMove)?void 0:ia.call(I,{type:"handle",shape:b,handle:La,id:g,order:sa},W);W.order=sa+1},onPointerUp:W=>{var ia,sa;const {order:La=0}=W;La||(null==(ia=W.currentTarget)?void 0:ia.releasePointerCapture(W.pointerId));ia=b.props.handles[g];null==(sa=I.onPointerUp)?void 0:sa.call(I,{type:"handle",shape:b,handle:ia,
id:g,order:La},W);W.order=La+1},onPointerEnter:W=>{var ia;const {order:sa=0}=W,La=b.props.handles[g];null==(ia=I.onPointerEnter)?void 0:ia.call(I,{type:"handle",shape:b,handle:La,id:g,order:sa},W);W.order=sa+1},onPointerLeave:W=>{var ia;const {order:sa=0}=W,La=b.props.handles[g];null==(ia=I.onPointerLeave)?void 0:ia.call(I,{type:"handle",shape:b,handle:La,id:g,order:sa},W);W.order=sa+1},onKeyUp:W=>{var ia;const sa=b.props.handles[g];null==(ia=I.onKeyUp)?void 0:ia.call(I,{type:"handle",shape:b,handle:sa,
id:g,order:-1},W)},onKeyDown:W=>{var ia;const sa=b.props.handles[g];null==(ia=I.onKeyDown)?void 0:ia.call(I,{type:"handle",shape:b,handle:sa,id:g,order:-1},W)}}),[b.id,m,I])}function qj(b,g,m=!1){return`url("data:image/svg+xml,<svg height='32' width='32' viewBox='0 0 35 35' xmlns='http://www.w3.org/2000/svg'><g fill='none' style='transform-origin:center center' transform='rotate(${g})${m?" scale(-1,-1) translate(0, -32)":""}'>`+b.replaceAll('"',"'")+'\x3c/g\x3e\x3c/svg\x3e") 16 16, pointer'}function Ol(b,
g,m=0){ID.useEffect(()=>{const I=b.current;I&&(I.style.cursor=JD[g](Si.radiansToDegrees(m)))},[g,m])}function sm(b){const {viewport:g}=Ki(),m=sg();KD.useLayoutEffect(()=>Od(()=>{var I;const W=g.camera.zoom;"pinching"!==m.inputs.state&&null!=W&&(null==(I=b.current)?void 0:I.style.setProperty("--tl-zoom",W.toString()))}),[])}function Pl(b,g=0){const [m,I]=(0,Sy.useState)(b);(0,Sy.useEffect)(()=>{let W=!1;const ia=setTimeout(()=>{W||I(b)},g);return()=>{W=!0;clearTimeout(ia)}},[b,g]);return m}function pk(){const b=
sg();Ty.useEffect(()=>{oe(()=>re({},b.viewport.camera),()=>{window.sessionStorage.setItem("logseq.tldraw.camera:"+b.currentPageId,JSON.stringify(b.viewport.camera))})},[b.viewport.camera]);Ty.useEffect(()=>{var g;const m=JSON.parse(null!=(g=window.sessionStorage.getItem("logseq.tldraw.camera:"+b.currentPageId))?g:"null");m?b.viewport.update(m):b.selectedIds.size?b.api.zoomToSelection():b.api.zoomToFit()},[b])}function Tj(b){b()}function Ql(b){return Le(wg(b,void 0))}function dk(b){return{reaction:b,
mounted:!1,changedBeforeMount:!1,cleanAt:Date.now()+MD}}function rg(b){var g=new Map,m=1,I=new b(function(W){var ia=g.get(W);ia&&(ia.reaction.dispose(),g.delete(W))});return{addReactionToTrack:function(W,ia,sa){var La=m++;I.register(sa,La,W);W.current=dk(ia);W.current.finalizationRegistryCleanupToken=La;g.set(La,W.current);return W.current},recordReactionAsCommitted:function(W){I.unregister(W);W.current&&W.current.finalizationRegistryCleanupToken&&g.delete(W.current.finalizationRegistryCleanupToken)},
forceCleanupTimerToRunNowForTests:function(){},resetCleanupScheduleForTests:function(){}}}function bm(){function b(){void 0===I&&(I=setTimeout(g,1E4))}function g(){I=void 0;var W=Date.now();m.forEach(function(ia){var sa=ia.current;sa&&W>=sa.cleanAt&&(sa.reaction.dispose(),ia.current=null,m.delete(ia))});0<m.size&&b()}var m=new Set,I;return{addReactionToTrack:function(W,ia,sa){W.current=dk(ia);m.add(W);b();return W.current},recordReactionAsCommitted:function(W){m.delete(W)},forceCleanupTimerToRunNowForTests:function(){I&&
(clearTimeout(I),g())},resetCleanupScheduleForTests:function(){var W;if(0<m.size){try{for(var ia=vD(m),sa=ia.next();!sa.done;sa=ia.next()){var La=sa.value,Va=La.current;Va&&(Va.reaction.dispose(),La.current=null)}}catch(lb){var $a={error:lb}}finally{try{sa&&!sa.done&&(W=ia.return)&&W.call(ia)}finally{if($a)throw $a.error;}}m.clear()}I&&(clearTimeout(I),I=void 0)}}}function rh(){return new uD}function Li(b,g){void 0===g&&(g="observed");var m=Hy(Ls.default.useState(rh),1)[0],I=Hy(Ls.default.useState(),
2)[1],W=Ls.default.useRef(null);if(!W.current)var ia=new Wg("observer".concat(g),function(){sa.mounted?I([]):sa.changedBeforeMount=!0}),sa=wD(W,ia,m);m=W.current.reaction;Ls.default.useDebugValue(m,Ql);Ls.default.useEffect(function(){tD(W);W.current?(W.current.mounted=!0,W.current.changedBeforeMount&&(W.current.changedBeforeMount=!1,I([]))):(W.current={reaction:new Wg("observer".concat(g),function(){I([])}),mounted:!0,changedBeforeMount:!1,cleanAt:Infinity},I([]));return function(){W.current.reaction.dispose();
W.current=null}},[]);var La,Va;m.track(function(){try{La=b()}catch($a){Va=$a}});if(Va)throw Va;return La}function nf(b,g){var m;if(Gy&&b.$$typeof===Gy)throw Error("[mobx-react-lite] You are trying to use `observer` on a function component wrapped in either another `observer` or `React.memo`. The observer already applies 'React.memo' for you.");g=null!==(m=null===g||void 0===g?void 0:g.forwardRef)&&void 0!==m?m:!1;var I=b,W=b.displayName||b.name;if(Fy&&b.$$typeof===Fy&&(g=!0,I=b.render,"function"!==
typeof I))throw Error("[mobx-react-lite] `render` property of ForwardRef was not a function");m=function(ia,sa){return Li(function(){return I(ia,sa)},W)};""!==W&&(m.displayName=W);b.contextTypes&&(m.contextTypes=b.contextTypes);g&&(m=(0,Br.forwardRef)(m));m=(0,Br.memo)(m);xj(b,m);return m}function xj(b,g){Object.keys(b).forEach(function(m){qD[m]||Object.defineProperty(g,m,Object.getOwnPropertyDescriptor(b,m))})}function Mi(b){var g=b.render;b=b.children||g;return"function"!==typeof b?null:Li(b)}function Ck(b){const g=
sg(),{callbacks:m}=Ki(),I=Vy.useRef(!1);Vy.useEffect(()=>{const W=Va=>{var $a,lb;if(null==($a=b.current)?0:$a.contains(document.activeElement))null==(lb=m.onKeyDown)?void 0:lb.call(m,{type:"canvas",order:-1},Va),I.current=Va.shiftKey},ia=Va=>{var $a,lb;if(null==($a=b.current)?0:$a.contains(document.activeElement))null==(lb=m.onKeyUp)?void 0:lb.call(m,{type:"canvas",order:-1},Va),I.current=Va.shiftKey},sa=Va=>{var $a,lb,ub;!g.editingShape&&(null==($a=b.current)?0:$a.contains(document.activeElement))&&
!["INPUT","TEXTAREA"].includes(null!=(ub=null==(lb=document.activeElement)?void 0:lb.tagName)?ub:"")&&(Va.preventDefault(),g.paste(Va,I.current))},La=Va=>{var $a,lb,ub;!g.editingShape&&0<g.selectedShapes.size&&(null==($a=b.current)?0:$a.contains(document.activeElement))&&!["INPUT","TEXTAREA"].includes(null!=(ub=null==(lb=document.activeElement)?void 0:lb.tagName)?ub:"")&&(Va.preventDefault(),g.copy())};window.addEventListener("keydown",W);window.addEventListener("keyup",ia);document.addEventListener("paste",
sa);document.addEventListener("copy",La);return()=>{window.removeEventListener("keydown",W);window.removeEventListener("keyup",ia);document.removeEventListener("paste",sa);document.removeEventListener("copy",La)}},[])}function ek(b){const {inputs:g,callbacks:m}=Ki(),I=Dy.useRef(-1);return Dy.useMemo(()=>({onPointerDown:W=>{var ia,sa;const {order:La=0}=W;La||(null==(ia=W.currentTarget)?void 0:ia.setPointerCapture(W.pointerId));null==(sa=m.onPointerDown)?void 0:sa.call(m,{type:"shape",shape:b,order:La},
W);W.order=La+1},onPointerMove:W=>{var ia;const {order:sa=0}=W;null==(ia=m.onPointerMove)?void 0:ia.call(m,{type:"shape",shape:b,order:sa},W);W.order=sa+1},onPointerUp:W=>{var ia,sa,La;const {order:Va=0}=W;Va||(null==(ia=W.currentTarget)?void 0:ia.releasePointerCapture(W.pointerId));null==(sa=m.onPointerUp)?void 0:sa.call(m,{type:"shape",shape:b,order:Va},W);ia=Date.now();sa=ia-I.current;300<sa?I.current=ia:300>=sa&&(null==(La=m.onDoubleClick)?void 0:La.call(m,{type:"shape",shape:b,order:Va},W),I.current=
-1);W.order=Va+1},onPointerEnter:W=>{var ia;const {order:sa=0}=W;null==(ia=m.onPointerEnter)?void 0:ia.call(m,{type:"shape",shape:b,order:sa},W);W.order=sa+1},onPointerLeave:W=>{var ia;const {order:sa=0}=W;null==(ia=m.onPointerLeave)?void 0:ia.call(m,{type:"shape",shape:b,order:sa},W);W.order=sa+1},onKeyUp:W=>{var ia;null==(ia=m.onKeyUp)?void 0:ia.call(m,{type:"shape",shape:b,order:-1},W)},onKeyDown:W=>{var ia;null==(ia=m.onKeyDown)?void 0:ia.call(m,{type:"shape",shape:b,order:-1},W)}}),[b.id,g,m])}
function dm(b){var {viewport:g,inputs:m,callbacks:I,components:W}=b;b=Ya(b,["viewport","inputs","callbacks","components"]);return(0,ob.jsx)(yD,{id:b.id,viewport:g,inputs:m,callbacks:I,components:W,meta:b.meta,children:(0,ob.jsx)(AD,re({},b))})}function se(){se=Object.assign?Object.assign.bind():function(b){for(var g=1;g<arguments.length;g++){var m=arguments[g],I;for(I in m)Object.prototype.hasOwnProperty.call(m,I)&&(b[I]=m[I])}return b};return se.apply(this,arguments)}function Zf(b,g,{checkForDefaultPrevented:m=
!0}={}){return function(I){null===b||void 0===b||b(I);if(!1===m||!I.defaultPrevented)return null===g||void 0===g?void 0:g(I)}}function Zi(...b){return g=>b.forEach(m=>{"function"===typeof m?m(g):null!==m&&void 0!==m&&(m.current=g)})}function bh(...b){return(0,XD.useCallback)(Zi(...b),b)}function og(b,g=[]){let m=[];const I=()=>{const W=m.map(ia=>(0,Oq.createContext)(ia));return function(ia){const sa=(null===ia||void 0===ia?void 0:ia[b])||W;return(0,Oq.useMemo)(()=>({[`__scope${b}`]:Ga(re({},ia),{[b]:sa})}),
[ia,sa])}};I.scopeName=b;return[function(W,ia){function sa($a){const {scope:lb,children:ub}=$a,Rb=Ya($a,["scope","children"]);$a=(null===lb||void 0===lb?void 0:lb[b][Va])||La;const ec=(0,Oq.useMemo)(()=>Rb,Object.values(Rb));return(0,Oq.createElement)($a.Provider,{value:ec},ub)}const La=(0,Oq.createContext)(ia),Va=m.length;m=[...m,ia];sa.displayName=W+"Provider";return[sa,function($a,lb){if(lb=(0,Oq.useContext)((null===lb||void 0===lb?void 0:lb[b][Va])||La))return lb;if(void 0!==ia)return ia;throw Error(`\`${$a}\` must be used within \`${W}\``);
}]},em(I,...g)]}function em(...b){const g=b[0];if(1===b.length)return g;const m=()=>{const I=b.map(W=>({useScope:W(),scopeName:W.scopeName}));return function(W){const ia=I.reduce((sa,{useScope:La,scopeName:Va})=>{La=La(W)[`__scope${Va}`];return re(re({},sa),La)},{});return(0,Oq.useMemo)(()=>({[`__scope${g.scopeName}`]:ia}),[ia])}};m.scopeName=g.scopeName;return m}function Lk(b){return(0,Jm.isValidElement)(b)&&b.type===cz}function mg(b,g){const m=re({},g);for(const I in g){const W=b[I],ia=g[I];/^on[A-Z]/.test(I)?
W&&ia?m[I]=(...sa)=>{ia(...sa);W(...sa)}:W&&(m[I]=W):"style"===I?m[I]=re(re({},W),ia):"className"===I&&(m[I]=[W,ia].filter(Boolean).join(" "))}return re(re({},b),m)}function Ti(b,g){b&&(0,YD.flushSync)(()=>b.dispatchEvent(g))}function ij(b){const g=(0,Gv.useRef)(b);(0,Gv.useEffect)(()=>{g.current=b});return(0,Gv.useMemo)(()=>(...m)=>{var I;return null===(I=g.current)||void 0===I?void 0:I.call(g,...m)},[])}function If(b,g=null===globalThis||void 0===globalThis?void 0:globalThis.document){const m=ij(b);
(0,ZD.useEffect)(()=>{const I=W=>{"Escape"===W.key&&m(W)};g.addEventListener("keydown",I);return()=>g.removeEventListener("keydown",I)},[m,g])}function rk(b,g=null===globalThis||void 0===globalThis?void 0:globalThis.document){const m=ij(b),I=(0,vn.useRef)(!1),W=(0,vn.useRef)(()=>{});(0,vn.useEffect)(()=>{const ia=La=>{if(La.target&&!I.current){let Va=function(){Ak("dismissableLayer.pointerDownOutside",m,$a,{discrete:!0})};const $a={originalEvent:La};"touch"===La.pointerType?(g.removeEventListener("click",
W.current),W.current=Va,g.addEventListener("click",W.current,{once:!0})):Va()}I.current=!1},sa=window.setTimeout(()=>{g.addEventListener("pointerdown",ia)},0);return()=>{window.clearTimeout(sa);g.removeEventListener("pointerdown",ia);g.removeEventListener("click",W.current)}},[g,m]);return{onPointerDownCapture:()=>I.current=!0}}function Dj(b,g=null===globalThis||void 0===globalThis?void 0:globalThis.document){const m=ij(b),I=(0,vn.useRef)(!1);(0,vn.useEffect)(()=>{const W=ia=>{ia.target&&!I.current&&
Ak("dismissableLayer.focusOutside",m,{originalEvent:ia},{discrete:!1})};g.addEventListener("focusin",W);return()=>g.removeEventListener("focusin",W)},[g,m]);return{onFocusCapture:()=>I.current=!0,onBlurCapture:()=>I.current=!1}}function ll(){const b=new CustomEvent("dismissableLayer.update");document.dispatchEvent(b)}function Ak(b,g,m,{discrete:I}){const W=m.originalEvent.target;m=new CustomEvent(b,{bubbles:!1,cancelable:!0,detail:m});g&&W.addEventListener(b,g,{once:!0});I?Ti(W,m):W.dispatchEvent(m)}
function pl(b){const [g,m]=ez.useState(bE());wn(()=>{b||m(I=>null!==I&&void 0!==I?I:String(cE++))},[b]);return b||(g?`radix-${g}`:"")}function vi(b){return b.split("-")[0]}function Ui(b){return["top","bottom"].includes(vi(b))?"x":"y"}function $k(b){return"y"===b?"height":"width"}function sk(b,g,m){let {reference:I,floating:W}=b;var ia=I.x+I.width/2-W.width/2;const sa=I.y+I.height/2-W.height/2;b=Ui(g);var La=$k(b);La=I[La]/2-W[La]/2;const Va="x"===b;switch(vi(g)){case "top":ia={x:ia,y:I.y-W.height};
break;case "bottom":ia={x:ia,y:I.y+I.height};break;case "right":ia={x:I.x+I.width,y:sa};break;case "left":ia={x:I.x-W.width,y:sa};break;default:ia={x:I.x,y:I.y}}switch(g.split("-")[1]){case "start":ia[b]-=La*(m&&Va?-1:1);break;case "end":ia[b]+=La*(m&&Va?-1:1)}return ia}function al(b){return"number"!=typeof b?re({top:0,right:0,bottom:0,left:0},b):{top:b,right:b,bottom:b,left:b}}function um(b){return Ga(re({},b),{top:b.y,left:b.x,right:b.x+b.width,bottom:b.y+b.height})}function Fm(b,g){return td(this,
null,function*(){var m;void 0===g&&(g={});const {x:I,y:W,platform:ia,rects:sa,elements:La,strategy:Va}=b,{boundary:$a="clippingAncestors",rootBoundary:lb="viewport",elementContext:ub="floating",altBoundary:Rb=!1,padding:ec=0}=g,Vb=al(ec),rc=La[Rb?"floating"===ub?"reference":"floating":ub],mc=um(yield ia.getClippingRect({element:null==(m=yield null==ia.isElement?void 0:ia.isElement(rc))||m?rc:rc.contextElement||(yield null==ia.getDocumentElement?void 0:ia.getDocumentElement(La.floating)),boundary:$a,
rootBoundary:lb,strategy:Va}));m=um(ia.convertOffsetParentRelativeRectToViewportRelativeRect?yield ia.convertOffsetParentRelativeRectToViewportRelativeRect({rect:"floating"===ub?Ga(re({},sa.floating),{x:I,y:W}):sa.reference,offsetParent:yield null==ia.getOffsetParent?void 0:ia.getOffsetParent(La.floating),strategy:Va}):sa[ub]);return{top:mc.top-m.top+Vb.top,bottom:m.bottom-mc.bottom+Vb.bottom,left:mc.left-m.left+Vb.left,right:m.right-mc.right+Vb.right}})}function ml(b){return b.replace(/left|right|bottom|top/g,
g=>eE[g])}function Qm(b,g,m){void 0===m&&(m=!1);const I=b.split("-")[1],W=Ui(b);b=$k(W);m="x"===W?I===(m?"end":"start")?"right":"left":"start"===I?"bottom":"top";return g.reference[b]>g.floating[b]&&(m=ml(m)),{main:m,cross:ml(m)}}function Mk(b){return b.replace(/start|end/g,g=>fE[g])}function Fj(b,g){return{top:b.top-g.height,right:b.right-g.width,bottom:b.bottom-g.height,left:b.left-g.width}}function Dk(b){return gz.some(g=>0<=b[g])}function Vi(b){return null==b?window:b&&b.document&&b.location&&
b.alert&&b.setInterval?b:(b=b.ownerDocument)&&b.defaultView||window}function Ok(b){return Vi(b).getComputedStyle(b)}function Gj(b){return b&&b.document&&b.location&&b.alert&&b.setInterval?"":b?(b.nodeName||"").toLowerCase():""}function Pk(){const b=navigator.userAgentData;return null!=b&&b.brands?b.brands.map(g=>g.brand+"/"+g.version).join(" "):navigator.userAgent}function Hj(b){return b instanceof Vi(b).HTMLElement}function Vj(b){return b instanceof Vi(b).Element}function tk(b){return"undefined"==
typeof ShadowRoot?!1:b instanceof Vi(b).ShadowRoot||b instanceof ShadowRoot}function yj(b){const {overflow:g,overflowX:m,overflowY:I}=Ok(b);return/auto|scroll|overlay|hidden/.test(g+I+m)}function tm(b){const g=/firefox/i.test(Pk());b=Ok(b);return"none"!==b.transform||"none"!==b.perspective||"paint"===b.contain||["transform","perspective"].includes(b.willChange)||g&&"filter"===b.willChange||g&&!!b.filter&&"none"!==b.filter}function Tl(){return!/^((?!chrome|android).)*safari/i.test(Pk())}function sj(b,
g,m){var I,W,ia,sa;void 0===g&&(g=!1);void 0===m&&(m=!1);var La=b.getBoundingClientRect();let Va=1,$a=1;g&&Hj(b)&&(Va=0<b.offsetWidth&&Qt(La.width)/b.offsetWidth||1,$a=0<b.offsetHeight&&Qt(La.height)/b.offsetHeight||1);b=Vj(b)?Vi(b):window;g=!Tl()&&m;m=(La.left+(g&&null!=(I=null==(W=b.visualViewport)?void 0:W.offsetLeft)?I:0))/Va;I=(La.top+(g&&null!=(ia=null==(sa=b.visualViewport)?void 0:sa.offsetTop)?ia:0))/$a;ia=La.width/Va;La=La.height/$a;return{width:ia,height:La,top:I,right:m+ia,bottom:I+La,
left:m,x:m,y:I}}function rj(b){return(g=b,(g instanceof Vi(g).Node?b.ownerDocument:b.document)||window.document).documentElement;var g}function gm(b){return Vj(b)?{scrollLeft:b.scrollLeft,scrollTop:b.scrollTop}:{scrollLeft:b.pageXOffset,scrollTop:b.pageYOffset}}function qk(b){return sj(rj(b)).left+gm(b).scrollLeft}function fk(b){return"html"===Gj(b)?b:b.assignedSlot||b.parentNode||(tk(b)?b.host:null)||rj(b)}function Kh(b){return Hj(b)&&"fixed"!==getComputedStyle(b).position?b.offsetParent:null}function gj(b){for(var g=
Vi(b),m=Kh(b);m&&["table","td","th"].includes(Gj(m))&&"static"===getComputedStyle(m).position;)m=Kh(m);if(!m||"html"!==Gj(m)&&("body"!==Gj(m)||"static"!==getComputedStyle(m).position||tm(m))){if(!m)a:{b=fk(b);for(tk(b)&&(b=b.host);Hj(b)&&!["html","body"].includes(Gj(b));){if(tm(b)){m=b;break a}b=b.parentNode}m=null}g=m||g}return g}function uk(b){if(Hj(b))return{width:b.offsetWidth,height:b.offsetHeight};b=sj(b);return{width:b.width,height:b.height}}function mk(b){const g=fk(b);return["html","body",
"#document"].includes(Gj(g))?b.ownerDocument.body:Hj(g)&&yj(g)?g:mk(g)}function ph(b,g){var m;void 0===g&&(g=[]);var I=mk(b);b=I===(null==(m=b.ownerDocument)?void 0:m.body);m=Vi(I);I=b?[m].concat(m.visualViewport||[],yj(I)?I:[]):I;g=g.concat(I);return b?g:g.concat(ph(I))}function ih(b,g,m){return"viewport"===g?um(function(I,W){var ia=Vi(I),sa=rj(I);ia=ia.visualViewport;I=sa.clientWidth;sa=sa.clientHeight;let La=0,Va=0;if(ia){I=ia.width;sa=ia.height;const $a=Tl();($a||!$a&&"fixed"===W)&&(La=ia.offsetLeft,
Va=ia.offsetTop)}return{width:I,height:sa,x:La,y:Va}}(b,m)):Vj(g)?function(I,W){var ia=sj(I,!1,"fixed"===W);W=ia.top+I.clientTop;ia=ia.left+I.clientLeft;return{top:W,left:ia,x:ia,y:W,right:ia+I.clientWidth,bottom:W+I.clientHeight,width:I.clientWidth,height:I.clientHeight}}(g,m):um(function(I){var W;const ia=rj(I);var sa=gm(I);const La=null==(W=I.ownerDocument)?void 0:W.body;W=Ns(ia.scrollWidth,ia.clientWidth,La?La.scrollWidth:0,La?La.clientWidth:0);const Va=Ns(ia.scrollHeight,ia.clientHeight,La?La.scrollHeight:
0,La?La.clientHeight:0);I=-sa.scrollLeft+qk(I);sa=-sa.scrollTop;return"rtl"===Ok(La||ia).direction&&(I+=Ns(ia.clientWidth,La?La.clientWidth:0)-W),{width:W,height:Va,x:I,y:sa}}(rj(b)))}function Eg(b){const g=ph(b),m=["absolute","fixed"].includes(Ok(b).position)&&Hj(b)?gj(b):b;return Vj(m)?g.filter(I=>{var W;if(W=Vj(I))a:if(W=null==m.getRootNode?void 0:m.getRootNode(),I.contains(m))W=!0;else{if(W&&tk(W)){W=m;do{if(W&&I===W){W=!0;break a}W=W.parentNode||W.host}while(W)}W=!1}return W&&"body"!==Gj(I)}):
[]}function Xj(b,g,m,I){void 0===I&&(I={});const {ancestorScroll:W=!0,ancestorResize:ia=!0,elementResize:sa=!0,animationFrame:La=!1}=I,Va=W&&!La,$a=ia&&!La,lb=Va||$a?[...(Vj(b)?ph(b):[]),...ph(g)]:[];lb.forEach(Vb=>{Va&&Vb.addEventListener("scroll",m,{passive:!0});$a&&Vb.addEventListener("resize",m)});let ub,Rb=null;if(sa){let Vb=!0;Rb=new ResizeObserver(()=>{Vb||m();Vb=!1});Vj(b)&&!La&&Rb.observe(b);Rb.observe(g)}let ec=La?sj(b):null;return La&&function rc(){const mc=sj(b);!ec||mc.x===ec.x&&mc.y===
ec.y&&mc.width===ec.width&&mc.height===ec.height||m();ec=mc;ub=requestAnimationFrame(rc)}(),m(),()=>{var rc;lb.forEach(mc=>{Va&&mc.removeEventListener("scroll",m);$a&&mc.removeEventListener("resize",m)});null==(rc=Rb)||rc.disconnect();Rb=null;La&&cancelAnimationFrame(ub)}}function Eh(b,g){if(b===g)return!0;if(typeof b!==typeof g)return!1;if("function"===typeof b&&b.toString()===g.toString())return!0;let m,I;if(b&&g&&"object"==typeof b){if(Array.isArray(b)){var W=b.length;if(W!=g.length)return!1;for(m=
W;0!==m--;)if(!Eh(b[m],g[m]))return!1;return!0}I=Object.keys(b);W=I.length;if(W!==Object.keys(g).length)return!1;for(m=W;0!==m--;)if(!Object.prototype.hasOwnProperty.call(g,I[m]))return!1;for(m=W;0!==m--;)if(W=I[m],!("_owner"===W&&b.$$typeof||Eh(b[W],g[W])))return!1;return!0}return b!==b&&g!==g}function $i(b){const g=Ln.useRef(b);Jv(()=>{g.current=b});return g}function ug(b){let {middleware:g,placement:m="bottom",strategy:I="absolute",whileElementsMounted:W}=void 0===b?{}:b;const ia=Ln.useRef(null),
sa=Ln.useRef(null),La=$i(W),Va=Ln.useRef(null),[$a,lb]=Ln.useState({x:null,y:null,strategy:I,placement:m,middlewareData:{}}),[ub,Rb]=Ln.useState(g);Eh(null==ub?void 0:ub.map(Hc=>{({options:Hc}=Hc);return Hc}),null==g?void 0:g.map(Hc=>{({options:Hc}=Hc);return Hc}))||Rb(g);const ec=Ln.useCallback(()=>{ia.current&&sa.current&&mE(ia.current,sa.current,{middleware:ub,placement:m,strategy:I}).then(Hc=>{Vb.current&&nE.flushSync(()=>{lb(Hc)})})},[ub,m,I]);Jv(()=>{Vb.current&&ec()},[ec]);const Vb=Ln.useRef(!1);
Jv(()=>{Vb.current=!0;return()=>{Vb.current=!1}},[]);const rc=Ln.useCallback(()=>{"function"===typeof Va.current&&(Va.current(),Va.current=null);if(ia.current&&sa.current)if(La.current){const Hc=La.current(ia.current,sa.current,ec);Va.current=Hc}else ec()},[ec,La]),mc=Ln.useCallback(Hc=>{ia.current=Hc;rc()},[rc]),Wb=Ln.useCallback(Hc=>{sa.current=Hc;rc()},[rc]),tc=Ln.useMemo(()=>({reference:ia,floating:sa}),[]);return Ln.useMemo(()=>Ga(re({},$a),{update:ec,refs:tc,reference:mc,floating:Wb}),[$a,ec,
tc,mc,Wb])}function Oi(b){const [g,m]=(0,qE.useState)(void 0);wn(()=>{if(b){m({width:b.offsetWidth,height:b.offsetHeight});const I=new ResizeObserver(W=>{if(Array.isArray(W)&&W.length){W=W[0];if("borderBoxSize"in W){W=W.borderBoxSize;var ia=Array.isArray(W)?W[0]:W;W=ia.inlineSize;ia=ia.blockSize}else W=b.offsetWidth,ia=b.offsetHeight;m({width:W,height:ia})}});I.observe(b,{box:"border-box"});return()=>I.unobserve(b)}m(void 0)},[b]);return g}function Sf(b){return void 0!==b}function Jg(b){return null!==
b}function jj(b){const [g,m="center"]=b.split("-");return[g,m]}function oi(b,g){return(0,jp.useReducer)((m,I)=>{I=g[m][I];return null!==I&&void 0!==I?I:m},b)}function nh(b){const [g,m]=(0,jp.useState)(),I=(0,jp.useRef)({}),W=(0,jp.useRef)(b),ia=(0,jp.useRef)("none"),[sa,La]=oi(b?"mounted":"unmounted",{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});(0,jp.useEffect)(()=>{const Va=ig(I.current);
ia.current="mounted"===sa?Va:"none"},[sa]);wn(()=>{const Va=I.current,$a=W.current;if($a!==b){const lb=ia.current,ub=ig(Va);b?La("MOUNT"):"none"===ub||"none"===(null===Va||void 0===Va?void 0:Va.display)?La("UNMOUNT"):$a&&lb!==ub?La("ANIMATION_OUT"):La("UNMOUNT");W.current=b}},[b,La]);wn(()=>{if(g){const Va=lb=>{const ub=ig(I.current).includes(lb.animationName);lb.target===g&&ub&&(0,wE.flushSync)(()=>La("ANIMATION_END"))},$a=lb=>{lb.target===g&&(ia.current=ig(I.current))};g.addEventListener("animationstart",
$a);g.addEventListener("animationcancel",Va);g.addEventListener("animationend",Va);return()=>{g.removeEventListener("animationstart",$a);g.removeEventListener("animationcancel",Va);g.removeEventListener("animationend",Va)}}La("ANIMATION_END")},[g,La]);return{isPresent:["mounted","unmountSuspended"].includes(sa),ref:(0,jp.useCallback)(Va=>{Va&&(I.current=getComputedStyle(Va));m(Va)},[])}}function ig(b){return(null===b||void 0===b?void 0:b.animationName)||"none"}function Rg({prop:b,defaultProp:g,onChange:m=
()=>{}}){const [I,W]=Hl({defaultProp:g,onChange:m}),ia=void 0!==b;g=ia?b:I;const sa=ij(m);m=(0,Rt.useCallback)(La=>{ia?(La="function"===typeof La?La(b):La,La!==b&&sa(La)):W(La)},[ia,b,W,sa]);return[g,m]}function Hl({defaultProp:b,onChange:g}){b=(0,Rt.useState)(b);const [m]=b,I=(0,Rt.useRef)(m),W=ij(g);(0,Rt.useEffect)(()=>{I.current!==m&&(W(m),I.current=m)},[m,I,W]);return b}function Ai(b,g){const m=Math.abs(g.top-b.y),I=Math.abs(g.bottom-b.y),W=Math.abs(g.right-b.x);b=Math.abs(g.left-b.x);switch(Math.min(m,
I,W,b)){case b:return"left";case W:return"right";case m:return"top";case I:return"bottom";default:return null}}function Qi(b){b=b.slice();b.sort((g,m)=>g.x<m.x?-1:g.x>m.x?1:g.y<m.y?-1:g.y>m.y?1:0);return Qb(b)}function Qb(b){if(1>=b.length)return b.slice();const g=[];for(var m=0;m<b.length;m++){for(var I=b[m];2<=g.length;){var W=g[g.length-1],ia=g[g.length-2];if((W.x-ia.x)*(I.y-ia.y)>=(W.y-ia.y)*(I.x-ia.x))g.pop();else break}g.push(I)}g.pop();m=[];for(I=b.length-1;0<=I;I--){for(W=b[I];2<=m.length;){ia=
m[m.length-1];const sa=m[m.length-2];if((ia.x-sa.x)*(W.y-sa.y)>=(ia.y-sa.y)*(W.x-sa.x))m.pop();else break}m.push(W)}m.pop();return 1===g.length&&1===m.length&&g[0].x===m[0].x&&g[0].y===m[0].y?g:g.concat(m)}function fc(b){var {side:g,content:m,sideOffset:I=10}=b;b=Ya(b,["side","content","sideOffset"]);return m?(0,ob.jsx)(HE,{delayDuration:300,children:(0,ob.jsxs)(IE,{children:[(0,ob.jsx)(JE,{asChild:!0,children:b.children}),(0,ob.jsx)(KE,{children:(0,ob.jsxs)(LE,Ga(re({className:"tl-tooltip-content",
sideOffset:I,side:g},b),{children:[m,(0,ob.jsx)(ME,{className:"tl-tooltip-arrow"})]}))})]})}):(0,ob.jsx)(ob.Fragment,{children:b.children})}function dc(b){var {className:g,tooltip:m,tooltipSide:I}=b;b=Ya(b,["className","tooltip","tooltipSide"]);return(0,ob.jsx)(fc,{content:m,side:I,children:(0,ob.jsx)("button",re({className:"tl-button "+(null!=g?g:"")},b))})}function ja(b){var g=b+"CollectionProvider";const [m,I]=og(g),[W,ia]=m(g,{collectionRef:{current:null},itemMap:new Map}),sa=lb=>{const {scope:ub,
children:Rb}=lb;lb=Uo.default.useRef(null);const ec=Uo.default.useRef(new Map).current;return Uo.default.createElement(W,{scope:ub,itemMap:ec,collectionRef:lb},Rb)};Object.assign(sa,{displayName:g});const La=b+"CollectionSlot";g=Uo.default.forwardRef((lb,ub)=>{const {scope:Rb,children:ec}=lb;lb=ia(La,Rb);ub=bh(ub,lb.collectionRef);return Uo.default.createElement(Pq,{ref:ub},ec)});Object.assign(g,{displayName:La});const Va=b+"CollectionItemSlot",$a=Uo.default.forwardRef((lb,ub)=>{const {scope:Rb,children:ec}=
lb,Vb=Ya(lb,["scope","children"]),rc=Uo.default.useRef(null);lb=bh(ub,rc);const mc=ia(Va,Rb);Uo.default.useEffect(()=>{mc.itemMap.set(rc,re({ref:rc},Vb));return()=>void mc.itemMap.delete(rc)});return Uo.default.createElement(Pq,{["data-radix-collection-item"]:"",ref:lb},ec)});Object.assign($a,{displayName:Va});return[{Provider:sa,Slot:g,ItemSlot:$a},function(lb){const ub=ia(b+"CollectionConsumer",lb);return Uo.default.useCallback(()=>{const Rb=ub.collectionRef.current;if(!Rb)return[];const ec=Array.from(Rb.querySelectorAll("[data-radix-collection-item]"));
return Array.from(ub.itemMap.values()).sort((Vb,rc)=>ec.indexOf(Vb.ref.current)-ec.indexOf(rc.ref.current))},[ub.collectionRef,ub.itemMap])},I]}function Fb(b){const g=(0,vz.useContext)(NE);return b||g||"ltr"}function Tb(){(0,OE.useEffect)(()=>{var b,g;const m=document.querySelectorAll("[data-radix-focus-guard]");document.body.insertAdjacentElement("afterbegin",null!==(b=m[0])&&void 0!==b?b:wb());document.body.insertAdjacentElement("beforeend",null!==(g=m[1])&&void 0!==g?g:wb());Qv++;return()=>{1===
Qv&&document.querySelectorAll("[data-radix-focus-guard]").forEach(I=>I.remove());Qv--}},[])}function wb(){const b=document.createElement("span");b.setAttribute("data-radix-focus-guard","");b.tabIndex=0;b.style.cssText="outline: none; opacity: 0; position: fixed; pointer-events: none";return b}function zb(b,{select:g=!1}={}){const m=document.activeElement;for(const I of b)if($b(I,{select:g}),document.activeElement!==m)break}function Pb(b){const g=[];for(b=document.createTreeWalker(b,NodeFilter.SHOW_ELEMENT,
{acceptNode:m=>{const I="INPUT"===m.tagName&&"hidden"===m.type;return m.disabled||m.hidden||I?NodeFilter.FILTER_SKIP:0<=m.tabIndex?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});b.nextNode();)g.push(b.currentNode);return g}function sb(b,g){for(const m of b)if(!Mb(m,{upTo:g}))return m}function Mb(b,{upTo:g}){if("hidden"===getComputedStyle(b).visibility)return!0;for(;b&&(void 0===g||b!==g);){if("none"===getComputedStyle(b).display)return!0;b=b.parentElement}return!1}function $b(b,{select:g=!1}=
{}){if(b&&b.focus){const m=document.activeElement;b.focus({preventScroll:!0});b!==m&&b instanceof HTMLInputElement&&"select"in b&&g&&b.select()}}function Bc(b,g){b=[...b];g=b.indexOf(g);-1!==g&&b.splice(g,1);return b}function Oc(b){return b.filter(g=>"A"!==g.tagName)}function Sc(b,g,m){b=b.key;m="rtl"!==m?b:"ArrowLeft"===b?"ArrowRight":"ArrowRight"===b?"ArrowLeft":b;if("vertical"!==g||!["ArrowLeft","ArrowRight"].includes(m))if("horizontal"!==g||!["ArrowUp","ArrowDown"].includes(m))return VE[m]}function xd(b){const g=
document.activeElement;for(const m of b){if(m===g)break;m.focus();if(document.activeElement!==g)break}}function Rd(b,g){return b.map((m,I)=>b[(g+I)%b.length])}function Hd(b,g){var m=(0,ZE.useState)(function(){return{value:b,callback:g,facade:{get current(){return m.value},set current(I){var W=m.value;W!==I&&(m.value=I,m.callback(I,W))}}}})[0];m.callback=g;return m.facade}function Dd(b,g){return Hd(g||null,function(m){return b.forEach(function(I){"function"===typeof I?I(m):I&&(I.current=m);return I})})}
function Jd(b){return b}function ye(b,g){void 0===g&&(g=Jd);var m=[],I=!1;return{read:function(){if(I)throw Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return m.length?m[m.length-1]:b},useMedium:function(W){var ia=g(W,I);m.push(ia);return function(){m=m.filter(function(sa){return sa!==ia})}},assignSyncMedium:function(W){for(I=!0;m.length;){var ia=m;m=[];ia.forEach(W)}m={push:function(sa){return W(sa)},filter:function(){return m}}},assignMedium:function(W){I=
!0;var ia=[];if(m.length){var sa=m;m=[];sa.forEach(W);ia=m}var La=function(){var Va=ia;ia=[];Va.forEach(W)};Promise.resolve().then(La);m={push:function(Va){ia.push(Va);Promise.resolve().then(La)},filter:function(Va){ia=ia.filter(Va);return m}}}}}function Tf(b){const g=document.activeElement;for(const m of b){if(m===g)break;m.focus();if(document.activeElement!==g)break}}function te(b,g){return b.map((m,I)=>b[(g+I)%b.length])}function $e(b,g,m){const I=1<g.length&&Array.from(g).every(ia=>ia===g[0])?
g[0]:g,W=m?b.indexOf(m):-1;b=te(b,Math.max(W,0));1===I.length&&(b=b.filter(ia=>ia!==m));b=b.find(ia=>ia.toLowerCase().startsWith(I.toLowerCase()));return b!==m?b:void 0}function Pe(b){return g=>"mouse"===g.pointerType?b(g):void 0}function Re(b,[g,m]){return Math.min(m,Math.max(g,b))}function ng(b){const g=(0,cA.useRef)({value:b,previous:b});return(0,cA.useMemo)(()=>{g.current.value!==b&&(g.current.previous=g.current.value,g.current.value=b);return g.current.previous},[b])}function Rf(b=[],g,m){b=
[...b];b[m]=g;return b.sort((I,W)=>I-W)}function Ni(b,g,m){return 100/(m-g)*(b-g)}function Pf(b,g){if(2<g)return`Value ${b+1} of ${g}`;if(2===g)return["Minimum","Maximum"][b]}function gg(b,g){if(1===b.length)return 0;b=b.map(I=>Math.abs(I-g));const m=Math.min(...b);return b.indexOf(m)}function mh(b,g,m){b/=2;const I=Mg([0,50],[0,b]);return(b-I(g)*m)*m}function Pg(b){return b.slice(0,-1).map((g,m)=>b[m+1]-g)}function Mg(b,g){return m=>b[0]===b[1]||g[0]===g[1]?g[0]:g[0]+(g[1]-g[0])/(b[1]-b[0])*(m-b[0])}
function lh(b,g){g=Math.pow(10,g);return Math.round(b*g)/g}function tg(b){function g(La){return La?(0,ob.jsx)("div",{className:"tl-color-bg",style:{backgroundColor:La},children:(0,ob.jsx)("div",{className:`w-full h-full bg-${La}-500`})}):(0,ob.jsx)("div",{className:"tl-color-bg",children:(0,ob.jsx)(Ih,{name:"color-swatch"})})}var {color:m,opacity:I,popoverSide:W,setColor:ia,setOpacity:sa}=b;b=Ya(b,["color","opacity","popoverSide","setColor","setOpacity"]);return(0,ob.jsx)(kA,Ga(re({},b),{border:!0,
arrow:!0,side:W,label:(0,ob.jsx)(fc,{content:"Color",side:W,sideOffset:14,children:g(m)}),children:(0,ob.jsxs)("div",{className:"p-1",children:[(0,ob.jsx)("div",{className:"tl-color-palette",children:Object.values(bc).map(La=>(0,ob.jsx)("button",{className:`tl-color-drip m-1${La===m?" active":""}`,onClick:()=>ia(La),children:g(La)},La))}),sa&&(0,ob.jsx)("div",{className:"mx-1 my-2",children:(0,ob.jsxs)(UF,{defaultValue:[null!=I?I:0],onValueCommit:La=>sa(La[0]),max:1,step:.1,"aria-label":"Opacity",
className:"tl-slider-root",children:[(0,ob.jsx)(VF,{className:"tl-slider-track",children:(0,ob.jsx)(WF,{className:"tl-slider-range"})}),(0,ob.jsx)(XF,{className:"tl-slider-thumb"})]})})]})}))}function hg(b){const g=ij(b),m=(0,Af.useRef)(""),I=(0,Af.useRef)(0);b=(0,Af.useCallback)(ia=>{ia=m.current+ia;g(ia);(function Va(La){m.current=La;window.clearTimeout(I.current);""!==La&&(I.current=window.setTimeout(()=>Va(""),1E3))})(ia)},[g]);const W=(0,Af.useCallback)(()=>{m.current="";window.clearTimeout(I.current)},
[]);(0,Af.useEffect)(()=>()=>window.clearTimeout(I.current),[]);return[m,b,W]}function $g(b,g,m){const I=1<g.length&&Array.from(g).every(ia=>ia===g[0])?g[0]:g,W=m?b.indexOf(m):-1;b=Mf(b,Math.max(W,0));1===I.length&&(b=b.filter(ia=>ia!==m));b=b.find(ia=>ia.textValue.toLowerCase().startsWith(I.toLowerCase()));return b!==m?b:void 0}function Mf(b,g){return b.map((m,I)=>b[(g+I)%b.length])}function Ri(b){var {options:g,tooltip:m,value:I,onValueChange:W}=b;b=Ya(b,["options","tooltip","value","onValueChange"]);
const [ia,sa]=$F.useState(!1);return(0,ob.jsx)("div",Ga(re({},b),{className:"tl-select-input",children:(0,ob.jsxs)(sG,{open:ia,onOpenChange:sa,value:I,onValueChange:W,children:[(0,ob.jsx)(fc,{content:m,children:(0,ob.jsxs)(tG,{className:"tl-select-input-trigger",children:[(0,ob.jsx)("div",{className:"tl-select-input-trigger-value",children:(0,ob.jsx)(uG,{})}),(0,ob.jsx)(vG,{style:{lineHeight:1},children:(0,ob.jsx)(Ih,{name:ia?"chevron-up":"chevron-down"})})]})}),(0,ob.jsx)(wG,{className:"tl-select-input-portal",
children:(0,ob.jsxs)(xG,{className:"tl-select-input-content",children:[(0,ob.jsx)(BG,{}),(0,ob.jsx)(yG,{className:"tl-select-input-viewport",children:g.map(La=>(0,ob.jsx)(zG,{className:"tl-select-input-select-item",value:La.value,children:(0,ob.jsx)(AG,{children:La.label})},La.value))}),(0,ob.jsx)(CG,{})]})})]})}))}function kh(b,g){return function(m){return b(g(m))}}function hi(b,g){return g(b)}function Nj(b,g){return function(m){return b(g,m)}}function si(b,g){return function(){return b(g)}}function Mj(b,
g){g(b);return b}function Qh(){for(var b=arguments.length,g=Array(b),m=0;m<b;m++)g[m]=arguments[m];return g}function Ij(b){b()}function Yl(b){return function(){return b}}function Bm(){for(var b=arguments.length,g=Array(b),m=0;m<b;m++)g[m]=arguments[m];return function(){g.map(Ij)}}function ag(){}function di(b,g){return b(1,g)}function Lm(b,g){b(0,g)}function $l(b){b(2)}function Vk(b){return b(4)}function Yf(b,g){return di(b,Nj(g,0))}function Ci(b,g){var m=b(1,function(I){m();g(I)});return m}function Jf(){var b=
[];return function(g,m){switch(g){case 2:b.splice(0,b.length);break;case 1:return b.push(m),function(){var I=b.indexOf(m);-1<I&&b.splice(I,1)};case 0:b.slice().forEach(function(I){I(m)});break;default:throw Error("unrecognized action "+g);}}}function sf(b){var g=b,m=Jf();return function(I,W){switch(I){case 1:W(g);break;case 0:g=W;break;case 4:return g}return m(I,W)}}function Zl(b){var g,m;return function(I,W){switch(I){case 1:if(W){if(m===W)break;g&&g();m=W;return g=b(1,W)}g&&g();return ag;case 2:g&&
g();m=null;break;default:throw Error("unrecognized action "+I);}}}function uj(b){return Mj(Jf(),function(g){return Yf(b,g)})}function wh(b,g){return Mj(sf(g),function(m){return Yf(b,m)})}function wl(){for(var b=arguments.length,g=Array(b),m=0;m<b;m++)g[m]=arguments[m];return function(I){return g.reduceRight(hi,I)}}function Kd(b){for(var g=arguments.length,m=Array(1<g?g-1:0),I=1;I<g;I++)m[I-1]=arguments[I];var W=wl.apply(void 0,m);return function(ia,sa){switch(ia){case 1:return di(b,W(sa));case 2:b(2);
break;default:throw Error("unrecognized action "+ia);}}}function Ef(b,g){return b===g}function ze(b){void 0===b&&(b=Ef);var g;return function(m){return function(I){b(g,I)||(g=I,m(I))}}}function Ae(b){return function(g){return function(m){b(m)&&g(m)}}}function Gf(b){return function(g){return kh(g,b)}}function Kg(b){return function(g){return function(){return g(b)}}}function ii(b,g){return function(m){return function(I){return m(g=b(g,I))}}}function sh(b){return function(g){return function(m){0<b?b--:
g(m)}}}function gk(b){var g,m;return function(I){return function(W){g=W;m||=setTimeout(function(){m=void 0;I(g)},b)}}}function He(b){var g,m;return function(I){return function(W){g=W;m&&clearTimeout(m);m=setTimeout(function(){I(g)},b)}}}function ue(){for(var b=arguments.length,g=Array(b),m=0;m<b;m++)g[m]=arguments[m];var I=Array(g.length),W=0,ia=null,sa=Math.pow(2,g.length)-1;g.forEach(function(La,Va){var $a=Math.pow(2,Va);di(La,function(lb){var ub=W;W|=$a;I[Va]=lb;ub!==sa&&W===sa&&ia&&(ia(),ia=null)})});
return function(La){return function(Va){var $a=function(){return La([Va].concat(I))};W===sa?$a():ia=$a}}}function ri(){for(var b=arguments.length,g=Array(b),m=0;m<b;m++)g[m]=arguments[m];return function(I,W){switch(I){case 1:return Bm.apply(void 0,g.map(function(ia){return ia(1,W)}));case 2:break;default:throw Error("unrecognized action "+I);}}}function de(b,g){void 0===g&&(g=Ef);return Kd(b,ze(g))}function xi(){for(var b=Jf(),g=arguments.length,m=Array(g),I=0;I<g;I++)m[I]=arguments[I];var W=Array(m.length),
ia=0,sa=Math.pow(2,m.length)-1;m.forEach(function(La,Va){var $a=Math.pow(2,Va);di(La,function(lb){W[Va]=lb;ia|=$a;ia===sa&&b(0,W)})});return function(La,Va){switch(La){case 1:return ia===sa&&Va(W),b(1,Va);case 2:b(2);break;default:throw Error("unrecognized action "+La);}}}function th(b,g,m){void 0===g&&(g=[]);m=(void 0===m?{singleton:!0}:m).singleton;return{id:Symbol(),constructor:b,dependencies:g,singleton:m}}function xl(b){var g=new Map;return function W(I){var ia=I.id,sa=I.constructor,La=I.dependencies;
if((I=I.singleton)&&g.has(ia))return g.get(ia);sa=sa(La.map(function(Va){return W(Va)}));I&&g.set(ia,sa);return sa}(b)}function ti(b,g){if(null==b)return{};var m={},I=Object.keys(b),W;for(W=0;W<I.length;W++){var ia=I[W];0<=g.indexOf(ia)||(m[ia]=b[ia])}return m}function xh(b,g){if(b){if("string"===typeof b)return Ff(b,g);var m=Object.prototype.toString.call(b).slice(8,-1);"Object"===m&&b.constructor&&(m=b.constructor.name);if("Map"===m||"Set"===m)return Array.from(b);if("Arguments"===m||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(m))return Ff(b,
g)}}function Ff(b,g){if(null==g||g>b.length)g=b.length;for(var m=0,I=Array(g);m<g;m++)I[m]=b[m];return I}function Yg(b,g){var m="undefined"!==typeof Symbol&&b[Symbol.iterator]||b["@@iterator"];if(m)return(m=m.call(b)).next.bind(m);if(Array.isArray(b)||(m=xh(b))||g&&b&&"number"===typeof b.length){m&&(b=m);var I=0;return function(){return I>=b.length?{done:!0}:{done:!1,value:b[I++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
}function Ul(b,g){for(var m={},I={},W=0,ia=b.length;W<ia;)I[b[W]]=1,W+=1;for(var sa in g)I.hasOwnProperty(sa)||(m[sa]=g[sa]);return m}function yl(b,g,m){function I(ub,Rb){ub.propsReady&&(0,ub.propsReady)(0,!1);for(var ec=Yg(sa),Vb;!(Vb=ec()).done;)Vb=Vb.value,(0,ub[g.required[Vb]])(0,Rb[Vb]);for(ec=Yg(La);!(Vb=ec()).done;)if(Vb=Vb.value,Vb in Rb)(0,ub[g.optional[Vb]])(0,Rb[Vb]);ub.propsReady&&(0,ub.propsReady)(0,!0)}function W(ub){return Va.reduce(function(Rb,ec){Rb[ec]=function(Vb){(0,ub[g.methods[ec]])(0,
Vb)};return Rb},{})}function ia(ub){return $a.reduce(function(Rb,ec){Rb[ec]=Zl(ub[g.events[ec]]);return Rb},{})}var sa=Object.keys(g.required||{}),La=Object.keys(g.optional||{}),Va=Object.keys(g.methods||{}),$a=Object.keys(g.events||{}),lb=(0,xn.createContext)({});return{Component:(0,xn.forwardRef)(function(ub,Rb){var ec=ub.children,Vb=ti(ub,FG),rc=(0,xn.useState)(function(){return Mj(xl(b),function(Wb){return I(Wb,Vb)})})[0],mc=(0,xn.useState)(si(ia,rc))[0];iu(function(){for(var Wb=Yg($a),tc;!(tc=
Wb()).done;)if(tc=tc.value,tc in Vb)(0,mc[tc])(1,Vb[tc]);return function(){Object.values(mc).map($l)}},[Vb,mc,rc]);iu(function(){I(rc,Vb)});(0,xn.useImperativeHandle)(Rb,Yl(W(rc)));return(0,xn.createElement)(lb.Provider,{value:rc},m?(0,xn.createElement)(m,Ul([].concat(sa,La,$a),Vb),ec):ec)}),usePublisher:function(ub){return(0,xn.useCallback)(Nj(Lm,(0,xn.useContext)(lb)[ub]),[ub])},useEmitterValue:function(ub){var Rb=(0,xn.useContext)(lb)[ub];ub=(0,xn.useState)(si(Vk,Rb));var ec=ub[0],Vb=ub[1];iu(function(){return di(Rb,
function(rc){rc!==ec&&Vb(Yl(rc))})},[Rb,ec]);return ec},useEmitter:function(ub,Rb){var ec=(0,xn.useContext)(lb)[ub];iu(function(){return ec(1,Rb)},[Rb,ec])}}}function Ve(){return Ve=Object.assign||function(b){for(var g=1;g<arguments.length;g++){var m=arguments[g],I;for(I in m)Object.prototype.hasOwnProperty.call(m,I)&&(b[I]=m[I])}return b},Ve.apply(this,arguments)}function Ml(b,g){if(null==b)return{};var m,I,W={},ia=Object.keys(b);for(I=0;I<ia.length;I++)0<=g.indexOf(m=ia[I])||(W[m]=b[m]);return W}
function cl(b,g){(null==g||g>b.length)&&(g=b.length);for(var m=0,I=Array(g);m<g;m++)I[m]=b[m];return I}function Bf(b,g){var m="undefined"!=typeof Symbol&&b[Symbol.iterator]||b["@@iterator"];if(m)return(m=m.call(b)).next.bind(m);if(Array.isArray(b)||(m=function(W,ia){if(W){if("string"==typeof W)return cl(W,ia);var sa=Object.prototype.toString.call(W).slice(8,-1);return"Object"===sa&&W.constructor&&(sa=W.constructor.name),"Map"===sa||"Set"===sa?Array.from(W):"Arguments"===sa||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(sa)?
cl(W,ia):void 0}}(b))||g&&b&&"number"==typeof b.length){m&&(b=m);var I=0;return function(){return I>=b.length?{done:!0}:{done:!1,value:b[I++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}function dl(b,g){void 0===g&&(g=!0);var m=(0,bi.useRef)(null),I=function(ia){};if("undefined"!=typeof ResizeObserver){var W=new ResizeObserver(function(ia){ia=ia[0].target;null!==ia.offsetParent&&b(ia)});
I=function(ia){ia&&g?(W.observe(ia),m.current=ia):(m.current&&W.unobserve(m.current),m.current=null)}}return{ref:m,callbackRef:I}}function ch(b,g){return void 0===g&&(g=!0),dl(b,g).callbackRef}function ji(b,g,m,I,W,ia,sa){return dl(function(La){for(var Va=function(ub,Rb,ec,Vb){ec=ub.length;if(0===ec)return null;for(var rc=[],mc=0;mc<ec;mc++){var Wb=ub.item(mc);if(Wb&&void 0!==Wb.dataset.index){var tc=parseInt(Wb.dataset.index),Hc=parseFloat(Wb.dataset.knownSize),Qc=Rb(Wb,"offsetHeight");if(0===Qc&&
Vb("Zero-sized element, this should not happen",{child:Wb},nm.ERROR),Qc!==Hc)Wb=rc[rc.length-1],0===rc.length||Wb.size!==Qc||Wb.endIndex!==tc-1?rc.push({startIndex:tc,endIndex:tc,size:Qc}):rc[rc.length-1].endIndex++}}return rc}(La.children,g,0,W),$a=La.parentElement;!$a.dataset.virtuosoScroller;)$a=$a.parentElement;var lb="window"===$a.firstElementChild.dataset.viewportType;I({scrollTop:Math.max(sa?sa.scrollTop:lb?window.pageYOffset||document.documentElement.scrollTop:$a.scrollTop,0),scrollHeight:sa?
sa.scrollHeight:lb?document.documentElement.scrollHeight:$a.scrollHeight,viewportHeight:sa?sa.offsetHeight:lb?window.innerHeight:$a.offsetHeight});null==ia||ia(function(ub,Rb,ec){return"normal"===Rb||null!=Rb&&Rb.endsWith("px")||ec("row-gap was not resolved to pixel value correctly",Rb,nm.WARN),"normal"===Rb?0:parseInt(null!=Rb?Rb:"0",10)}(0,getComputedStyle(La).rowGap,W));null!==Va&&b(Va)},m)}function Qk(b,g){return Math.round(b.getBoundingClientRect()[g])}function zl(b,g,m,I,W){void 0===I&&(I=ag);
var ia=(0,bi.useRef)(null),sa=(0,bi.useRef)(null),La=(0,bi.useRef)(null),Va=(0,bi.useRef)(!1),$a=(0,bi.useCallback)(function(lb){lb=lb.target;var ub=lb===window||lb===document,Rb=ub?window.pageYOffset||document.documentElement.scrollTop:lb.scrollTop,ec=ub?document.documentElement.scrollHeight:lb.scrollHeight,Vb=ub?window.innerHeight:lb.offsetHeight;lb=function(){b({scrollTop:Math.max(Rb,0),scrollHeight:ec,viewportHeight:Vb})};Va.current?(0,GG.flushSync)(lb):lb();Va.current=!1;null!==sa.current&&(Rb===
sa.current||0>=Rb||Rb===ec-Vb)&&(sa.current=null,g(!0),La.current&&(clearTimeout(La.current),La.current=null))},[b,g]);return(0,bi.useEffect)(function(){var lb=W||ia.current;return I(W||ia.current),$a({target:lb}),lb.addEventListener("scroll",$a,{passive:!0}),function(){I(null);lb.removeEventListener("scroll",$a)}},[ia,$a,m,I,W]),{scrollerRef:ia,scrollByCallback:function(lb){Va.current=!0;ia.current.scrollBy(lb)},scrollToCallback:function(lb){var ub=ia.current;if(ub&&!("offsetHeight"in ub&&0===ub.offsetHeight)){var Rb,
ec,Vb,rc="smooth"===lb.behavior;if(ub===window?(ec=Math.max(Qk(document.documentElement,"height"),document.documentElement.scrollHeight),Rb=window.innerHeight,Vb=document.documentElement.scrollTop):(ec=ub.scrollHeight,Rb=Qk(ub,"height"),Vb=ub.scrollTop),lb.top=Math.ceil(Math.max(Math.min(ec-Rb,lb.top),0)),1.01>Math.abs(Rb-ec)||lb.top===Vb)return b({scrollTop:Vb,scrollHeight:ec,viewportHeight:Rb}),void(rc&&g(!0));rc?(sa.current=lb.top,La.current&&clearTimeout(La.current),La.current=setTimeout(function(){La.current=
null;sa.current=null;g(!0)},1E3)):sa.current=null;ub.scrollTo(lb)}}}}function el(b,g,m,I,W){return void 0===I&&(I=Hi),void 0===W&&(W=Hi),{k:b,v:g,lvl:m,l:I,r:W}}function hl(b,g){if(b===Hi)return Hi;var m=b.k,I=b.l,W=b.r;if(g===m){if(I===Hi)return W;if(W===Hi)return I;g=Xh(I);return Mm(Ah(b,{k:g[0],v:g[1],l:Nm(I)}))}return Mm(Ah(b,g<m?{l:hl(I,g)}:{r:hl(W,g)}))}function Wj(b,g,m){return(void 0===m&&(m="k"),b===Hi)?[-Infinity,void 0]:b[m]===g?[b.k,b.v]:b[m]<g?(g=Wj(b.r,g,m),-Infinity===g[0]?[b.k,b.v]:
g):Wj(b.l,g,m)}function ui(b,g,m){return b===Hi?el(g,m,1):g===b.k?Ah(b,{k:g,v:m}):dg(Ji(Ah(b,g<b.k?{l:ui(b.l,g,m)}:{r:ui(b.r,g,m)})))}function rn(b,g,m){if(b===Hi)return[];var I=b.k,W=b.v,ia=b.r,sa=[];return I>g&&(sa=sa.concat(rn(b.l,g,m))),I>=g&&I<=m&&sa.push({k:I,v:W}),I<=m&&(sa=sa.concat(rn(ia,g,m))),sa}function Wk(b){return b===Hi?[]:[].concat(Wk(b.l),[{k:b.k,v:b.v}],Wk(b.r))}function Xh(b){return b.r===Hi?[b.k,b.v]:Xh(b.r)}function Nm(b){return b.r===Hi?b.l:Mm(Ah(b,{r:Nm(b.r)}))}function Ah(b,
g){return el(void 0!==g.k?g.k:b.k,void 0!==g.v?g.v:b.v,void 0!==g.lvl?g.lvl:b.lvl,void 0!==g.l?g.l:b.l,void 0!==g.r?g.r:b.r)}function Fi(b){return b===Hi||b.lvl>b.r.lvl}function Mm(b){var g=b.l,m=b.r,I=b.lvl;if(m.lvl>=I-1&&g.lvl>=I-1)return b;if(I>m.lvl+1){if(Fi(g))return Ji(Ah(b,{lvl:I-1}));if(g===Hi||g.r===Hi)throw Error("Unexpected empty nodes");return Ah(g.r,{l:Ah(g,{r:g.r.l}),r:Ah(b,{l:g.r.r,lvl:I-1}),lvl:I})}if(Fi(b))return dg(Ah(b,{lvl:I-1}));if(m===Hi||m.l===Hi)throw Error("Unexpected empty nodes");
g=m.l;var W=Fi(g)?m.lvl-1:m.lvl;return Ah(g,{l:Ah(b,{r:g.l,lvl:I-1}),r:dg(Ah(m,{l:g.r,lvl:W})),lvl:g.lvl+1})}function vm(b,g,m){return b===Hi?[]:Aj(rn(b,Wj(b,g)[0],m),function(I){return{index:I.k,value:I.v}})}function Aj(b,g){var m=b.length;if(0===m)return[];var I=g(b[0]),W=I.index;I=I.value;for(var ia=[],sa=1;sa<m;sa++){var La=g(b[sa]),Va=La.index;La=La.value;ia.push({start:W,end:Va-1,value:I});W=Va;I=La}return ia.push({start:W,end:Infinity,value:I}),ia}function dg(b){var g=b.r,m=b.lvl;return g===
Hi||g.r===Hi||g.lvl!==m||g.r.lvl!==m?b:Ah(g,{l:Ah(b,{r:g.l}),lvl:m+1})}function Ji(b){var g=b.l;return g===Hi||g.lvl!==b.lvl?b:Ah(g,{r:Ah(b,{l:g.r})})}function wm(b,g,m,I){void 0===I&&(I=0);for(var W=b.length-1;I<=W;){var ia=Math.floor((I+W)/2),sa=m(b[ia],g);if(0===sa)return ia;if(-1===sa){if(2>W-I)return ia-1;W=ia-1}else{if(W===I)return ia;I=ia+1}}throw Error("Failed binary finding record in array - "+b.join(",")+", searched for "+g);}function Cm(b){var g=b.size,m=b.startIndex,I=b.endIndex;return function(W){return W.start===
m&&(W.end===I||Infinity===W.end)&&W.value===g}}function y(b,g){b=b.index;return g===b?0:g<b?-1:1}function U(b,g){b=b.offset;return g===b?0:g<b?-1:1}function xa(b){return{index:b.index,value:b}}function ua(b,g,m,I){var W=0,ia=0,sa=0,La;0!==g?(sa=b[La=wm(b,g-1,y)].offset,ia=Wj(m,g-1),W=ia[0],ia=ia[1],b.length&&b[La].size===Wj(m,g)[1]&&--La,b=b.slice(0,La+1)):b=[];for(g=Bf(vm(m,g,Infinity));!(m=g()).done;)La=m.value,m=La.start,La=La.value,W=m-W,sa=W*ia+sa+W*I,b.push({offset:sa,size:La,index:m}),W=m,
ia=La;return{offsetTree:b,lastIndex:W,lastOffset:sa,lastSize:ia}}function Fa(b,g){var m=g[0],I=g[1],W=g[3];0<m.length&&(0,g[2])("received item sizes",m,nm.DEBUG);var ia=b.sizeTree;g=ia;var sa=0;if(0<I.length&&ia===Hi&&2===m.length){var La=m[0].size,Va=m[1].size;g=I.reduce(function(lb,ub){return ui(ui(lb,ub,La),ub+1,Va)},g)}else m=function(lb,ub){var Rb,ec=lb===Hi?0:Infinity;for(ub=Bf(ub);!(Rb=ub()).done;){var Vb=Rb.value;Rb=Vb.size;var rc=Vb.startIndex,mc=Vb.endIndex;if(ec=Math.min(ec,rc),lb===Hi)lb=
ui(lb,0,Rb);else{var Wb=vm(lb,rc-1,mc+1);if(!Wb.some(Cm(Vb))){var tc,Hc=Vb=!1;for(Wb=Bf(Wb);!(tc=Wb()).done;){var Qc=tc.value;tc=Qc.start;var Uc=Qc.end;Qc=Qc.value;Vb?(mc>=tc||Rb===Qc)&&(lb=hl(lb,tc)):(Hc=Qc!==Rb,Vb=!0);Uc>mc&&mc>=tc&&Qc!==Rb&&(lb=ui(lb,mc+1,Qc))}Hc&&(lb=ui(lb,rc,Rb))}}}return[lb,ec]}(g,m),g=m[0],sa=m[1];if(g===ia)return b;b=ua(b.offsetTree,sa,g,W);var $a=b.offsetTree;return{sizeTree:g,offsetTree:$a,lastIndex:b.lastIndex,lastOffset:b.lastOffset,lastSize:b.lastSize,groupOffsetTree:I.reduce(function(lb,
ub){return ui(lb,ub,ab(ub,$a,W))},Hi),groupIndices:I}}function ab(b,g,m){if(0===g.length)return 0;g=g[wm(g,b,y)];b-=g.index;b=g.size*b+(b-1)*m+g.offset;return 0<b?b+m:b}function qb(b,g,m){if(void 0!==b.groupIndex)return g.groupIndices[b.groupIndex]+1;b=tb("LAST"===b.index?m:b.index,g);return Math.max(0,b,Math.min(m,b))}function tb(b,g){if(g.groupOffsetTree===Hi)return b;for(var m=0;g.groupIndices[m]<=b+m;)m++;return b+m}function ac(b){b="number"==typeof b?{index:b}:b;return b.align||(b.align="start"),
b.behavior&&KG||(b.behavior="auto"),b.offset||(b.offset=0),b}function Ac(b){return!!b&&("smooth"===b?"smooth":"auto")}function Cc(b){return b.reduce(function(g,m){return g.groupIndices.push(g.totalCount),g.totalCount+=m+1,g},{totalCount:0,groupIndices:[]})}function Id(b,g){return!(!b||b[0]!==g[0]||b[1]!==g[1])}function Pd(b,g){return!(!b||b.startIndex!==g.startIndex||b.endIndex!==g.endIndex)}function rd(b,g,m){return"number"==typeof b?"up"===m&&"top"===g||"down"===m&&"bottom"===g?b:0:"up"===m?"top"===
g?b.main:b.reverse:"bottom"===g?b.main:b.reverse}function Ce(b,g,m){if(0===b.length)return[];if(g.groupOffsetTree===Hi)return b.map(function(Va){return Ve({},Va,{index:Va.index+m,originalIndex:Va.index})});var I,W=[],ia=vm(g.groupOffsetTree,b[0].index,b[b.length-1].index),sa=void 0,La=0;for(b=Bf(b);!(I=b()).done;)I=I.value,(!sa||sa.end<I.index)&&(sa=ia.shift(),La=g.groupIndices.indexOf(sa.start)),W.push(Ve({},I.index===sa.start?{type:"group",index:La}:{index:I.index-(La+1)+m,groupIndex:La},{size:I.size,
offset:I.offset,originalIndex:I.index,data:I.data}));return W}function yf(b,g,m,I,W,ia){var sa=0,La=0;0<b.length&&(sa=b[0].offset,La=b[b.length-1],La=La.offset+La.size);var Va=m-W.lastIndex,$a=sa;I=W.lastOffset+Va*W.lastSize+(Va-1)*I-La;return{items:Ce(b,W,ia),topItems:Ce(g,W,ia),topListHeight:g.reduce(function(lb,ub){return ub.size+lb},0),offsetTop:sa,offsetBottom:I,top:$a,bottom:La,totalCount:m,firstItemIndex:ia}}function Fg(b){var g,m=!1;return function(){return m||(m=!0,g=b()),g}}function kj(b,
g){var m=(0,bi.useRef)(null),I=(0,bi.useCallback)(function(Va){if(null!==Va&&Va.offsetParent){var $a=Va.getBoundingClientRect();Va=$a.width;if(g){var lb=g.getBoundingClientRect();$a=$a.top-lb.top;lb=lb.height-Math.max(0,$a);$a+=g.scrollTop}else lb=window.innerHeight-Math.max(0,$a.top),$a=$a.top+window.pageYOffset;m.current={offsetTop:$a,visibleHeight:lb,visibleWidth:Va};b(m.current)}},[b,g]),W=dl(I),ia=W.callbackRef,sa=W.ref,La=(0,bi.useCallback)(function(){I(sa.current)},[I,sa]);return(0,bi.useEffect)(function(){if(g){g.addEventListener("scroll",
La);var Va=new ResizeObserver(La);return Va.observe(g),function(){g.removeEventListener("scroll",La);Va.unobserve(g)}}return window.addEventListener("scroll",La),window.addEventListener("resize",La),function(){window.removeEventListener("scroll",La);window.removeEventListener("resize",La)}},[La,g]),ia}function kg(b){return b}function Vg(b,g){var m=Jf();return di(m,function(){return console.warn("react-virtuoso: You are using a deprecated property. "+g,"color: red;","color: inherit;","color: blue;")}),
Yf(m,b),m}function Ig(b,g){if("string"!=typeof b)return{context:g}}function ki(b){var g=b.usePublisher,m=b.useEmitter,I=b.useEmitterValue;return hh.memo(function(W){var ia=W.style,sa=W.children;W=Ml(W,XG);var La=g("scrollContainerState"),Va=I("ScrollerComponent"),$a=g("smoothScrollTargetReached"),lb=I("scrollerRef"),ub=I("context");La=zl(La,$a,Va,lb);$a=La.scrollerRef;lb=La.scrollByCallback;return m("scrollTo",La.scrollToCallback),m("scrollBy",lb),(0,bi.createElement)(Va,Ve({ref:$a,style:Ve({},dH,
ia),"data-test-id":"virtuoso-scroller","data-virtuoso-scroller":!0,tabIndex:0},W,Ig(Va,ub)),sa)})}function Ph(b){var g=b.usePublisher,m=b.useEmitter,I=b.useEmitterValue;return hh.memo(function(W){var ia=W.style,sa=W.children;W=Ml(W,YG);var La=g("windowScrollContainerState"),Va=I("ScrollerComponent"),$a=g("smoothScrollTargetReached"),lb=I("totalListHeight"),ub=I("deviation"),Rb=I("customScrollParent"),ec=I("context");$a=zl(La,$a,Va,ag,Rb);var Vb=$a.scrollerRef;La=$a.scrollByCallback;$a=$a.scrollToCallback;
return HG(function(){return Vb.current=Rb||window,function(){Vb.current=null}},[Vb,Rb]),m("windowScrollTo",$a),m("scrollBy",La),(0,bi.createElement)(Va,Ve({style:Ve({position:"relative"},ia,0!==lb?{height:lb+ub}:{}),"data-virtuoso-scroller":!0},W,Ig(Va,ec)),sa)})}function bg(b,g,m){return Array.from({length:g-b+1}).map(function(I,W){return{index:W+b,data:null==m?void 0:m[W+b]}})}function Nf(b,g){return b&&b.column===g.column&&b.row===g.row}function Bh(b,g,m,I){var W=m.height;return void 0===W||0===
I.length?{top:0,bottom:0}:{top:dh(b,g,m,I[0].index),bottom:dh(b,g,m,I[I.length-1].index)+W}}function dh(b,g,m,I){var W=g.column;b=Mr(1,lu((b.width+W)/(m.width+W)));I=lu(I/b);m=I*m.height+Mr(0,I-1)*g.row;return 0<m?m+g.row:m}function lj(b,g,m){return"normal"===g||null!=g&&g.endsWith("px")||m(b+" was not resolved to pixel value correctly",g,nm.WARN),"normal"===g?0:parseInt(null!=g?g:"0",10)}function Ch(b,g){void 0!==g.strokeWidth&&(g.strokeWidth=Math.max(g.strokeWidth,1));void 0!==g.opacity&&(g.opacity=
Math.min(1,Math.max(g.opacity,0)));return g}function zj({strokeWidth:b,size:g,mode:m}){return"svg"===m?(0,ob.jsx)("rect",{className:"tl-binding-indicator",x:b,y:b,rx:2,ry:2,width:Math.max(0,g[0]-2*b),height:Math.max(0,g[1]-2*b),strokeWidth:4*b}):(0,ob.jsx)("div",{className:"tl-binding-indicator",style:{position:"absolute",left:0,top:0,right:0,bottom:0,boxShadow:"0 0 0 4px var(--tl-binding)",borderRadius:4}})}function gl(){const b=sg();return"panning"===b.inputs.state||"pinching"===b.inputs.state}
function Ek({left:b,middle:g,right:m,stroke:I,strokeWidth:W}){return(0,ob.jsxs)("g",{children:[(0,ob.jsx)("path",{className:"tl-stroke-hitarea",d:`M ${b} L ${g} ${m}`}),(0,ob.jsx)("path",{d:`M ${b} L ${g} ${m}`,fill:"none",stroke:I,strokeWidth:W,strokeLinecap:"round",strokeLinejoin:"round",pointerEvents:"none"})]})}function hm(b,g,m){g=G(b,g,b,m).points;if(!g)return console.warn("Could not find an intersection for the arrow head."),{left:b,right:b};g=(m=g[0])?Yd.rotWith(m,b,Math.PI/6):b;b=m?Yd.rotWith(m,
b,-Math.PI/6):b;return{left:g,right:b}}function Mo(b,g,m){const {left:I,right:W}=hm(b,g,m);return`M ${I} L ${b} ${W}`}function qn(b,g,m,I,W){b=b.strokeWidth;var ia=Yd.dist(g,m);b=Math.min(ia/3,16*b);ia=[];ia.push(`M ${g} L ${m}`);I&&ia.push(Mo(g,m,b));W&&ia.push(Mo(m,g,b));return ia.join(" ")}function jh({id:b,bounds:g,labelSize:m,offset:I,scale:W=1}){return(0,ob.jsx)("defs",{children:(0,ob.jsxs)("mask",{id:b+"_clip",children:[(0,ob.jsx)("rect",{x:-100,y:-100,width:g.width+200,height:g.height+200,
fill:"white"}),(0,ob.jsx)("rect",{x:g.width/2-m[0]/2*W+((null==I?void 0:I[0])||0),y:g.height/2-m[1]/2*W+((null==I?void 0:I[1])||0),width:m[0]*W,height:m[1]*W,rx:4*W,ry:4*W,fill:"black"})]})})}function gn(b,g,m,I=W=>W){return b*I(.5-g*(.5-m))}function il(b){return[-b[0],-b[1]]}function Al(b,g){return[b[0]+g[0],b[1]+g[1]]}function kk(b,g){return[b[0]-g[0],b[1]-g[1]]}function Bl(b,g){return[b[0]*g,b[1]*g]}function an(b){return[b[1],-b[0]]}function qm(b,g){return b[0]===g[0]&&b[1]===g[1]}function Om(b){return b[0]*
b[0]+b[1]*b[1]}function Kk(b){var g=Math.hypot(b[0],b[1]);return[b[0]/g,b[1]/g]}function jl(b,g){return Math.hypot(b[1]-g[1],b[0]-g[0])}function am(b,g,m){let I=Math.sin(m);m=Math.cos(m);let W=b[0]-g[0];b=b[1]-g[1];return[W*m-b*I+g[0],W*I+b*m+g[1]]}function fn(b,g,m){return Al(b,Bl(kk(g,b),m))}function Rm(b,g,m){return Al(b,Bl(g,m))}function Zo(b,g={}){let {size:m=16,smoothing:I=.5,thinning:W=.5,simulatePressure:ia=!0,easing:sa=jd=>jd,start:La={},end:Va={},last:$a=!1}=g,{cap:lb=!0,easing:ub=jd=>jd*
(2-jd)}=La,{cap:Rb=!0,easing:ec=jd=>--jd*jd*jd+1}=Va;if(0===b.length||0>=m)return[];var Vb=b[b.length-1].runningLength;let rc=!1===La.taper?0:!0===La.taper?Math.max(m,Vb):La.taper,mc=!1===Va.taper?0:!0===Va.taper?Math.max(m,Vb):Va.taper;var Wb=Math.pow(m*I,2);g=[];let tc=[];var Hc=b.slice(0,10).reduce((jd,ld)=>{var Gd=ld.pressure;ia&&(ld=Qr(1,ld.distance/m),Gd=Qr(1,1-ld),Gd=Qr(1,jd+.275*(Gd-jd)*ld));return(jd+Gd)/2},b[0].pressure),Qc=gn(m,W,b[b.length-1].pressure,sa),Uc;let Vd=b[0].vector;var ae=
b[0].point;let De=ae;var Oe=ae;let tf=De;var pf=!1;for(var df=0;df<b.length;df++){var {pressure:Ie}=b[df];let {point:jd,vector:ld,distance:Gd,runningLength:we}=b[df];if(df<b.length-1&&3>Vb-we)continue;W?(ia&&(Qc=Qr(1,Gd/m),Ie=Qr(1,1-Qc),Ie=Qr(1,Hc+.275*(Ie-Hc)*Qc)),Qc=gn(m,W,Ie,sa)):Qc=m/2;void 0===Uc&&(Uc=Qc);var Bd=we<rc?ub(we/rc):1,fd=Vb-we<mc?ec((Vb-we)/mc):1;Qc=Math.max(.01,Qc*Math.min(Bd,fd));fd=(df<b.length-1?b[df+1]:b[df]).vector;let Fe=df<b.length-1?ld[0]*fd[0]+ld[1]*fd[1]:1;Bd=null!==Fe&&
0>Fe;if(0>ld[0]*Vd[0]+ld[1]*Vd[1]&&!pf||Bd){ae=Bl(an(Vd),Qc);for(let qf=1/13,hf=0;1>=hf;hf+=qf)Oe=am(kk(jd,ae),jd,Ys*hf),g.push(Oe),tf=am(Al(jd,ae),jd,Ys*-hf),tc.push(tf);ae=Oe;De=tf;Bd&&(pf=!0)}else(pf=!1,df===b.length-1)?(Ie=Bl(an(ld),Qc),g.push(kk(jd,Ie)),tc.push(Al(jd,Ie))):(Hc=Bl(an(fn(fd,ld,Fe)),Qc),Oe=kk(jd,Hc),(1>=df||Om(kk(ae,Oe))>Wb)&&(g.push(Oe),ae=Oe),tf=Al(jd,Hc),(1>=df||Om(kk(De,tf))>Wb)&&(tc.push(tf),De=tf),Hc=Ie,Vd=ld)}Vb=b[0].point.slice(0,2);Wb=1<b.length?b[b.length-1].point.slice(0,
2):Al(b[0].point,[1,1]);Oe=[];pf=[];if(1===b.length){if(!rc&&!mc||$a){b=Rm(Vb,Kk(an(kk(Vb,Wb))),-(Uc||Qc));g=[];for(let jd=1/13,ld=jd;1>=ld;ld+=jd)g.push(am(b,Vb,2*Ys*ld));return g}}else{if(!(rc||mc&&1===b.length))if(lb)for(let jd=1/13,ld=jd;1>=ld;ld+=jd)Uc=am(tc[0],Vb,Ys*ld),Oe.push(Uc);else df=kk(g[0],tc[0]),Uc=Bl(df,.5),df=Bl(df,.51),Oe.push(kk(Vb,Uc),kk(Vb,df),Al(Vb,df),Al(Vb,Uc));Uc=an(il(b[b.length-1].vector));if(mc||rc&&1===b.length)pf.push(Wb);else if(Rb){b=Rm(Wb,Uc,Qc);for(let jd=1/29,ld=
jd;1>ld;ld+=jd)pf.push(am(b,Wb,3*Ys*ld))}else pf.push(Al(Wb,Bl(Uc,Qc)),Al(Wb,Bl(Uc,.99*Qc)),kk(Wb,Bl(Uc,.99*Qc)),kk(Wb,Bl(Uc,Qc)))}return g.concat(pf,tc.reverse(),Oe)}function ko(b,g={}){var m;let {streamline:I=.5,size:W=16,last:ia=!1}=g;if(0===b.length)return[];g=.15+.85*(1-I);b=Array.isArray(b[0])?b:b.map(({x:ub,y:Rb,pressure:ec=.5})=>[ub,Rb,ec]);if(2===b.length){var sa=b[1];b=b.slice(0,-1);for(var La=1;5>La;La++)b.push(fn(b[0],sa,La/4))}1===b.length&&(b=[...b,[...Al(b[0],[1,1]),...b[0].slice(2)]]);
sa=[{point:[b[0][0],b[0][1]],pressure:0<=b[0][2]?b[0][2]:.25,vector:[1,1],distance:0,runningLength:0}];La=!1;let Va=0,$a=sa[0],lb=b.length-1;for(let ub=1;ub<b.length;ub++){let Rb=ia&&ub===lb?b[ub].slice(0,2):fn($a.point,b[ub],g);if(qm($a.point,Rb))continue;let ec=jl(Rb,$a.point);if(Va+=ec,ub<lb&&!La){if(Va<W)continue;La=!0}$a={point:Rb,pressure:0<=b[ub][2]?b[ub][2]:.5,vector:Kk(kk($a.point,Rb)),distance:ec,runningLength:Va};sa.push($a)}return sa[0].vector=(null==(m=sa[1])?void 0:m.vector)||[0,0],
sa}function Jo(b,g=4/3){return(new xw(b)).exportAsSVG(g)}function Gl(b,g=4/3){return(new xw(b)).generatePreviewJsx(void 0,g)}function Oo({id:b,type:g,onRemove:m,showContent:I}){const W=sg(),{handlers:ia}=DG.default.useContext(nn);return(0,ob.jsxs)("div",{className:"tl-shape-links-panel-item color-level relative",children:[(0,ob.jsx)("div",{className:"whitespace-pre break-all overflow-hidden text-ellipsis inline-flex",children:(0,ob.jsx)(pA,{id:b,showReferenceContent:I})}),(0,ob.jsx)("div",{className:"flex-1"}),
ia.getBlockPageName(b)!==W.currentPage.name&&(0,ob.jsx)(dc,{tooltip:"Open Page",type:"button",onClick:()=>null==ia?void 0:ia.redirectToPage(b),children:(0,ob.jsx)(Ih,{name:"open-as-page"})}),(0,ob.jsx)(dc,{tooltip:"Open Page in Right Sidebar",type:"button",onClick:()=>null==ia?void 0:ia.sidebarAddBlock(b,"B"===g?"block":"page"),children:(0,ob.jsx)(Ih,{name:"move-to-sidebar-right"})}),m&&(0,ob.jsx)(dc,{className:"tl-shape-links-panel-item-remove-button",tooltip:"Remove link",type:"button",onClick:m,
children:(0,ob.jsx)(Ih,{name:"x",className:"!translate-y-0"})})]})}function so({options:b,value:g,onValueChange:m}){return(0,ob.jsx)(dB,{className:"tl-toggle-group-input",type:"single",value:g,onValueChange:m,children:b.map(I=>(0,ob.jsx)(fc,{content:I.tooltip,children:(0,ob.jsx)("div",{className:"inline-block",children:(0,ob.jsx)(eB,{className:"tl-toggle-group-input-button",value:I.value,disabled:I.value===g,children:(0,ob.jsx)(Ih,{name:I.icon})})})},I.value))})}function bn({options:b,value:g,onValueChange:m}){return(0,ob.jsx)(dB,
{className:"tl-toggle-group-input",type:"multiple",value:g,onValueChange:m,children:b.map(I=>(0,ob.jsx)(eB,{className:"tl-toggle-group-input-button",value:I.value,children:(0,ob.jsx)(Ih,{name:I.icon})},I.value))})}function cn(b){var {toggle:g=!0,pressed:m,onPressedChange:I,className:W,tooltip:ia}=b;b=Ya(b,["toggle","pressed","onPressedChange","className","tooltip"]);return(0,ob.jsx)(fc,{content:ia,children:(0,ob.jsx)("div",{className:"inline-block",children:(0,ob.jsx)(aI,Ga(re({},b),{"data-toggle":g,
className:"tl-toggle-input"+(W?" "+W:""),pressed:m,onPressedChange:I}))})})}function wk(b,g){return b.filter(m=>{var I;return null==(I=yw[m.props.type])?void 0:I.includes(g)})}function Dn(b){return g=>"mouse"!==g.pointerType?b(g):void 0}function jo(b){b=b.match(/\.[0-9a-z]+$/i);if(!b)return"unknown";b=b[0].toLowerCase();return FI.includes(b)?"image":GI.includes(b)?"video":"unknown"}function En(...b){return(...g)=>td(this,null,function*(){for(const m of b){const I=yield m(...g);if(I&&0<I.length)return I}return null})}
function Xn(b,g){return td(this,null,function*(){return b.types.includes(g)?b instanceof DataTransfer?b.getData(g):yield(yield b.getType(g)).text():null})}function Rl(){const {handlers:b}=kB.useContext(nn);return kB.useCallback((g,m)=>td(this,null,function*(){if(m.shiftKey&&1===g.selectedShapesArray.length){var I=yield navigator.clipboard.read();let W;0<I.length&&(I=(yield(yield I[0].getType("text/plain")).text()).trim())&&(/^\(\(.*\)\)$/.test(I)&&40===I.length?(I=I.slice(2,-2),Wh(I)&&(W=I)):/^\[\[.*\]\]$/.test(I)&&
(W=I.slice(2,-2)));if(W){g.selectedShapesArray[0].update({refs:[W]});g.persist();return}}HI(g,m,b)}),[])}function Pm(){const b=Rl();return EI.useCallback((g,m)=>td(this,[g,m],function*(I,{dataTransfer:W,point:ia}){b(I,{point:ia,shiftKey:!1,dataTransfer:W,fromDrop:!0})}),[])}function lo(){return II.default.useCallback(b=>td(this,null,function*(){setTimeout(()=>{b.selectTool("logseq-portal").selectedTool.transition("creating")},100)}),[])}var Ko=Object.create,Sm=Object.defineProperty,ol=Object.defineProperties,
po=Object.getOwnPropertyDescriptor,mo=Object.getOwnPropertyDescriptors,Fn=Object.getOwnPropertyNames,Dm=Object.getOwnPropertySymbols,Tn=Object.getPrototypeOf,rm=Object.prototype.hasOwnProperty,$o=Object.prototype.propertyIsEnumerable,Un=(b,g,m)=>g in b?Sm(b,g,{enumerable:!0,configurable:!0,writable:!0,value:m}):b[g]=m,re=(b,g)=>{for(var m in g||={})rm.call(g,m)&&Un(b,m,g[m]);if(Dm)for(m of Dm(g))$o.call(g,m)&&Un(b,m,g[m]);return b},Ga=(b,g)=>ol(b,mo(g)),Ya=(b,g)=>{var m={},I;for(I in b)rm.call(b,
I)&&0>g.indexOf(I)&&(m[I]=b[I]);if(null!=b&&Dm)for(I of Dm(b))0>g.indexOf(I)&&$o.call(b,I)&&(m[I]=b[I]);return m},Ka=(b,g)=>function(){return g||(0,b[Fn(b)[0]])((g={exports:{}}).exports,g),g.exports},hb=(b,g,m,I)=>{if(g&&"object"===typeof g||"function"===typeof g)for(let W of Fn(g))rm.call(b,W)||W===m||Sm(b,W,{get:()=>g[W],enumerable:!(I=po(g,W))||I.enumerable});return b},vb=(b,g,m)=>(m=null!=b?Ko(Tn(b)):{},hb(!g&&b&&b.__esModule?m:Sm(m,"default",{value:b,enumerable:!0}),b)),Lb=(b,g,m,I)=>{for(var W=
1<I?void 0:I?po(g,m):g,ia=b.length-1,sa;0<=ia;ia--)if(sa=b[ia])W=(I?sa(g,m,W):sa(W))||W;I&&W&&Sm(g,m,W);return W},Qa=(b,g,m)=>{Un(b,"symbol"!==typeof g?g+"":g,m);return m},td=(b,g,m)=>new Promise((I,W)=>{var ia=Va=>{try{La(m.next(Va))}catch($a){W($a)}},sa=Va=>{try{La(m.throw(Va))}catch($a){W($a)}},La=Va=>Va.done?I(Va.value):Promise.resolve(Va.value).then(ia,sa);La((m=m.apply(b,g)).next())}),he=Ka({["../../node_modules/mousetrap/mousetrap.js"](b,g){(function(m,I,W){function ia(mc,Wb,tc){mc.addEventListener?
mc.addEventListener(Wb,tc,!1):mc.attachEvent("on"+Wb,tc)}function sa(mc){if("keypress"==mc.type){var Wb=String.fromCharCode(mc.which);mc.shiftKey||(Wb=Wb.toLowerCase());return Wb}return ub[mc.which]?ub[mc.which]:Rb[mc.which]?Rb[mc.which]:String.fromCharCode(mc.which).toLowerCase()}function La(mc){return"shift"==mc||"ctrl"==mc||"alt"==mc||"meta"==mc}function Va(mc,Wb){var tc,Hc=[];"+"===mc?mc=["+"]:(mc=mc.replace(/\+{2}/g,"+plus"),mc=mc.split("+"));for(tc=0;tc<mc.length;++tc){var Qc=mc[tc];Vb[Qc]&&
(Qc=Vb[Qc]);Wb&&"keypress"!=Wb&&ec[Qc]&&(Qc=ec[Qc],Hc.push("shift"));La(Qc)&&Hc.push(Qc)}mc=Qc;if(!Wb){if(!rc){rc={};for(var Uc in ub)95<Uc&&112>Uc||ub.hasOwnProperty(Uc)&&(rc[ub[Uc]]=Uc)}Wb=rc[mc]?"keydown":"keypress"}"keypress"==Wb&&Hc.length&&(Wb="keydown");return{key:Qc,modifiers:Hc,action:Wb}}function $a(mc,Wb){return null===mc||mc===I?!1:mc===Wb?!0:$a(mc.parentNode,Wb)}function lb(mc){function Wb(Ie){Ie=Ie||{};var Bd=!1,fd;for(fd in De)Ie[fd]?Bd=!0:De[fd]=0;Bd||(df=!1)}function tc(Ie,Bd,fd,
jd,ld,Gd){var we,Fe=[],qf=fd.type;if(!ae._callbacks[Ie])return[];"keyup"==qf&&La(Ie)&&(Bd=[Ie]);for(we=0;we<ae._callbacks[Ie].length;++we){var hf=ae._callbacks[Ie][we];if((jd||!hf.seq||De[hf.seq]==hf.level)&&qf==hf.action){var gf;(gf="keypress"==qf&&!fd.metaKey&&!fd.ctrlKey)||(gf=hf.modifiers,gf=Bd.sort().join(",")===gf.sort().join(","));gf&&(gf=jd&&hf.seq==jd&&hf.level==Gd,(!jd&&hf.combo==ld||gf)&&ae._callbacks[Ie].splice(we,1),Fe.push(hf))}}return Fe}function Hc(Ie,Bd,fd,jd){ae.stopCallback(Bd,
Bd.target||Bd.srcElement,fd,jd)||!1!==Ie(Bd,fd)||(Bd.preventDefault?Bd.preventDefault():Bd.returnValue=!1,Bd.stopPropagation?Bd.stopPropagation():Bd.cancelBubble=!0)}function Qc(Ie){"number"!==typeof Ie.which&&(Ie.which=Ie.keyCode);var Bd=sa(Ie);if(Bd)if("keyup"==Ie.type&&tf===Bd)tf=!1;else{var fd=ae,jd=fd.handleKey,ld=[];Ie.shiftKey&&ld.push("shift");Ie.altKey&&ld.push("alt");Ie.ctrlKey&&ld.push("ctrl");Ie.metaKey&&ld.push("meta");jd.call(fd,Bd,ld,Ie)}}function Uc(Ie,Bd,fd,jd){function ld(qf){return function(){df=
qf;++De[Ie];clearTimeout(Oe);Oe=setTimeout(Wb,1E3)}}function Gd(qf){Hc(fd,qf,Ie);"keyup"!==jd&&(tf=sa(qf));setTimeout(Wb,10)}for(var we=De[Ie]=0;we<Bd.length;++we){var Fe=we+1===Bd.length?Gd:ld(jd||Va(Bd[we+1]).action);Vd(Bd[we],Fe,jd,Ie,we)}}function Vd(Ie,Bd,fd,jd,ld){ae._directMap[Ie+":"+fd]=Bd;Ie=Ie.replace(/\s+/g," ");var Gd=Ie.split(" ");1<Gd.length?Uc(Ie,Gd,Bd,fd):(fd=Va(Ie,fd),ae._callbacks[fd.key]=ae._callbacks[fd.key]||[],tc(fd.key,fd.modifiers,{type:fd.action},jd,Ie,ld),ae._callbacks[fd.key][jd?
"unshift":"push"]({callback:Bd,modifiers:fd.modifiers,action:fd.action,seq:jd,level:ld,combo:Ie}))}var ae=this;mc=mc||I;if(!(ae instanceof lb))return new lb(mc);ae.target=mc;ae._callbacks={};ae._directMap={};var De={},Oe,tf=!1,pf=!1,df=!1;ae._handleKey=function(Ie,Bd,fd){var jd=tc(Ie,Bd,fd),ld;Bd={};var Gd=0,we=!1;for(ld=0;ld<jd.length;++ld)jd[ld].seq&&(Gd=Math.max(Gd,jd[ld].level));for(ld=0;ld<jd.length;++ld)jd[ld].seq?jd[ld].level==Gd&&(we=!0,Bd[jd[ld].seq]=1,Hc(jd[ld].callback,fd,jd[ld].combo,
jd[ld].seq)):we||Hc(jd[ld].callback,fd,jd[ld].combo);jd="keypress"==fd.type&&pf;fd.type!=df||La(Ie)||jd||Wb(Bd);pf=we&&"keydown"==fd.type};ae._bindMultiple=function(Ie,Bd,fd){for(var jd=0;jd<Ie.length;++jd)Vd(Ie[jd],Bd,fd)};ia(mc,"keypress",Qc);ia(mc,"keydown",Qc);ia(mc,"keyup",Qc)}if(m){var ub={8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"ins",46:"del",91:"meta",
93:"meta",224:"meta"},Rb={106:"*",107:"+",109:"-",110:".",111:"/",186:";",187:"\x3d",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},ec={"~":"`","!":"1","@":"2","#":"3",$:"4","%":"5","^":"6","\x26":"7","*":"8","(":"9",")":"0",_:"-","+":"\x3d",":":";",'"':"'","\x3c":",","\x3e":".","?":"/","|":"\\"},Vb={option:"alt",command:"meta","return":"enter",escape:"esc",plus:"+",mod:/Mac|iPod|iPhone|iPad/.test(navigator.platform)?"meta":"ctrl"},rc;for(W=1;20>W;++W)ub[111+W]="f"+W;for(W=
0;9>=W;++W)ub[W+96]=W.toString();lb.prototype.bind=function(mc,Wb,tc){mc=mc instanceof Array?mc:[mc];this._bindMultiple.call(this,mc,Wb,tc);return this};lb.prototype.unbind=function(mc,Wb){return this.bind.call(this,mc,function(){},Wb)};lb.prototype.trigger=function(mc,Wb){if(this._directMap[mc+":"+Wb])this._directMap[mc+":"+Wb]({},mc);return this};lb.prototype.reset=function(){this._callbacks={};this._directMap={};return this};lb.prototype.stopCallback=function(mc,Wb){if(-1<(" "+Wb.className+" ").indexOf(" mousetrap ")||
$a(Wb,this.target))return!1;if("composedPath"in mc&&"function"===typeof mc.composedPath){var tc=mc.composedPath()[0];tc!==mc.target&&(Wb=tc)}return"INPUT"==Wb.tagName||"SELECT"==Wb.tagName||"TEXTAREA"==Wb.tagName||Wb.isContentEditable};lb.prototype.handleKey=function(){return this._handleKey.apply(this,arguments)};lb.addKeycodes=function(mc){for(var Wb in mc)mc.hasOwnProperty(Wb)&&(ub[Wb]=mc[Wb]);rc=null};lb.init=function(){var mc=lb(I),Wb;for(Wb in mc)"_"!==Wb.charAt(0)&&(lb[Wb]=function(tc){return function(){return mc[tc].apply(mc,
arguments)}}(Wb))};lb.init();m.Mousetrap=lb;"undefined"!==typeof g&&g.exports&&(g.exports=lb);"function"===typeof define&&define.amd&&define(function(){return lb})}})("undefined"!==typeof window?window:null,"undefined"!==typeof window?document:null)}}),Je=Ka({["../../node_modules/rbush/rbush.min.js"](b,g){!function(m,I){"object"==typeof b&&"undefined"!=typeof g?g.exports=I():"function"==typeof define&&define.amd?define(I):(m=m||self).RBush=I()}(b,function(){function m(Wb,tc,Hc,Qc,Uc){!function df(ae,
De,Oe,tf,pf){for(;tf>Oe;){if(600<tf-Oe){var Ie=tf-Oe+1,Bd=De-Oe+1,fd=Math.log(Ie),jd=.5*Math.exp(2*fd/3);fd=.5*Math.sqrt(fd*jd*(Ie-jd)/Ie)*(0>Bd-Ie/2?-1:1);df(ae,De,Math.max(Oe,Math.floor(De-Bd*jd/Ie+fd)),Math.min(tf,Math.floor(De+(Ie-Bd)*jd/Ie+fd)),pf)}Ie=ae[De];Bd=Oe;jd=tf;I(ae,Oe,De);for(0<pf(ae[tf],Ie)&&I(ae,Oe,tf);Bd<jd;){I(ae,Bd,jd);Bd++;for(jd--;0>pf(ae[Bd],Ie);)Bd++;for(;0<pf(ae[jd],Ie);)jd--}0===pf(ae[Oe],Ie)?I(ae,Oe,jd):I(ae,++jd,tf);jd<=De&&(Oe=jd+1);De<=jd&&(tf=jd-1)}}(Wb,tc,Hc||0,Qc||
Wb.length-1,Uc||W)}function I(Wb,tc,Hc){var Qc=Wb[tc];Wb[tc]=Wb[Hc];Wb[Hc]=Qc}function W(Wb,tc){return Wb<tc?-1:Wb>tc?1:0}function ia(Wb,tc){sa(Wb,0,Wb.children.length,tc,Wb)}function sa(Wb,tc,Hc,Qc,Uc){Uc||=Vb(null);Uc.minX=1/0;Uc.minY=1/0;Uc.maxX=-1/0;for(Uc.maxY=-1/0;tc<Hc;tc++){var Vd=Wb.children[tc];La(Uc,Wb.leaf?Qc(Vd):Vd)}return Uc}function La(Wb,tc){return Wb.minX=Math.min(Wb.minX,tc.minX),Wb.minY=Math.min(Wb.minY,tc.minY),Wb.maxX=Math.max(Wb.maxX,tc.maxX),Wb.maxY=Math.max(Wb.maxY,tc.maxY),
Wb}function Va(Wb,tc){return Wb.minX-tc.minX}function $a(Wb,tc){return Wb.minY-tc.minY}function lb(Wb){return(Wb.maxX-Wb.minX)*(Wb.maxY-Wb.minY)}function ub(Wb){return Wb.maxX-Wb.minX+(Wb.maxY-Wb.minY)}function Rb(Wb,tc){return Wb.minX<=tc.minX&&Wb.minY<=tc.minY&&tc.maxX<=Wb.maxX&&tc.maxY<=Wb.maxY}function ec(Wb,tc){return tc.minX<=Wb.maxX&&tc.minY<=Wb.maxY&&tc.maxX>=Wb.minX&&tc.maxY>=Wb.minY}function Vb(Wb){return{children:Wb,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function rc(Wb,
tc,Hc,Qc,Uc){for(var Vd=[tc,Hc];Vd.length;)if(!((Hc=Vd.pop())-(tc=Vd.pop())<=Qc)){var ae=tc+Math.ceil((Hc-tc)/Qc/2)*Qc;m(Wb,ae,tc,Hc,Uc);Vd.push(tc,ae,ae,Hc)}}var mc=function(Wb){void 0===Wb&&(Wb=9);this._maxEntries=Math.max(4,Wb);this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries));this.clear()};return mc.prototype.all=function(){return this._all(this.data,[])},mc.prototype.search=function(Wb){var tc=this.data,Hc=[];if(!ec(Wb,tc))return Hc;for(var Qc=this.toBBox,Uc=[];tc;){for(var Vd=0;Vd<
tc.children.length;Vd++){var ae=tc.children[Vd],De=tc.leaf?Qc(ae):ae;ec(Wb,De)&&(tc.leaf?Hc.push(ae):Rb(Wb,De)?this._all(ae,Hc):Uc.push(ae))}tc=Uc.pop()}return Hc},mc.prototype.collides=function(Wb){var tc=this.data;if(!ec(Wb,tc))return!1;for(var Hc=[];tc;){for(var Qc=0;Qc<tc.children.length;Qc++){var Uc=tc.children[Qc],Vd=tc.leaf?this.toBBox(Uc):Uc;if(ec(Wb,Vd)){if(tc.leaf||Rb(Wb,Vd))return!0;Hc.push(Uc)}}tc=Hc.pop()}return!1},mc.prototype.load=function(Wb){if(!Wb||!Wb.length)return this;if(Wb.length<
this._minEntries){for(var tc=0;tc<Wb.length;tc++)this.insert(Wb[tc]);return this}Wb=this._build(Wb.slice(),0,Wb.length-1,0);this.data.children.length?this.data.height===Wb.height?this._splitRoot(this.data,Wb):(this.data.height<Wb.height&&(tc=this.data,this.data=Wb,Wb=tc),this._insert(Wb,this.data.height-Wb.height-1,!0)):this.data=Wb;return this},mc.prototype.insert=function(Wb){return Wb&&this._insert(Wb,this.data.height-1),this},mc.prototype.clear=function(){return this.data=Vb([]),this},mc.prototype.remove=
function(Wb,tc){if(!Wb)return this;for(var Hc,Qc,Uc,Vd=this.data,ae=this.toBBox(Wb),De=[],Oe=[];Vd||De.length;){if(Vd||(Vd=De.pop(),Qc=De[De.length-1],Hc=Oe.pop(),Uc=!0),Vd.leaf){a:{var tf=Wb;var pf=Vd.children,df=tc;if(df){for(var Ie=0;Ie<pf.length;Ie++)if(df(tf,pf[Ie])){tf=Ie;break a}tf=-1}else tf=pf.indexOf(tf)}if(-1!==tf)return Vd.children.splice(tf,1),De.push(Vd),this._condense(De),this}Uc||Vd.leaf||!Rb(Vd,ae)?Qc?(Hc++,Vd=Qc.children[Hc],Uc=!1):Vd=null:(De.push(Vd),Oe.push(Hc),Hc=0,Qc=Vd,Vd=
Vd.children[0])}return this},mc.prototype.toBBox=function(Wb){return Wb},mc.prototype.compareMinX=function(Wb,tc){return Wb.minX-tc.minX},mc.prototype.compareMinY=function(Wb,tc){return Wb.minY-tc.minY},mc.prototype.toJSON=function(){return this.data},mc.prototype.fromJSON=function(Wb){return this.data=Wb,this},mc.prototype._all=function(Wb,tc){for(var Hc=[];Wb;)Wb.leaf?tc.push.apply(tc,Wb.children):Hc.push.apply(Hc,Wb.children),Wb=Hc.pop();return tc},mc.prototype._build=function(Wb,tc,Hc,Qc){var Uc,
Vd=Hc-tc+1,ae=this._maxEntries;if(Vd<=ae)return ia(Uc=Vb(Wb.slice(tc,Hc+1)),this.toBBox),Uc;Qc||(Qc=Math.ceil(Math.log(Vd)/Math.log(ae)),ae=Math.ceil(Vd/Math.pow(ae,Qc-1)));(Uc=Vb([])).leaf=!1;Uc.height=Qc;Vd=Math.ceil(Vd/ae);ae=Vd*Math.ceil(Math.sqrt(ae));for(rc(Wb,tc,Hc,ae,this.compareMinX);tc<=Hc;tc+=ae){var De=Math.min(tc+ae-1,Hc);rc(Wb,tc,De,Vd,this.compareMinY);for(var Oe=tc;Oe<=De;Oe+=Vd)Uc.children.push(this._build(Wb,Oe,Math.min(Oe+Vd-1,De),Qc-1))}return ia(Uc,this.toBBox),Uc},mc.prototype._chooseSubtree=
function(Wb,tc,Hc,Qc){for(;Qc.push(tc),!tc.leaf&&Qc.length-1!==Hc;){for(var Uc=1/0,Vd=1/0,ae=void 0,De=0;De<tc.children.length;De++){var Oe=tc.children[De],tf=lb(Oe),pf=(df=Wb,Ie=Oe,(Math.max(Ie.maxX,df.maxX)-Math.min(Ie.minX,df.minX))*(Math.max(Ie.maxY,df.maxY)-Math.min(Ie.minY,df.minY))-tf);pf<Vd?(Vd=pf,Uc=tf<Uc?tf:Uc,ae=Oe):pf===Vd&&tf<Uc&&(Uc=tf,ae=Oe)}tc=ae||tc.children[0]}var df,Ie;return tc},mc.prototype._insert=function(Wb,tc,Hc){Hc=Hc?Wb:this.toBBox(Wb);var Qc=[],Uc=this._chooseSubtree(Hc,
this.data,tc,Qc);Uc.children.push(Wb);for(La(Uc,Hc);0<=tc&&Qc[tc].children.length>this._maxEntries;)this._split(Qc,tc),tc--;this._adjustParentBBoxes(Hc,Qc,tc)},mc.prototype._split=function(Wb,tc){var Hc=Wb[tc],Qc=Hc.children.length,Uc=this._minEntries;this._chooseSplitAxis(Hc,Uc,Qc);Qc=this._chooseSplitIndex(Hc,Uc,Qc);Qc=Vb(Hc.children.splice(Qc,Hc.children.length-Qc));Qc.height=Hc.height;Qc.leaf=Hc.leaf;ia(Hc,this.toBBox);ia(Qc,this.toBBox);tc?Wb[tc-1].children.push(Qc):this._splitRoot(Hc,Qc)},mc.prototype._splitRoot=
function(Wb,tc){this.data=Vb([Wb,tc]);this.data.height=Wb.height+1;this.data.leaf=!1;ia(this.data,this.toBBox)},mc.prototype._chooseSplitIndex=function(Wb,tc,Hc){for(var Qc,Uc,Vd,ae,De,Oe,tf,pf=1/0,df=1/0,Ie=tc;Ie<=Hc-tc;Ie++){var Bd=sa(Wb,0,Ie,this.toBBox),fd=sa(Wb,Ie,Hc,this.toBBox),jd=(Uc=Bd,Vd=fd,ae=void 0,De=void 0,Oe=void 0,tf=void 0,ae=Math.max(Uc.minX,Vd.minX),De=Math.max(Uc.minY,Vd.minY),Oe=Math.min(Uc.maxX,Vd.maxX),tf=Math.min(Uc.maxY,Vd.maxY),Math.max(0,Oe-ae)*Math.max(0,tf-De));Bd=lb(Bd)+
lb(fd);jd<pf?(pf=jd,Qc=Ie,df=Bd<df?Bd:df):jd===pf&&Bd<df&&(df=Bd,Qc=Ie)}return Qc||Hc-tc},mc.prototype._chooseSplitAxis=function(Wb,tc,Hc){var Qc=Wb.leaf?this.compareMinX:Va,Uc=Wb.leaf?this.compareMinY:$a;this._allDistMargin(Wb,tc,Hc,Qc)<this._allDistMargin(Wb,tc,Hc,Uc)&&Wb.children.sort(Qc)},mc.prototype._allDistMargin=function(Wb,tc,Hc,Qc){Wb.children.sort(Qc);Qc=this.toBBox;for(var Uc=sa(Wb,0,tc,Qc),Vd=sa(Wb,Hc-tc,Hc,Qc),ae=ub(Uc)+ub(Vd),De=tc;De<Hc-tc;De++){var Oe=Wb.children[De];La(Uc,Wb.leaf?
Qc(Oe):Oe);ae+=ub(Uc)}for(Hc=Hc-tc-1;Hc>=tc;Hc--)Uc=Wb.children[Hc],La(Vd,Wb.leaf?Qc(Uc):Uc),ae+=ub(Vd);return ae},mc.prototype._adjustParentBBoxes=function(Wb,tc,Hc){for(;0<=Hc;Hc--)La(tc[Hc],Wb)},mc.prototype._condense=function(Wb){for(var tc=Wb.length-1,Hc=void 0;0<=tc;tc--)0===Wb[tc].children.length?0<tc?(Hc=Wb[tc-1].children).splice(Hc.indexOf(Wb[tc]),1):this.clear():ia(Wb[tc],this.toBBox)},mc})}}),da=Ka({["../../node_modules/fast-deep-equal/index.js"](b,g){g.exports=function ia(I,W){if(I===
W)return!0;if(I&&W&&"object"==typeof I&&"object"==typeof W){if(I.constructor!==W.constructor)return!1;var sa;if(Array.isArray(I)){var La=I.length;if(La!=W.length)return!1;for(sa=La;0!==sa--;)if(!ia(I[sa],W[sa]))return!1;return!0}if(I.constructor===RegExp)return I.source===W.source&&I.flags===W.flags;if(I.valueOf!==Object.prototype.valueOf)return I.valueOf()===W.valueOf();if(I.toString!==Object.prototype.toString)return I.toString()===W.toString();var Va=Object.keys(I);La=Va.length;if(La!==Object.keys(W).length)return!1;
for(sa=La;0!==sa--;)if(!Object.prototype.hasOwnProperty.call(W,Va[sa]))return!1;for(sa=La;0!==sa--;)if(La=Va[sa],!ia(I[La],W[La]))return!1;return!0}return I!==I&&W!==W}}}),va=Ka({["../../../node_modules/deepmerge/dist/cjs.js"](b,g){function m(ub,Rb){return!1!==Rb.clone&&Rb.isMergeableObject(ub)?Va(Array.isArray(ub)?[]:{},ub,Rb):ub}function I(ub,Rb,ec){return ub.concat(Rb).map(function(Vb){return m(Vb,ec)})}function W(ub){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(ub).filter(function(Rb){return ub.propertyIsEnumerable(Rb)}):
[]}function ia(ub){return Object.keys(ub).concat(W(ub))}function sa(ub,Rb){try{return Rb in ub}catch(ec){return!1}}function La(ub,Rb,ec){var Vb={};ec.isMergeableObject(ub)&&ia(ub).forEach(function(rc){Vb[rc]=m(ub[rc],ec)});ia(Rb).forEach(function(rc){if(!sa(ub,rc)||Object.hasOwnProperty.call(ub,rc)&&Object.propertyIsEnumerable.call(ub,rc))if(sa(ub,rc)&&ec.isMergeableObject(Rb[rc])){if(ec.customMerge){var mc=ec.customMerge(rc);mc="function"===typeof mc?mc:Va}else mc=Va;Vb[rc]=mc(ub[rc],Rb[rc],ec)}else Vb[rc]=
m(Rb[rc],ec)});return Vb}function Va(ub,Rb,ec){ec=ec||{};ec.arrayMerge=ec.arrayMerge||I;ec.isMergeableObject=ec.isMergeableObject||$a;ec.cloneUnlessOtherwiseSpecified=m;var Vb=Array.isArray(Rb),rc=Array.isArray(ub);return Vb!==rc?m(Rb,ec):Vb?ec.arrayMerge(ub,Rb,ec):La(ub,Rb,ec)}var $a=function(ub){var Rb;if(Rb=!!ub&&"object"===typeof ub)Rb=Object.prototype.toString.call(ub),Rb=!("[object RegExp]"===Rb||"[object Date]"===Rb||ub.$$typeof===lb);return Rb},lb="function"===typeof Symbol&&Symbol.for?Symbol.for("react.element"):
60103;Va.all=function(ub,Rb){if(!Array.isArray(ub))throw Error("first argument should be an array");return ub.reduce(function(ec,Vb){return Va(ec,Vb,Rb)},{})};g.exports=Va}}),Xa=Ka({["../../node_modules/tslib/tslib.js"](b,g){var m,I,W,ia,sa,La,Va,$a,lb,ub,Rb,ec,Vb,rc,mc,Wb,tc,Hc,Qc,Uc,Vd,ae,De,Oe,tf;(function(pf){function df(Bd,fd){Bd!==Ie&&("function"===typeof Object.create?Object.defineProperty(Bd,"__esModule",{value:!0}):Bd.__esModule=!0);return function(jd,ld){return Bd[jd]=fd?fd(jd,ld):ld}}var Ie=
"object"===typeof wa?wa:"object"===typeof self?self:"object"===typeof this?this:{};"function"===typeof define&&define.amd?define("tslib",["exports"],function(Bd){pf(df(Ie,df(Bd)))}):"object"===typeof g&&"object"===typeof g.exports?pf(df(Ie,df(g.exports))):pf(df(Ie))})(function(pf){var df=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Bd,fd){Bd.__proto__=fd}||function(Bd,fd){for(var jd in fd)Object.prototype.hasOwnProperty.call(fd,jd)&&(Bd[jd]=fd[jd])};m=function(Bd,fd){function jd(){this.constructor=
Bd}if("function"!==typeof fd&&null!==fd)throw new TypeError("Class extends value "+String(fd)+" is not a constructor or null");df(Bd,fd);Bd.prototype=null===fd?Object.create(fd):(jd.prototype=fd.prototype,new jd)};I=Object.assign||function(Bd){for(var fd,jd=1,ld=arguments.length;jd<ld;jd++){fd=arguments[jd];for(var Gd in fd)Object.prototype.hasOwnProperty.call(fd,Gd)&&(Bd[Gd]=fd[Gd])}return Bd};W=function(Bd,fd){var jd={},ld;for(ld in Bd)Object.prototype.hasOwnProperty.call(Bd,ld)&&0>fd.indexOf(ld)&&
(jd[ld]=Bd[ld]);if(null!=Bd&&"function"===typeof Object.getOwnPropertySymbols){var Gd=0;for(ld=Object.getOwnPropertySymbols(Bd);Gd<ld.length;Gd++)0>fd.indexOf(ld[Gd])&&Object.prototype.propertyIsEnumerable.call(Bd,ld[Gd])&&(jd[ld[Gd]]=Bd[ld[Gd]])}return jd};ia=function(Bd,fd,jd,ld){var Gd=arguments.length,we=3>Gd?fd:null===ld?ld=Object.getOwnPropertyDescriptor(fd,jd):ld,Fe;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)we=Reflect.decorate(Bd,fd,jd,ld);else for(var qf=Bd.length-
1;0<=qf;qf--)if(Fe=Bd[qf])we=(3>Gd?Fe(we):3<Gd?Fe(fd,jd,we):Fe(fd,jd))||we;return 3<Gd&&we&&Object.defineProperty(fd,jd,we),we};sa=function(Bd,fd){return function(jd,ld){fd(jd,ld,Bd)}};La=function(Bd,fd){if("object"===typeof Reflect&&"function"===typeof Reflect.metadata)return Reflect.metadata(Bd,fd)};Va=function(Bd,fd,jd,ld){function Gd(we){return we instanceof jd?we:new jd(function(Fe){Fe(we)})}return new (jd||=Promise)(function(we,Fe){function qf(Ug){try{gf(ld.next(Ug))}catch(Gg){Fe(Gg)}}function hf(Ug){try{gf(ld["throw"](Ug))}catch(Gg){Fe(Gg)}}
function gf(Ug){Ug.done?we(Ug.value):Gd(Ug.value).then(qf,hf)}gf((ld=ld.apply(Bd,fd||[])).next())})};$a=function(Bd,fd){function jd(gf){return function(Ug){return ld([gf,Ug])}}function ld(gf){if(we)throw new TypeError("Generator is already executing.");for(;Gd;)try{if(we=1,Fe&&(qf=gf[0]&2?Fe["return"]:gf[0]?Fe["throw"]||((qf=Fe["return"])&&qf.call(Fe),0):Fe.next)&&!(qf=qf.call(Fe,gf[1])).done)return qf;if(Fe=0,qf)gf=[gf[0]&2,qf.value];switch(gf[0]){case 0:case 1:qf=gf;break;case 4:return Gd.label++,
{value:gf[1],done:!1};case 5:Gd.label++;Fe=gf[1];gf=[0];continue;case 7:gf=Gd.ops.pop();Gd.trys.pop();continue;default:if(!(qf=Gd.trys,qf=0<qf.length&&qf[qf.length-1])&&(6===gf[0]||2===gf[0])){Gd=0;continue}if(3===gf[0]&&(!qf||gf[1]>qf[0]&&gf[1]<qf[3]))Gd.label=gf[1];else if(6===gf[0]&&Gd.label<qf[1])Gd.label=qf[1],qf=gf;else if(qf&&Gd.label<qf[2])Gd.label=qf[2],Gd.ops.push(gf);else{qf[2]&&Gd.ops.pop();Gd.trys.pop();continue}}gf=fd.call(Bd,Gd)}catch(Ug){gf=[6,Ug],Fe=0}finally{we=qf=0}if(gf[0]&5)throw gf[1];
return{value:gf[0]?gf[1]:void 0,done:!0}}var Gd={label:0,sent:function(){if(qf[0]&1)throw qf[1];return qf[1]},trys:[],ops:[]},we,Fe,qf,hf;return hf={next:jd(0),"throw":jd(1),"return":jd(2)},"function"===typeof Symbol&&(hf[Symbol.iterator]=function(){return this}),hf};lb=function(Bd,fd){for(var jd in Bd)"default"===jd||Object.prototype.hasOwnProperty.call(fd,jd)||tf(fd,Bd,jd)};tf=Object.create?function(Bd,fd,jd,ld){void 0===ld&&(ld=jd);var Gd=Object.getOwnPropertyDescriptor(fd,jd);if(!Gd||("get"in
Gd?!fd.__esModule:Gd.writable||Gd.configurable))Gd={enumerable:!0,get:function(){return fd[jd]}};Object.defineProperty(Bd,ld,Gd)}:function(Bd,fd,jd,ld){void 0===ld&&(ld=jd);Bd[ld]=fd[jd]};ub=function(Bd){var fd="function"===typeof Symbol&&Symbol.iterator,jd=fd&&Bd[fd],ld=0;if(jd)return jd.call(Bd);if(Bd&&"number"===typeof Bd.length)return{next:function(){Bd&&ld>=Bd.length&&(Bd=void 0);return{value:Bd&&Bd[ld++],done:!Bd}}};throw new TypeError(fd?"Object is not iterable.":"Symbol.iterator is not defined.");
};Rb=function(Bd,fd){var jd="function"===typeof Symbol&&Bd[Symbol.iterator];if(!jd)return Bd;Bd=jd.call(Bd);var ld,Gd=[];try{for(;(void 0===fd||0<fd--)&&!(ld=Bd.next()).done;)Gd.push(ld.value)}catch(Fe){var we={error:Fe}}finally{try{ld&&!ld.done&&(jd=Bd["return"])&&jd.call(Bd)}finally{if(we)throw we.error;}}return Gd};ec=function(){for(var Bd=[],fd=0;fd<arguments.length;fd++)Bd=Bd.concat(Rb(arguments[fd]));return Bd};Vb=function(){for(var Bd=0,fd=0,jd=arguments.length;fd<jd;fd++)Bd+=arguments[fd].length;
Bd=Array(Bd);var ld=0;for(fd=0;fd<jd;fd++)for(var Gd=arguments[fd],we=0,Fe=Gd.length;we<Fe;we++,ld++)Bd[ld]=Gd[we];return Bd};rc=function(Bd,fd,jd){if(jd||2===arguments.length)for(var ld=0,Gd=fd.length,we;ld<Gd;ld++)!we&&ld in fd||(we||=Array.prototype.slice.call(fd,0,ld),we[ld]=fd[ld]);return Bd.concat(we||Array.prototype.slice.call(fd))};mc=function(Bd){return this instanceof mc?(this.v=Bd,this):new mc(Bd)};Wb=function(Bd,fd,jd){function ld(Gg){hf[Gg]&&(gf[Gg]=function(qi){return new Promise(function(Jk,
Tk){1<Ug.push([Gg,qi,Jk,Tk])||Gd(Gg,qi)})})}function Gd(Gg,qi){try{var Jk=hf[Gg](qi);Jk.value instanceof mc?Promise.resolve(Jk.value.v).then(we,Fe):qf(Ug[0][2],Jk)}catch(Tk){qf(Ug[0][3],Tk)}}function we(Gg){Gd("next",Gg)}function Fe(Gg){Gd("throw",Gg)}function qf(Gg,qi){(Gg(qi),Ug.shift(),Ug.length)&&Gd(Ug[0][0],Ug[0][1])}if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var hf=jd.apply(Bd,fd||[]),gf,Ug=[];return gf={},ld("next"),ld("throw"),ld("return"),gf[Symbol.asyncIterator]=
function(){return this},gf};tc=function(Bd){function fd(Gd,we){jd[Gd]=Bd[Gd]?function(Fe){return(ld=!ld)?{value:mc(Bd[Gd](Fe)),done:"return"===Gd}:we?we(Fe):Fe}:we}var jd,ld;return jd={},fd("next"),fd("throw",function(Gd){throw Gd;}),fd("return"),jd[Symbol.iterator]=function(){return this},jd};Hc=function(Bd){function fd(we){Gd[we]=Bd[we]&&function(Fe){return new Promise(function(qf,hf){Fe=Bd[we](Fe);jd(qf,hf,Fe.done,Fe.value)})}}function jd(we,Fe,qf,hf){Promise.resolve(hf).then(function(gf){we({value:gf,
done:qf})},Fe)}if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ld=Bd[Symbol.asyncIterator],Gd;return ld?ld.call(Bd):(Bd="function"===typeof ub?ub(Bd):Bd[Symbol.iterator](),Gd={},fd("next"),fd("throw"),fd("return"),Gd[Symbol.asyncIterator]=function(){return this},Gd)};Qc=function(Bd,fd){Object.defineProperty?Object.defineProperty(Bd,"raw",{value:fd}):Bd.raw=fd;return Bd};var Ie=Object.create?function(Bd,fd){Object.defineProperty(Bd,"default",{enumerable:!0,
value:fd})}:function(Bd,fd){Bd["default"]=fd};Uc=function(Bd){if(Bd&&Bd.__esModule)return Bd;var fd={};if(null!=Bd)for(var jd in Bd)"default"!==jd&&Object.prototype.hasOwnProperty.call(Bd,jd)&&tf(fd,Bd,jd);Ie(fd,Bd);return fd};Vd=function(Bd){return Bd&&Bd.__esModule?Bd:{"default":Bd}};ae=function(Bd,fd,jd,ld){if("a"===jd&&!ld)throw new TypeError("Private accessor was defined without a getter");if("function"===typeof fd?Bd!==fd||!ld:!fd.has(Bd))throw new TypeError("Cannot read private member from an object whose class did not declare it");
return"m"===jd?ld:"a"===jd?ld.call(Bd):ld?ld.value:fd.get(Bd)};De=function(Bd,fd,jd,ld,Gd){if("m"===ld)throw new TypeError("Private method is not writable");if("a"===ld&&!Gd)throw new TypeError("Private accessor was defined without a setter");if("function"===typeof fd?Bd!==fd||!Gd:!fd.has(Bd))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===ld?Gd.call(Bd,jd):Gd?Gd.value=jd:fd.set(Bd,jd),jd};Oe=function(Bd,fd){if(null===fd||"object"!==typeof fd&&
"function"!==typeof fd)throw new TypeError("Cannot use 'in' operator on non-object");return"function"===typeof Bd?fd===Bd:Bd.has(fd)};pf("__extends",m);pf("__assign",I);pf("__rest",W);pf("__decorate",ia);pf("__param",sa);pf("__metadata",La);pf("__awaiter",Va);pf("__generator",$a);pf("__exportStar",lb);pf("__createBinding",tf);pf("__values",ub);pf("__read",Rb);pf("__spread",ec);pf("__spreadArrays",Vb);pf("__spreadArray",rc);pf("__await",mc);pf("__asyncGenerator",Wb);pf("__asyncDelegator",tc);pf("__asyncValues",
Hc);pf("__makeTemplateObject",Qc);pf("__importStar",Uc);pf("__importDefault",Vd);pf("__classPrivateFieldGet",ae);pf("__classPrivateFieldSet",De);pf("__classPrivateFieldIn",Oe)})}}),yb={};((b,g)=>{for(var m in g)Sm(b,m,{get:g[m],enumerable:!0})})(yb,{App:()=>NI,PreviewManager:()=>xw,generateJSXFromModel:()=>Gl,generateSVGFromModel:()=>Jo});Ta.exports=(b=>hb(Sm({},"__esModule",{value:!0}),b))(yb);var bc=(b=>{b.Yellow="yellow";b.Red="red";b.Pink="pink";b.Green="green";b.Blue="blue";b.Purple="purple";
b.Gray="gray";b.Default="";return b})(bc||{}),wc,Wc=new Uint8Array(16),od=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,vd=[];for(let b=0;256>b;++b)vd.push((b+256).toString(16).slice(1));var Ud,xe,Ye=0,vf=0,Of=function(b,g,m){m=g&&m||0;const I=g||Array(16);b=b||{};let W=b.node||Ud;var ia=void 0!==b.clockseq?b.clockseq:xe;if(null==W||null==ia){var sa=b.random||(b.rng||p)();null==W&&(W=Ud=[sa[0]|1,sa[1],sa[2],sa[3],sa[4],sa[5]]);
null==ia&&(ia=xe=(sa[6]<<8|sa[7])&16383)}sa=void 0!==b.msecs?b.msecs:Date.now();let La=void 0!==b.nsecs?b.nsecs:vf+1;const Va=sa-Ye+(La-vf)/1E4;0>Va&&void 0===b.clockseq&&(ia=ia+1&16383);(0>Va||sa>Ye)&&void 0===b.nsecs&&(La=0);if(1E4<=La)throw Error("uuid.v1(): Can't create more than 10M uuids/sec");Ye=sa;vf=La;xe=ia;sa+=122192928E5;b=(1E4*(sa&268435455)+La)%4294967296;I[m++]=b>>>24&255;I[m++]=b>>>16&255;I[m++]=b>>>8&255;I[m++]=b&255;b=sa/4294967296*1E4&268435455;I[m++]=b>>>8&255;I[m++]=b&255;I[m++]=
b>>>24&15|16;I[m++]=b>>>16&255;I[m++]=ia>>>8|128;I[m++]=ia&255;for(ia=0;6>ia;++ia)I[m+ia]=W[ia];return g||S(I)},mf=class{static clamp(b,g,m){return Math.max(g,"undefined"!==typeof m?Math.min(b,m):b)}static clampV(b,g,m){return b.map(I=>m?mf.clamp(I,g,m):mf.clamp(I,g))}static cross(b,g,m){return(g[0]-b[0])*(m[1]-b[1])-(m[0]-b[0])*(g[1]-b[1])}static snap(b,g=1){return[Math.round(b[0]/g)*g,Math.round(b[1]/g)*g]}},ud=mf;ud.neg=b=>[-b[0],-b[1]];ud.add=(b,g)=>[b[0]+g[0],b[1]+g[1]];ud.addScalar=(b,g)=>[b[0]+
g,b[1]+g];ud.sub=(b,g)=>[b[0]-g[0],b[1]-g[1]];ud.subScalar=(b,g)=>[b[0]-g,b[1]-g];ud.vec=(b,g)=>[g[0]-b[0],g[1]-b[1]];ud.mul=(b,g)=>[b[0]*g,b[1]*g];ud.mulV=(b,g)=>[b[0]*g[0],b[1]*g[1]];ud.div=(b,g)=>[b[0]/g,b[1]/g];ud.divV=(b,g)=>[b[0]/g[0],b[1]/g[1]];ud.per=b=>[b[1],-b[0]];ud.dpr=(b,g)=>b[0]*g[0]+b[1]*g[1];ud.cpr=(b,g)=>b[0]*g[1]-g[0]*b[1];ud.len2=b=>b[0]*b[0]+b[1]*b[1];ud.len=b=>Math.hypot(b[0],b[1]);ud.pry=(b,g)=>mf.dpr(b,g)/mf.len(g);ud.uni=b=>mf.div(b,mf.len(b));ud.normalize=b=>mf.uni(b);ud.tangent=
(b,g)=>mf.uni(mf.sub(b,g));ud.dist2=(b,g)=>mf.len2(mf.sub(b,g));ud.dist=(b,g)=>Math.hypot(b[1]-g[1],b[0]-g[0]);ud.fastDist=(b,g)=>{b=[g[0]-b[0],g[1]-b[1]];g=[Math.abs(b[0]),Math.abs(b[1])];let m=1/Math.max(g[0],g[1]);m*=1.29289-(g[0]+g[1])*m*.29289;return[b[0]*m,b[1]*m]};ud.ang=(b,g)=>Math.atan2(mf.cpr(b,g),mf.dpr(b,g));ud.angle=(b,g)=>Math.atan2(g[1]-b[1],g[0]-b[0]);ud.med=(b,g)=>mf.mul(mf.add(b,g),.5);ud.rot=(b,g=0)=>[b[0]*Math.cos(g)-b[1]*Math.sin(g),b[0]*Math.sin(g)+b[1]*Math.cos(g)];ud.rotWith=
(b,g,m=0)=>{if(0===m)return b;const I=Math.sin(m);m=Math.cos(m);const W=b[0]-g[0];b=b[1]-g[1];return[W*m-b*I+g[0],W*I+b*m+g[1]]};ud.isEqual=(b,g)=>b[0]===g[0]&&b[1]===g[1];ud.lrp=(b,g,m)=>mf.add(b,mf.mul(mf.sub(g,b),m));ud.int=(b,g,m,I,W=1)=>{m=(mf.clamp(m,I)-m)/(I-m);return mf.add(mf.mul(b,1-m),mf.mul(g,W))};ud.ang3=(b,g,m)=>{b=mf.vec(g,b);g=mf.vec(g,m);return mf.ang(b,g)};ud.abs=b=>[Math.abs(b[0]),Math.abs(b[1])];ud.rescale=(b,g)=>{const m=mf.len(b);return[g*b[0]/m,g*b[1]/m]};ud.isLeft=(b,g,m)=>
(g[0]-b[0])*(m[1]-b[1])-(m[0]-b[0])*(g[1]-b[1]);ud.clockwise=(b,g,m)=>0<mf.isLeft(b,g,m);ud.toFixed=b=>b.map(g=>Math.round(100*g)/100);ud.nearestPointOnLineThroughPoint=(b,g,m)=>mf.add(b,mf.mul(g,mf.pry(mf.sub(m,b),g)));ud.distanceToLineThroughPoint=(b,g,m)=>mf.dist(m,mf.nearestPointOnLineThroughPoint(b,g,m));ud.nearestPointOnLineSegment=(b,g,m,I=!0)=>{const W=mf.uni(mf.sub(g,b));m=mf.add(b,mf.mul(W,mf.pry(mf.sub(m,b),W)));if(I){if(m[0]<Math.min(b[0],g[0]))return b[0]<g[0]?b:g;if(m[0]>Math.max(b[0],
g[0]))return b[0]>g[0]?b:g;if(m[1]<Math.min(b[1],g[1]))return b[1]<g[1]?b:g;if(m[1]>Math.max(b[1],g[1]))return b[1]>g[1]?b:g}return m};ud.distanceToLineSegment=(b,g,m,I=!0)=>mf.dist(m,mf.nearestPointOnLineSegment(b,g,m,I));ud.nudge=(b,g,m)=>mf.isEqual(b,g)?b:mf.add(b,mf.mul(mf.uni(mf.sub(g,b)),m));ud.nudgeAtAngle=(b,g,m)=>[Math.cos(g)*m+b[0],Math.sin(g)*m+b[1]];ud.toPrecision=(b,g=4)=>[+b[0].toPrecision(g),+b[1].toPrecision(g)];ud.pointsBetween=(b,g,m=6)=>Array.from(Array(m)).map((I,W)=>{I=W/(m-1);
W=Math.min(1,.5+Math.abs(.5-I));return[...mf.lrp(b,g,I),W]});ud.slope=(b,g)=>b[0]===g[0]?NaN:(b[1]-g[1])/(b[0]-g[0]);ud.toAngle=b=>{b=Math.atan2(b[1],b[0]);return 0>b?b+2*Math.PI:b};ud.max=(...b)=>[Math.max(...b.map(g=>g[0])),Math.max(...b.map(g=>g[1]))];ud.min=(...b)=>[Math.min(...b.map(g=>g[0])),Math.min(...b.map(g=>g[1]))];var Yd=ud,We=class{static getRectangleSides(b,g,m=0){const I=[b[0]+g[0]/2,b[1]+g[1]/2],W=ud.rotWith(b,I,m),ia=ud.rotWith(ud.add(b,[g[0],0]),I,m),sa=ud.rotWith(ud.add(b,g),I,
m);b=ud.rotWith(ud.add(b,[0,g[1]]),I,m);return[["top",[W,ia]],["right",[ia,sa]],["bottom",[sa,b]],["left",[b,W]]]}static getBoundsSides(b){return We.getRectangleSides([b.minX,b.minY],[b.width,b.height])}static expandBounds(b,g){return{minX:b.minX-g,minY:b.minY-g,maxX:b.maxX+g,maxY:b.maxY+g,width:b.width+2*g,height:b.height+2*g}}static boundsCollide(b,g){return!(b.maxX<g.minX||b.minX>g.maxX||b.maxY<g.minY||b.minY>g.maxY)}static boundsContain(b,g){return Array.isArray(g)?b.minX<g[0]&&b.minY<g[1]&&b.maxY>
g[1]&&b.maxX>g[0]:b.minX<g.minX&&b.minY<g.minY&&b.maxY>g.maxY&&b.maxX>g.maxX}static boundsContained(b,g){return We.boundsContain(g,b)}static boundsAreEqual(b,g){return!(g.maxX!==b.maxX||g.minX!==b.minX||g.maxY!==b.maxY||g.minY!==b.minY)}static getBoundsFromPoints(b,g=0){let m=Infinity,I=Infinity,W=-Infinity,ia=-Infinity;if(2>b.length)I=m=0,ia=W=1;else for(const sa of b)m=Math.min(sa[0],m),I=Math.min(sa[1],I),W=Math.max(sa[0],W),ia=Math.max(sa[1],ia);return 0!==g?We.getBoundsFromPoints(b.map(sa=>ud.rotWith(sa,
[(m+W)/2,(I+ia)/2],g))):{minX:m,minY:I,maxX:W,maxY:ia,width:Math.max(1,W-m),height:Math.max(1,ia-I)}}static centerBounds(b,g){const m=We.getBoundsCenter(b);return We.translateBounds(b,[g[0]-m[0],g[1]-m[1]])}static snapBoundsToGrid(b,g){const m=Math.round(b.minX/g)*g,I=Math.round(b.minY/g)*g,W=Math.round(b.maxX/g)*g;b=Math.round(b.maxY/g)*g;return{minX:m,minY:I,maxX:W,maxY:b,width:Math.max(1,W-m),height:Math.max(1,b-I)}}static translateBounds(b,g){return{minX:b.minX+g[0],minY:b.minY+g[1],maxX:b.maxX+
g[0],maxY:b.maxY+g[1],width:b.width,height:b.height}}static multiplyBounds(b,g){const m=We.getBoundsCenter(b);return We.centerBounds({minX:b.minX*g,minY:b.minY*g,maxX:b.maxX*g,maxY:b.maxY*g,width:b.width*g,height:b.height*g},[m[0]*g,m[1]*g])}static divideBounds(b,g){const m=We.getBoundsCenter(b);return We.centerBounds({minX:b.minX/g,minY:b.minY/g,maxX:b.maxX/g,maxY:b.maxY/g,width:b.width/g,height:b.height/g},[m[0]/g,m[1]/g])}static getRotatedBounds(b,g=0){b=We.getRotatedCorners(b,g);let m=g=Infinity,
I=-Infinity,W=-Infinity;for(const ia of b)g=Math.min(ia[0],g),m=Math.min(ia[1],m),I=Math.max(ia[0],I),W=Math.max(ia[1],W);return{minX:g,minY:m,maxX:I,maxY:W,width:Math.max(1,I-g),height:Math.max(1,W-m),rotation:0}}static getRotatedEllipseBounds(b,g,m,I,W=0){var ia=Math.cos(W);const sa=Math.sin(W);W=Math.hypot(m*ia,I*sa);ia=Math.hypot(m*sa,I*ia);return{minX:b+m-W,minY:g+I-ia,maxX:b+m+W,maxY:g+I+ia,width:2*W,height:2*ia}}static getExpandedBounds(b,g){const m=Math.min(b.minX,g.minX),I=Math.min(b.minY,
g.minY),W=Math.max(b.maxX,g.maxX);b=Math.max(b.maxY,g.maxY);return{minX:m,minY:I,maxX:W,maxY:b,width:Math.abs(W-m),height:Math.abs(b-I)}}static getCommonBounds(b){if(2>b.length)return b[0];let g=b[0];for(let m=1;m<b.length;m++)g=We.getExpandedBounds(g,b[m]);return g}static getRotatedCorners(b,g=0){const m=[b.minX+b.width/2,b.minY+b.height/2];b=[[b.minX,b.minY],[b.maxX,b.minY],[b.maxX,b.maxY],[b.minX,b.maxY]];return g?b.map(I=>ud.rotWith(I,m,g)):b}static getTransformedBoundingBox(b,g,m,I=0,W=!1){const [ia,
sa]=[b.minX,b.minY],[La,Va]=[b.maxX,b.maxY];let [$a,lb]=[b.minX,b.minY],[ub,Rb]=[b.maxX,b.maxY];if("center"===g)return{minX:$a+m[0],minY:lb+m[1],maxX:ub+m[0],maxY:Rb+m[1],width:ub-$a,height:Rb-lb,scaleX:1,scaleY:1};const [ec,Vb]=ud.rot(m,-I);switch(g){case "top_edge":case "top_left_corner":case "top_right_corner":lb+=Vb;break;case "bottom_edge":case "bottom_left_corner":case "bottom_right_corner":Rb+=Vb}switch(g){case "left_edge":case "top_left_corner":case "bottom_left_corner":$a+=ec;break;case "right_edge":case "top_right_corner":case "bottom_right_corner":ub+=
ec}var rc=La-ia;const mc=Va-sa;var Wb=(ub-$a)/rc,tc=(Rb-lb)/mc;b=0>Wb;m=0>tc;var Hc=Math.abs(ub-$a),Qc=Math.abs(Rb-lb);if(W)switch(W=rc/mc,rc=W<Hc/Qc,tc=1/W*(0>tc?1:-1)*Hc,Wb=Qc*(0>Wb?1:-1)*W,g){case "top_left_corner":rc?lb=Rb+tc:$a=ub+Wb;break;case "top_right_corner":rc?lb=Rb+tc:ub=$a-Wb;break;case "bottom_right_corner":rc?Rb=lb-tc:ub=$a-Wb;break;case "bottom_left_corner":rc?Rb=lb-tc:$a=ub+Wb;break;case "bottom_edge":case "top_edge":Hc=($a+ub)/2;Qc*=W;$a=Hc-Qc/2;ub=Hc+Qc/2;break;case "left_edge":case "right_edge":Qc=
(lb+Rb)/2,Hc/=W,lb=Qc-Hc/2,Rb=Qc+Hc/2}if(0!==I%(2*Math.PI)){Hc=[0,0];Qc=ud.med([ia,sa],[La,Va]);Wb=ud.med([$a,lb],[ub,Rb]);switch(g){case "top_left_corner":Hc=ud.sub(ud.rotWith([ub,Rb],Wb,I),ud.rotWith([La,Va],Qc,I));break;case "top_right_corner":Hc=ud.sub(ud.rotWith([$a,Rb],Wb,I),ud.rotWith([ia,Va],Qc,I));break;case "bottom_right_corner":Hc=ud.sub(ud.rotWith([$a,lb],Wb,I),ud.rotWith([ia,sa],Qc,I));break;case "bottom_left_corner":Hc=ud.sub(ud.rotWith([ub,lb],Wb,I),ud.rotWith([La,sa],Qc,I));break;
case "top_edge":Hc=ud.sub(ud.rotWith(ud.med([$a,Rb],[ub,Rb]),Wb,I),ud.rotWith(ud.med([ia,Va],[La,Va]),Qc,I));break;case "left_edge":Hc=ud.sub(ud.rotWith(ud.med([ub,lb],[ub,Rb]),Wb,I),ud.rotWith(ud.med([La,sa],[La,Va]),Qc,I));break;case "bottom_edge":Hc=ud.sub(ud.rotWith(ud.med([$a,lb],[ub,lb]),Wb,I),ud.rotWith(ud.med([ia,sa],[La,sa]),Qc,I));break;case "right_edge":Hc=ud.sub(ud.rotWith(ud.med([$a,lb],[$a,Rb]),Wb,I),ud.rotWith(ud.med([ia,sa],[ia,Va]),Qc,I))}[$a,lb]=ud.sub([$a,lb],Hc);[ub,Rb]=ud.sub([ub,
Rb],Hc)}ub<$a&&([ub,$a]=[$a,ub]);Rb<lb&&([Rb,lb]=[lb,Rb]);return{minX:$a,minY:lb,maxX:ub,maxY:Rb,width:ub-$a,height:Rb-lb,scaleX:(ub-$a)/(La-ia||1)*(b?-1:1),scaleY:(Rb-lb)/(Va-sa||1)*(m?-1:1)}}static getTransformAnchor(b,g,m){let I=b;switch(b){case "top_left_corner":I=g&&m?"bottom_right_corner":g?"top_right_corner":m?"bottom_left_corner":"bottom_right_corner";break;case "top_right_corner":I=g&&m?"bottom_left_corner":g?"top_left_corner":m?"bottom_right_corner":"bottom_left_corner";break;case "bottom_right_corner":I=
g&&m?"top_left_corner":g?"bottom_left_corner":m?"top_right_corner":"top_left_corner";break;case "bottom_left_corner":I=g&&m?"top_right_corner":g?"bottom_right_corner":m?"top_left_corner":"top_right_corner"}return I}static getRelativeTransformedBoundingBox(b,g,m,I,W){I=b.minX+(I?g.maxX-m.maxX:m.minX-g.minX)/g.width*b.width;W=b.minY+(W?g.maxY-m.maxY:m.minY-g.minY)/g.height*b.height;const ia=m.width/g.width*b.width;b=m.height/g.height*b.height;return{minX:I,minY:W,maxX:I+ia,maxY:W+b,width:ia,height:b}}static getRotatedSize(b,
g){const m=ud.div(b,2);b=[[0,0],[b[0],0],b,[0,b[1]]].map(I=>ud.rotWith(I,m,g));b=We.getBoundsFromPoints(b);return[b.width,b.height]}static getBoundsCenter(b){return[b.minX+b.width/2,b.minY+b.height/2]}static getBoundsWithCenter(b){const g=We.getBoundsCenter(b);return Ga(re({},b),{midX:g[0],midY:g[1]})}static getCommonTopLeft(b){const g=[Infinity,Infinity];b.forEach(m=>{g[0]=Math.min(g[0],m[0]);g[1]=Math.min(g[1],m[1])});return g}static getTLSnapPoints(b,g,m){const I=re({},b);b=[0,0];const W=[],ia=
{minX:{id:"minX",isSnapped:!1},midX:{id:"midX",isSnapped:!1},maxX:{id:"maxX",isSnapped:!1},minY:{id:"minY",isSnapped:!1},midY:{id:"midY",isSnapped:!1},maxY:{id:"maxY",isSnapped:!1}},sa=["midX","minX","maxX"],La=["midY","minY","maxY"];g=g.map(Rb=>{const ec=sa.flatMap((rc,mc)=>sa.map((Wb,tc)=>{const Hc=I[rc]-Rb[Wb];return{f:rc,t:Wb,gap:Hc,distance:Math.abs(Hc),isCareful:0===mc||3===mc+tc}})),Vb=La.flatMap((rc,mc)=>La.map((Wb,tc)=>{const Hc=I[rc]-Rb[Wb];return{f:rc,t:Wb,gap:Hc,distance:Math.abs(Hc),
isCareful:0===mc||3===mc+tc}}));return[Rb,ec,Vb]});let Va=Infinity,$a=Infinity,lb=Infinity,ub=Infinity;g.forEach(([,Rb,ec])=>{Rb.forEach(Vb=>{Vb.distance<m&&Vb.distance<lb&&(lb=Vb.distance,Va=Vb.gap)});ec.forEach(Vb=>{Vb.distance<m&&Vb.distance<ub&&(ub=Vb.distance,$a=Vb.gap)})});g.forEach(([Rb,ec,Vb])=>{Infinity!==Va&&ec.forEach(rc=>{2>Math.abs(rc.gap-Va)&&(ia[rc.f]=Ga(re({},ia[rc.f]),{isSnapped:!0,to:Rb[rc.t],B:Rb,distance:rc.distance}))});Infinity!==$a&&Vb.forEach(rc=>{2>Math.abs(rc.gap-$a)&&(ia[rc.f]=
Ga(re({},ia[rc.f]),{isSnapped:!0,to:Rb[rc.t],B:Rb,distance:rc.distance}))})});b[0]=Infinity===Va?0:Va;b[1]=Infinity===$a?0:$a;I.minX-=b[0];I.midX-=b[0];I.maxX-=b[0];I.minY-=b[1];I.midY-=b[1];I.maxY-=b[1];sa.forEach(Rb=>{Rb=ia[Rb];if(Rb.isSnapped){var {id:ec,B:Vb}=Rb;Rb=I[ec];W.push("minX"===ec?[[Rb,I.midY],[Rb,Vb.minY],[Rb,Vb.maxY]]:[[Rb,I.minY],[Rb,I.maxY],[Rb,Vb.minY],[Rb,Vb.maxY]])}});La.forEach(Rb=>{Rb=ia[Rb];if(Rb.isSnapped){var {id:ec,B:Vb}=Rb;Rb=I[ec];W.push("midY"===ec?[[I.midX,Rb],[Vb.minX,
Rb],[Vb.maxX,Rb]]:[[I.minX,Rb],[I.maxX,Rb],[Vb.minX,Rb],[Vb.maxX,Rb]])}});return{offset:b,snapLines:W}}static ensureRatio(b,g){const {width:m,height:I}=b,W=re({},b);m/I<g?(W.width=I*g,W.maxX+=m-b.width):(W.height=m/g,W.maxY+=I-b.height);return W}static getDistributions(b,g){var m=b.map(ia=>{const sa=ia.getBounds();return{id:ia.id,point:[sa.minX,sa.minY],bounds:sa,center:ia.getCenter()}});b=m.length;var I=We.getCommonBounds(m.map(({bounds:ia})=>ia));const W=[];switch(g){case "horizontal":g=m.reduce((ia,
sa)=>ia+sa.bounds.width,0);if(g>I.width){const ia=m.sort(($a,lb)=>$a.bounds.minX-lb.bounds.minX)[0],sa=m.sort(($a,lb)=>lb.bounds.maxX-$a.bounds.maxX)[0];I=m.filter($a=>$a!==ia&&$a!==sa).sort(($a,lb)=>$a.center[0]-lb.center[0]);const La=(sa.center[0]-ia.center[0])/(b-1),Va=ia.center[0]+La;I.forEach(({id:$a,point:lb,bounds:ub},Rb)=>{W.push({id:$a,prev:lb,next:[Va+La*Rb-ub.width/2,ub.minY]})})}else{m=m.sort((La,Va)=>La.center[0]-Va.center[0]);let ia=I.minX;const sa=(I.width-g)/(b-1);m.forEach(({id:La,
point:Va,bounds:$a})=>{W.push({id:La,prev:Va,next:[ia,$a.minY]});ia+=$a.width+sa})}break;case "vertical":if(g=m.reduce((ia,sa)=>ia+sa.bounds.height,0),g>I.height){const ia=m.sort(($a,lb)=>$a.bounds.minY-lb.bounds.minY)[0],sa=m.sort(($a,lb)=>lb.bounds.maxY-$a.bounds.maxY)[0];I=m.filter($a=>$a!==ia&&$a!==sa).sort(($a,lb)=>$a.center[1]-lb.center[1]);const La=(sa.center[1]-ia.center[1])/(b-1),Va=ia.center[1]+La;I.forEach(({id:$a,point:lb,bounds:ub},Rb)=>{W.push({id:$a,prev:lb,next:[ub.minX,Va+La*Rb-ub.height/
2]})})}else{m=m.sort((La,Va)=>La.center[1]-Va.center[1]);let ia=I.minY;const sa=(I.height-g)/(b-1);m.forEach(({id:La,point:Va,bounds:$a})=>{W.push({id:La,prev:Va,next:[$a.minX,ia]});ia+=$a.height+sa})}}return W}static getPackedDistributions(b){const g=We.getCommonBounds(b.map(({bounds:W})=>W)),m=[g.minX,g.minY],I=Object.fromEntries(b.map(W=>[W.id,[W.bounds.minX,W.bounds.minY]]));b=b.filter(W=>{var ia,sa,La,Va;return!((null==(sa=null==(ia=W.props.handles)?void 0:ia.start)?0:sa.bindingId)||(null==(Va=
null==(La=W.props.handles)?void 0:La.end)?0:Va.bindingId))}).map(W=>{const ia=W.getBounds();return{id:W.id,w:ia.width+16,h:ia.height+16,x:ia.minX,y:ia.minY}});A(b);return b.map(({id:W,x:ia,y:sa})=>({id:W,prev:I[W],next:[ia+m[0],sa+m[1]]}))}},qh=class{static pointInCircle(b,g,m){return ud.dist(b,g)<=m}static pointInEllipse(b,g,m,I,W=0){W=W||0;var ia=Math.cos(W);W=Math.sin(W);g=ud.sub(b,g);b=ia*g[0]+W*g[1];ia=W*g[0]-ia*g[1];return 1>=b*b/(m*m)+ia*ia/(I*I)}static pointInRect(b,g){return!(b[0]<g[0]||
b[0]>b[0]+g[0]||b[1]<g[1]||b[1]>b[1]+g[1])}static pointInPolygon(b,g){let m=0;g.forEach((I,W)=>{W=g[(W+1)%g.length];I[1]<=b[1]?W[1]>b[1]&&0<ud.cross(I,W,b)&&(m+=1):W[1]<=b[1]&&0>ud.cross(I,W,b)&&--m});return 0!==m}static pointInBounds(b,g){return!(b[0]<g.minX||b[0]>g.maxX||b[1]<g.minY||b[1]>g.maxY)}static pointInPolyline(b,g,m=3){for(let I=1;I<g.length;I++)if(ud.distanceToLineSegment(g[I-1],g[I],b)<m)return!0;return!1}static _getSqSegDist(b,g,m){let I=g[0];g=g[1];let W=m[0]-I,ia=m[1]-g;if(0!==W||
0!==ia){const sa=((b[0]-I)*W+(b[1]-g)*ia)/(W*W+ia*ia);1<sa?(I=m[0],g=m[1]):0<sa&&(I+=W*sa,g+=ia*sa)}W=b[0]-I;ia=b[1]-g;return W*W+ia*ia}static _simplifyStep(b,g,m,I,W){let ia=I,sa=-1;for(let La=g+1;La<m;La++){const Va=qh._getSqSegDist(b[La],b[g],b[m]);Va>ia&&(sa=La,ia=Va)}-1<sa&&ia>I&&(1<sa-g&&qh._simplifyStep(b,g,sa,I,W),W.push(b[sa]),1<m-sa&&qh._simplifyStep(b,sa,m,I,W))}static simplify2(b,g=1){if(2>=b.length)return b;g*=g;var m=b[0],I=b[1];const W=[m];for(let ia=1,sa=b.length;ia<sa;ia++)I=b[ia],
(I[0]-m[0])*(I[0]-m[0])+(I[1]-m[1])*(I[1]-m[1])>g&&(W.push(I),m=I);m!==I&&W.push(I);m=W.length-1;I=[W[0]];qh._simplifyStep(W,0,m,g,I);I.push(W[m],b[b.length-1]);return I}static pointNearToPolyline(b,g,m=8){const I=g.length;for(let W=1;W<I;W++)if(ud.distanceToLineSegment(g[W-1],g[W],b)<m)return!0;return!1}},zh=qh;Qa(zh,"simplify",(b,g=1)=>{var m=b.length;const I=b[0],W=b[m-1],[ia,sa]=I,[La,Va]=W;if(2<m){let $a=0,lb=0;const ub=ud.len2([Va-sa,La-ia]);for(let Rb=1;Rb<m-1;Rb++){const [ec,Vb]=b[Rb],rc=
Math.pow(ec*(Va-sa)+ia*(Vb-Va)+La*(sa-Vb),2)/ub;$a>rc||($a=rc,lb=Rb)}if($a>g)return m=qh.simplify(b.slice(0,lb+1),g),b=qh.simplify(b.slice(lb+1),g),m.concat(b.slice(1))}return[I,W]});var bl=vb(he()),Gn=({target:b},g)=>{b=b&&b.tagName;return!!(b&&g&&g.includes(b))},wp=class{static registerShortcut(b,g){bl.default.bind(b,(m,I)=>{var W;m.preventDefault();Gn(m,["INPUT","TEXTAREA","SELECT"])||(null==(W=m.target)?0:W.isContentEditable)||g(m,I)},"keydown");return()=>{bl.default.unbind(b,"keydown")}}},fm=
Math.PI,Gm=fm/2,xg=2*fm,Nl={},Nk={bottom_edge:"ns-resize",top_edge:"ns-resize",left_edge:"ew-resize",right_edge:"ew-resize",bottom_left_corner:"nesw-resize",bottom_right_corner:"nwse-resize",top_left_corner:"nwse-resize",top_right_corner:"nesw-resize",bottom_left_resize_corner:"swne-rotate",bottom_right_resize_corner:"senw-rotate",top_left_resize_corner:"nwse-rotate",top_right_resize_corner:"nesw-rotate",rotate:"rotate",center:"grab",background:"grab"},Si=class{static circleFromThreePoints(b,g,m){const [I,
W]=b,[ia,sa]=g,[La,Va]=m;g=I*(sa-Va)-W*(ia-La)+ia*Va-La*sa;b=-((I*I+W*W)*(Va-sa)+(ia*ia+sa*sa)*(W-Va)+(La*La+Va*Va)*(sa-W))/(2*g);g=-((I*I+W*W)*(ia-La)+(ia*ia+sa*sa)*(La-I)+(La*La+Va*Va)*(I-ia))/(2*g);return[b,g,Math.hypot(b-I,g-W)]}static perimeterOfEllipse(b,g){const m=Math.pow(b-g,2)/Math.pow(b+g,2);return fm*(b+g)*(1+3*m/(10+Math.sqrt(4-3*m)))}static shortAngleDist(b,g){b=(g-b)%xg;return 2*b%xg-b}static longAngleDist(b,g){return xg-Si.shortAngleDist(b,g)}static lerpAngles(b,g,m){return b+Si.shortAngleDist(b,
g)*m}static angleDelta(b,g){return Si.shortAngleDist(b,g)}static getSweep(b,g,m){return Si.angleDelta(Yd.angle(b,g),Yd.angle(b,m))}static clampRadians(b){return(xg+b)%xg}static snapAngleToSegments(b,g){g=xg/g;b=Math.floor((Si.clampRadians(b)+g/2)/g)*g%xg;b<fm&&(b+=xg);b>fm&&(b-=xg);return b}static isAngleBetween(b,g,m){if(m===b||m===g)return!0;g=(g-b+Gm)%Gm;return g<=fm!==(m-b+Gm)%Gm>g}static degreesToRadians(b){return b*fm/180}static radiansToDegrees(b){return 180*b/fm}static getArcLength(b,g,m,
I){b=Si.getSweep(b,m,I);return b/xg*xg*g}static getSweepFlag(b,g,m){m=Yd.angle(b,m);return 0<(Yd.angle(b,g)-m+3*fm)%xg-fm?0:1}static getLargeArcFlag(b,g,m){b=Yd.angle(m,b);g=(Yd.angle(m,g)-b+3*fm)%xg-fm;return Math.abs(g)>Gm?0:1}static getArcDashOffset(b,g,m,I,W){const ia=Si.getSweepFlag(b,m,I);g=Si.getArcLength(b,g,m,I);return-(0>ia?g:xg*b[2]-g)/2+W}static getEllipseDashOffset(b,g){return-(xg*b[2])/2+-g}static radiansToCardinalDirection(b){return b<.25*Math.PI?"north":b<.75*Math.PI?"east":b<1.25*
Math.PI?"south":b<1.75*Math.PI?"west":"north"}},Uj=class{static getPolygonCentroid(b){var g=b.map(m=>m[0]);b=b.map(m=>m[1]);g=Math.min(...g)+Math.max(...g);b=Math.min(...b)+Math.max(...b);return[g?g/2:0,b?b/2:0]}};Qa(Uj,"getEdges",b=>{const g=b.length;return b.map((m,I)=>[m,b[(I+1)%g]])});Qa(Uj,"getEdgeOutwardNormal",(b,g)=>Yd.per(Yd.uni(Yd.sub(g,b))));Qa(Uj,"getEdgeInwardNormal",(b,g)=>Yd.neg(Uj.getEdgeOutwardNormal(b,g)));Qa(Uj,"getOffsetEdge",(b,g,m)=>{m=Yd.mul(Yd.per(Yd.uni(Yd.sub(g,b))),m);return[Yd.add(b,
m),Yd.add(g,m)]});Qa(Uj,"getOffsetEdges",(b,g)=>b.map(([m,I])=>Uj.getOffsetEdge(m,I,g)));Qa(Uj,"getOffsetPolygon",(b,g)=>{if(1>b.length)throw Error("Expected at least one point.");if(1===b.length)return b=b[0],[Yd.add(b,[-g,-g]),Yd.add(b,[g,-g]),Yd.add(b,[g,g]),Yd.add(b,[-g,g])];if(2===b.length){const [m,I]=b;return[...Uj.getOffsetEdge(m,I,g),...Uj.getOffsetEdge(I,m,g)]}return Uj.getOffsetEdges(Uj.getEdges(b),g).flatMap((m,I,W)=>{{I=W[(I+1)%W.length];const ia=ud.slope(m[0],m[1]);W=ud.slope(I[0],I[1]);
ia!==W?Number.isNaN(ia)&&!Number.isNaN(W)?m=[m[0][0],(m[0][0]-I[0][0])*W+I[0][1]]:Number.isNaN(W)&&!Number.isNaN(ia)?m=[I[0][0],(I[0][0]-m[0][0])*ia+m[0][1]]:(m=(ia*m[0][0]-W*I[0][0]+I[0][1]-m[0][1])/(ia-W),m=[m,W*(m-I[0][0])+I[0][1]]):m=void 0}if(void 0===m)throw Error("Expected an intersection");return m})});Qa(Uj,"getPolygonVertices",(b,g,m=0,I=1)=>{b=Yd.div(b,2);const [W,ia]=[Math.max(1,b[0]-m),Math.max(1,b[1]-m)];m=[];for(let $a=0,lb=xg/g;$a<g;$a++){var sa=(-Gm+$a*lb)%xg,La=(-Gm+($a+1)*lb)%xg;
sa=Yd.add(b,[W*Math.cos(sa),ia*Math.sin(sa)]);La=Yd.add(b,[W*Math.cos(La),ia*Math.sin(La)]);var Va=Yd.med(sa,La);Va=Yd.nudge(Va,b,Yd.dist(b,Va)*(1-I));m.push(sa,Va,La)}return m});Qa(Uj,"getTriangleVertices",(b,g=0,m=1)=>{const [I,W]=b;var ia=1-m;b=[I/2,g/2];m=[I-g,W-g];g=[g/2,W-g];const sa=Uj.getPolygonCentroid([b,m,g]),La=Yd.med(b,m),Va=Yd.med(m,g),$a=Yd.med(g,b),lb=Yd.dist(La,sa)*ia,ub=Yd.dist(Va,sa)*ia;ia*=Yd.dist($a,sa);return[b,lb?Yd.nudge(La,sa,lb):La,m,ub?Yd.nudge(Va,sa,ub):Va,g,ia?Yd.nudge($a,
sa,ia):$a]});Qa(Uj,"getStarVertices",(b,g,m,I=1)=>{const W=Yd.div(g,2),ia=Yd.mul(W,I/2),sa=xg/m/2;return Array.from(Array(2*m)).map((La,Va)=>{La=-Gm+Va*sa;const [$a,lb]=Va%2?ia:W;return Yd.add(b,[$a*Math.cos(La),lb*Math.sin(La)])})});var rq=class{static getCurvedPathForPolygon(b){if(3>b.length)return"M -4, 0\n      a 4,4 0 1,0 8,0\n      a 4,4 0 1,0 -8,0";const g=["M",...b[0].slice(0,2),"Q"],m=b.length;for(let I=1;I<m;I++){const [W,ia]=b[I],[sa,La]=b[(I+1)%m];g.push(W,ia,(W+sa)/2,(ia+La)/2)}g.push("Z");
return g.join(" ")}static getCurvedPathForPoints(b){if(3>b.length)return"M -4, 0\n      a 4,4 0 1,0 8,0\n      a 4,4 0 1,0 -8,0";const g=["M",...b[0].slice(0,2),"Q"],m=b.length;for(let I=1;I<m-1;I++){const [W,ia]=b[I],[sa,La]=b[I+1];g.push(W,ia,(W+sa)/2,(ia+La)/2)}return g.join(" ")}static getSvgPathFromStroke(b,g=!0){const m=b.length;if(4>m)return"";let I=b[0],W=b[1];var ia=b[2];ia=`M${I[0].toFixed(2)},${I[1].toFixed(2)} Q${W[0].toFixed(2)},${W[1].toFixed(2)} ${((W[0]+ia[0])/2).toFixed(2)},${((W[1]+
ia[1])/2).toFixed(2)} T`;for(let sa=2,La=m-1;sa<La;sa++)I=b[sa],W=b[sa+1],ia+=`${((I[0]+W[0])/2).toFixed(2)},${((I[1]+W[1])/2).toFixed(2)} `;g&&(ia+="Z");return ia}static getSvgPathFromStrokePoints(b,g=!1){const m=b.length;if(4>m)return"";let I=b[0].point,W=b[1].point;var ia=b[2].point;ia=`M${I[0].toFixed(2)},${I[1].toFixed(2)} Q${W[0].toFixed(2)},${W[1].toFixed(2)} ${((W[0]+ia[0])/2).toFixed(2)},${((W[1]+ia[1])/2).toFixed(2)} T`;for(let sa=2,La=m-1;sa<La;sa++)I=b[sa].point,W=b[sa+1].point,ia+=`${((I[0]+
W[0])/2).toFixed(2)},${((I[1]+W[1])/2).toFixed(2)} `;g&&(ia+="Z");return ia}};Qa(rq,"TRIM_NUMBERS",/(\s?[A-Z]?,?-?[0-9]*\.[0-9]{0,2})(([0-9]|e|-)*)/g);var cm={},hr=Object.assign,oo=Object.getOwnPropertyDescriptor,dn=Object.defineProperty,Vn=Object.prototype,qq=[];Object.freeze(qq);var oq={};Object.freeze(oq);var ts="undefined"!==typeof Proxy,ss=Object.toString(),cg=function(){},mq="undefined"!==typeof Object.getOwnPropertySymbols,vp="undefined"!==typeof Reflect&&Reflect.ownKeys?Reflect.ownKeys:mq?
function(b){return Object.getOwnPropertyNames(b).concat(Object.getOwnPropertySymbols(b))}:Object.getOwnPropertyNames,Wn=Object.getOwnPropertyDescriptors||function(b){var g={};vp(b).forEach(function(m){g[m]=oo(b,m)});return g},Sl=Symbol("mobx-stored-annotations"),Zg=Symbol("mobx administration"),ro=function(){function b(m){void 0===m&&(m="Atom");this.name_=void 0;this.isBeingObserved_=this.isPendingUnobservation_=!1;this.observers_=new Set;this.lastAccessedBy_=this.diffValue_=0;this.lowestObserverState_=
Cd.NOT_TRACKING_;this.onBUOL=this.onBOL=void 0;this.name_=m}var g=b.prototype;g.onBO=function(){this.onBOL&&this.onBOL.forEach(function(m){return m()})};g.onBUO=function(){this.onBUOL&&this.onBUOL.forEach(function(m){return m()})};g.reportObserved=function(){return Nb(this)};g.reportChanged=function(){nd();gc(this);Sd()};g.toString=function(){return this.name_};return b}(),uq=D("Atom",ro),No={identity:function(b,g){return b===g},structural:function(b,g){return ta(b,g)},"default":function(b,g){return Object.is?
Object.is(b,g):b===g?0!==b||1/b===1/g:b!==b&&g!==g},shallow:function(b,g){return ta(b,g,1)}},qo="override",pq=nb(),ap={deep:!0,name:void 0,defaultDecorator:void 0,proxy:!0};Object.freeze(ap);var nq=Xb("observable"),no=Xb("observable.ref",{enhancer:fb}),gr=Xb("observable.shallow",{enhancer:function(b,g,m){if(void 0===b||null===b||Xd(b)||jb(b)||Jp(b)||Jq(b))return b;if(Array.isArray(b))return zg.array(b,{name:m,deep:!1});if(H(b))return zg.object(b,void 0,{name:m,deep:!1});if(O(b))return zg.map(b,{name:m,
deep:!1});if(P(b))return zg.set(b,{name:m,deep:!1})}}),sq=Xb("observable.struct",{enhancer:function(b,g){return ta(b,g)?g:b}}),tq=Ua(nq);Object.assign($c,tq);var ev={box:function(b,g){g=g||ap;return new gb(b,Jc(g),g.name,!0,g.equals)},array:function(b,g){g=g||ap;return(!1===Ge.useProxies||!1===g.proxy?ff:bb)(b,Jc(g),g.name)},map:function(b,g){g=g||ap;return new cy(b,Jc(g),g.name)},set:function(b,g){g=g||ap;return new dy(b,Jc(g),g.name)},object:function(b,g,m){if(!1===Ge.useProxies||!1===(null==m?
void 0:m.proxy))m=Ed({},m);else{var I={},W,ia;ka();I=Ed(I,m);m=null!=(ia=(W=I[Zg]).proxy_)?ia:W.proxy_=new Proxy(I,qC)}return qc(m,b,g)},ref:Ua(no),shallow:Ua(gr),deep:tq,struct:Ua(sq)},zg=hr($c,ev),rs=Bb("computed"),cv=Bb("computed.struct",{equals:No.structural}),yg=function(b,g){if(Y(g))return Ea(b,g,rs);if(H(b))return Ua(Bb("computed",b));g=H(g)?g:{};g.get=b;g.name||(g.name=b.name||"");return new Ic(g)};Object.assign(yg,rs);yg.struct=Ua(cv);var zt,xp,ir=0,jr=1,T=null!=(zt=null==(xp=oo(function(){},
"name"))?void 0:xp.configurable)?zt:!1,la={value:"action",configurable:!0,writable:!1,enumerable:!1};var Da=Symbol.toPrimitive;var gb=function(b){function g(I,W,ia,sa,La){void 0===ia&&(ia="ObservableValue");void 0===La&&(La=No["default"]);sa=b.call(this,ia)||this;sa.enhancer=void 0;sa.hasUnreportedChange_=!1;sa.interceptors_=void 0;sa.changeListeners_=void 0;sa.value_=void 0;sa.dehancer=void 0;sa.enhancer=W;sa.name_=ia;sa.equals=La;sa.value_=W(I,void 0,ia);return sa}ea(g,b);var m=g.prototype;m.dehanceValue=
function(I){return void 0!==this.dehancer?this.dehancer(I):I};m.set=function(I){I=this.prepareNewValue_(I);I!==Ge.UNCHANGED&&this.setNewValue_(I)};m.prepareNewValue_=function(I){if(ce(this)){I=nc(this,{object:this,type:Qo,newValue:I});if(!I)return Ge.UNCHANGED;I=I.newValue}I=this.enhancer(I,this.value_,this.name_);return this.equals(this.value_,I)?Ge.UNCHANGED:I};m.setNewValue_=function(I){var W=this.value_;this.value_=I;this.reportChanged();Ne(this)&&bf(this,{type:Qo,object:this,newValue:I,oldValue:W})};
m.get=function(){this.reportObserved();return this.dehanceValue(this.value_)};m.intercept_=function(I){return qd(this,I)};m.observe_=function(I,W){W&&I({observableKind:"value",debugObjectName:this.name_,object:this,type:Qo,newValue:this.value_,oldValue:void 0});return Wf(this,I)};m.raw=function(){return this.value_};m.toJSON=function(){return this.get()};m.toString=function(){return this.name_+"["+this.value_+"]"};m.valueOf=function(){return X(this.get())};m[Da]=function(){return this.valueOf()};
return g}(ro),Ib=D("ObservableValue",gb);var sc=Symbol.toPrimitive;var Ic=function(){function b(m){this.dependenciesState_=Cd.NOT_TRACKING_;this.observing_=[];this.newObserving_=null;this.isPendingUnobservation_=this.isBeingObserved_=!1;this.observers_=new Set;this.lastAccessedBy_=this.runId_=this.diffValue_=0;this.lowestObserverState_=Cd.UP_TO_DATE_;this.unboundDepsCount_=0;this.value_=new Xf(null);this.triggeredBy_=this.name_=void 0;this.isRunningSetter_=this.isComputing_=!1;this.setter_=this.derivation=
void 0;this.isTracing_=Ee.NONE;this.onBUOL=this.onBOL=this.keepAlive_=this.requiresReaction_=this.equals_=this.scope_=void 0;m.get||n(31);this.derivation=m.get;this.name_=m.name||"ComputedValue";m.set&&(this.setter_=Nc("ComputedValue-setter",m.set));this.equals_=m.equals||(m.compareStructural||m.struct?No.structural:No["default"]);this.scope_=m.context;this.requiresReaction_=m.requiresReaction;this.keepAlive_=!!m.keepAlive}var g=b.prototype;g.onBecomeStale_=function(){rb(this)};g.onBO=function(){this.onBOL&&
this.onBOL.forEach(function(m){return m()})};g.onBUO=function(){this.onBUOL&&this.onBUOL.forEach(function(m){return m()})};g.get=function(){this.isComputing_&&n(32,this.name_,this.derivation);if(0!==Ge.inBatch||0!==this.observers_.size||this.keepAlive_){if(Nb(this),Vc(this)){var m=Ge.trackingContext;this.keepAlive_&&!m&&(Ge.trackingContext=this);this.trackAndCompute()&&Yb(this);Ge.trackingContext=m}}else Vc(this)&&(this.warnAboutUntrackedRead_(),nd(),this.value_=this.computeValue_(!1),Sd());m=this.value_;
if(m instanceof Xf)throw m.cause;return m};g.set=function(m){if(this.setter_){this.isRunningSetter_&&n(33,this.name_);this.isRunningSetter_=!0;try{this.setter_.call(this.scope_,m)}finally{this.isRunningSetter_=!1}}else n(34,this.name_)};g.trackAndCompute=function(){var m=this.value_,I=this.dependenciesState_===Cd.NOT_TRACKING_,W=this.computeValue_(!0);if(m=I||m instanceof Xf||W instanceof Xf||!this.equals_(m,W))this.value_=W;return m};g.computeValue_=function(m){this.isComputing_=!0;var I=xc(!1);
if(m)var W=hd(this,this.derivation,this.scope_);else if(!0===Ge.disableErrorBoundaries)W=this.derivation.call(this.scope_);else try{W=this.derivation.call(this.scope_)}catch(ia){W=new Xf(ia)}Ge.allowStateChanges=I;this.isComputing_=!1;return W};g.suspend_=function(){this.keepAlive_||(Nd(this),this.value_=void 0)};g.observe_=function(m,I){var W=this,ia=!0,sa=void 0;return Od(function(){var La=W.get();if(!ia||I){var Va=pc();m({observableKind:"computed",debugObjectName:W.name_,type:Qo,object:W,newValue:La,
oldValue:sa});Ge.trackingDerivation=Va}ia=!1;sa=La})};g.warnAboutUntrackedRead_=function(){};g.toString=function(){return this.name_+"["+this.derivation.toString()+"]"};g.valueOf=function(){return X(this.get())};g[sc]=function(){return this.valueOf()};return b}(),cd=D("ComputedValue",Ic),Cd;(function(b){b[b.NOT_TRACKING_=-1]="NOT_TRACKING_";b[b.UP_TO_DATE_=0]="UP_TO_DATE_";b[b.POSSIBLY_STALE_=1]="POSSIBLY_STALE_";b[b.STALE_=2]="STALE_"})(Cd||={});var Ee;(function(b){b[b.NONE=0]="NONE";b[b.LOG=1]=
"LOG";b[b.BREAK=2]="BREAK"})(Ee||={});var Xf=function(b){this.cause=void 0;this.cause=b},oh=function(){this.version=6;this.UNCHANGED={};this.trackingContext=this.trackingDerivation=null;this.inBatch=this.mobxGuid=this.runId=0;this.pendingUnobservations=[];this.pendingReactions=[];this.allowStateChanges=this.isRunningReactions=!1;this.enforceActions=this.allowStateReads=!0;this.spyListeners=[];this.globalReactionErrorHandlers=[];this.suppressReactionErrors=this.disableErrorBoundaries=this.observableRequiresReaction=
this.reactionRequiresObservable=this.computedRequiresReaction=!1;this.useProxies=!0;this.verifyProxies=!1;this.safeDescriptors=!0},jf=!0,Dg=!1,Ge=function(){var b=R();0<b.__mobxInstanceCount&&!b.__mobxGlobals&&(jf=!1);b.__mobxGlobals&&b.__mobxGlobals.version!==(new oh).version&&(jf=!1);if(jf){if(b.__mobxGlobals)return b.__mobxInstanceCount+=1,b.__mobxGlobals.UNCHANGED||(b.__mobxGlobals.UNCHANGED={}),b.__mobxGlobals;b.__mobxInstanceCount=1;return b.__mobxGlobals=new oh}setTimeout(function(){Dg||n(35)},
1);return new oh}(),Wg=function(){function b(m,I,W,ia){void 0===m&&(m="Reaction");this.requiresObservable_=this.errorHandler_=this.onInvalidate_=this.name_=void 0;this.observing_=[];this.newObserving_=[];this.dependenciesState_=Cd.NOT_TRACKING_;this.unboundDepsCount_=this.runId_=this.diffValue_=0;this.isRunning_=this.isTrackPending_=this.isScheduled_=this.isDisposed_=!1;this.isTracing_=Ee.NONE;this.name_=m;this.onInvalidate_=I;this.errorHandler_=W;this.requiresObservable_=ia}var g=b.prototype;g.onBecomeStale_=
function(){this.schedule_()};g.schedule_=function(){this.isScheduled_||(this.isScheduled_=!0,Ge.pendingReactions.push(this),0<Ge.inBatch||Ge.isRunningReactions||Wd(mb))};g.isScheduled=function(){return this.isScheduled_};g.runReaction_=function(){if(!this.isDisposed_){nd();this.isScheduled_=!1;var m=Ge.trackingContext;Ge.trackingContext=this;if(Vc(this)){this.isTrackPending_=!0;try{this.onInvalidate_()}catch(I){this.reportExceptionInDerivation_(I)}}Ge.trackingContext=m;Sd()}};g.track=function(m){if(!this.isDisposed_){nd();
this.isRunning_=!0;var I=Ge.trackingContext;Ge.trackingContext=this;m=hd(this,m,void 0);Ge.trackingContext=I;this.isTrackPending_=this.isRunning_=!1;this.isDisposed_&&Nd(this);m instanceof Xf&&this.reportExceptionInDerivation_(m.cause);Sd()}};g.reportExceptionInDerivation_=function(m){var I=this;if(this.errorHandler_)this.errorHandler_(m,this);else{if(Ge.disableErrorBoundaries)throw m;Ge.suppressReactionErrors||console.error("[mobx] uncaught error in '"+this+"'",m);Ge.globalReactionErrorHandlers.forEach(function(W){return W(m,
I)})}};g.dispose=function(){this.isDisposed_||(this.isDisposed_=!0,this.isRunning_||(nd(),Nd(this),Sd()))};g.getDisposer_=function(){var m=this.dispose.bind(this);m[Zg]=this;return m};g.toString=function(){return"Reaction["+this.name_+"]"};g.trace=function(m){void 0===m&&(m=!1);Cb(this,m)};return b}(),me=100,Wd=function(b){return b()},je=D("Reaction",Wg),af="action",kf=eb(af),Jh=eb("action.bound",{bound:!0}),vg=eb("autoAction",{autoAction:!0}),Dh=eb("autoAction.bound",{autoAction:!0,bound:!0}),cf=
Tc(!1);Object.assign(cf,kf);var yh=Tc(!0);Object.assign(yh,vg);cf.bound=Ua(Jh);yh.bound=Ua(Dh);var Lo=function(b){return b()},dv="onBO",tC="onBUO",uC=0;Sb.prototype=Object.create(Error.prototype);var ay=ra("flow"),sC=ra("flow.bound",{bound:!0}),ws=Object.assign(function(b,g){if(Y(g))return Ea(b,g,ay);var m=b.name||"\x3cunnamed flow\x3e";g=function(){var I=arguments,W=++uC,ia=cf(m+" - runid: "+W+" - init",b).apply(this,I),sa,La=void 0;I=new Promise(function(Va,$a){function lb(Vb){La=void 0;try{var rc=
cf(m+" - runid: "+W+" - yield "+ec++,ia.next).call(ia,Vb)}catch(mc){return $a(mc)}Rb(rc)}function ub(Vb){La=void 0;try{var rc=cf(m+" - runid: "+W+" - yield "+ec++,ia["throw"]).call(ia,Vb)}catch(mc){return $a(mc)}Rb(rc)}function Rb(Vb){if(ma(null==Vb?void 0:Vb.then))Vb.then(Rb,$a);else{if(Vb.done)return Va(Vb.value);La=Promise.resolve(Vb.value);return La.then(lb,ub)}}var ec=0;sa=$a;lb(void 0)});I.cancel=cf(m+" - runid: "+W+" - cancel",function(){try{if(La){var Va=La;ma(Va.cancel)&&Va.cancel()}var $a=
ia["return"](void 0),lb=Promise.resolve($a.value);lb.then(cg,cg);ma(lb.cancel)&&lb.cancel();sa(new Sb)}catch(ub){sa(ub)}});return I};g.isMobXFlow=!0;return g},ay);ws.bound=Ua(sC);var qC={has:function(b,g){return b[Zg].has_(g)},get:function(b,g){return b[Zg].get_(g)},set:function(b,g,m){var I;return Y(g)?null!=(I=b[Zg].set_(g,m,!0))?I:!0:!1},deleteProperty:function(b,g){var m;return Y(g)?null!=(m=b[Zg].delete_(g,!0))?m:!0:!1},defineProperty:function(b,g,m){var I;return null!=(I=b[Zg].defineProperty_(g,
m))?I:!0},ownKeys:function(b){return b[Zg].ownKeys_()},preventExtensions:function(b){n(13)}},Qo="update",rC={get:function(b,g){var m=b[Zg];return g===Zg?m:"length"===g?m.getArrayLength_():"string"!==typeof g||isNaN(g)?F(It,g)?It[g]:b[g]:m.get_(parseInt(g))},set:function(b,g,m){var I=b[Zg];"length"===g&&I.setArrayLength_(m);"symbol"===typeof g||isNaN(g)?b[g]=m:I.set_(parseInt(g),m);return!0},preventExtensions:function(){n(15)}},pv=function(){function b(m,I,W,ia){void 0===m&&(m="ObservableArray");this.atom_=
this.legacyMode_=this.owned_=void 0;this.values_=[];this.proxy_=this.dehancer=this.enhancer_=this.changeListeners_=this.interceptors_=void 0;this.lastKnownLength_=0;this.owned_=W;this.legacyMode_=ia;this.atom_=new ro(m);this.enhancer_=function(sa,La){return I(sa,La,"ObservableArray[..]")}}var g=b.prototype;g.dehanceValue_=function(m){return void 0!==this.dehancer?this.dehancer(m):m};g.dehanceValues_=function(m){return void 0!==this.dehancer&&0<m.length?m.map(this.dehancer):m};g.intercept_=function(m){return qd(this,
m)};g.observe_=function(m,I){void 0===I&&(I=!1);I&&m({observableKind:"array",object:this.proxy_,debugObjectName:this.atom_.name_,type:"splice",index:0,added:this.values_.slice(),addedCount:this.values_.length,removed:[],removedCount:0});return Wf(this,m)};g.getArrayLength_=function(){this.atom_.reportObserved();return this.values_.length};g.setArrayLength_=function(m){("number"!==typeof m||isNaN(m)||0>m)&&n("Out of range: "+m);var I=this.values_.length;if(m!==I)if(m>I){for(var W=Array(m-I),ia=0;ia<
m-I;ia++)W[ia]=void 0;this.spliceWithArray_(I,0,W)}else this.spliceWithArray_(m,I-m)};g.updateArrayLength_=function(m,I){m!==this.lastKnownLength_&&n(16);this.lastKnownLength_+=I;this.legacyMode_&&0<I&&qe(m+I+1)};g.spliceWithArray_=function(m,I,W){var ia=this,sa=this.values_.length;void 0===m?m=0:m>sa?m=sa:0>m&&(m=Math.max(0,sa+m));I=1===arguments.length?sa-m:void 0===I||null===I?0:Math.max(0,Math.min(I,sa-m));void 0===W&&(W=qq);if(ce(this)){var La=nc(this,{object:this.proxy_,type:"splice",index:m,
removedCount:I,added:W});if(!La)return qq;I=La.removedCount;W=La.added}W=0===W.length?W:W.map(function(Va){return ia.enhancer_(Va,void 0)});this.legacyMode_&&this.updateArrayLength_(sa,W.length-I);sa=this.spliceItemsIntoValues_(m,I,W);0===I&&0===W.length||this.notifyArraySplice_(m,W,sa);return this.dehanceValues_(sa)};g.spliceItemsIntoValues_=function(m,I,W){if(1E4>W.length){var ia;return(ia=this.values_).splice.apply(ia,[m,I].concat(W))}ia=this.values_.slice(m,m+I);var sa=this.values_.slice(m+I);
this.values_.length+=W.length-I;for(I=0;I<W.length;I++)this.values_[m+I]=W[I];for(I=0;I<sa.length;I++)this.values_[m+W.length+I]=sa[I];return ia};g.notifyArrayChildUpdate_=function(m,I,W){var ia=!this.owned_&&!1,sa=Ne(this);m=sa||ia?{observableKind:"array",object:this.proxy_,type:Qo,debugObjectName:this.atom_.name_,index:m,newValue:I,oldValue:W}:null;this.atom_.reportChanged();sa&&bf(this,m)};g.notifyArraySplice_=function(m,I,W){var ia=!this.owned_&&!1,sa=Ne(this);m=sa||ia?{observableKind:"array",
object:this.proxy_,debugObjectName:this.atom_.name_,type:"splice",index:m,removed:W,added:I,removedCount:W.length,addedCount:I.length}:null;this.atom_.reportChanged();sa&&bf(this,m)};g.get_=function(m){if(this.legacyMode_&&m>=this.values_.length)console.warn("[mobx] Out of bounds read: "+m);else return this.atom_.reportObserved(),this.dehanceValue_(this.values_[m])};g.set_=function(m,I){var W=this.values_;this.legacyMode_&&m>W.length&&n(17,m,W.length);if(m<W.length){var ia=W[m];if(ce(this)){I=nc(this,
{type:Qo,object:this.proxy_,index:m,newValue:I});if(!I)return;I=I.newValue}I=this.enhancer_(I,ia);I!==ia&&(W[m]=I,this.notifyArrayChildUpdate_(m,I,ia))}else{m=Array(m+1-W.length);for(ia=0;ia<m.length-1;ia++)m[ia]=void 0;m[m.length-1]=I;this.spliceWithArray_(W.length,0,m)}};return b}(),It={clear:function(){return this.splice(0)},replace:function(b){var g=this[Zg];return g.spliceWithArray_(0,g.values_.length,b)},toJSON:function(){return this.slice()},splice:function(b,g){for(var m=arguments.length,
I=Array(2<m?m-2:0),W=2;W<m;W++)I[W-2]=arguments[W];m=this[Zg];switch(arguments.length){case 0:return[];case 1:return m.spliceWithArray_(b);case 2:return m.spliceWithArray_(b,g)}return m.spliceWithArray_(b,g,I)},spliceWithArray:function(b,g,m){return this[Zg].spliceWithArray_(b,g,m)},push:function(){for(var b=this[Zg],g=arguments.length,m=Array(g),I=0;I<g;I++)m[I]=arguments[I];b.spliceWithArray_(b.values_.length,0,m);return b.values_.length},pop:function(){return this.splice(Math.max(this[Zg].values_.length-
1,0),1)[0]},shift:function(){return this.splice(0,1)[0]},unshift:function(){for(var b=this[Zg],g=arguments.length,m=Array(g),I=0;I<g;I++)m[I]=arguments[I];b.spliceWithArray_(0,0,m);return b.values_.length},reverse:function(){Ge.trackingDerivation&&n(37,"reverse");this.replace(this.slice().reverse());return this},sort:function(){Ge.trackingDerivation&&n(37,"sort");var b=this.slice();b.sort.apply(b,arguments);this.replace(b);return this},remove:function(b){var g=this[Zg];b=g.dehanceValues_(g.values_).indexOf(b);
return-1<b?(this.splice(b,1),!0):!1}};Db("concat",db);Db("flat",db);Db("includes",db);Db("indexOf",db);Db("join",db);Db("lastIndexOf",db);Db("slice",db);Db("toString",db);Db("toLocaleString",db);Db("every",Eb);Db("filter",Eb);Db("find",Eb);Db("findIndex",Eb);Db("flatMap",Eb);Db("forEach",Eb);Db("map",Eb);Db("some",Eb);Db("reduce",hc);Db("reduceRight",hc);var wC=D("ObservableArrayAdministration",pv),xC={};var yC=Symbol.iterator;var zC=Symbol.toStringTag;var cy=function(){function b(m,I,W){var ia=this;
void 0===I&&(I=Ma);void 0===W&&(W="ObservableMap");this.name_=this.enhancer_=void 0;this[Zg]=xC;this.dehancer=this.changeListeners_=this.interceptors_=this.keysAtom_=this.hasMap_=this.data_=void 0;this.enhancer_=I;this.name_=W;ma(Map)||n(18);this.keysAtom_=Za("ObservableMap.keys()");this.data_=new Map;this.hasMap_=new Map;Gb(!0,function(){ia.merge(m)})}var g=b.prototype;g.has_=function(m){return this.data_.has(m)};g.has=function(m){var I=this;if(!Ge.trackingDerivation)return this.has_(m);var W=this.hasMap_.get(m);
if(!W){var ia=W=new gb(this.has_(m),fb,"ObservableMap.key?",!1);this.hasMap_.set(m,ia);vc(ia,function(){return I.hasMap_["delete"](m)})}return W.get()};g.set=function(m,I){var W=this.has_(m);if(ce(this)){I=nc(this,{type:W?Qo:"add",object:this,newValue:I,name:m});if(!I)return this;I=I.newValue}W?this.updateValue_(m,I):this.addValue_(m,I);return this};g["delete"]=function(m){var I=this;if(ce(this)&&!nc(this,{type:"delete",object:this,name:m}))return!1;if(this.has_(m)){var W=Ne(this),ia=W?{observableKind:"map",
debugObjectName:this.name_,type:"delete",object:this,oldValue:this.data_.get(m).value_,name:m}:null;Ld(function(){var sa;I.keysAtom_.reportChanged();null==(sa=I.hasMap_.get(m))?void 0:sa.setNewValue_(!1);I.data_.get(m).setNewValue_(void 0);I.data_["delete"](m)});W&&bf(this,ia);return!0}return!1};g.updateValue_=function(m,I){var W=this.data_.get(m);I=W.prepareNewValue_(I);if(I!==Ge.UNCHANGED){var ia=Ne(this);m=ia?{observableKind:"map",debugObjectName:this.name_,type:Qo,object:this,oldValue:W.value_,
name:m,newValue:I}:null;W.setNewValue_(I);ia&&bf(this,m)}};g.addValue_=function(m,I){var W=this;Ld(function(){var La,Va=new gb(I,W.enhancer_,"ObservableMap.key",!1);W.data_.set(m,Va);I=Va.value_;null==(La=W.hasMap_.get(m))?void 0:La.setNewValue_(!0);W.keysAtom_.reportChanged()});var ia=Ne(this),sa=ia?{observableKind:"map",debugObjectName:this.name_,type:"add",object:this,name:m,newValue:I}:null;ia&&bf(this,sa)};g.get=function(m){return this.has(m)?this.dehanceValue_(this.data_.get(m).get()):this.dehanceValue_(void 0)};
g.dehanceValue_=function(m){return void 0!==this.dehancer?this.dehancer(m):m};g.keys=function(){this.keysAtom_.reportObserved();return this.data_.keys()};g.values=function(){var m=this,I=this.keys();return cb({next:function(){var W=I.next(),ia=W.done;W=W.value;return{done:ia,value:ia?void 0:m.get(W)}}})};g.entries=function(){var m=this,I=this.keys();return cb({next:function(){var W=I.next(),ia=W.done;W=W.value;return{done:ia,value:ia?void 0:[W,m.get(W)]}}})};g[yC]=function(){return this.entries()};
g.forEach=function(m,I){for(var W=Ha(this),ia;!(ia=W()).done;)ia=ia.value,m.call(I,ia[1],ia[0],this)};g.merge=function(m){var I=this;Jp(m)&&(m=new Map(m));Ld(function(){H(m)?ba(m).forEach(function(W){return I.set(W,m[W])}):Array.isArray(m)?m.forEach(function(W){return I.set(W[0],W[1])}):O(m)?(m.constructor!==Map&&n(19,m),m.forEach(function(W,ia){return I.set(ia,W)})):null!==m&&void 0!==m&&n(20,m)});return this};g.clear=function(){var m=this;Ld(function(){Md(function(){for(var I=Ha(m.keys()),W;!(W=
I()).done;)m["delete"](W.value)})})};g.replace=function(m){var I=this;Ld(function(){for(var W=gd(m),ia=new Map,sa=!1,La=Ha(I.data_.keys()),Va;!(Va=La()).done;)if(Va=Va.value,!W.has(Va))if(I["delete"](Va))sa=!0;else{var $a=I.data_.get(Va);ia.set(Va,$a)}for(W=Ha(W.entries());!(La=W()).done;)Va=La.value,La=Va[0],$a=Va[1],Va=I.data_.has(La),I.set(La,$a),I.data_.has(La)&&($a=I.data_.get(La),ia.set(La,$a),Va||(sa=!0));if(!sa)if(I.data_.size!==ia.size)I.keysAtom_.reportChanged();else for(sa=I.data_.keys(),
W=ia.keys(),La=sa.next(),Va=W.next();!La.done;){if(La.value!==Va.value){I.keysAtom_.reportChanged();break}La=sa.next();Va=W.next()}I.data_=ia});return this};g.toString=function(){return"[object ObservableMap]"};g.toJSON=function(){return Array.from(this)};g.observe_=function(m,I){return Wf(this,m)};g.intercept_=function(m){return qd(this,m)};K(b,[{key:"size",get:function(){this.keysAtom_.reportObserved();return this.data_.size}},{key:zC,get:function(){return"Map"}}]);return b}(),Jp=D("ObservableMap",
cy),AC={};var BC=Symbol.iterator;var CC=Symbol.toStringTag;var dy=function(){function b(m,I,W){void 0===I&&(I=Ma);void 0===W&&(W="ObservableSet");this.name_=void 0;this[Zg]=AC;this.data_=new Set;this.enhancer_=this.dehancer=this.interceptors_=this.changeListeners_=this.atom_=void 0;this.name_=W;ma(Set)||n(22);this.atom_=Za(this.name_);this.enhancer_=function(ia,sa){return I(ia,sa,W)};m&&this.replace(m)}var g=b.prototype;g.dehanceValue_=function(m){return void 0!==this.dehancer?this.dehancer(m):m};
g.clear=function(){var m=this;Ld(function(){Md(function(){for(var I=Ha(m.data_.values()),W;!(W=I()).done;)m["delete"](W.value)})})};g.forEach=function(m,I){for(var W=Ha(this),ia;!(ia=W()).done;)ia=ia.value,m.call(I,ia,ia,this)};g.add=function(m){var I=this;if(ce(this)&&!nc(this,{type:"add",object:this,newValue:m}))return this;if(!this.has(m)){Ld(function(){I.data_.add(I.enhancer_(m,void 0));I.atom_.reportChanged()});var W=Ne(this),ia=W?{observableKind:"set",debugObjectName:this.name_,type:"add",object:this,
newValue:m}:null;W&&bf(this,ia)}return this};g["delete"]=function(m){var I=this;if(ce(this)&&!nc(this,{type:"delete",object:this,oldValue:m}))return!1;if(this.has(m)){var W=Ne(this),ia=W?{observableKind:"set",debugObjectName:this.name_,type:"delete",object:this,oldValue:m}:null;Ld(function(){I.atom_.reportChanged();I.data_["delete"](m)});W&&bf(this,ia);return!0}return!1};g.has=function(m){this.atom_.reportObserved();return this.data_.has(this.dehanceValue_(m))};g.entries=function(){var m=0,I=Array.from(this.keys()),
W=Array.from(this.values());return cb({next:function(){var ia=m;m+=1;return ia<W.length?{value:[I[ia],W[ia]],done:!1}:{done:!0}}})};g.keys=function(){return this.values()};g.values=function(){this.atom_.reportObserved();var m=this,I=0,W=Array.from(this.data_.values());return cb({next:function(){return I<W.length?{value:m.dehanceValue_(W[I++]),done:!1}:{done:!0}}})};g.replace=function(m){var I=this;Jq(m)&&(m=new Set(m));Ld(function(){Array.isArray(m)?(I.clear(),m.forEach(function(W){return I.add(W)})):
P(m)?(I.clear(),m.forEach(function(W){return I.add(W)})):null!==m&&void 0!==m&&n("Cannot initialize set from "+m)});return this};g.observe_=function(m,I){return Wf(this,m)};g.intercept_=function(m){return qd(this,m)};g.toJSON=function(){return Array.from(this)};g.toString=function(){return"[object ObservableSet]"};g[BC]=function(){return this.values()};K(b,[{key:"size",get:function(){this.atom_.reportObserved();return this.data_.size}},{key:CC,get:function(){return"Set"}}]);return b}(),Jq=D("ObservableSet",
dy),ey=Object.create(null),fy=function(){function b(m,I,W,ia){void 0===I&&(I=new Map);void 0===ia&&(ia=pq);this.pendingKeys_=this.appliedAnnotations_=this.isPlainObject_=this.proxy_=this.interceptors_=this.changeListeners_=this.keysAtom_=this.defaultAnnotation_=this.values_=this.target_=void 0;this.target_=m;this.values_=I;this.name_=W;this.defaultAnnotation_=ia;this.keysAtom_=new ro("ObservableObject.keys");this.isPlainObject_=H(this.target_)}var g=b.prototype;g.getObservablePropValue_=function(m){return this.values_.get(m).get()};
g.setObservablePropValue_=function(m,I){var W=this.values_.get(m);if(W instanceof Ic)return W.set(I),!0;if(ce(this)){I=nc(this,{type:Qo,object:this.proxy_||this.target_,name:m,newValue:I});if(!I)return null;I=I.newValue}I=W.prepareNewValue_(I);if(I!==Ge.UNCHANGED){var ia=Ne(this);m=ia?{type:Qo,observableKind:"object",debugObjectName:this.name_,object:this.proxy_||this.target_,oldValue:W.value_,name:m,newValue:I}:null;W.setNewValue_(I);ia&&bf(this,m)}return!0};g.get_=function(m){Ge.trackingDerivation&&
!F(this.target_,m)&&this.has_(m);return this.target_[m]};g.set_=function(m,I,W){void 0===W&&(W=!1);if(F(this.target_,m)){if(this.values_.has(m))return this.setObservablePropValue_(m,I);if(W)return Reflect.set(this.target_,m,I);this.target_[m]=I;return!0}return this.extend_(m,{value:I,enumerable:!0,writable:!0,configurable:!0},this.defaultAnnotation_,W)};g.has_=function(m){if(!Ge.trackingDerivation)return m in this.target_;this.pendingKeys_||(this.pendingKeys_=new Map);var I=this.pendingKeys_.get(m);
I||(I=new gb(m in this.target_,fb,"ObservableObject.key?",!1),this.pendingKeys_.set(m,I));return I.get()};g.make_=function(m,I){!0===I&&(I=this.defaultAnnotation_);if(!1!==I){if(!(m in this.target_)){var W;if(null!=(W=this.target_[Sl])&&W[m])return;n(1,I.annotationType_,this.name_+"."+m.toString())}for(W=this.target_;W&&W!==Vn;){var ia=oo(W,m);if(ia){ia=I.make_(this,m,ia,W);if(0===ia)return;if(1===ia)break}W=Object.getPrototypeOf(W)}var sa;null==(sa=this.target_[Sl])?!0:delete sa[m]}};g.extend_=function(m,
I,W,ia){void 0===ia&&(ia=!1);!0===W&&(W=this.defaultAnnotation_);if(!1===W)return this.defineProperty_(m,I,ia);if(I=W.extend_(this,m,I,ia)){var sa;null==(sa=this.target_[Sl])?!0:delete sa[m]}return I};g.defineProperty_=function(m,I,W){void 0===W&&(W=!1);try{nd();var ia=this.delete_(m);if(!ia)return ia;if(ce(this)){var sa=nc(this,{object:this.proxy_||this.target_,name:m,type:"add",newValue:I.value});if(!sa)return null;var La=sa.newValue;I.value!==La&&(I=Z({},I,{value:La}))}if(W){if(!Reflect.defineProperty(this.target_,
m,I))return!1}else dn(this.target_,m,I);this.notifyPropertyAddition_(m,I.value)}finally{Sd()}return!0};g.defineObservableProperty_=function(m,I,W,ia){void 0===ia&&(ia=!1);try{nd();var sa=this.delete_(m);if(!sa)return sa;if(ce(this)){var La=nc(this,{object:this.proxy_||this.target_,name:m,type:"add",newValue:I});if(!La)return null;I=La.newValue}var Va=ke(m),$a={configurable:Ge.safeDescriptors?this.isPlainObject_:!0,enumerable:!0,get:Va.get,set:Va.set};if(ia){if(!Reflect.defineProperty(this.target_,
m,$a))return!1}else dn(this.target_,m,$a);var lb=new gb(I,W,"ObservableObject.key",!1);this.values_.set(m,lb);this.notifyPropertyAddition_(m,lb.value_)}finally{Sd()}return!0};g.defineComputedProperty_=function(m,I,W){void 0===W&&(W=!1);try{nd();var ia=this.delete_(m);if(!ia)return ia;if(ce(this)&&!nc(this,{object:this.proxy_||this.target_,name:m,type:"add",newValue:void 0}))return null;I.name||(I.name="ObservableObject.key");I.context=this.proxy_||this.target_;var sa=ke(m),La={configurable:Ge.safeDescriptors?
this.isPlainObject_:!0,enumerable:!1,get:sa.get,set:sa.set};if(W){if(!Reflect.defineProperty(this.target_,m,La))return!1}else dn(this.target_,m,La);this.values_.set(m,new Ic(I));this.notifyPropertyAddition_(m,void 0)}finally{Sd()}return!0};g.delete_=function(m,I){void 0===I&&(I=!1);if(!F(this.target_,m))return!0;if(ce(this)&&!nc(this,{object:this.proxy_||this.target_,name:m,type:"remove"}))return null;try{var W,ia;nd();var sa=Ne(this),La=this.values_.get(m),Va=void 0;if(!La&&sa){var $a;Va=null==($a=
oo(this.target_,m))?void 0:$a.value}if(I){if(!Reflect.deleteProperty(this.target_,m))return!1}else delete this.target_[m];La&&(this.values_["delete"](m),La instanceof gb&&(Va=La.value_),gc(La));this.keysAtom_.reportChanged();null==(W=this.pendingKeys_)?void 0:null==(ia=W.get(m))?void 0:ia.set(m in this.target_);if(sa){var lb={type:"remove",observableKind:"object",object:this.proxy_||this.target_,debugObjectName:this.name_,oldValue:Va,name:m};sa&&bf(this,lb)}}finally{Sd()}return!0};g.observe_=function(m,
I){return Wf(this,m)};g.intercept_=function(m){return qd(this,m)};g.notifyPropertyAddition_=function(m,I){var W,ia,sa=Ne(this);sa&&(I=sa?{type:"add",observableKind:"object",debugObjectName:this.name_,object:this.proxy_||this.target_,name:m,newValue:I}:null,sa&&bf(this,I));null==(W=this.pendingKeys_)?void 0:null==(ia=W.get(m))?void 0:ia.set(!0);this.keysAtom_.reportChanged()};g.ownKeys_=function(){this.keysAtom_.reportObserved();return vp(this.target_)};g.keys_=function(){this.keysAtom_.reportObserved();
return Object.keys(this.target_)};return b}(),DC=D("ObservableObjectAdministration",fy),vC=Xe(0),lv=0,Yx=function(){};(function(b,g){Object.setPrototypeOf?Object.setPrototypeOf(b.prototype,g):void 0!==b.prototype.__proto__?b.prototype.__proto__=g:b.prototype=g})(Yx,Array.prototype);var mv=function(b,g,m){function I(ia,sa,La,Va){void 0===La&&(La="ObservableArray");void 0===Va&&(Va=!1);var $a=b.call(this)||this;sa=new pv(La,sa,Va,!0);sa.proxy_=pa($a);Q(pa($a),Zg,sa);ia&&ia.length&&(sa=xc(!0),$a.spliceWithArray(0,
0,ia),Ge.allowStateChanges=sa);Object.defineProperty(pa($a),"0",vC);return $a}ea(I,b);var W=I.prototype;W.concat=function(){this[Zg].atom_.reportObserved();for(var ia=arguments.length,sa=Array(ia),La=0;La<ia;La++)sa[La]=arguments[La];return Array.prototype.concat.apply(this.slice(),sa.map(function(Va){return jb(Va)?Va.slice():Va}))};W[m]=function(){var ia=this,sa=0;return cb({next:function(){return sa<ia.length?{value:ia[sa++],done:!1}:{done:!0,value:void 0}}})};K(I,[{key:"length",get:function(){return this[Zg].getArrayLength_()},
set:function(ia){this[Zg].setArrayLength_(ia)}},{key:g,get:function(){return"Array"}}]);return I}(Yx,Symbol.toStringTag,Symbol.iterator);Object.entries(It).forEach(function(b){var g=b[0];b=b[1];"concat"!==g&&M(mv.prototype,g,b)});qe(1E3);var $x=Vn.toString;["Symbol","Map","Set"].forEach(function(b){"undefined"===typeof R()[b]&&n("MobX requires global '"+b+"' to be available or polyfilled")});"object"===typeof __MOBX_DEVTOOLS_GLOBAL_HOOK__&&__MOBX_DEVTOOLS_GLOBAL_HOOK__.injectMobx({spy:uc,extras:{getDebugName:Ab},
$mobx:Zg});var ob=V(586),jm=class{constructor(b){Qa(this,"props");Qa(this,"aspectRatio");Qa(this,"type");Qa(this,"hideCloneHandles",!1);Qa(this,"hideResizeHandles",!1);Qa(this,"hideRotateHandle",!1);Qa(this,"hideContextBar",!1);Qa(this,"hideSelectionDetail",!1);Qa(this,"hideSelection",!1);Qa(this,"canChangeAspectRatio",!0);Qa(this,"canUnmount",!0);Qa(this,"canResize",[!0,!0]);Qa(this,"canScale",!0);Qa(this,"canFlip",!0);Qa(this,"canEdit",!1);Qa(this,"canBind",!1);Qa(this,"nonce");Qa(this,"bindingDistance",
4);Qa(this,"isDirty",!1);Qa(this,"lastSerialized");Qa(this,"getCenter",()=>We.getBoundsCenter(this.bounds));Qa(this,"getRotatedBounds",()=>{const {bounds:ia,props:{rotation:sa}}=this;return sa?We.getBoundsFromPoints(We.getRotatedCorners(ia,sa)):ia});Qa(this,"hitTestPoint",ia=>{var sa=this.rotatedBounds;if(!this.props.rotation)return zh.pointInBounds(ia,sa);sa=We.getRotatedCorners(sa,this.props.rotation);return zh.pointInPolygon(ia,sa)});Qa(this,"hitTestLineSegment",(ia,sa)=>{const La=We.getBoundsFromPoints([ia,
sa]),{rotatedBounds:Va,props:{rotation:$a=0}}=this;return We.boundsContain(Va,La)||$a?k(ia,sa,We.getRotatedCorners(this.bounds)).didIntersect:0<t(Va,ia,sa).length});Qa(this,"hitTestBounds",ia=>{const {rotatedBounds:sa,props:{rotation:La=0}}=this,Va=We.getRotatedCorners(this.bounds,La);return We.boundsContain(ia,sa)||0<z([ia.minX,ia.minY],[ia.width,ia.height],Va).length});Qa(this,"getExpandedBounds",()=>We.expandBounds(this.getBounds(),this.bindingDistance));Qa(this,"getBindingPoint",(ia,sa,La,Va)=>
{var $a=this.getBounds(),lb=this.getExpandedBounds();if(zh.pointInBounds(ia,lb)){var ub=C(sa,La,lb).filter(Rb=>Rb.didIntersect).map(Rb=>Rb.points[0]);if(ub.length)return La=this.getCenter(),ub=ub.sort((Rb,ec)=>Yd.dist(ec,sa)-Yd.dist(Rb,sa))[0],ub=Yd.med(ia,ub),Va?(Va=2>Yd.dist(ia,La)?La:ia,$a=0):(Va=2>Yd.distanceToLineSegment(ia,ub,La)?La:ub,$a=zh.pointInBounds(ia,$a)?this.bindingDistance:Math.max(this.bindingDistance,We.getBoundsSides($a).map(Rb=>Yd.distanceToLineSegment(Rb[1][0],Rb[1][1],ia)).sort((Rb,
ec)=>Rb-ec)[0])),lb=Yd.divV(Yd.sub(Va,[lb.minX,lb.minY]),[lb.width,lb.height]),{point:Yd.clampV(lb,0,1),distance:$a}}});Qa(this,"getSerialized",()=>Dc(Ga(re({},this.props),{type:this.type,nonce:this.nonce})));Qa(this,"getCachedSerialized",()=>{!this.isDirty&&this.lastSerialized||Ld(()=>{this.setIsDirty(!1);this.setLastSerialized(this.getSerialized())});if(this.lastSerialized)return this.lastSerialized;throw Error("Should not get here for getCachedSerialized");});Qa(this,"validateProps",ia=>ia);Qa(this,
"update",(ia,sa=!1,La=!1)=>{sa||this.isDirty||this.setIsDirty(!0);sa||La||this.incNonce();Object.assign(this.props,this.validateProps(ia));return this});Qa(this,"clone",()=>new this.constructor(this.serialized));Qa(this,"onResetBounds",ia=>this);Qa(this,"scale",[1,1]);Qa(this,"onResizeStart",ia=>{var sa;this.scale=[...(null!=(sa=this.props.scale)?sa:[1,1])];return this});Qa(this,"onResize",(ia,sa)=>{const {bounds:La,rotation:Va,scale:[$a,lb]}=sa;ia=[...this.scale];0>$a&&(ia[0]*=-1);0>lb&&(ia[1]*=
-1);this.update({point:[La.minX,La.minY],scale:ia,rotation:Va});return this});Qa(this,"onHandleChange",(ia,{id:sa,delta:La})=>{if(void 0!==ia.handles){var Va=Nq(ia.handles);Va[sa]=Ga(re({},Va[sa]),{point:Yd.add(La,ia.handles[sa].point)});var $a=We.getCommonTopLeft(Object.values(Va).map(lb=>lb.point));Object.values(Va).forEach(lb=>{lb.point=Yd.sub(lb.point,$a)});this.update({point:Yd.add(ia.point,$a),handles:Va})}});var g,m;const I=this.constructor.id,W=null!=(g=this.constructor.defaultProps)?g:{};
this.type=I;this.props=re(re({scale:[1,1]},W),b);this.nonce=null!=(m=b.nonce)?m:Date.now();pg(this)}get id(){return this.props.id}setNonce(b){this.nonce=b}incNonce(){this.nonce++}setIsDirty(b){this.isDirty=b}setLastSerialized(b){this.lastSerialized=b}get center(){return this.getCenter()}get bounds(){return this.getBounds()}get rotatedBounds(){return this.getRotatedBounds()}get serialized(){return this.getCachedSerialized()}getShapeSVGJsx(b){b=this.getBounds();const {stroke:g,strokeWidth:m,strokeType:I,
opacity:W,fill:ia,noFill:sa,borderRadius:La}=this.props;return(0,ob.jsx)("rect",{fill:sa?"none":zf(ia,"background"),stroke:zf(g,"stroke"),strokeWidth:null!=m?m:2,strokeDasharray:"dashed"===I?"8 2":void 0,fillOpacity:null!=W?W:.2,width:b.width,height:b.height,rx:La,ry:La})}};Qa(jm,"type");Lb([zg],jm.prototype,"props",2);Lb([zg],jm.prototype,"canResize",2);Lb([zg],jm.prototype,"nonce",2);Lb([zg],jm.prototype,"isDirty",2);Lb([zg],jm.prototype,"lastSerialized",2);Lb([yg],jm.prototype,"id",1);Lb([cf],
jm.prototype,"setNonce",1);Lb([cf],jm.prototype,"incNonce",1);Lb([cf],jm.prototype,"setIsDirty",1);Lb([cf],jm.prototype,"setLastSerialized",1);Lb([yg],jm.prototype,"center",1);Lb([yg],jm.prototype,"bounds",1);Lb([yg],jm.prototype,"rotatedBounds",1);Lb([yg],jm.prototype,"serialized",1);Lb([cf],jm.prototype,"update",2);var hn=class extends jm{constructor(b={}){super(b);Qa(this,"canBind",!0);Qa(this,"getBounds",()=>{const [g,m]=this.props.point,[I,W]=this.props.size;return{minX:g,minY:m,maxX:g+I,maxY:m+
W,width:I,height:W}});Qa(this,"getRotatedBounds",()=>We.getBoundsFromPoints(We.getRotatedCorners(this.bounds,this.props.rotation)));Qa(this,"onResize",(g,m)=>{const {bounds:I,rotation:W,scale:[ia,sa]}=m;g=[...this.scale];0>ia&&(g[0]*=-1);0>sa&&(g[1]*=-1);this.update({point:[I.minX,I.minY],scale:g,rotation:W});return this.update({rotation:W,point:[I.minX,I.minY],size:[Math.max(1,I.width),Math.max(1,I.height)],scale:g})});Qa(this,"validateProps",g=>{void 0!==g.size&&(g.size[0]=Math.max(g.size[0],1),
g.size[1]=Math.max(g.size[1],1));return g});pg(this)}};Qa(hn,"id","box");Qa(hn,"defaultProps",{id:"box",type:"box",parentId:"page",point:[0,0],size:[100,100]});var nr=class extends jm{constructor(b={}){super(b);Qa(this,"getBounds",()=>{const {pointBounds:g,props:{point:m}}=this;return We.translateBounds(g,m)});Qa(this,"getRotatedBounds",()=>{const {props:{rotation:g,point:m},bounds:I,rotatedPoints:W}=this;return g?We.translateBounds(We.getBoundsFromPoints(W),m):I});Qa(this,"normalizedPoints",[]);
Qa(this,"isResizeFlippedX",!1);Qa(this,"isResizeFlippedY",!1);Qa(this,"onResizeStart",()=>{var g;const {bounds:m,props:{points:I}}=this;this.scale=[...(null!=(g=this.props.scale)?g:[1,1])];const W=[m.width,m.height];this.normalizedPoints=I.map(ia=>ud.divV(ia,W));return this});Qa(this,"onResize",(g,m)=>{const {bounds:I,scale:[W,ia]}=m,sa=[I.width,I.height];g=[...this.scale];0>W&&(g[0]*=-1);0>ia&&(g[1]*=-1);return this.update(W||ia?{point:[I.minX,I.minY],points:this.normalizedPoints.map(La=>ud.mulV(La,
sa).concat(La[2])),scale:g}:{point:[I.minX,I.minY],points:this.normalizedPoints.map(La=>ud.mulV(La,sa).concat(La[2]))})});Qa(this,"hitTestPoint",g=>{const {props:{points:m,point:I}}=this;return zh.pointNearToPolyline(ud.sub(g,I),m)});Qa(this,"hitTestLineSegment",(g,m)=>{const {bounds:I,props:{points:W,point:ia}}=this;if(zh.pointInBounds(g,I)||zh.pointInBounds(m,I)||0<t(I,g,m).length){const sa=ud.sub(g,ia),La=ud.sub(m,ia);return k(sa,La,W).didIntersect||!!W.find(Va=>5>ud.dist(sa,Va)||5>ud.dist(La,
Va))}return!1});Qa(this,"hitTestBounds",g=>{const {rotatedBounds:m,props:{points:I,point:W}}=this,ia=We.translateBounds(g,ud.neg(W));return We.boundsContain(g,m)||I.every(sa=>zh.pointInBounds(sa,ia))||We.boundsCollide(g,m)&&0<J([ia.minX,ia.minY],[ia.width,ia.height],I).length});pg(this)}get pointBounds(){const {props:{points:b}}=this;return We.getBoundsFromPoints(b)}get rotatedPoints(){const {props:{point:b,points:g,rotation:m},center:I}=this;if(!m)return g;const W=ud.sub(I,b);return g.map(ia=>ud.rotWith(ia,
W,m))}};Qa(nr,"id","draw");Qa(nr,"defaultProps",{id:"draw",type:"draw",parentId:"page",point:[0,0],points:[],isComplete:!1});Lb([yg],nr.prototype,"pointBounds",1);Lb([yg],nr.prototype,"rotatedPoints",1);var nv=class extends hn{constructor(b={}){super(b);Qa(this,"getBounds",()=>{const {props:{point:[g,m],size:[I,W]}}=this;return We.getRotatedEllipseBounds(g,m,I/2,W/2,0)});Qa(this,"getRotatedBounds",()=>{const {props:{point:[g,m],size:[I,W],rotation:ia}}=this;return We.getRotatedEllipseBounds(g,m,I/
2,W/2,ia)});Qa(this,"hitTestPoint",g=>{const {props:{size:m,rotation:I},center:W}=this;return zh.pointInEllipse(g,W,m[0],m[1],I||0)});Qa(this,"hitTestLineSegment",(g,m)=>{const {props:{size:[I,W],rotation:ia=0},center:sa}=this;return v(g,m,sa,I,W,ia).didIntersect});Qa(this,"hitTestBounds",g=>{const {props:{size:[m,I],rotation:W=0},rotatedBounds:ia}=this;var sa;if(!(sa=We.boundsContain(g,ia))){const {minX:La,minY:Va,width:$a,height:lb}=g;sa=0<u(this.center,m/2,I/2,W,[La,Va],[$a,lb]).length}return sa});
pg(this)}};Qa(nv,"id","ellipse");Qa(nv,"defaultProps",{id:"ellipse",type:"ellipse",parentId:"page",point:[0,0],size:[100,100]});var ov=class extends hn{constructor(b={}){super(b);Qa(this,"onResetBounds",g=>{const {clipping:m,size:I,point:W}=this.props;if(m){const [ia,sa,La,Va]=Array.isArray(m)?m:[m,m,m,m];return this.update({clipping:0,point:[W[0]-Va,W[1]-ia],size:[I[0]+(Va-sa),I[1]+(ia-La)]})}if(g.asset){const {size:[ia,sa]}=g.asset;this.update({clipping:0,point:[W[0]+I[0]/2-ia/2,W[1]+I[1]/2-sa/
2],size:[ia,sa]})}return this});Qa(this,"onResize",(g,m)=>{const {bounds:I,clip:W,scale:ia}=m;({clipping:m}=this.props);const {clipping:sa}=g;if(W){const {point:[La,Va],size:[$a,lb]}=g,[ub,Rb,ec,Vb]=sa?Array.isArray(sa)?sa:[sa,sa,sa,sa]:[0,0,0,0];m=[ub+(I.minY-Va),Rb+(I.maxX-(La+$a)),ec+(I.maxY-(Va+lb)),Vb+(I.minX-La)]}else void 0!==sa&&(m=Array.isArray(sa)?sa:[sa,sa,sa,sa],m=[m[0]*ia[1],m[1]*ia[0],m[2]*ia[1],m[3]*ia[0]]);if(m&&Array.isArray(m)){const La=m;La.every((Va,$a)=>0===$a||Va===La[$a-1])&&
(m=La[0])}return this.update({point:[I.minX,I.minY],size:[Math.max(1,I.width),Math.max(1,I.height)],clipping:m})});pg(this)}};Qa(ov,"id","ellipse");Qa(ov,"defaultProps",{id:"ellipse",type:"ellipse",parentId:"page",point:[0,0],size:[100,100],clipping:0,objectFit:"none",assetId:""});var Zx=class extends jm{constructor(b={}){super(b);Qa(this,"getBounds",()=>{const {points:g,props:{point:m}}=this;return We.translateBounds(We.getBoundsFromPoints(g),m)});Qa(this,"getRotatedBounds",()=>{const {rotatedPoints:g,
props:{point:m}}=this;return We.translateBounds(We.getBoundsFromPoints(g),m)});Qa(this,"normalizedHandles",[]);Qa(this,"onResizeStart",()=>{var g;const {props:{handles:m},bounds:I}=this;this.scale=[...(null!=(g=this.props.scale)?g:[1,1])];const W=[I.width,I.height];this.normalizedHandles=Object.values(m).map(ia=>ud.divV(ia.point,W));return this});Qa(this,"onResize",(g,m)=>{const {bounds:I,scale:[W,ia]}=m,{props:{handles:sa},normalizedHandles:La}=this,Va=[I.width,I.height];g=[...this.scale];0>W&&(g[0]*=
-1);0>ia&&(g[1]*=-1);return this.update({point:[I.minX,I.minY],handles:Object.values(sa).map(($a,lb)=>Ga(re({},$a),{point:ud.mulV(La[lb],Va)})),scale:g})});Qa(this,"hitTestPoint",g=>{const {points:m}=this;return zh.pointNearToPolyline(ud.sub(g,this.props.point),m)});Qa(this,"hitTestLineSegment",(g,m)=>{const {bounds:I,points:W,props:{point:ia}}=this;if(zh.pointInBounds(g,I)||zh.pointInBounds(m,I)||0<t(I,g,m).length){const sa=ud.sub(g,ia),La=ud.sub(m,ia);return k(sa,La,W).didIntersect||!!W.find(Va=>
5>ud.dist(sa,Va)||5>ud.dist(La,Va))}return!1});Qa(this,"hitTestBounds",g=>{const {rotatedBounds:m,points:I,props:{point:W}}=this,ia=We.translateBounds(g,ud.neg(W));return We.boundsContain(g,m)||I.every(sa=>zh.pointInBounds(sa,ia))||We.boundsCollide(g,m)&&0<J([ia.minX,ia.minY],[ia.width,ia.height],I).length});Qa(this,"validateProps",g=>{g.point&&(g.point=[0,0]);void 0!==g.handles&&1>Object.values(g.handles).length&&(g.handles=Zx.defaultProps.handles);return g});pg(this)}get points(){return Object.values(this.props.handles).map(b=>
b.point)}get centroid(){const {points:b}=this;return Uj.getPolygonCentroid(b)}get rotatedPoints(){const {centroid:b,props:{handles:g,rotation:m}}=this;return m?Object.values(g).map(I=>ud.rotWith(I.point,b,m)):this.points}},or=Zx;Qa(or,"id","polyline");Qa(or,"defaultProps",{id:"polyline",type:"polyline",parentId:"page",point:[0,0],handles:{}});Lb([yg],or.prototype,"points",1);Lb([yg],or.prototype,"centroid",1);Lb([yg],or.prototype,"rotatedPoints",1);var by=class extends or{constructor(b={}){super(b);
Qa(this,"hideResizeHandles",!0);Qa(this,"hideRotateHandle",!0);Qa(this,"validateProps",g=>{g.point&&(g.point=[0,0]);void 0!==g.handles&&1>Object.values(g.handles).length&&(g.handles=by.defaultProps.handles);return g});Qa(this,"getHandlesChange",(g,m)=>{var I=yi(g.handles,m);I=yi(I,{start:{point:Yd.toFixed(I.start.point)},end:{point:Yd.toFixed(I.end.point)}});if(!Yd.isEqual(I.start.point,I.end.point)){m={point:g.point,handles:Nq(I)};g=g.point;I=We.translateBounds(We.getBoundsFromPoints(Object.values(I).map(ia=>
ia.point)),m.point);var W=Yd.sub([I.minX,I.minY],g);Yd.isEqual(W,[0,0])||(Object.values(m.handles).forEach(ia=>{ia.point=Yd.toFixed(Yd.sub(ia.point,W))}),m.point=Yd.toFixed(Yd.add(m.point,W)));return m}});pg(this)}},ys=by;Qa(ys,"id","line");Qa(ys,"defaultProps",{id:"line",type:"line",parentId:"page",point:[0,0],handles:{start:{id:"start",canBind:!0,point:[0,0]},end:{id:"end",canBind:!0,point:[1,1]}}});var zp=class extends hn{constructor(b={}){super(b);Qa(this,"getRotatedBounds",()=>{const {rotatedVertices:g,
props:{point:m},offset:I}=this;return We.translateBounds(We.getBoundsFromPoints(g),ud.add(m,I))});Qa(this,"hitTestPoint",g=>{const {vertices:m}=this;return zh.pointInPolygon(ud.add(g,this.props.point),m)});Qa(this,"hitTestLineSegment",(g,m)=>{const {vertices:I,props:{point:W}}=this;return k(ud.sub(g,W),ud.sub(m,W),I).didIntersect});Qa(this,"hitTestBounds",g=>{const {rotatedBounds:m,offset:I,rotatedVertices:W,props:{point:ia}}=this,sa=We.translateBounds(g,ud.neg(ud.add(ia,I)));return We.boundsContain(g,
m)||W.every(La=>zh.pointInBounds(La,sa))||0<z([sa.minX,sa.minY],[sa.width,sa.height],W).length});Qa(this,"validateProps",g=>{g.point&&(g.point=[0,0]);void 0!==g.sides&&3>g.sides&&(g.sides=3);return g});pg(this)}get vertices(){return this.getVertices()}get pageVertices(){const {props:{point:b},vertices:g}=this;return g.map(m=>ud.add(m,b))}get centroid(){const {vertices:b}=this;return Uj.getPolygonCentroid(b)}get rotatedVertices(){const {vertices:b,centroid:g,props:{rotation:m}}=this;return m?b.map(I=>
ud.rotWith(I,g,m)):b}get offset(){const {props:{size:[b,g]}}=this,m=We.getBoundsCenter(We.getBoundsFromPoints(this.vertices));return ud.sub(ud.div([b,g],2),m)}getVertices(b=0){const {ratio:g,sides:m,size:I}=this.props;return 3===m?Uj.getTriangleVertices(I,b,g):Uj.getPolygonVertices(I,m,b,g)}};Qa(zp,"id","polygon");Qa(zp,"defaultProps",{id:"polygon",type:"polygon",parentId:"page",point:[0,0],size:[100,100],sides:5,ratio:1,isFlippedY:!1});Lb([yg],zp.prototype,"vertices",1);Lb([yg],zp.prototype,"pageVertices",
1);Lb([yg],zp.prototype,"centroid",1);Lb([yg],zp.prototype,"rotatedVertices",1);Lb([yg],zp.prototype,"offset",1);var kv=class extends hn{constructor(b={}){super(b);Qa(this,"canEdit",!0);Qa(this,"canFlip",!1);pg(this)}};Qa(kv,"id","text");Qa(kv,"defaultProps",{id:"text",type:"text",parentId:"page",isSizeLocked:!0,point:[0,0],size:[16,32],text:""});var Ft=class extends hn{constructor(b={}){super(b);Qa(this,"canEdit",!1);Qa(this,"canFlip",!1);Qa(this,"getBounds",()=>We.getCommonBounds(this.shapes.map(g=>
g.getBounds())));pg(this);this.canResize=[!1,!1]}getShapes(){throw Error("will be implemented other places");}get shapes(){return this.getShapes()}};Qa(Ft,"id","group");Qa(Ft,"defaultProps",{id:"group",type:"group",parentId:"page",point:[0,0],size:[0,0],children:[]});Lb([yg],Ft.prototype,"shapes",1);var pr=class{constructor(){Qa(this,"_id");Qa(this,"_initial");Qa(this,"_states");Qa(this,"_isActive",!1);Qa(this,"cursor");Qa(this,"_disposables",[]);Qa(this,"children",new Map([]));Qa(this,"registerStates",
m=>{m.forEach(I=>this.children.set(I.id,new I(this,this)));return this});Qa(this,"deregisterStates",m=>{m.forEach(I=>{var W;null==(W=this.children.get(I.id))?void 0:W.dispose();this.children.delete(I.id)});return this});Qa(this,"currentState",{});Qa(this,"transition",(m,I={})=>{if(0===this.children.size)throw Error(`Tool ${this.id} has no states, cannot transition to ${m}.`);const W=this.children.get(m),ia=this.currentState;if(!W)throw Error(`Could not find a state named ${m}.`);Ld(()=>{this.currentState?
(ia._events.onExit(Ga(re({},I),{toId:m})),ia.dispose(),W.registerKeyboardShortcuts(),this.setCurrentState(W),this._events.onTransition(Ga(re({},I),{fromId:ia.id,toId:m})),W._events.onEnter(Ga(re({},I),{fromId:ia.id}))):(this.currentState=W,W._events.onEnter(Ga(re({},I),{fromId:""})))});return this});Qa(this,"isIn",m=>{m=m.split(".").reverse();let I=this;for(;0<m.length;){const W=m.pop();if(!W)return!0;if(I.currentState.id===W){if(0===m.length)return!0;I=I.currentState}else break}return!1});Qa(this,
"isInAny",(...m)=>m.some(this.isIn));Qa(this,"forwardEvent",(m,...I)=>{var W,ia;(null==(ia=null==(W=this.currentState)?void 0:W._events)?0:ia[m])&&Ld(()=>{var sa;return null==(sa=this.currentState._events)?void 0:sa[m](...I)})});Qa(this,"_events",{onTransition:m=>{var I;null==(I=this.onTransition)?void 0:I.call(this,m)},onEnter:m=>{var I;this._isActive=!0;this.initial&&this.transition(this.initial,m);null==(I=this.onEnter)?void 0:I.call(this,m)},onExit:m=>{var I,W,ia;this._isActive=!1;null==(W=null==
(I=this.currentState)?void 0:I.onExit)?void 0:W.call(I,{toId:"parent"});null==(ia=this.onExit)?void 0:ia.call(this,m)},onPointerDown:(m,I)=>{var W;null==(W=this.onPointerDown)?void 0:W.call(this,m,I);this.forwardEvent("onPointerDown",m,I)},onPointerUp:(m,I)=>{var W;null==(W=this.onPointerUp)?void 0:W.call(this,m,I);this.forwardEvent("onPointerUp",m,I)},onPointerMove:(m,I)=>{var W;null==(W=this.onPointerMove)?void 0:W.call(this,m,I);this.forwardEvent("onPointerMove",m,I)},onPointerEnter:(m,I)=>{var W;
null==(W=this.onPointerEnter)?void 0:W.call(this,m,I);this.forwardEvent("onPointerEnter",m,I)},onPointerLeave:(m,I)=>{var W;null==(W=this.onPointerLeave)?void 0:W.call(this,m,I);this.forwardEvent("onPointerLeave",m,I)},onDoubleClick:(m,I)=>{var W;null==(W=this.onDoubleClick)?void 0:W.call(this,m,I);this.forwardEvent("onDoubleClick",m,I)},onKeyDown:(m,I)=>{var W;this._events.onModifierKey(m,I);null==(W=this.onKeyDown)?void 0:W.call(this,m,I);this.forwardEvent("onKeyDown",m,I)},onKeyUp:(m,I)=>{var W;
this._events.onModifierKey(m,I);null==(W=this.onKeyUp)?void 0:W.call(this,m,I);this.forwardEvent("onKeyUp",m,I)},onPinchStart:(m,I)=>{var W;null==(W=this.onPinchStart)?void 0:W.call(this,m,I);this.forwardEvent("onPinchStart",m,I)},onPinch:(m,I)=>{var W;null==(W=this.onPinch)?void 0:W.call(this,m,I);this.forwardEvent("onPinch",m,I)},onPinchEnd:(m,I)=>{var W;null==(W=this.onPinchEnd)?void 0:W.call(this,m,I);this.forwardEvent("onPinchEnd",m,I)},onModifierKey:(m,I)=>{switch(I.key){case "Shift":case "Alt":case "Ctrl":case "Meta":this._events.onPointerMove(m,
I)}}});Qa(this,"onEnter");Qa(this,"onExit");Qa(this,"onTransition");Qa(this,"onPointerDown");Qa(this,"onPointerUp");Qa(this,"onPointerMove");Qa(this,"onPointerEnter");Qa(this,"onPointerLeave");Qa(this,"onDoubleClick");Qa(this,"onKeyDown");Qa(this,"onKeyUp");Qa(this,"onPinchStart");Qa(this,"onPinch");Qa(this,"onPinchEnd");const b=this.constructor.initial,g=this.constructor.states;this._id=this.constructor.id;this._initial=b;this._states=g}dispose(){this._disposables.forEach(b=>b());this._disposables=
[];return this}get initial(){return this._initial}get states(){return this._states}get id(){return this._id}get isActive(){return this._isActive}get ascendants(){return[this]}get descendants(){return Array.from(this.children.values()).flatMap(b=>[b,...b.descendants])}setCurrentState(b){this.currentState=b}};Qa(pr,"id");Qa(pr,"shortcuts");Lb([zg],pr.prototype,"currentState",2);Lb([cf],pr.prototype,"setCurrentState",1);var jv=class extends pr{constructor(b,g){var m,I;super();Qa(this,"registerKeyboardShortcuts",
()=>{var W;null!=(W=this._shortcuts)&&W.length&&this._disposables.push(...this._shortcuts.map(({keys:ia,fn:sa})=>wp.registerShortcut(ia,La=>{this.isActive&&sa(this.root,this,La)})))});Qa(this,"_root");Qa(this,"_parent");Qa(this,"_shortcuts",[]);Qa(this,"children",new Map([]));Qa(this,"registerStates",W=>{W.forEach(ia=>this.children.set(ia.id,new ia(this,this._root)));return this});Qa(this,"deregisterStates",W=>{W.forEach(ia=>{var sa;null==(sa=this.children.get(ia.id))?void 0:sa.dispose();this.children.delete(ia.id)});
return this});this._parent=b;this._root=g;this.states&&0<this.states.length&&(this.registerStates(this.states),b=null!=(m=this.initial)?m:this.states[0].id,m=this.children.get(b))&&(this.setCurrentState(m),null==(I=this.currentState)?void 0:I._events.onEnter({fromId:"initial"}));this._shortcuts=this.constructor.shortcuts;pg(this)}get root(){return this._root}get parent(){return this._parent}get ascendants(){return this.parent?"ascendants"in this.parent?[...this.parent.ascendants,this]:[this.parent,
this]:[this]}};Qa(jv,"cursor");var yp=class extends jv{constructor(){super(...arguments);Qa(this,"isLocked",!1);Qa(this,"previous");Qa(this,"onEnter",({fromId:b})=>{this.previous=b;this.cursor&&this.app.cursors.setCursor(this.cursor)});Qa(this,"onTransition",b=>{({toId:b}=b);b=this.children.get(b);this.app.cursors.reset();b.cursor?this.app.cursors.setCursor(b.cursor):this.cursor&&this.app.cursors.setCursor(this.cursor)})}get app(){return this.root}},wi=class extends jv{get app(){return this.root}get tool(){return this.parent}},
Vx=class extends wi{constructor(){super(...arguments);Qa(this,"cursor","crosshair");Qa(this,"creatingShape");Qa(this,"aspectRatio");Qa(this,"initialBounds",{});Qa(this,"onEnter",()=>{const {currentPage:b,inputs:{originPoint:g,currentPoint:m}}=this.app;var {Shape:I}=this.tool;I=new I({id:Of(),type:I.id,parentId:b.id,point:[...g],fill:this.app.settings.color,stroke:this.app.settings.color,size:Yd.abs(Yd.sub(m,g))});this.initialBounds={minX:g[0],minY:g[1],maxX:g[0]+1,maxY:g[1]+1,width:1,height:1};I.canChangeAspectRatio||
(I.aspectRatio?(this.aspectRatio=I.aspectRatio,this.initialBounds.height=this.aspectRatio):(this.aspectRatio=1,this.initialBounds.height=1),this.initialBounds.width=1,this.initialBounds.maxY=this.initialBounds.minY+this.initialBounds.height);this.creatingShape=I;this.app.currentPage.addShapes(I);this.app.setSelectedShapes([I])});Qa(this,"onPointerMove",b=>{if(!b.order){if(!this.creatingShape)throw Error("Expected a creating shape.");({initialBounds:b}=this);var {currentPoint:g,originPoint:m,shiftKey:I}=
this.app.inputs;b=We.getTransformedBoundingBox(b,"bottom_right_corner",Yd.sub(g,m),0,I||this.creatingShape.props.isAspectRatioLocked||!this.creatingShape.canChangeAspectRatio);this.creatingShape.update({point:[b.minX,b.minY],size:[b.width,b.height]})}});Qa(this,"onPointerUp",()=>{this.tool.transition("idle");this.creatingShape&&this.app.setSelectedShapes([this.creatingShape]);this.app.transition("select");this.app.persist()});Qa(this,"onKeyDown",(b,g)=>{switch(g.key){case "Escape":if(!this.creatingShape)throw Error("Expected a creating shape.");
this.app.deleteShapes([this.creatingShape]);this.tool.transition("idle")}})}};Qa(Vx,"id","creating");var Wx=class extends wi{constructor(){super(...arguments);Qa(this,"onPointerDown",(b,g)=>{b.order||this.tool.transition("pointing")});Qa(this,"onPinchStart",(...b)=>{var g,m;this.app.transition("select",{returnTo:this.app.currentState.id});null==(m=(g=this.app._events).onPinchStart)?void 0:m.call(g,...b)});Qa(this,"onKeyDown",(b,g)=>{switch(g.key){case "Escape":this.app.transition("select")}})}};Qa(Wx,
"id","idle");var Xx=class extends wi{constructor(){super(...arguments);Qa(this,"onPointerMove",()=>{const {currentPoint:b,originPoint:g}=this.app.inputs;5<ud.dist(b,g)&&(this.tool.transition("creating"),this.app.setSelectedShapes(this.app.currentPage.shapes))});Qa(this,"onPointerUp",()=>{this.tool.transition("idle")})}};Qa(Xx,"id","pointing");var bp=class extends yp{constructor(){super(...arguments);Qa(this,"cursor","crosshair")}};Qa(bp,"id","box");Qa(bp,"states",[Wx,Xx,Vx]);Qa(bp,"initial","idle");
var Bx=class extends wi{constructor(){super(...arguments);Qa(this,"shape",{});Qa(this,"points",[[0,0,.5]]);Qa(this,"onPinchStart",(b,g)=>{this.tool.transition("pinching",{info:b,event:g})});Qa(this,"onEnter",()=>{var b;const {Shape:g,previousShape:m}=this.tool;var {originPoint:I}=this.app.inputs;this.app.history.pause();if(this.app.inputs.shiftKey&&m){this.shape=m;var {shape:W}=this;var ia=W.props.points[W.props.points.length-1];const La=ud.sub(I,W.props.point).concat(null!=(b=I[2])?b:.5);this.points=
[...W.props.points,ia,ia];const Va=Math.ceil(ud.dist(ia,I)/16);for(let $a=0,lb=$a/(Va-1);$a<Va;$a++){b=this.points;I=b.push;W=ud.lrp(ia,La,lb);var sa=ia[2];I.call(b,W.concat.call(W,sa+(La[2]-sa)*lb))}this.addNextPoint(La)}else this.tool.previousShape=void 0,this.points=[[0,0,null!=(ia=I[2])?ia:.5]],this.shape=new g({id:Of(),type:g.id,parentId:this.app.currentPage.id,point:I.slice(0,2),points:this.points,isComplete:!1,fill:this.app.settings.color,stroke:this.app.settings.color}),this.app.currentPage.addShapes(this.shape)});
Qa(this,"onPointerMove",()=>{const {shape:b}=this,{currentPoint:g,previousPoint:m}=this.app.inputs;ud.isEqual(m,g)||this.addNextPoint(ud.sub(g,b.props.point).concat(g[2]))});Qa(this,"onPointerUp",()=>{if(!this.shape)throw Error("Expected a creating shape.");this.app.history.resume();this.shape.update({isComplete:!0,points:this.tool.simplify?zh.simplify2(this.points,this.tool.simplifyTolerance):this.shape.props.points});this.tool.previousShape=this.shape;this.tool.transition("idle");this.app.persist()});
Qa(this,"onKeyDown",(b,g)=>{switch(g.key){case "Escape":if(!this.shape)throw Error("Expected a creating shape.");this.app.deleteShapes([this.shape]);this.tool.transition("idle")}})}addNextPoint(b){const {shape:g}=this,m=ud.min(b,[0,0]);this.points.push(b);0>m[0]||0>m[1]?(this.points=this.points.map(I=>ud.sub(I,m).concat(I[2])),g.update({point:ud.add(g.props.point,m),points:this.points})):g.update({points:this.points})}};Qa(Bx,"id","creating");var Cx=class extends wi{constructor(){super(...arguments);
Qa(this,"onPointerDown",(b,g)=>{b.order||this.tool.transition("creating")});Qa(this,"onPinchStart",(b,g)=>{this.tool.transition("pinching",{info:b,event:g})});Qa(this,"onKeyDown",(b,g)=>{switch(g.key){case "Escape":this.app.transition("select")}})}};Qa(Cx,"id","idle");var Dx=class extends wi{constructor(){super(...arguments);Qa(this,"origin",[0,0]);Qa(this,"prevDelta",[0,0]);Qa(this,"onEnter",b=>{this.prevDelta=b.info.delta;this.origin=b.info.point});Qa(this,"onPinch",b=>{this.app.viewport.pinchZoom(b.point,
b.delta,b.delta[2])});Qa(this,"onPinchEnd",()=>{this.tool.transition("idle")})}};Qa(Dx,"id","pinching");var vs=class extends yp{constructor(){super(...arguments);Qa(this,"cursor","crosshair");Qa(this,"simplify",!0);Qa(this,"simplifyTolerance",1);Qa(this,"previousShape");Qa(this,"onPinchStart",(b,g)=>{this.transition("pinching",{info:b,event:g})})}};Qa(vs,"id","draw");Qa(vs,"states",[Cx,Bx,Dx]);Qa(vs,"initial","idle");var Ex=class extends wi{constructor(){super(...arguments);Qa(this,"points",[[0,0,
.5]]);Qa(this,"hitShapes",new Set);Qa(this,"onEnter",()=>{const {originPoint:b}=this.app.inputs;this.points=[b];this.hitShapes.clear()});Qa(this,"onPointerMove",()=>{const {currentPoint:b,previousPoint:g}=this.app.inputs;ud.isEqual(g,b)||(this.points.push(b),this.app.shapesInViewport.filter(m=>m.hitTestLineSegment(g,b)).forEach(m=>this.hitShapes.add(m)),this.app.setErasingShapes(Array.from(this.hitShapes.values())))});Qa(this,"onPointerUp",()=>{this.app.deleteShapes(Array.from(this.hitShapes.values()));
this.tool.transition("idle")});Qa(this,"onKeyDown",(b,g)=>{switch(g.key){case "Escape":this.app.setErasingShapes([]),this.tool.transition("idle")}})}};Qa(Ex,"id","erasing");var Fx=class extends wi{constructor(){super(...arguments);Qa(this,"onPointerDown",(b,g)=>{b.order||this.tool.transition("pointing")});Qa(this,"onPinchStart",(...b)=>{var g,m;this.app.transition("select",{returnTo:this.app.currentState.id});null==(m=(g=this.app._events).onPinchStart)?void 0:m.call(g,...b)});Qa(this,"onKeyDown",
(b,g)=>{switch(g.key){case "Escape":this.app.transition("select")}})}};Qa(Fx,"id","idle");var Gx=class extends wi{constructor(){super(...arguments);Qa(this,"onEnter",()=>{const {currentPoint:b}=this.app.inputs;this.app.setErasingShapes(this.app.shapesInViewport.filter(g=>g.hitTestPoint(b)))});Qa(this,"onPointerMove",()=>{const {currentPoint:b,originPoint:g}=this.app.inputs;5<ud.dist(b,g)&&(this.tool.transition("erasing"),this.app.setSelectedShapes([]))});Qa(this,"onPointerUp",()=>{const b=[...this.app.erasingShapes];
this.app.setErasingShapes([]);this.app.deleteShapes(b);this.tool.transition("idle")})}};Qa(Gx,"id","pointing");var Et=class extends yp{constructor(){super(...arguments);Qa(this,"cursor","crosshair")}};Qa(Et,"id","erase");Qa(Et,"states",[Fx,Gx,Ex]);Qa(Et,"initial","idle");var gv=class extends wi{constructor(){super(...arguments);Qa(this,"handle",{});Qa(this,"handleId","end");Qa(this,"currentShape",{});Qa(this,"initialShape",{});Qa(this,"bindableShapeIds",[]);Qa(this,"startBindingShapeId");Qa(this,
"newStartBindingId","");Qa(this,"draggedBindingId","");Qa(this,"onPointerMove",()=>{const {inputs:{shiftKey:b,previousPoint:g,originPoint:m,currentPoint:I,modKey:W,altKey:ia}}=this.app;var sa=this.app.getShapeById(this.initialShape.id),{handles:La}=this.initialShape,Va=this.handleId,$a="start"===this.handleId?"end":"start";if(!Yd.isEqual(g,I)){var lb=Yd.sub(I,m);if(b){var ub=La[$a].point,Rb=Yd.add(La[Va].point,lb),ec=Yd.angle(ub,Rb);ub=Yd.rotWith(Rb,ub,Si.snapAngleToSegments(ec,24)-ec);lb=Yd.add(lb,
Yd.sub(ub,Rb))}lb=Yd.add(La[Va].point,lb);La={[Va]:Ga(re({},La[Va]),{point:Yd.toFixed(lb),bindingId:void 0})};var Vb=this.currentShape.getHandlesChange(this.initialShape,La);if(Vb){La=yi(sa.props,Vb);var rc={},mc;Va=La.handles[Va];$a=La.handles[$a];if(this.startBindingShapeId){var Wb;if(lb=this.app.getShapeById(this.startBindingShapeId)){Rb=lb.getCenter();ub=La.handles.end;var tc=Yd.add(La.handles.start.point,La.point);Yd.isEqual(tc,Rb)&&tc[1]++;ec=lb.hitTestPoint(I);tc=Yd.uni(Yd.sub(tc,Rb));const Hc=
void 0!==this.app.currentPage.bindings[this.newStartBindingId];W||lb.hitTestPoint(Yd.add(La.point,ub.point))||(Wb=Rc(sa.props,lb,"start",this.newStartBindingId,Rb,Rb,tc,ec));Wb&&!Hc?(rc[this.newStartBindingId]=Wb,La.handles.start.bindingId=Wb.id):!Wb&&Hc&&(console.log("removing start binding"),delete rc[this.newStartBindingId],La.handles.start.bindingId=void 0)}}if(!W){Wb=Yd.add($a.point,La.point);$a=Yd.add(Va.point,La.point);Va=Yd.uni(Yd.sub($a,Wb));const Hc=Yd.add(La.point,La.handles.start.point),
Qc=Yd.add(La.point,La.handles.end.point);lb=this.bindableShapeIds.map(Uc=>this.app.getShapeById(Uc)).sort((Uc,Vd)=>Vd.nonce-Uc.nonce).filter(Uc=>![Hc,Qc].every(Vd=>Uc.hitTestPoint(Vd)));for(const Uc of lb)if(mc=Rc(sa.props,Uc,this.handleId,this.draggedBindingId,$a,Wb,Va,ia))break}mc?(rc[this.draggedBindingId]=mc,La=yi(La,{handles:{[this.handleId]:{bindingId:this.draggedBindingId}}})):(sa=sa.props.handles[this.handleId].bindingId,void 0!==sa&&(delete rc[sa],La=yi(La,{handles:{[this.handleId]:{bindingId:void 0}}})));
Vb=this.currentShape.getHandlesChange(La,La.handles);Ld(()=>{var Hc;if(Vb){this.currentShape.update(Vb);this.app.currentPage.updateBindings(rc);const Qc=Object.values(null!=(Hc=Vb.handles)?Hc:{}).map(Uc=>Uc.bindingId).map(Uc=>this.app.currentPage.bindings[Uc]).filter(Boolean).flatMap(Uc=>[Uc.toId,Uc.fromId].filter(Boolean));this.app.setBindingShapes(Qc)}})}}});Qa(this,"onPointerUp",()=>{this.tool.transition("idle");this.currentShape&&this.app.setSelectedShapes([this.currentShape]);this.app.transition("select");
this.app.persist()});Qa(this,"onExit",()=>{this.app.clearBindingShape();this.app.history.resume();this.app.persist()});Qa(this,"onKeyDown",(b,g)=>{switch(g.key){case "Escape":this.app.deleteShapes([this.currentShape]),this.tool.transition("idle")}})}};Qa(gv,"id","creating");var Hx=class extends gv{constructor(){super(...arguments);Qa(this,"onEnter",()=>{var b;this.app.history.pause();this.newStartBindingId=Of();this.draggedBindingId=Of();this.bindableShapeIds=this.app.currentPage.getBindableShapes();
var {Shape:g}=this.tool;const {originPoint:m}=this.app.inputs;g=new g(Ga(re({},g.defaultProps),{id:Of(),type:g.id,parentId:this.app.currentPage.id,point:m,fill:this.app.settings.color,stroke:this.app.settings.color}));this.initialShape=Dc(g.props);this.currentShape=g;this.app.currentPage.addShapes(g);this.app.setSelectedShapes([g]);if(this.startBindingShapeId=null==(b=this.bindableShapeIds.map(I=>this.app.getShapeById(I)).filter(I=>zh.pointInBounds(m,I.bounds))[0])?void 0:b.id)this.bindableShapeIds.splice(this.bindableShapeIds.indexOf(this.startBindingShapeId),
1),this.app.setBindingShapes([this.startBindingShapeId])})}};Qa(Hx,"id","creating");var Ix=class extends wi{constructor(){super(...arguments);Qa(this,"onPointerDown",(b,g)=>{b.order||this.tool.transition("pointing")});Qa(this,"onPinchStart",(...b)=>{var g,m;this.app.transition("select",{returnTo:this.app.currentState.id});null==(m=(g=this.app._events).onPinchStart)?void 0:m.call(g,...b)});Qa(this,"onKeyDown",(b,g)=>{switch(g.key){case "Escape":this.app.transition("select")}});Qa(this,"onPointerEnter",
b=>{if(!b.order)switch(b.type){case "shape":this.app.setHoveredShape(b.shape.id);break;case "selection":"background"!==b.handle&&"center"!==b.handle&&this.tool.transition("hoveringSelectionHandle",b)}});Qa(this,"onPointerLeave",b=>{b.order||"shape"===b.type&&this.app.hoveredId&&this.app.setHoveredShape(void 0)})}};Qa(Ix,"id","idle");var Jx=class extends wi{constructor(){super(...arguments);Qa(this,"onPointerMove",()=>{const {currentPoint:b,originPoint:g}=this.app.inputs;5<ud.dist(b,g)&&(this.tool.transition("creating"),
this.app.setSelectedShapes(this.app.currentPage.shapes))})}};Qa(Jx,"id","pointing");var Ct=class extends yp{constructor(){super(...arguments);Qa(this,"cursor","crosshair")}};Qa(Ct,"id","line");Qa(Ct,"states",[Ix,Jx,Hx]);Qa(Ct,"initial","idle");var sx=class extends wi{constructor(){super(...arguments);Qa(this,"cursor","crosshair");Qa(this,"creatingShape");Qa(this,"aspectRatio");Qa(this,"initialBounds",{});Qa(this,"onEnter",()=>{const {currentPage:b,inputs:{originPoint:g}}=this.app,{Shape:m}=this.tool,
I=new m({id:Of(),type:m.id,parentId:b.id,point:[...g],text:"",size:[16,32],isSizeLocked:!0,fill:this.app.settings.color,stroke:this.app.settings.color});this.creatingShape=I;Ld(()=>{this.app.currentPage.addShapes(I);const {bounds:W}=I;I.update({point:Yd.sub(g,[W.width/2,W.height/2])});this.app.transition("select");this.app.setSelectedShapes([I]);this.app.currentState.transition("editingShape",{type:"shape",shape:this.creatingShape,order:0})})})}};Qa(sx,"id","creating");var tx=class extends wi{constructor(){super(...arguments);
Qa(this,"onPointerDown",(b,g)=>{b.order||this.tool.transition("creating")});Qa(this,"onPinchStart",(...b)=>{var g,m;this.app.transition("select",{returnTo:this.app.currentState.id});null==(m=(g=this.app._events).onPinchStart)?void 0:m.call(g,...b)});Qa(this,"onKeyDown",(b,g)=>{switch(g.key){case "Escape":this.app.transition("select")}})}};Qa(tx,"id","idle");var Dt=class extends yp{constructor(){super(...arguments);Qa(this,"cursor","crosshair")}};Qa(Dt,"id","box");Qa(Dt,"states",[tx,sx]);Qa(Dt,"initial",
"idle");var oC=vb(Je()),pC=class extends oC.default{constructor(){super(...arguments);Qa(this,"toBBox",b=>b.rotatedBounds)}},ux=class extends wi{constructor(){super(...arguments);Qa(this,"initialSelectedIds",[]);Qa(this,"initialSelectedShapes",[]);Qa(this,"tree",new pC);Qa(this,"onEnter",()=>{const {selectedShapes:b,currentPage:g,selectedIds:m}=this.app;this.initialSelectedIds=Array.from(m.values());this.initialSelectedShapes=Array.from(b.values());this.tree.load(g.shapes)});Qa(this,"onExit",()=>
{this.initialSelectedIds=[];this.tree.clear()});Qa(this,"onPointerMove",()=>{const {inputs:{shiftKey:b,ctrlKey:g,originPoint:m,currentPoint:I}}=this.app,W=We.getBoundsFromPoints([I,m],0);this.app.setBrush(W);const ia=[...(new Set(this.tree.search(W).filter(sa=>g?We.boundsContain(W,sa.rotatedBounds):sa.hitTestBounds(W)).filter(sa=>"group"!==sa.type).map(sa=>{var La;return null!=(La=this.app.getParentGroup(sa))?La:sa})))];b?ia.every(sa=>this.initialSelectedShapes.includes(sa))?this.app.setSelectedShapes(this.initialSelectedShapes.filter(sa=>
!ia.includes(sa))):this.app.setSelectedShapes([...(new Set([...this.initialSelectedShapes,...ia]))]):this.app.setSelectedShapes(ia)});Qa(this,"onPointerUp",()=>{this.app.setBrush(void 0);this.tool.transition("idle")});Qa(this,"handleModifierKey",(b,g)=>{switch(g.key){case "Escape":this.app.setBrush(void 0),this.app.setSelectedShapes(this.initialSelectedIds),this.tool.transition("idle")}})}};Qa(ux,"id","brushing");var vx=class extends wi{constructor(){super(...arguments);Qa(this,"onEnter",b=>{var g;
const {selectedIds:m,selectedShapes:I,inputs:{shiftKey:W}}=this.app;if("shape"===b.type&&!I.has(b.shape)){const ia=null!=(g=this.app.getParentGroup(b.shape))?g:b.shape;W?this.app.setSelectedShapes([...Array.from(m.values()),ia.id]):this.app.setSelectedShapes([ia])}});Qa(this,"onPointerDown",()=>{this.tool.transition("idle")})}};Qa(vx,"id","contextMenu");var wx=class extends wi{constructor(){super(...arguments);Qa(this,"onEnter",b=>{"pinching"===b.fromId&&this.parent.returnTo&&this.app.transition(this.parent.returnTo)});
Qa(this,"onExit",()=>{});Qa(this,"onPointerEnter",b=>{if(!b.order)switch(b.type){case "shape":this.app.setHoveredShape(b.shape.id);break;case "selection":"background"!==b.handle&&"center"!==b.handle&&this.tool.transition("hoveringSelectionHandle",b);break;case "canvas":this.app.setHoveredShape(void 0)}});Qa(this,"onPointerDown",(b,g)=>{const {selectedShapes:m,inputs:{ctrlKey:I}}=this.app;if(2===g.button)this.tool.transition("contextMenu",b);else if(I)this.tool.transition("pointingCanvas");else switch(b.type){case "selection":switch(b.handle){case "center":break;
case "background":this.tool.transition("pointingBoundsBackground");break;case "rotate":this.tool.transition("pointingRotateHandle");break;default:this.tool.transition("pointingResizeHandle",b)}break;case "shape":if(m.has(b.shape))this.tool.transition("pointingSelectedShape",b);else{const {selectionBounds:W,inputs:ia}=this.app;W&&zh.pointInBounds(ia.currentPoint,W)?this.tool.transition("pointingShapeBehindBounds",b):this.tool.transition("pointingShape",b)}break;case "handle":this.tool.transition("pointingHandle",
b);break;case "canvas":this.tool.transition("pointingCanvas");break;case "minimap":this.tool.transition("pointingMinimap",re(re({},g),b))}});Qa(this,"onPointerLeave",b=>{b.order||"shape"===b.type&&this.app.hoveredId&&this.app.setHoveredShape(void 0)});Qa(this,"onPinchStart",(b,g)=>{this.tool.transition("pinching",{info:b,event:g})});Qa(this,"onDoubleClick",b=>{if(!b.order&&1===this.app.selectedShapesArray.length){var g=this.app.selectedShapesArray[0];if(g.canEdit)switch(b.type){case "shape":this.tool.transition("editingShape",
b);break;case "selection":1===this.app.selectedShapesArray.length&&this.tool.transition("editingShape",{type:"shape",target:g})}}});Qa(this,"onKeyDown",(b,g)=>{({selectedShapesArray:b}=this.app);switch(g.key){case "Enter":1===b.length&&b[0].canEdit&&this.tool.transition("editingShape",{type:"shape",shape:b[0],order:0});break;case "Escape":b.length&&this.app.setSelectedShapes([])}})}};Qa(wx,"id","idle");var xx=class extends wi{constructor(){super(...arguments);Qa(this,"onEnter",b=>{var g;const {selectedIds:m,
inputs:{shiftKey:I}}=this.app,W=null!=(g=this.app.getParentGroup(b.shape))?g:b.shape;I?this.app.setSelectedShapes([...Array.from(m.values()),W.id]):this.app.setSelectedShapes([W])});Qa(this,"onPointerMove",()=>{const {currentPoint:b,originPoint:g}=this.app.inputs;5<ud.dist(b,g)&&this.tool.transition("translating")});Qa(this,"onPointerUp",()=>{this.tool.transition("idle")});Qa(this,"onPinchStart",(b,g)=>{this.tool.transition("pinching",{info:b,event:g})})}};Qa(xx,"id","pointingShape");var yx=class extends wi{constructor(){super(...arguments);
Qa(this,"cursor","move");Qa(this,"onPointerMove",()=>{const {currentPoint:b,originPoint:g}=this.app.inputs;5<ud.dist(b,g)&&this.tool.transition("translating")});Qa(this,"onPointerUp",()=>{this.app.setSelectedShapes([]);this.tool.transition("idle")});Qa(this,"onPinchStart",(b,g)=>{this.tool.transition("pinching",{info:b,event:g})})}};Qa(yx,"id","pointingBoundsBackground");var zx=class extends wi{constructor(){super(...arguments);Qa(this,"onEnter",()=>{var b;const {shiftKey:g}=this.app.inputs;g||(this.app.setSelectedShapes([]),
this.app.setEditingShape(),null==(b=window.getSelection())?void 0:b.removeAllRanges())});Qa(this,"onPointerMove",()=>{const {currentPoint:b,originPoint:g}=this.app.inputs;5<ud.dist(b,g)&&this.tool.transition("brushing")});Qa(this,"onPointerUp",()=>{this.app.inputs.shiftKey||this.app.setSelectedShapes([]);this.tool.transition("idle")});Qa(this,"onPinchStart",(b,g)=>{this.tool.transition("pinching",{info:b,event:g})});Qa(this,"onDoubleClick",()=>{this.app.notify("canvas-dbclick",{point:this.app.inputs.originPoint})})}};
Qa(zx,"id","pointingCanvas");var Ax=class extends wi{constructor(){super(...arguments);Qa(this,"cursor","move");Qa(this,"isCloning",!1);Qa(this,"didClone",!1);Qa(this,"initialPoints",{});Qa(this,"initialShapePoints",{});Qa(this,"initialClonePoints",{});Qa(this,"clones",[]);Qa(this,"onEnter",()=>{var b;this.app.history.pause();const {allSelectedShapesArray:g,inputs:m}=this.app;this.initialPoints=this.initialShapePoints=Object.fromEntries(g.map(({id:I,props:{point:W}})=>[I,W.slice()]));document.querySelectorAll("input,textarea").forEach(I=>
I.blur());null==(b=document.getSelection())?void 0:b.empty();m.altKey?this.startCloning():this.moveSelectedShapesToPointer()});Qa(this,"onExit",()=>{this.app.history.resume();this.app.persist();this.isCloning=this.didClone=!1;this.clones=[];this.initialPoints={};this.initialShapePoints={};this.initialClonePoints={}});Qa(this,"onPointerMove",()=>{this.moveSelectedShapesToPointer()});Qa(this,"onPointerDown",()=>{this.app.history.resume();this.app.persist();this.tool.transition("idle")});Qa(this,"onPointerUp",
()=>{this.app.history.resume();this.app.persist();this.tool.transition("idle")});Qa(this,"onKeyDown",(b,g)=>{switch(g.key){case "Alt":this.startCloning();break;case "Escape":this.app.allSelectedShapes.forEach(m=>{m.update({point:this.initialPoints[m.id]})}),this.tool.transition("idle")}});Qa(this,"onKeyUp",(b,g)=>{switch(g.key){case "Alt":if(!this.isCloning)throw Error("Expected to be cloning.");const {currentPage:m,allSelectedShapes:I}=this.app;m.removeShapes(...I);this.initialPoints=this.initialShapePoints;
this.app.setSelectedShapes(Object.keys(this.initialPoints));this.moveSelectedShapesToPointer();this.isCloning=!1}})}moveSelectedShapesToPointer(){const {inputs:{shiftKey:b,originPoint:g,currentPoint:m}}=this.app,{initialPoints:I}=this,W=ud.sub(m,g);b&&(Math.abs(W[0])<Math.abs(W[1])?W[0]=0:W[1]=0);Ld(()=>{this.app.allSelectedShapes.forEach(ia=>{ia.update({point:ud.add(I[ia.id],W)})})})}startCloning(){this.didClone||(this.clones=this.app.allSelectedShapesArray.map(b=>{const g=this.app.getShapeClass(b.type);
if(!g)throw Error("Could not find that shape class.");return new g(Ga(re({},b.serialized),{id:Of(),type:b.type,point:this.initialPoints[b.id],rotation:b.props.rotation}))}),this.initialClonePoints=Object.fromEntries(this.clones.map(({id:b,props:{point:g}})=>[b,g.slice()])),this.didClone=!0);this.app.allSelectedShapes.forEach(b=>{b.update({point:this.initialPoints[b.id]})});this.initialPoints=this.initialClonePoints;this.app.currentPage.addShapes(...this.clones);this.app.setSelectedShapes(Object.keys(this.initialClonePoints));
this.moveSelectedShapesToPointer();this.isCloning=!0}};Qa(Ax,"id","translating");var Kx=class extends wi{constructor(){super(...arguments);Qa(this,"pointedSelectedShape");Qa(this,"onEnter",b=>{this.pointedSelectedShape=b.shape});Qa(this,"onExit",()=>{this.pointedSelectedShape=void 0});Qa(this,"onPointerMove",()=>{const {currentPoint:b,originPoint:g}=this.app.inputs;5<ud.dist(b,g)&&this.tool.transition("translating")});Qa(this,"onPointerUp",()=>{const {shiftKey:b,currentPoint:g}=this.app.inputs;var {selectedShapesArray:m}=
this.app;if(!this.pointedSelectedShape)throw Error("Expected a pointed selected shape");if(b)({selectedIds:m}=this.app),m=Array.from(m.values()),m.splice(m.indexOf(this.pointedSelectedShape.id),1),this.app.setSelectedShapes(m);else{if(1===m.length&&this.pointedSelectedShape.canEdit&&this.pointedSelectedShape instanceof hn&&zh.pointInBounds(g,this.pointedSelectedShape.bounds)){this.tool.transition("editingShape",{shape:this.pointedSelectedShape,order:0,type:"shape"});return}this.app.setSelectedShapes([this.pointedSelectedShape.id])}this.tool.transition("idle")});
Qa(this,"onPinchStart",(b,g)=>{this.tool.transition("pinching",{info:b,event:g})})}};Qa(Kx,"id","pointingSelectedShape");var Lx=class extends wi{constructor(){super(...arguments);Qa(this,"info",{});Qa(this,"onEnter",b=>{this.info=b;this.updateCursor()});Qa(this,"onExit",()=>{this.app.cursors.reset()});Qa(this,"onPointerMove",()=>{const {currentPoint:b,originPoint:g}=this.app.inputs;5<ud.dist(b,g)&&this.tool.transition("resizing",this.info)});Qa(this,"onPointerUp",()=>{this.tool.transition("hoveringSelectionHandle",
this.info)});Qa(this,"onPinchStart",(b,g)=>{this.tool.transition("pinching",{info:b,event:g})})}updateCursor(){this.app.cursors.setCursor(Nk[this.info.handle],this.app.selectionBounds.rotation)}};Qa(Lx,"id","pointingResizeHandle");var Mx=class extends wi{constructor(){super(...arguments);Qa(this,"isSingle",!1);Qa(this,"handle","bottom_right_corner");Qa(this,"snapshots",{});Qa(this,"initialCommonBounds",{});Qa(this,"selectionRotation",0);Qa(this,"resizeType","corner");Qa(this,"onEnter",b=>{var g,m;
const {history:I,selectedShapesArray:W,selectionBounds:ia}=this.app;if(!ia)throw Error("Expected a selected bounds.");this.handle=b.handle;this.resizeType="left_edge"===b.handle||"right_edge"===b.handle?"horizontal-edge":"top_edge"===b.handle||"bottom_edge"===b.handle?"vertical-edge":"corner";this.app.cursors.setCursor(Mx.CURSORS[b.handle],null==(g=this.app.selectionBounds)?void 0:g.rotation);I.pause();const sa=We.getBoundsFromPoints(W.map(La=>We.getBoundsCenter(La.bounds)));this.selectionRotation=
(this.isSingle=1===W.length)?null!=(m=W[0].props.rotation)?m:0:0;this.initialCommonBounds=re({},ia);this.snapshots=Object.fromEntries(W.map(La=>{const Va=re({},La.bounds),[$a,lb]=We.getBoundsCenter(Va);return[La.id,{props:La.serialized,bounds:Va,transformOrigin:[($a-this.initialCommonBounds.minX)/this.initialCommonBounds.width,(lb-this.initialCommonBounds.minY)/this.initialCommonBounds.height],innerTransformOrigin:[($a-sa.minX)/sa.width,(lb-sa.minY)/sa.height],isAspectRatioLocked:La.props.isAspectRatioLocked||
!(La.canChangeAspectRatio&&!La.props.rotation)}]}));W.forEach(La=>{var Va;null==(Va=La.onResizeStart)?void 0:Va.call(La,{isSingle:this.isSingle})})});Qa(this,"onExit",()=>{this.app.cursors.reset();this.snapshots={};this.initialCommonBounds={};this.selectionRotation=0;this.app.history.resume()});Qa(this,"onPointerMove",()=>{const {inputs:{altKey:b,shiftKey:g,ctrlKey:m,originPoint:I,currentPoint:W}}=this.app,{handle:ia,snapshots:sa,initialCommonBounds:La}=this;let Va=ud.sub(W,I);b&&(Va=ud.mul(Va,2));
const $a=this.app.selectedShapes.values().next().value;let lb=We.getTransformedBoundingBox(La,ia,Va,this.selectionRotation,g||this.isSingle&&(m?!("clipping"in $a.props):!$a.canChangeAspectRatio||$a.props.isAspectRatioLocked));b&&(lb=re(re({},lb),We.centerBounds(lb,We.getBoundsCenter(La))));const {scaleX:ub,scaleY:Rb}=lb;this.app.selectedShapes.forEach(ec=>{var Vb,rc;const {props:mc,bounds:Wb,transformOrigin:tc}=sa[ec.id];let Hc=We.getRelativeTransformedBoundingBox(lb,La,Wb,0>ub,0>Rb);if(ec.canResize.some(Vd=>
Vd)||ec.props.isSizeLocked||!this.isSingle){var Qc=[ub,Rb],Uc=null!=(Vb=mc.rotation)?Vb:0;Vb=We.getBoundsCenter(Hc);ec.canFlip||(Qc=ud.abs(Qc));ec.canScale||(Qc=null!=(rc=mc.scale)?rc:[1,1]);if(Uc&&0>ub&&0<=Rb||0>Rb&&0<=ub)Uc*=-1;ec.onResize(mc,{center:Vb,rotation:Uc,scale:Qc,bounds:Hc,type:ia,clip:m,transformOrigin:tc})}});this.updateCursor(ub,Rb)});Qa(this,"onPointerUp",()=>{this.app.history.resume();this.app.persist();this.tool.transition("idle")});Qa(this,"onKeyDown",(b,g)=>{switch(g.key){case "Escape":this.app.selectedShapes.forEach(m=>
{m.update(re({},this.snapshots[m.id].props))}),this.tool.transition("idle")}})}updateCursor(b,g){var m,I,W,ia;const sa=0>b&&0<=g;b=0>g&&0<=b;switch(this.handle){case "top_left_corner":case "bottom_right_corner":sa||b?"nwse-resize"===this.app.cursors.cursor&&this.app.cursors.setCursor("nesw-resize",null==(m=this.app.selectionBounds)?void 0:m.rotation):"nesw-resize"===this.app.cursors.cursor&&this.app.cursors.setCursor("nwse-resize",null==(I=this.app.selectionBounds)?void 0:I.rotation);break;case "top_right_corner":case "bottom_left_corner":sa||
b?"nesw-resize"===this.app.cursors.cursor&&this.app.cursors.setCursor("nwse-resize",null==(W=this.app.selectionBounds)?void 0:W.rotation):"nwse-resize"===this.app.cursors.cursor&&this.app.cursors.setCursor("nesw-resize",null==(ia=this.app.selectionBounds)?void 0:ia.rotation)}}},hv=Mx;Qa(hv,"id","resizing");Qa(hv,"CURSORS",{bottom_edge:"ns-resize",top_edge:"ns-resize",left_edge:"ew-resize",right_edge:"ew-resize",bottom_left_corner:"nesw-resize",bottom_right_corner:"nwse-resize",top_left_corner:"nwse-resize",
top_right_corner:"nesw-resize"});var Nx=class extends wi{constructor(){super(...arguments);Qa(this,"cursor","rotate");Qa(this,"handle","");Qa(this,"onEnter",b=>{this.app.history.pause();this.handle=b.handle;this.updateCursor()});Qa(this,"onPointerMove",()=>{const {currentPoint:b,originPoint:g}=this.app.inputs;5<ud.dist(b,g)&&this.tool.transition("rotating",{handle:this.handle})});Qa(this,"onPointerUp",()=>{this.app.history.resume();this.app.persist();this.tool.transition("idle")});Qa(this,"onPinchStart",
(b,g)=>{this.tool.transition("pinching",{info:b,event:g})})}updateCursor(){this.app.cursors.setCursor(Nk[this.handle],this.app.selectionRotation)}};Qa(Nx,"id","pointingRotateHandle");var Ox=class extends wi{constructor(){super(...arguments);Qa(this,"info",{});Qa(this,"onEnter",b=>{this.info=b});Qa(this,"onPointerMove",()=>{const {currentPoint:b,originPoint:g}=this.app.inputs;5<ud.dist(b,g)&&this.tool.transition("translating")});Qa(this,"onPointerUp",()=>{const {selectedIds:b,inputs:{shiftKey:g}}=
this.app;g?this.app.setSelectedShapes([...Array.from(b.values()),this.info.shape.id]):this.app.setSelectedShapes([this.info.shape.id]);this.tool.transition("idle")});Qa(this,"onPinchStart",(b,g)=>{this.tool.transition("pinching",{info:b,event:g})})}};Qa(Ox,"id","pointingShapeBehindBounds");var iv=class extends wi{constructor(){super(...arguments);Qa(this,"cursor","rotate");Qa(this,"snapshot",{});Qa(this,"initialCommonCenter",[0,0]);Qa(this,"initialCommonBounds",{});Qa(this,"initialAngle",0);Qa(this,
"initialSelectionRotation",0);Qa(this,"handle","");Qa(this,"onEnter",b=>{const {history:g,selectedShapesArray:m,selectionBounds:I}=this.app;if(!I)throw Error("Expected selected bounds.");g.pause();this.handle=b.handle;this.initialSelectionRotation=this.app.selectionRotation;this.initialCommonBounds=re({},I);this.initialCommonCenter=We.getBoundsCenter(I);this.initialAngle=ud.angle(this.initialCommonCenter,this.app.inputs.currentPoint);this.snapshot=Object.fromEntries(m.map(W=>[W.id,{point:[...W.props.point],
center:[...W.center],rotation:W.props.rotation,handles:"handles"in W?Nq(W.handles):void 0}]));this.updateCursor()});Qa(this,"onExit",()=>{this.app.history.resume();this.snapshot={}});Qa(this,"onPointerMove",()=>{const {selectedShapes:b,inputs:{shiftKey:g,currentPoint:m}}=this.app,{snapshot:I,initialCommonCenter:W,initialAngle:ia,initialSelectionRotation:sa}=this;let La=ud.angle(W,m)-ia;g&&(La=Si.snapAngleToSegments(La,24));b.forEach($a=>{var lb=I[$a.id];let ub=0;if(g){var {rotation:Rb=0}=lb;ub=Si.snapAngleToSegments(Rb,
24)-Rb}const ec=ud.sub(lb.center,lb.point);Rb=ud.rotWith(lb.center,W,La);if("handles"in $a){lb=lb.handles;const Vb=lb.map(mc=>ud.rotWith(mc.point,ec,La)),rc=We.getCommonTopLeft(Vb);$a.update({point:ud.add(rc,ud.sub(Rb,ec)),handles:lb.map((mc,Wb)=>Ga(re({},mc),{point:ud.sub(Vb[Wb],rc)}))})}else $a.update({point:ud.sub(Rb,ec),rotation:Si.clampRadians((lb.rotation||0)+La+ub)})});const Va=Si.clampRadians(sa+La);this.app.setSelectionRotation(g?Si.snapAngleToSegments(Va,24):Va);this.updateCursor()});Qa(this,
"onPointerUp",()=>{this.app.history.resume();this.app.persist();this.tool.transition("idle")});Qa(this,"onKeyDown",(b,g)=>{switch(g.key){case "Escape":this.app.selectedShapes.forEach(m=>{m.update(this.snapshot[m.id])}),this.tool.transition("idle")}})}updateCursor(){this.app.cursors.setCursor(Nk[this.handle],this.app.selectionRotation)}};Qa(iv,"id","rotating");var Px=class extends wi{constructor(){super(...arguments);Qa(this,"onPinch",(b,g)=>{this.app.viewport.pinchZoom(b.point,b.delta,b.delta[2])});
Qa(this,"onPinchEnd",()=>{this.tool.transition("idle")});Qa(this,"onPointerDown",()=>{this.tool.transition("idle")})}};Qa(Px,"id","pinching");var Qx=class extends gv{constructor(){super(...arguments);Qa(this,"cursor","grabbing");Qa(this,"onEnter",b=>{this.app.history.pause();this.newStartBindingId=Of();this.draggedBindingId=Of();this.bindableShapeIds=this.app.currentPage.getBindableShapes();this.handleId=b.id;this.currentShape=b.shape;this.initialShape=Dc(this.currentShape.props);this.app.setSelectedShapes([this.currentShape])})}};
Qa(Qx,"id","translatingHandle");var Rx=class extends wi{constructor(){super(...arguments);Qa(this,"cursor","grabbing");Qa(this,"info",{});Qa(this,"onEnter",b=>{this.info=b});Qa(this,"onPointerMove",()=>{const {currentPoint:b,originPoint:g}=this.app.inputs;5<ud.dist(b,g)&&this.tool.transition("translatingHandle",this.info)});Qa(this,"onPointerUp",()=>{this.tool.transition("idle")});Qa(this,"onPinchStart",(b,g)=>{this.tool.transition("pinching",{info:b,event:g})})}};Qa(Rx,"id","pointingHandle");var Sx=
class extends wi{constructor(){super(...arguments);Qa(this,"handle");Qa(this,"onEnter",b=>{var g;this.app.cursors.setCursor(Nk[b.handle],null!=(g=this.app.selectionBounds.rotation)?g:0);this.handle=b.handle});Qa(this,"onExit",()=>{this.app.cursors.reset()});Qa(this,"onPinchStart",(b,g)=>{this.tool.transition("pinching",{info:b,event:g})});Qa(this,"onPointerDown",b=>{switch(b.type){case "selection":switch(b.handle){case "center":break;case "background":break;case "top_left_resize_corner":case "top_right_resize_corner":case "bottom_right_resize_corner":case "bottom_left_resize_corner":this.tool.transition("pointingRotateHandle",
b);break;default:this.tool.transition("pointingResizeHandle",b)}}});Qa(this,"onPointerLeave",()=>{this.tool.transition("idle")});Qa(this,"onDoubleClick",b=>{var g;if(!b.order&&1===this.app.selectedShapes.size){var m=this.app.selectedShapes.values().next().value;if(m.canEdit)switch(b.type){case "shape":this.tool.transition("editingShape",b);break;case "selection":null==(g=m.onResetBounds)?void 0:g.call(m,{zoom:this.app.viewport.camera.zoom}),1===this.app.selectedShapesArray.length&&this.tool.transition("editingShape",
{type:"shape",target:m})}else m.onResetBounds({asset:m.props.assetId?this.app.assets[m.props.assetId]:void 0,zoom:this.app.viewport.camera.zoom}),this.tool.transition("idle")}})}};Qa(Sx,"id","hoveringSelectionHandle");var Tx=class extends wi{constructor(){super(...arguments);Qa(this,"editingShape",{});Qa(this,"onEnter",b=>{this.editingShape=b.shape;this.app.setEditingShape(b.shape)});Qa(this,"onExit",()=>{var b;if(this.editingShape&&"text"in this.editingShape.props){const g=this.editingShape.props.text.trim();
""===g&&"text"===this.editingShape.props.type?this.app.deleteShapes([this.editingShape]):(this.editingShape.onResetBounds(),this.editingShape.update({text:g}))}this.app.persist();this.app.setEditingShape();null==(b=document.querySelector(".tl-canvas"))?void 0:b.focus()});Qa(this,"onPinchStart",(b,g)=>{this.tool.transition("pinching",{info:b,event:g})});Qa(this,"onPointerDown",b=>{switch(b.type){case "shape":if(b.shape===this.editingShape)break;this.tool.transition("idle",b);break;case "canvas":b.order||
this.tool.transition("idle",b)}});Qa(this,"onKeyDown",(b,g)=>{switch(g.key){case "Escape":Ld(()=>{g.stopPropagation();this.app.setSelectedShapes([this.editingShape]);this.tool.transition("idle")})}})}};Qa(Tx,"id","editingShape");var Ux=class extends wi{constructor(){super(...arguments);Qa(this,"minimapZoom",1);Qa(this,"minimapRect",{minX:0,minY:0,maxX:0,maxY:0,width:0,height:0});Qa(this,"getCameraPoint",b=>{const g=document.querySelector(".tl-preview-minimap svg");var m=document.querySelector(".tl-preview-minimap #minimap-camera-rect");
if(g&&m){const I=g.getBoundingClientRect();this.minimapRect.height=I.height;this.minimapRect.width=I.width;this.minimapRect.minX=I.left;this.minimapRect.minY=I.top;this.minimapRect.maxX=I.right;this.minimapRect.maxY=I.bottom;this.minimapZoom=+g.dataset.commonBoundWidth/this.minimapRect.width;b=ud.sub(b,[this.minimapRect.minX,this.minimapRect.minY]);m=m.getBoundingClientRect();m=ud.mul(ud.sub(b,[m.left+m.width/2,m.top+m.height/2]),this.minimapZoom);return ud.sub(this.app.viewport.camera.point,m)}});
Qa(this,"onEnter",b=>{(b=this.getCameraPoint([b.clientX,b.clientY]))?this.app.viewport.update({point:b}):this.tool.transition("idle")});Qa(this,"onPointerMove",(b,g)=>{(b=this.getCameraPoint([g.clientX,g.clientY]))&&this.app.viewport.update({point:b})});Qa(this,"onPointerUp",()=>{this.tool.transition("idle")})}};Qa(Ux,"id","pointingMinimap");var kr=class extends yp{constructor(){super(...arguments);Qa(this,"returnTo","");Qa(this,"onEnter",b=>{this.returnTo=null==b?void 0:b.returnTo})}};Qa(kr,"id",
"select");Qa(kr,"initial","idle");Qa(kr,"shortcut",["1","s"]);Qa(kr,"states",[wx,ux,vx,zx,xx,Ox,Kx,yx,Sx,Lx,Nx,Ux,Rx,Qx,Ax,hv,iv,iv,Px,Tx]);var ox=class extends wi{constructor(){super(...arguments);Qa(this,"cursor","grabbing");Qa(this,"originalScreenPoint",[]);Qa(this,"originalCameraPoint",[]);Qa(this,"prevState","idle");Qa(this,"onEnter",b=>{this.prevState=null==b?void 0:b.prevState;this.originalScreenPoint=this.app.inputs.currentScreenPoint;this.originalCameraPoint=this.app.viewport.camera.point});
Qa(this,"onPointerMove",(b,g)=>{b=Yd.sub(this.originalScreenPoint,this.app.inputs.currentScreenPoint);this.app.viewport.update({point:Yd.sub(this.originalCameraPoint,Yd.div(b,this.app.viewport.camera.zoom))})});Qa(this,"onPointerUp",()=>{var b;this.tool.transition(null!=(b=this.prevState)?b:"idle")})}};Qa(ox,"id","panning");var px=class extends wi{constructor(){super(...arguments);Qa(this,"onEnter",b=>{this.parent.prevTool&&b.exit&&(this.app.setCurrentState(this.parent.prevTool),setTimeout(()=>{this.app.cursors.reset();
this.app.cursors.setCursor(this.parent.prevTool.cursor)}))});Qa(this,"onPointerDown",(b,g)=>{b.order||this.tool.transition("panning")})}};Qa(px,"id","idle");var qx=class extends wi{constructor(){super(...arguments);Qa(this,"onPointerDown",(b,g)=>{b.order||this.tool.transition("panning",{prevState:"idleHold"})});Qa(this,"onPinchStart",(b,g)=>{this.tool.transition("pinching",{info:b,event:g})})}};Qa(qx,"id","idleHold");var rx=class extends wi{constructor(){super(...arguments);Qa(this,"origin",[0,0]);
Qa(this,"prevDelta",[0,0]);Qa(this,"onEnter",b=>{this.prevDelta=b.info.delta;this.origin=b.info.point});Qa(this,"onPinch",b=>{this.app.viewport.pinchZoom(b.point,b.delta,b.delta[2])});Qa(this,"onPinchEnd",()=>{this.tool.transition("idle")})}};Qa(rx,"id","pinching");var lr=class extends yp{constructor(){super(...arguments);Qa(this,"cursor","grab");Qa(this,"prevTool",null);Qa(this,"onEnter",b=>{this.prevTool=null==b?void 0:b.prevTool});Qa(this,"onKeyDown",(b,g)=>{switch(g.key){case "Escape":this.app.transition("select")}});
Qa(this,"onPinchStart",(b,g)=>{this.transition("pinching",{info:b,event:g})})}};Qa(lr,"id","move");Qa(lr,"shortcut",["2","m"]);Qa(lr,"states",[px,qx,ox,rx]);Qa(lr,"initial","idle");var im=class{constructor(b,g={}){Qa(this,"lastShapesNounces",null);Qa(this,"app");Qa(this,"id");Qa(this,"name");Qa(this,"shapes",[]);Qa(this,"bindings",{});Qa(this,"nonce",0);Qa(this,"bump",()=>{this.nonce++});Qa(this,"bringForward",La=>{const Va=this.parseShapesArg(La);Va.sort(($a,lb)=>this.shapes.indexOf(lb)-this.shapes.indexOf($a)).map($a=>
this.shapes.indexOf($a)).forEach($a=>{if($a!==this.shapes.length-1&&!Va.includes(this.shapes[$a+1])){var lb=this.shapes[$a];this.shapes[$a]=this.shapes[$a+1];this.shapes[$a+1]=lb}});this.app.persist();return this});Qa(this,"sendBackward",La=>{const Va=this.parseShapesArg(La);Va.sort(($a,lb)=>this.shapes.indexOf($a)-this.shapes.indexOf(lb)).map($a=>this.shapes.indexOf($a)).forEach($a=>{if(0!==$a&&!Va.includes(this.shapes[$a-1])){var lb=this.shapes[$a];this.shapes[$a]=this.shapes[$a-1];this.shapes[$a-
1]=lb}});this.app.persist();return this});Qa(this,"bringToFront",La=>{const Va=this.parseShapesArg(La);this.shapes=this.shapes.filter($a=>!Va.includes($a)).concat(Va);this.app.persist();return this});Qa(this,"sendToBack",La=>{const Va=this.parseShapesArg(La);this.shapes=Va.concat(this.shapes.filter($a=>!Va.includes($a)));this.app.persist();return this});Qa(this,"flip",(La,Va)=>{La=this.parseShapesArg(La);const $a=We.getCommonBounds(La.map(lb=>lb.bounds));La.forEach(lb=>{var ub;const Rb=We.getRelativeTransformedBoundingBox($a,
$a,lb.bounds,"horizontal"===Va,"vertical"===Va);if(lb.serialized)lb.onResize(lb.serialized,{bounds:Rb,center:We.getBoundsCenter(Rb),rotation:null!=(ub=lb.props.rotation)?ub:-0,type:"top_left_corner",scale:lb.canFlip&&lb.props.scale?"horizontal"===Va?[-lb.props.scale[0],1]:[1,-lb.props.scale[1]]:[1,1],clip:!1,transformOrigin:[.5,.5]})});this.app.persist();return this});Qa(this,"getShapeById",La=>this.shapes.find(Va=>Va.id===La));Qa(this,"cleanup",La=>{La=lc(this.bindings,La);const Va=new Set;let $a=
!1,lb=!1;const ub=Nq(this.bindings);La.forEach(Rb=>{var ec;if(this.bindings[Rb.id]){var Vb=this.getShapeById(Rb.toId),rc=this.getShapeById(Rb.fromId);Vb&&rc?Va.has(rc.id)||(Rb=this.updateArrowBindings(rc),Va.add(rc.id),Rb&&(rc=re(re({},rc.props),Rb),$a=!0,null==(ec=this.getShapeById(rc.id))?void 0:ec.update(rc,!1,!0))):(delete ub[Rb.id],lb=!0)}});Object.keys(ub).forEach(Rb=>{const ec=this.bindings[Rb];0===this.shapes.filter(Vb=>Vb.id===ec.fromId||Vb.id===ec.toId).length&&(delete ub[Rb],lb=!0)});lb&&
this.update({bindings:ub});($a||lb)&&this.app.persist(!0)});Qa(this,"updateArrowBindings",La=>{var Va,$a,lb,ub={start:Nq(La.props.handles.start),end:Nq(La.props.handles.end)},Rb={isBound:!1,handle:La.props.handles.start,point:Yd.add(La.props.handles.start.point,La.props.point)},ec={isBound:!1,handle:La.props.handles.end,point:Yd.add(La.props.handles.end.point,La.props.point)};if(La.props.handles.start.bindingId){var Vb=void 0!==(null==(Va=La.props.decorations)?void 0:Va.start);Va=La.props.handles.start;
var rc=this.bindings[La.props.handles.start.bindingId],mc=this.getShapeById(null==rc?void 0:rc.toId);if(mc){Rb=mc.getBounds();var Wb=mc.getExpandedBounds(),tc=We.expandBounds(Rb,Vb?rc.distance:1);const {minX:Hc,minY:Qc,width:Uc,height:Vd}=Wb,ae=Yd.add([Hc,Qc],Yd.mulV([Uc,Vd],Yd.rotWith(rc.point,[.5,.5],mc.props.rotation||0)));Rb={isBound:!0,hasDecoration:Vb,binding:rc,handle:Va,point:ae,target:mc,bounds:Rb,expandedBounds:Wb,intersectBounds:tc,center:mc.getCenter()}}}if(La.props.handles.end.bindingId&&
(Vb=void 0!==(null==($a=La.props.decorations)?void 0:$a.end),$a=La.props.handles.end,Va=this.bindings[La.props.handles.end.bindingId],rc=this.getShapeById(null==Va?void 0:Va.toId))){ec=rc.getBounds();mc=rc.getExpandedBounds();Wb=Vb?We.expandBounds(ec,Va.distance):ec;const {minX:Hc,minY:Qc,width:Uc,height:Vd}=mc;tc=Yd.add([Hc,Qc],Yd.mulV([Uc,Vd],Yd.rotWith(Va.point,[.5,.5],rc.props.rotation||0)));ec={isBound:!0,hasDecoration:Vb,binding:Va,handle:$a,point:tc,target:rc,bounds:ec,expandedBounds:mc,intersectBounds:Wb,
center:rc.getCenter()}}for(const Hc of["end","start"]){$a="start"===Hc?Rb:ec;const Qc="start"===Hc?ec:Rb;if($a.isBound)if($a.binding.distance){if(Vb=Yd.uni(Yd.sub($a.point,Qc.point)),Va=C(Qc.point,Vb,$a.intersectBounds,$a.target.props.rotation).filter(Uc=>Uc.didIntersect).map(Uc=>Uc.points[0]).sort((Uc,Vd)=>Yd.dist(Uc,Qc.point)-Yd.dist(Vd,Qc.point)),Va[0])if(rc=void 0,Qc.isBound&&(rc=C(Qc.point,Vb,Qc.intersectBounds,Qc.target.props.rotation).filter(Uc=>Uc.didIntersect).map(Uc=>Uc.points[0]).sort((Uc,
Vd)=>Yd.dist(Uc,Qc.point)-Yd.dist(Vd,Qc.point))[0]),Qc.isBound&&(2>Va.length||rc&&Va[0]&&10>Math.ceil(Yd.dist(Va[0],rc))||We.boundsContain($a.expandedBounds,Qc.expandedBounds)||We.boundsCollide($a.expandedBounds,Qc.expandedBounds)))Vb=Yd.uni(Yd.sub(Qc.point,$a.point)),Va=C($a.point,Vb,$a.bounds,$a.target.props.rotation).filter(Uc=>Uc.didIntersect).map(Uc=>Uc.points[0]),Va[0]&&(ub[Hc].point=Yd.toFixed(Yd.sub(Va[0],La.props.point)),ub["start"===Hc?"end":"start"].point=Yd.toFixed(Yd.add(Yd.sub(Va[0],
La.props.point),Yd.mul(Vb,Math.min(Yd.dist(Va[0],Qc.point),10*(We.boundsContain(Qc.bounds,$a.intersectBounds)?-1:1))))));else{if(!Qc.isBound&&(Va[0]&&10>Yd.dist(Va[0],Qc.point)||zh.pointInBounds(Qc.point,$a.intersectBounds)))return ub=Yd.uni(Yd.sub($a.center,Qc.point)),null==(lb=La.getHandlesChange)?void 0:lb.call(La,La.props,{[Hc]:Ga(re({},La.props.handles[Hc]),{point:Yd.toFixed(Yd.add(Yd.sub(Qc.point,La.props.point),Yd.mul(ub,10)))})});Va[0]&&(ub[Hc].point=Yd.toFixed(Yd.sub(Va[0],La.props.point)))}}else ub[Hc].point=
Yd.sub($a.point,La.props.point)}return La.getHandlesChange(La.props,ub)});const {id:m,name:I,shapes:W=[],bindings:ia={},nonce:sa}=g;this.id=m;this.name=I;this.bindings=Object.assign({},ia);this.app=b;this.nonce=sa||0;this.addShapes(...W);pg(this);Od(()=>{const La=0<this.shapes.length?Object.fromEntries(this.shapes.map(Va=>[Va.id,Va.nonce])):null;if(this.lastShapesNounces&&La){const Va=this.lastShapesNounces,$a=[...(new Set([...Object.keys(La),...Object.keys(Va)]))].filter(lb=>Va[lb]!==La[lb]);requestAnimationFrame(()=>
{this.cleanup($a)})}La&&(this.lastShapesNounces=La)})}get serialized(){return{id:this.id,name:this.name,shapes:this.shapes.map(b=>b.serialized).filter(b=>!!b).map(b=>Dc(b)),bindings:Nq(this.bindings),nonce:this.nonce}}get shapesById(){return Object.fromEntries(this.shapes.map(b=>[b.id,b]))}update(b){Object.assign(this,b);return this}updateBindings(b){Object.assign(this.bindings,b);return this}addShapes(...b){if(0!==b.length)return b="getBounds"in b[0]?b:b.map(g=>new (this.app.getShapeClass(g.type))(g)),
this.shapes.push(...b),this.bump(),b}parseShapesArg(b){return"string"===typeof b[0]?this.shapes.filter(g=>b.includes(g.id)):b}removeShapes(...b){const g=this.parseShapesArg(b);this.shapes=this.shapes.filter(m=>!g.includes(m));return g}getBindableShapes(){return this.shapes.filter(b=>b.canBind).sort((b,g)=>g.nonce-b.nonce).map(b=>b.id)}};Lb([zg],im.prototype,"id",2);Lb([zg],im.prototype,"name",2);Lb([zg],im.prototype,"shapes",2);Lb([zg],im.prototype,"bindings",2);Lb([yg],im.prototype,"serialized",
1);Lb([yg],im.prototype,"shapesById",1);Lb([zg],im.prototype,"nonce",2);Lb([cf],im.prototype,"bump",2);Lb([cf],im.prototype,"update",1);Lb([cf],im.prototype,"updateBindings",1);Lb([cf],im.prototype,"addShapes",1);Lb([cf],im.prototype,"removeShapes",1);Lb([cf],im.prototype,"bringForward",2);Lb([cf],im.prototype,"sendBackward",2);Lb([cf],im.prototype,"bringToFront",2);Lb([cf],im.prototype,"sendToBack",2);Lb([cf],im.prototype,"cleanup",2);var Fk=class{constructor(){Qa(this,"shiftKey",!1);Qa(this,"ctrlKey",
!1);Qa(this,"modKey",!1);Qa(this,"altKey",!1);Qa(this,"spaceKey",!1);Qa(this,"isPinching",!1);Qa(this,"currentScreenPoint",[0,0]);Qa(this,"currentPoint",[0,0]);Qa(this,"previousScreenPoint",[0,0]);Qa(this,"previousPoint",[0,0]);Qa(this,"originScreenPoint",[0,0]);Qa(this,"originPoint",[0,0]);Qa(this,"pointerIds",new Set);Qa(this,"state","idle");Qa(this,"containerOffset",[0,0]);Qa(this,"onPointerDown",(b,g)=>{this.pointerIds.add(g.pointerId);this.updateModifiers(g);this.originScreenPoint=this.currentScreenPoint;
this.originPoint=b;this.state="pointing"});Qa(this,"onPointerMove",(b,g)=>{"pinching"!==this.state&&("panning"===this.state&&(this.state="idle"),this.updateModifiers(g),this.previousPoint=this.currentPoint,this.currentPoint=b)});Qa(this,"onPointerUp",(b,g)=>{this.pointerIds.clear();this.updateModifiers(g);this.state="idle"});Qa(this,"onKeyDown",b=>{this.updateModifiers(b);switch(b.key){case " ":this.spaceKey=!0}});Qa(this,"onKeyUp",b=>{this.updateModifiers(b);switch(b.key){case " ":this.spaceKey=
!1}});Qa(this,"onPinchStart",(b,g)=>{this.updateModifiers(g);this.state="pinching"});Qa(this,"onPinch",(b,g)=>{"pinching"===this.state&&this.updateModifiers(g)});Qa(this,"onPinchEnd",(b,g)=>{"pinching"===this.state&&(this.updateModifiers(g),this.state="idle")});pg(this)}updateContainerOffset(b){Object.assign(this.containerOffset,b)}updateModifiers(b){b.isPrimary&&("clientX"in b&&(this.previousScreenPoint=this.currentScreenPoint,this.currentScreenPoint=Yd.sub([b.clientX,b.clientY],this.containerOffset)),
"shiftKey"in b&&(this.shiftKey=b.shiftKey,this.ctrlKey=b.ctrlKey,this.altKey=b.altKey,this.modKey=yk()?b.metaKey:b.ctrlKey))}};Lb([zg],Fk.prototype,"shiftKey",2);Lb([zg],Fk.prototype,"ctrlKey",2);Lb([zg],Fk.prototype,"modKey",2);Lb([zg],Fk.prototype,"altKey",2);Lb([zg],Fk.prototype,"spaceKey",2);Lb([zg],Fk.prototype,"isPinching",2);Lb([zg],Fk.prototype,"currentScreenPoint",2);Lb([zg],Fk.prototype,"currentPoint",2);Lb([zg],Fk.prototype,"previousScreenPoint",2);Lb([zg],Fk.prototype,"previousPoint",
2);Lb([zg],Fk.prototype,"originScreenPoint",2);Lb([zg],Fk.prototype,"originPoint",2);Lb([zg],Fk.prototype,"state",2);Lb([zg],Fk.prototype,"containerOffset",2);Lb([cf],Fk.prototype,"updateContainerOffset",1);Lb([cf],Fk.prototype,"updateModifiers",1);Lb([cf],Fk.prototype,"onPointerDown",2);Lb([cf],Fk.prototype,"onPointerMove",2);Lb([cf],Fk.prototype,"onPointerUp",2);Lb([cf],Fk.prototype,"onKeyDown",2);Lb([cf],Fk.prototype,"onKeyUp",2);Lb([cf],Fk.prototype,"onPinchStart",2);Lb([cf],Fk.prototype,"onPinch",
2);Lb([cf],Fk.prototype,"onPinchEnd",2);var mC=(b,g=100)=>-(Math.cos(Math.PI*ud.clamp(b/g,0,1))-1)/2,Bt=class{constructor(){Qa(this,"bounds",{minX:0,minY:0,maxX:1080,maxY:720,width:1080,height:720});Qa(this,"camera",{point:[0,0],zoom:1});Qa(this,"updateBounds",b=>{this.bounds=b;return this});Qa(this,"panCamera",b=>this.update({point:ud.sub(this.camera.point,ud.div(b,this.camera.zoom))}));Qa(this,"update",({point:b,zoom:g})=>{void 0===b||isNaN(b[0])||isNaN(b[1])||(this.camera.point=b);void 0===g||
isNaN(g)||(this.camera.zoom=Math.min(4,Math.max(.1,g)));return this});Qa(this,"getPagePoint",b=>{const {camera:g,bounds:m}=this;return ud.sub(ud.div(ud.sub(b,[m.minX,m.minY]),g.zoom),g.point)});Qa(this,"getScreenPoint",b=>{const {camera:g}=this;return ud.mul(ud.add(b,g.point),g.zoom)});Qa(this,"onZoom",(b,g,m=!1)=>this.pinchZoom(b,[0,0],g,m));Qa(this,"pinchZoom",(b,g,m,I=!1)=>{var {camera:W}=this;g=ud.sub(W.point,ud.div(g,W.zoom));m=ud.clamp(m,Bt.minZoom,Bt.maxZoom);W=ud.div(b,W.zoom);b=ud.div(b,
m);b=ud.toFixed(ud.add(g,ud.sub(b,W)));I?this.animateCamera({point:b,zoom:m}):this.update({point:b,zoom:m});return this});Qa(this,"setZoom",(b,g=!1)=>{const {bounds:m}=this;this.onZoom([m.width/2,m.height/2],b,g)});Qa(this,"zoomIn",()=>{const {camera:b}=this;this.setZoom(b.zoom/.8,!0)});Qa(this,"zoomOut",()=>{const {camera:b}=this;this.setZoom(.8*b.zoom,!0)});Qa(this,"resetZoom",()=>{this.setZoom(1,!0);return this});Qa(this,"animateCamera",({point:b,zoom:g})=>this.animateToViewport({minX:-b[0],minY:-b[1],
maxX:this.bounds.width/g-b[0],maxY:this.bounds.height/g-b[1],width:this.bounds.width/g,height:this.bounds.height/g}));Qa(this,"animateToViewport",b=>{const g=performance.now(),m=re({},this.currentView),I=()=>{var W=performance.now()-g;W=mC(W);var ia=m.minX+(b.minX-m.minX)*W;this.update({point:[-ia,-(m.minY+(b.minY-m.minY)*W)],zoom:this.bounds.width/(m.maxX+(b.maxX-m.maxX)*W-ia)});1>W&&requestAnimationFrame(I)};I()});Qa(this,"zoomToBounds",({width:b,height:g,minX:m,minY:I})=>{const {bounds:W,camera:ia}=
this;let sa=Math.min((W.width-100)/b,(W.height-100)/g);sa=Math.min(1,Math.max(Bt.minZoom,ia.zoom===sa||1>ia.zoom?Math.min(1,sa):sa));b=ud.add([-m,-I],[(W.width-b*sa)/2/sa,(W.height-g*sa)/2/sa]);this.animateCamera({point:b,zoom:sa})});pg(this)}get currentView(){const {bounds:b,camera:{point:g,zoom:m}}=this,I=b.width/m,W=b.height/m;return{minX:-g[0],minY:-g[1],maxX:I-g[0],maxY:W-g[1],width:I,height:W}}},Po=Bt;Qa(Po,"minZoom",.1);Qa(Po,"maxZoom",4);Lb([zg],Po.prototype,"bounds",2);Lb([zg],Po.prototype,
"camera",2);Lb([cf],Po.prototype,"updateBounds",2);Lb([cf],Po.prototype,"update",2);Lb([yg],Po.prototype,"currentView",1);var nC=class{constructor(b){Qa(this,"app");Qa(this,"editShape",g=>{this.app.transition("select").selectedTool.transition("editingShape",{shape:g});return this});Qa(this,"hoverShape",g=>{this.app.setHoveredShape(g);return this});Qa(this,"createShapes",(...g)=>{this.app.createShapes(g);return this});Qa(this,"updateShapes",(...g)=>{this.app.updateShapes(g);return this});Qa(this,"deleteShapes",
(...g)=>{this.app.deleteShapes(g.length?g:this.app.selectedShapesArray);return this});Qa(this,"selectShapes",(...g)=>{this.app.setSelectedShapes(g);return this});Qa(this,"deselectShapes",(...g)=>{const m="string"===typeof g[0]?g:g.map(I=>I.id);this.app.setSelectedShapes(this.app.selectedShapesArray.filter(I=>!m.includes(I.id)));return this});Qa(this,"flipHorizontal",(...g)=>{this.app.flipHorizontal(g);return this});Qa(this,"flipVertical",(...g)=>{this.app.flipVertical(g);return this});Qa(this,"selectAll",
()=>{this.app.setSelectedShapes(this.app.currentPage.shapes.filter(g=>!this.app.shapesInGroups().includes(g)));return this});Qa(this,"deselectAll",()=>{this.app.setSelectedShapes([]);return this});Qa(this,"zoomIn",()=>{this.app.viewport.zoomIn();return this});Qa(this,"zoomOut",()=>{this.app.viewport.zoomOut();return this});Qa(this,"resetZoom",()=>{this.app.viewport.resetZoom();return this});Qa(this,"zoomToFit",()=>{var {shapes:g}=this.app.currentPage;if(0===g.length)return this;g=We.getCommonBounds(g.map(m=>
m.bounds));this.app.viewport.zoomToBounds(g);return this});Qa(this,"cameraToCenter",()=>{var {shapes:g}=this.app.currentPage;if(0===g.length)return this;g=We.getCommonBounds(g.map(m=>m.bounds));this.app.viewport.update({point:Yd.add(Yd.neg(We.getBoundsCenter(g)),[this.app.viewport.currentView.width/2,this.app.viewport.currentView.height/2])});return this});Qa(this,"zoomToSelection",()=>{const {selectionBounds:g}=this.app;if(!g)return this;this.app.viewport.zoomToBounds(g);return this});Qa(this,"resetZoomToCursor",
()=>{this.app.viewport.animateCamera({zoom:1,point:Yd.sub(this.app.inputs.originScreenPoint,this.app.inputs.originPoint)});return this});Qa(this,"toggleGrid",()=>{const {settings:g}=this.app;g.update({showGrid:!g.showGrid});return this});Qa(this,"setColor",g=>{const {settings:m}=this.app;m.update({color:g});this.app.selectedShapesArray.forEach(I=>{I.update({fill:g,stroke:g})});this.app.persist();return this});Qa(this,"save",()=>{this.app.save();return this});Qa(this,"saveAs",()=>{this.app.save();
return this});Qa(this,"undo",()=>{this.app.undo();return this});Qa(this,"redo",()=>{this.app.redo();return this});Qa(this,"createNewLineBinding",(g,m)=>this.app.createNewLineBinding(g,m));Qa(this,"cloneShapes",({shapes:g,assets:m,bindings:I,point:W=[0,0]})=>{const ia=We.getCommonBounds(g.filter(Va=>"group"!==Va.type).map(Va=>{var $a,lb,ub,Rb,ec,Vb,rc,mc,Wb,tc,Hc,Qc,Uc,Vd,ae,De;return{minX:null!=(lb=null==($a=Va.point)?void 0:$a[0])?lb:W[0],minY:null!=(Rb=null==(ub=Va.point)?void 0:ub[1])?Rb:W[1],
width:null!=(Vb=null==(ec=Va.size)?void 0:ec[0])?Vb:4,height:null!=(mc=null==(rc=Va.size)?void 0:rc[1])?mc:4,maxX:(null!=(tc=null==(Wb=Va.point)?void 0:Wb[0])?tc:W[0])+(null!=(Qc=null==(Hc=Va.size)?void 0:Hc[0])?Qc:4),maxY:(null!=(Vd=null==(Uc=Va.point)?void 0:Uc[1])?Vd:W[1])+(null!=(De=null==(ae=Va.size)?void 0:ae[1])?De:4)}})),sa=g.map(Va=>Ga(re({},Va),{id:Of(),point:[W[0]+Va.point[0]-ia.minX,W[1]+Va.point[1]-ia.minY]}));sa.forEach(Va=>{var $a;Va.children&&0<(null==($a=Va.children)?void 0:$a.length)&&
(Va.children=Va.children.map(lb=>{var ub;return null==(ub=sa[g.findIndex(Rb=>Rb.id===lb)])?void 0:ub.id}).filter(Lg))});const La=[];sa.flatMap(Va=>{var $a;return Object.values(null!=($a=Va.handles)?$a:{})}).forEach(Va=>{if(Va.bindingId){var $a=I[Va.bindingId];if($a){var lb=g.findIndex(Rb=>Rb.id===$a.fromId);const ub=g.findIndex(Rb=>Rb.id===$a.toId);$a&&-1!==lb&&-1!==ub?(lb=Ga(re({},$a),{id:Of(),fromId:sa[lb].id,toId:sa[ub].id}),La.push(lb),Va.bindingId=lb.id):Va.bindingId=void 0}else console.warn("binding not found",
Va.bindingId)}});m=m.filter(Va=>sa.some($a=>$a.assetId===Va.id));return{shapes:sa,assets:m,bindings:La}});Qa(this,"getClonedShapesFromTldrString",(g,m)=>{try{{var I;const $a=null==(I=g.match(/<whiteboard-tldr>(.*)<\/whiteboard-tldr>/))?void 0:I[1];if($a){try{var W=JSON.parse($a)}catch(lb){W=null}var ia=W}else ia=void 0}g=ia;if(!g)return null;const {shapes:sa,bindings:La,assets:Va}=g;return this.cloneShapes({shapes:sa,bindings:La,assets:Va,point:m})}catch(sa){console.log(sa)}return null});Qa(this,
"cloneShapesIntoCurrentPage",g=>{(g=this.cloneShapes(g))&&this.addClonedShapes(g);return this});Qa(this,"addClonedShapes",g=>{const {shapes:m,assets:I,bindings:W}=g;0<I.length&&this.app.createAssets(I);0<m.length&&this.app.createShapes(m);this.app.currentPage.updateBindings(Object.fromEntries(W.map(ia=>[ia.id,ia])));this.app.selectedTool.transition("idle");return this});Qa(this,"addClonedShapesFromTldrString",(g,m)=>{(g=this.getClonedShapesFromTldrString(g,m))&&this.addClonedShapes(g);return this});
Qa(this,"doGroup",(g=this.app.allSelectedShapesArray)=>{var m=[...g.filter(I=>"group"===I.type),...g.map(I=>this.app.getParentGroup(I))].filter(Lg);this.app.currentPage.removeShapes(...m);g=g.filter(I=>"group"!==I.type);1<g.length&&(m=this.app.getShapeClass("group"),m=new m({id:Of(),type:m.id,parentId:this.app.currentPage.id,children:g.map(I=>I.id)}),this.app.currentPage.addShapes(m),this.app.setSelectedShapes([m]),this.app.bringForward(g));this.app.persist()});Qa(this,"unGroup",(g=this.app.allSelectedShapesArray)=>
{g=[...g.filter(I=>"group"===I.type),...g.map(I=>this.app.getParentGroup(I))].filter(Lg);const m=this.app.shapesInGroups(g);0<g.length&&(this.app.currentPage.removeShapes(...g),this.app.persist(),this.app.setSelectedShapes(m))});this.app=b}},mr=class{constructor(){Qa(this,"cursor","default");Qa(this,"rotation",0);Qa(this,"reset",()=>{this.cursor="default"});Qa(this,"setCursor",(b,g=0)=>{if(b!==this.cursor||g!==this.rotation)this.cursor=b,this.rotation=g});Qa(this,"setRotation",b=>{b!==this.rotation&&
(this.rotation=b)});pg(this)}};Lb([zg],mr.prototype,"cursor",2);Lb([zg],mr.prototype,"rotation",2);Lb([cf],mr.prototype,"reset",2);Lb([cf],mr.prototype,"setCursor",2);Lb([cf],mr.prototype,"setRotation",2);var iC=(b,g)=>{b=xk(b.pages[0],"nonce");g=xk(g.pages[0],"nonce");return!(0,my.default)(b,g)},to=class{constructor(b){Qa(this,"app");Qa(this,"stack",[]);Qa(this,"pointer",0);Qa(this,"isPaused",!0);Qa(this,"pause",()=>{this.isPaused||(this.isPaused=!0)});Qa(this,"resume",()=>{this.isPaused&&(this.isPaused=
!1)});Qa(this,"reset",()=>{this.stack=[this.app.serialized];this.pointer=0;this.resume();this.app.notify("persist",null)});Qa(this,"persist",(g=!1)=>{if(!this.isPaused&&!this.creating){var {serialized:m}=this.app;0<this.stack.length&&!iC(this.stack[this.pointer],m)||(g?this.stack[this.pointer]=m:(this.pointer<this.stack.length&&(this.stack=this.stack.slice(0,this.pointer+1)),this.stack.push(m),this.pointer=this.stack.length-1),this.app.pages.forEach(I=>I.bump()),this.app.notify("persist",null))}});
Qa(this,"setPointer",g=>{this.pointer=g;this.deserialize(this.stack[this.pointer]);this.app.notify("persist",null)});Qa(this,"undo",()=>{this.isPaused||"idle"===this.app.selectedTool.currentState.id&&this.canUndo&&this.setPointer(this.pointer-1)});Qa(this,"redo",()=>{this.isPaused||"idle"===this.app.selectedTool.currentState.id&&this.canRedo&&this.setPointer(this.pointer+1)});Qa(this,"instantiateShape",g=>new (this.app.getShapeClass(g.type))(g));Qa(this,"deserialize",g=>{Ld(()=>{var m,{pages:I}=g;
const W=this.isPaused;this.pause();const ia=[...this.app.selectedIds];try{const sa=new Map(this.app.pages),La=[];for(const Va of I){const $a=sa.get(Va.id);if(void 0!==$a){const lb=new Map($a.shapes.map(ub=>[ub.props.id,ub]));I=[];for(const ub of Va.shapes){const Rb=lb.get(ub.id);void 0!==Rb?(Rb.nonce!==ub.nonce&&(Rb.update(ub,!0),Rb.nonce=ub.nonce,Rb.setLastSerialized(ub)),lb.delete(ub.id)):I.push(this.instantiateShape(ub))}0<lb.size&&!this.app.selectedTool.isInAny("creating","editingShape")&&$a.removeShapes(...lb.values());
0<I.length&&$a.addShapes(...I);sa.delete(Va.id);$a.updateBindings(Va.bindings);$a.nonce=null!=(m=Va.nonce)?m:0}else{const {id:lb,name:ub,shapes:Rb,bindings:ec,nonce:Vb}=Va;La.push(new im(this.app,{id:lb,name:ub,nonce:Vb,bindings:ec,shapes:Rb.map(rc=>this.instantiateShape(rc))}))}}0<La.length&&this.app.addPages(La);0<sa.size&&this.app.removePages(Array.from(sa.values()));this.app.setSelectedShapes(ia).setErasingShapes([])}catch(sa){console.warn(sa)}W||this.resume()})});this.app=b;pg(this)}get creating(){return"creating"===
this.app.selectedTool.currentState.id}get canUndo(){return 0<this.pointer}get canRedo(){return this.pointer<this.stack.length-1}};Lb([zg],to.prototype,"stack",2);Lb([zg],to.prototype,"pointer",2);Lb([yg],to.prototype,"canUndo",1);Lb([yg],to.prototype,"canRedo",1);Lb([cf],to.prototype,"reset",2);Lb([cf],to.prototype,"persist",2);Lb([cf],to.prototype,"setPointer",2);Lb([cf],to.prototype,"undo",2);Lb([cf],to.prototype,"redo",2);Lb([cf],to.prototype,"deserialize",2);var us=class{constructor(){Qa(this,
"mode","light");Qa(this,"showGrid",!0);Qa(this,"color","");pg(this)}update(b){Object.assign(this,b)}};Lb([zg],us.prototype,"mode",2);Lb([zg],us.prototype,"showGrid",2);Lb([zg],us.prototype,"color",2);Lb([cf],us.prototype,"update",1);var eh=class extends pr{constructor(b,g,m){var I,W;super();Qa(this,"keybindingRegistered",!1);Qa(this,"uuid",Of());Qa(this,"api");Qa(this,"inputs",new Fk);Qa(this,"cursors",new mr);Qa(this,"viewport",new Po);Qa(this,"settings",new us);Qa(this,"Tools",[]);Qa(this,"history",
new to(this));Qa(this,"persist",this.history.persist);Qa(this,"undo",this.history.undo);Qa(this,"redo",this.history.redo);Qa(this,"saving",!1);Qa(this,"saveState",()=>{this.history.isPaused||(this.saving=!0,requestAnimationFrame(()=>{this.saving&&(this.persist(),this.saving=!1)}))});Qa(this,"load",()=>{this.notify("load",null);return this});Qa(this,"save",()=>{this.notify("save",null);return this});Qa(this,"saveAs",()=>{this.notify("saveAs",null);return this});Qa(this,"pages",new Map([["page",new im(this,
{id:"page",name:"page",shapes:[],bindings:{}})]]));Qa(this,"getPageById",ia=>{const sa=this.pages.get(ia);if(!sa)throw Error(`Could not find a page named ${ia}.`);return sa});Qa(this,"getShapeById",(ia,sa=this.currentPage.id)=>{var La;return null==(La=this.getPageById(sa))?void 0:La.shapesById[ia]});Qa(this,"createShapes",ia=>{(ia=this.currentPage.addShapes(...ia))&&this.notify("create-shapes",ia);this.persist();return this});Qa(this,"updateShapes",ia=>{ia.forEach(sa=>{var La;return null==(La=this.getShapeById(sa.id))?
void 0:La.update(sa)});this.persist();return this});Qa(this,"deleteShapes",ia=>{if(0===ia.length)return this;ia=ia.map(Va=>"string"===typeof Va?this.getShapeById(Va):Va).filter(Lg);const sa=this.shapesInGroups(ia);ia.forEach(Va=>{this.getParentGroup(Va)&&sa.push(Va)});let La=new Set([...ia,...sa].map(Va=>Va.id));sa.forEach(Va=>{var $a;const lb=this.getParentGroup(Va);if(lb){const ub=null==($a=lb.props.children)?void 0:$a.filter(Rb=>Rb!==Va.id);!ub||1>=(null==ub?void 0:ub.length)?La.add(lb.id):lb.update({children:ub})}});
ia=[...La].map(Va=>this.getShapeById(Va));this.setSelectedShapes(this.selectedShapesArray.filter(Va=>!La.has(Va.id)));(ia=this.currentPage.removeShapes(...ia))&&this.notify("delete-shapes",ia);this.persist();return this});Qa(this,"bringForward",(ia=this.selectedShapesArray)=>{0<ia.length&&this.currentPage.bringForward(ia);return this});Qa(this,"sendBackward",(ia=this.selectedShapesArray)=>{0<ia.length&&this.currentPage.sendBackward(ia);return this});Qa(this,"sendToBack",(ia=this.selectedShapesArray)=>
{0<ia.length&&this.currentPage.sendToBack(ia);return this});Qa(this,"bringToFront",(ia=this.selectedShapesArray)=>{0<ia.length&&this.currentPage.bringToFront(ia);return this});Qa(this,"flipHorizontal",(ia=this.selectedShapesArray)=>{this.currentPage.flip(ia,"horizontal");return this});Qa(this,"flipVertical",(ia=this.selectedShapesArray)=>{this.currentPage.flip(ia,"vertical");return this});Qa(this,"align",(ia,sa=this.selectedShapesArray)=>{if(2>sa.length)return this;const La=sa.map(Rb=>{const ec=Rb.getBounds();
return{id:Rb.id,point:[ec.minX,ec.minY],bounds:ec}}),Va=We.getCommonBounds(La.map(({bounds:Rb})=>Rb)),$a=Va.minX+Va.width/2,lb=Va.minY+Va.height/2,ub=Object.fromEntries(La.map(({id:Rb,point:ec,bounds:Vb})=>[Rb,{prev:ec,next:{top:[ec[0],Va.minY],centerVertical:[ec[0],lb-Vb.height/2],bottom:[ec[0],Va.maxY-Vb.height],left:[Va.minX,ec[1]],centerHorizontal:[$a-Vb.width/2,ec[1]],right:[Va.maxX-Vb.width,ec[1]]}[ia]}]));sa.forEach(Rb=>{ub[Rb.id]&&Rb.update({point:ub[Rb.id].next})});this.persist();return this});
Qa(this,"distribute",(ia,sa=this.selectedShapesArray)=>{if(2>sa.length)return this;const La=Object.fromEntries(We.getDistributions(sa,ia).map(Va=>[Va.id,Va]));sa.forEach(Va=>{La[Va.id]&&Va.update({point:La[Va.id].next})});this.persist();return this});Qa(this,"packIntoRectangle",(ia=this.selectedShapesArray)=>{if(2>ia.length)return this;const sa=Object.fromEntries(We.getPackedDistributions(ia).map(La=>[La.id,La]));ia.forEach(La=>{sa[La.id]&&La.update({point:sa[La.id].next})});this.persist();return this});
Qa(this,"assets",{});Qa(this,"removeUnusedAssets",()=>{const ia=this.getCleanUpAssets();Object.keys(this.assets).forEach(sa=>{ia.some(La=>La.id===sa)||delete this.assets[sa]});this.persist();return this});Qa(this,"copy",()=>{if(0<this.selectedShapesArray.length&&!this.editingShape){const sa=this.allSelectedShapesArray;var ia=JSON.stringify({shapes:sa.map(Va=>Va.serialized),assets:this.getCleanUpAssets().filter(Va=>sa.some($a=>$a.props.assetId===Va.id)),bindings:Dc(this.currentPage.bindings)});ia=
encodeURIComponent(`<whiteboard-tldr>${ia}</whiteboard-tldr>`);const La=this.selectedShapesArray.map(Va=>`((${Va.props.id}))`).join(" ");navigator.clipboard.write([new ClipboardItem({"text/html":new Blob([ia],{type:"text/html"}),"text/plain":new Blob([La],{type:"text/plain"})})])}});Qa(this,"paste",(ia,sa)=>{var La;this.editingShape||this.notify("paste",{point:this.inputs.currentPoint,shiftKey:!!sa,dataTransfer:null!=(La=null==ia?void 0:ia.clipboardData)?La:void 0})});Qa(this,"cut",()=>{this.copy();
this.api.deleteShapes()});Qa(this,"drop",(ia,sa)=>{this.notify("drop",{dataTransfer:ia,point:sa?this.viewport.getPagePoint(sa):We.getBoundsCenter(this.viewport.currentView)})});Qa(this,"selectTool",this.transition);Qa(this,"editingId");Qa(this,"setEditingShape",ia=>{this.editingId="string"===typeof ia?ia:null==ia?void 0:ia.id;return this});Qa(this,"clearEditingState",()=>{this.selectedTool.transition("idle");return this.setEditingShape()});Qa(this,"hoveredId");Qa(this,"setHoveredShape",ia=>{this.hoveredId=
"string"===typeof ia?ia:null==ia?void 0:ia.id;return this});Qa(this,"selectedIds",new Set);Qa(this,"selectedShapes",new Set);Qa(this,"selectionRotation",0);Qa(this,"setSelectedShapes",ia=>{var sa;const {selectedIds:La,selectedShapes:Va}=this;La.clear();Va.clear();ia[0]&&"string"===typeof ia[0]?ia.forEach(lb=>La.add(lb)):ia.forEach(lb=>La.add(lb.id));const $a=this.currentPage.shapes.filter(lb=>La.has(lb.id));$a.forEach(lb=>Va.add(lb));this.selectionRotation=1===$a.length?null!=(sa=$a[0].props.rotation)?
sa:0:0;0===ia.length&&this.setEditingShape();return this});Qa(this,"erasingIds",new Set);Qa(this,"erasingShapes",new Set);Qa(this,"setErasingShapes",ia=>{const {erasingIds:sa,erasingShapes:La}=this;sa.clear();La.clear();ia[0]&&"string"===typeof ia[0]?ia.forEach(Va=>sa.add(Va)):ia.forEach(Va=>sa.add(Va.id));this.currentPage.shapes.filter(Va=>sa.has(Va.id)).forEach(Va=>La.add(Va));return this});Qa(this,"bindingIds");Qa(this,"setBindingShapes",ia=>{this.bindingIds=ia;return this});Qa(this,"clearBindingShape",
()=>this.setBindingShapes());Qa(this,"createNewLineBinding",(ia,sa)=>{ia="string"===typeof ia?this.getShapeById(ia):ia;sa="string"===typeof sa?this.getShapeById(sa):sa;if((null==ia?0:ia.canBind)&&(null==sa?0:sa.canBind)&&(sa=md(ia,sa))){const [La,Va]=sa;this.createShapes([La]);this.currentPage.updateBindings(Object.fromEntries(Va.map($a=>[$a.id,$a])));this.persist();return!0}return!1});Qa(this,"brush");Qa(this,"setBrush",ia=>{this.brush=ia;return this});Qa(this,"setCamera",(ia,sa)=>{this.viewport.update({point:ia,
zoom:sa});return this});Qa(this,"getPagePoint",ia=>{const {camera:sa}=this.viewport;return ud.sub(ud.div(ia,sa.zoom),sa.point)});Qa(this,"getScreenPoint",ia=>{const {camera:sa}=this.viewport;return ud.mul(ud.add(ia,sa.point),sa.zoom)});Qa(this,"Shapes",new Map);Qa(this,"registerShapes",ia=>{ia.forEach(sa=>{if("group"===sa.id){const La=this;sa.prototype.getShapes=function(){var Va,$a;return null!=($a=null==(Va=this.props.children)?void 0:Va.map(lb=>La.getShapeById(lb)).filter(Boolean))?$a:[]}}return this.Shapes.set(sa.id,
sa)})});Qa(this,"deregisterShapes",ia=>{ia.forEach(sa=>this.Shapes.delete(sa.id))});Qa(this,"getShapeClass",ia=>{if(!ia)throw Error("No shape type provided.");const sa=this.Shapes.get(ia);if(!sa)throw Error(`Could not find shape class for ${ia}`);return sa});Qa(this,"wrapUpdate",ia=>{Ld(()=>{const sa=!this.history.isPaused;sa&&this.history.pause();ia();sa&&(this.history.resume(),this.persist())})});Qa(this,"subscriptions",new Set([]));Qa(this,"subscribe",(ia,sa)=>{if(void 0===sa)throw Error("Callback is required.");
const La={event:ia,callback:sa};this.subscriptions.add(La);return()=>this.unsubscribe(La)});Qa(this,"unsubscribe",ia=>{this.subscriptions.delete(ia);return this});Qa(this,"notify",(ia,sa)=>{this.subscriptions.forEach(La=>{La.event===ia&&La.callback(this,sa)});return this});Qa(this,"onTransition",()=>{});Qa(this,"onPointerDown",(ia,sa)=>{if(!this.editingShape&&1===sa.button&&!this.isIn("move"))this.temporaryTransitionToMove(sa);else if(2===sa.button&&!this.editingShape)sa.preventDefault(),this.transition("select");
else if("clientX"in sa)this.inputs.onPointerDown([...this.viewport.getPagePoint([sa.clientX,sa.clientY]),.5],sa)});Qa(this,"onPointerUp",(ia,sa)=>{if(!this.editingShape&&1===sa.button&&this.isIn("move"))this.selectedTool.transition("idle",{exit:!0}),sa.stopPropagation(),sa.preventDefault();else if("clientX"in sa)this.inputs.onPointerUp([...this.viewport.getPagePoint([sa.clientX,sa.clientY]),.5],sa)});Qa(this,"onPointerMove",(ia,sa)=>{if("clientX"in sa)this.inputs.onPointerMove([...this.viewport.getPagePoint([sa.clientX,
sa.clientY]),.5],sa)});Qa(this,"onKeyDown",(ia,sa)=>{if(this.editingShape||" "!==sa.key||this.isIn("move"))this.inputs.onKeyDown(sa);else this.temporaryTransitionToMove(sa)});Qa(this,"onKeyUp",(ia,sa)=>{if(!this.editingShape&&" "===sa.key&&this.isIn("move"))this.selectedTool.transition("idle",{exit:!0}),sa.stopPropagation(),sa.preventDefault();else this.inputs.onKeyUp(sa)});Qa(this,"onPinchStart",(ia,sa)=>{this.inputs.onPinchStart([...this.viewport.getPagePoint(ia.point),.5],sa)});Qa(this,"onPinch",
(ia,sa)=>{this.inputs.onPinch([...this.viewport.getPagePoint(ia.point),.5],sa)});Qa(this,"onPinchEnd",(ia,sa)=>{this.inputs.onPinchEnd([...this.viewport.getPagePoint(ia.point),.5],sa)});this._states=[kr,lr];this.history.pause();if(this.states&&0<this.states.length){this.registerStates(this.states);const ia=null!=(I=this.initial)?I:this.states[0].id;if(I=this.children.get(ia))this.currentState=I,null==(W=this.currentState)?void 0:W._events.onEnter({fromId:"initial"})}g&&this.registerShapes(g);m&&this.registerTools(m);
this.history.resume();b&&this.history.deserialize(b);this.api=new nC(this);pg(this);this.notify("mount",null)}dispose(){super.dispose();this.keybindingRegistered=!1;return this}initKeyboardShortcuts(){if(!this.keybindingRegistered){var b=this.constructor.shortcuts||[],g=Array.from(this.children.values()).filter(m=>m.constructor.shortcut).map(m=>({keys:m.constructor.shortcut,fn:(I,W,ia)=>{this.transition(m.id)}}));this._disposables.push(...[{keys:"shift+0",fn:()=>this.api.resetZoom()},{keys:"shift+1",
fn:()=>this.api.zoomToFit()},{keys:"mod+shift+1",fn:()=>this.api.zoomToSelection()},{keys:"mod+-",fn:()=>this.api.zoomOut()},{keys:"mod+\x3d",fn:()=>this.api.zoomIn()},{keys:"mod+z",fn:()=>this.undo()},{keys:"mod+x",fn:()=>this.cut()},{keys:"mod+shift+z",fn:()=>this.redo()},{keys:"[",fn:()=>this.sendBackward()},{keys:"shift+[",fn:()=>this.sendToBack()},{keys:"]",fn:()=>this.bringForward()},{keys:"shift+]",fn:()=>this.bringToFront()},{keys:"mod+a",fn:()=>{const {selectedTool:m}=this;"select"!==m.id&&
this.selectTool("select");this.api.selectAll()}},{keys:"mod+shift+s",fn:()=>{this.saveAs();this.notify("saveAs",null)}},{keys:"mod+shift+v",fn:(m,I,W)=>{this.editingShape||(W.preventDefault(),this.paste(void 0,!0))}},{keys:["del","backspace"],fn:()=>{this.editingShape||(this.api.deleteShapes(),this.selectedTool.transition("idle"))}},{keys:"mod+g",fn:()=>{this.api.doGroup()}},{keys:"mod+shift+g",fn:()=>{this.api.unGroup()}},...b,...g].map(({keys:m,fn:I})=>wp.registerShortcut(m,W=>{I(this,this,W)})));
this.keybindingRegistered=!0}}loadDocumentModel(b){this.history.deserialize(b);b.assets&&0<b.assets.length&&this.addAssets(b.assets);return this}get serialized(){return{selectedIds:Array.from(this.selectedIds.values()),pages:Array.from(this.pages.values()).map(b=>b.serialized),assets:this.getCleanUpAssets()}}get currentPageId(){return this.pages.keys().next().value}get currentPage(){return this.getPageById(this.currentPageId)}addPages(b){b.forEach(g=>this.pages.set(g.id,g));this.persist();return this}removePages(b){b.forEach(g=>
this.pages.delete(g.id));this.persist();return this}shapesInGroups(b=this.shapes){return b.flatMap(g=>g.props.children).filter(Lg).map(g=>this.getShapeById(g)).filter(Lg)}getParentGroup(b){return this.shapes.find(g=>{var m;return null==(m=g.props.children)?void 0:m.includes(b.id)})}addAssets(b){b.forEach(g=>this.assets[g.id]=g);this.persist();return this}removeAssets(b){"string"===typeof b[0]?b.forEach(g=>delete this.assets[g]):b.forEach(g=>delete this.assets[g.id]);this.persist();return this}getCleanUpAssets(){const b=
new Set;this.pages.forEach(g=>g.shapes.forEach(m=>{m.props.assetId&&this.assets[m.props.assetId]&&b.add(this.assets[m.props.assetId])}));return Array.from(b)}createAssets(b){this.addAssets(b);this.notify("create-assets",{assets:b});this.persist();return this}get selectedTool(){return this.currentState}registerTools(b){this.Tools=b;return this.registerStates(b)}get editingShape(){const {editingId:b,currentPage:g}=this;return b?g.shapes.find(m=>m.id===b):void 0}get hoveredShape(){const {hoveredId:b,
currentPage:g}=this;return b?g.shapes.find(m=>m.id===b):void 0}get hoveredGroup(){const {hoveredShape:b}=this;return b?this.shapes.find(g=>{var m;return"group"===g.type&&(null==(m=g.props.children)?void 0:m.includes(b.id))}):void 0}get selectedShapesArray(){const {selectedShapes:b,selectedTool:g}=this;return"select"!==g.id?[]:Array.from(b.values())}get allSelectedShapes(){return new Set(this.allSelectedShapesArray)}get allSelectedShapesArray(){const {selectedShapesArray:b}=this;return[...(new Set([...b,
...this.shapesInGroups(b)]))]}setSelectionRotation(b){this.selectionRotation=b}get erasingShapesArray(){return Array.from(this.erasingShapes.values())}get bindingShapes(){var b;const g=1===this.selectedShapesArray.length?this.selectedShapesArray.flatMap(I=>{var W;return Object.values(null!=(W=I.props.handles)?W:{})}).flatMap(I=>I.bindingId).filter(Lg).flatMap(I=>{var W,ia;return[null==(W=this.currentPage.bindings[I])?void 0:W.fromId,null==(ia=this.currentPage.bindings[I])?void 0:ia.toId]}).filter(Lg):
[],m=[...(null!=(b=this.bindingIds)?b:[]),...g];return m?this.currentPage.shapes.filter(I=>null==m?void 0:m.includes(I.id)):void 0}get currentGrid(){const {zoom:b}=this.viewport.camera;return.15>b?128:1>b?32:8}get shapes(){const {currentPage:{shapes:b}}=this;return Array.from(b.values())}get shapesInViewport(){const {selectedShapes:b,currentPage:g,viewport:{currentView:m}}=this;return g.shapes.filter(I=>!I.canUnmount||b.has(I)||We.boundsContain(m,I.rotatedBounds)||We.boundsCollide(m,I.rotatedBounds))}get selectionDirectionHint(){const {selectionBounds:b,
viewport:{currentView:g}}=this;if(b&&!We.boundsContain(g,b)&&!We.boundsCollide(g,b)){var m=We.getBoundsCenter(b);return ud.clampV([(m[0]-g.minX-g.width/2)/g.width,(m[1]-g.minY-g.height/2)/g.height],-1,1)}}get selectionBounds(){const {selectedShapesArray:b}=this;if(0!==b.length)return 1===b.length?Ga(re({},b[0].bounds),{rotation:b[0].props.rotation}):We.getCommonBounds(this.selectedShapesArray.map(g=>g.rotatedBounds))}get showSelection(){var b;const {selectedShapesArray:g}=this;return this.isIn("select")&&
!this.isInAny("select.translating","select.pinching","select.rotating")&&(1===g.length&&!(null==(b=g[0])?0:b.hideSelection)||1<g.length)}get showSelectionDetail(){return this.isIn("select")&&!this.isInAny("select.translating","select.pinching")&&0<this.selectedShapes.size&&!this.selectedShapesArray.every(b=>b.hideSelectionDetail)&&!1}get showSelectionRotation(){return this.showSelectionDetail&&this.isInAny("select.rotating","select.pointingRotateHandle")}get showContextBar(){const {selectedShapesArray:b}=
this;return this.isInAny("select.idle","select.hoveringSelectionHandle")&&!this.isIn("select.contextMenu")&&0<b.length&&!b.every(g=>g.hideContextBar)}get showRotateHandles(){const {selectedShapesArray:b}=this;return this.isInAny("select.idle","select.hoveringSelectionHandle","select.pointingRotateHandle","select.pointingResizeHandle")&&0<b.length&&!b.some(g=>g.hideRotateHandle)}get showResizeHandles(){const {selectedShapesArray:b}=this;return this.isInAny("select.idle","select.hoveringSelectionHandle",
"select.pointingShape","select.pointingSelectedShape","select.pointingRotateHandle","select.pointingResizeHandle")&&1===b.length&&!b.every(g=>g.hideResizeHandles)}temporaryTransitionToMove(b){b.stopPropagation();b.preventDefault();this.transition("move",{prevTool:this.selectedTool});this.selectedTool.transition("idleHold")}};Qa(eh,"id","app");Qa(eh,"initial","select");Lb([yg],eh.prototype,"serialized",1);Lb([zg],eh.prototype,"pages",2);Lb([yg],eh.prototype,"currentPageId",1);Lb([yg],eh.prototype,
"currentPage",1);Lb([cf],eh.prototype,"addPages",1);Lb([cf],eh.prototype,"removePages",1);Lb([cf],eh.prototype,"createShapes",2);Lb([cf],eh.prototype,"updateShapes",2);Lb([cf],eh.prototype,"deleteShapes",2);Lb([zg],eh.prototype,"assets",2);Lb([cf],eh.prototype,"addAssets",1);Lb([cf],eh.prototype,"removeAssets",1);Lb([cf],eh.prototype,"removeUnusedAssets",2);Lb([yg],eh.prototype,"selectedTool",1);Lb([zg],eh.prototype,"editingId",2);Lb([yg],eh.prototype,"editingShape",1);Lb([cf],eh.prototype,"setEditingShape",
2);Lb([zg],eh.prototype,"hoveredId",2);Lb([yg],eh.prototype,"hoveredShape",1);Lb([yg],eh.prototype,"hoveredGroup",1);Lb([cf],eh.prototype,"setHoveredShape",2);Lb([zg],eh.prototype,"selectedIds",2);Lb([zg],eh.prototype,"selectedShapes",2);Lb([zg],eh.prototype,"selectionRotation",2);Lb([yg],eh.prototype,"selectedShapesArray",1);Lb([yg],eh.prototype,"allSelectedShapes",1);Lb([yg],eh.prototype,"allSelectedShapesArray",1);Lb([cf],eh.prototype,"setSelectedShapes",2);Lb([cf],eh.prototype,"setSelectionRotation",
1);Lb([zg],eh.prototype,"erasingIds",2);Lb([zg],eh.prototype,"erasingShapes",2);Lb([yg],eh.prototype,"erasingShapesArray",1);Lb([cf],eh.prototype,"setErasingShapes",2);Lb([zg],eh.prototype,"bindingIds",2);Lb([yg],eh.prototype,"bindingShapes",1);Lb([cf],eh.prototype,"setBindingShapes",2);Lb([cf],eh.prototype,"createNewLineBinding",2);Lb([zg],eh.prototype,"brush",2);Lb([cf],eh.prototype,"setBrush",2);Lb([cf],eh.prototype,"setCamera",2);Lb([yg],eh.prototype,"currentGrid",1);Lb([yg],eh.prototype,"shapes",
1);Lb([yg],eh.prototype,"shapesInViewport",1);Lb([yg],eh.prototype,"selectionDirectionHint",1);Lb([yg],eh.prototype,"selectionBounds",1);Lb([yg],eh.prototype,"showSelection",1);Lb([yg],eh.prototype,"showSelectionDetail",1);Lb([yg],eh.prototype,"showSelectionRotation",1);Lb([yg],eh.prototype,"showContextBar",1);Lb([yg],eh.prototype,"showRotateHandles",1);Lb([yg],eh.prototype,"showResizeHandles",1);var jC=Function.prototype.toString,fv=Object.create,kC=Object.prototype.toString,lC=function(){function b(){this._keys=
[];this._values=[]}b.prototype.has=function(g){return!!~this._keys.indexOf(g)};b.prototype.get=function(g){return this._values[this._keys.indexOf(g)]};b.prototype.set=function(g,m){this._keys.push(g);this._values.push(m)};return b}(),hC="undefined"!==typeof WeakMap?Ue:ve,CD="g"===/test/g.flags?Hf:eg,FC="undefined"!==typeof Symbol?Qf:xf,GC=Object.defineProperty,IC=Object.getOwnPropertyDescriptor,hy=Object.getOwnPropertyNames,rv=Object.getOwnPropertySymbols,iy=Object.prototype,jy=iy.hasOwnProperty,
JC=iy.propertyIsEnumerable,ky="function"===typeof rv,KC=ky?Qg:hy,LC=Array.isArray,qv=Object.assign,EC=Object.getPrototypeOf,gy={array:function(b,g){var m=new g.Constructor;g.cache.set(b,m);for(var I=0,W=b.length;I<W;++I)m[I]=g.copier(b[I],g);return m},arrayBuffer:function(b,g){return b.slice(0)},blob:function(b,g){return b.slice(0,b.size,b.type)},dataView:function(b,g){return new g.Constructor(b.buffer.slice(0))},date:function(b,g){return new g.Constructor(b.getTime())},error:Rh,map:uh,object:ky?
Zh:li,regExp:function(b,g){g=new g.Constructor(b.source,CD(b));g.lastIndex=b.lastIndex;return g},set:ef},DD=qv({},gy,{array:function(b,g){var m=new g.Constructor;g.cache.set(b,m);return ei(b,m,g)},map:function(b,g){return ei(b,uh(b,g),g)},object:function(b,g){var m=Kf(g.prototype);g.cache.set(b,m);return ei(b,m,g)},set:function(b,g){return ei(b,ef(b,g),g)}});Sh(qv({},DD,{}));var NC=Sh({}),my=vb(da()),MC=vb(va()),Nq=NC,Kn=class{static insertTextFirefox(b,g){b.setRangeText(g,b.selectionStart||0,b.selectionEnd||
0,"end");b.dispatchEvent(new InputEvent("input",{data:g,inputType:"insertText",isComposing:!1}))}static insert(b,g){const m=b.ownerDocument,I=m.activeElement;I!==b&&b.focus();m.execCommand("insertText",!1,g)||Kn.insertTextFirefox(b,g);I===m.body?b.blur():I instanceof HTMLElement&&I!==b&&I.focus()}static set(b,g){b.select();Kn.insert(b,g)}static getSelection(b){const {selectionStart:g,selectionEnd:m}=b;return b.value.slice(g?g:void 0,m?m:void 0)}static wrapSelection(b,g,m){const {selectionStart:I,
selectionEnd:W}=b,ia=Kn.getSelection(b);Kn.insert(b,g+ia+(null!=m?m:g));b.selectionStart=(I||0)+g.length;b.selectionEnd=(W||0)+g.length}static replace(b,g,m){let I=0;b.value.replace(g,(...W)=>{const ia=I+W[W.length-2],sa=W[0].length;b.selectionStart=ia;b.selectionEnd=ia+sa;W="string"===typeof m?m:m(...W);Kn.insert(b,W);b.selectionStart=ia;I+=W.length-sa;return W})}static findLineEnd(b,g){const m=b.lastIndexOf("\n",g-1)+1;return"\t"!==b.charAt(m)?g:m+1}static indent(b){var g;const {selectionStart:m,
selectionEnd:I,value:W}=b;var ia=W.slice(m,I);if((ia=null==(g=/\n/g.exec(ia))?void 0:g.length)&&0<ia){g=W.lastIndexOf("\n",m-1)+1;var sa=b.value.slice(g,I-1);ia=sa.replace(/^|\n/g,`$&${Kn.INDENT}`);sa=ia.length-sa.length;b.setSelectionRange(g,I-1);Kn.insert(b,ia);b.setSelectionRange(m+1,I+sa)}else Kn.insert(b,Kn.INDENT)}static unindent(b){const {selectionStart:g,selectionEnd:m,value:I}=b;var W=I.lastIndexOf("\n",g-1)+1;const ia=Kn.findLineEnd(I,m);var sa=b.value.slice(W,ia);const La=sa.replace(/(^|\n)(\t| {1,2})/g,
"$1");sa=sa.length-La.length;b.setSelectionRange(W,ia);Kn.insert(b,La);W=(W=/\t| {1,2}/.exec(I.slice(W,g)))?W[0].length:0;b.setSelectionRange(g-W,Math.max(g-W,m-sa))}static normalizeText(b){return b.replace(Kn.fixNewLines,"\n")}},Cr=Kn;Qa(Cr,"fixNewLines",/\r?\n|\r/g);Qa(Cr,"INDENT","  ");var Kp;"undefined"!==typeof window&&(Kp=Bj());var wv=new Map,yo=yk()?"⌘":"Ctrl",SC=class extends eh{},py=vb(V(22)),RC=()=>{};/^((?!chrome|android).)*safari/i.test(navigator.userAgent);var oy=vb(V(22)),vv={},Is=vb(V(22)),
QC=b=>{for(b=b.parentElement;b&&b!==document.body;){const {overflowY:g}=window.getComputedStyle(b);if(b.scrollHeight>b.clientHeight&&("auto"===g||"scroll"===g||"overlay"===g))return b;b=b.parentElement}return document},uv=vb(V(22)),tv=new Map,PC={accent:"rgb(255, 0, 0)",brushFill:"var(--ls-scrollbar-background-color, rgba(0, 0, 0, .05))",brushStroke:"var(--ls-scrollbar-thumb-hover-color, rgba(0, 0, 0, .05))",selectStroke:"var(--color-selectedFill)",selectFill:"rgba(65, 132, 244, 0.05)",binding:"rgba(65, 132, 244, 0.5)",
background:"var(--ls-primary-background-color)",foreground:"var(--ls-primary-text-color)",grid:"var(--ls-quaternary-background-color)"},OC=((b,...g)=>b.reduce((m,I,W)=>m+I+(W<g.length?g[W]:""),""))`
  .tl-container {
    --tl-zoom: 1;
    --tl-scale: calc(1 / var(--tl-zoom));
    --tl-padding: 64px;
    --tl-shadow-color: 0deg 0% 0%;
    --tl-binding-distance: ${4}px;
    --tl-shadow-elevation-low: 0px 0.4px 0.5px hsl(var(--tl-shadow-color) / 0.04),
      0px 0.6px 0.8px -0.7px hsl(var(--tl-shadow-color) / 0.06),
      0.1px 1.2px 1.5px -1.4px hsl(var(--tl-shadow-color) / 0.08);
    --tl-shadow-elevation-medium: 0px 0.4px 0.5px hsl(var(--tl-shadow-color) / 0.04),
      0.1px 1.3px 1.7px -0.5px hsl(var(--tl-shadow-color) / 0.06),
      0.1px 2.8px 3.6px -1px hsl(var(--tl-shadow-color) / 0.07),
      0.3px 6.1px 7.8px -1.4px hsl(var(--tl-shadow-color) / 0.09);
    --tl-shadow-elevation-high: 0px 0.4px 0.5px hsl(var(--tl-shadow-color) / 0.04),
      0.1px 2.3px 3px -0.2px hsl(var(--tl-shadow-color) / 0.05),
      0.2px 4.1px 5.3px -0.5px hsl(var(--tl-shadow-color) / 0.06),
      0.4px 6.6px 8.5px -0.7px hsl(var(--tl-shadow-color) / 0.07),
      0.6px 10.3px 13.2px -1px hsl(var(--tl-shadow-color) / 0.08),
      0.9px 16px 20.6px -1.2px hsl(var(--tl-shadow-color) / 0.09),
      1.3px 24.3px 31.2px -1.4px hsl(var(--tl-shadow-color) / 0.1);
    box-sizing: border-box;
    position: relative;
    top: 0px;
    left: 0px;
    width: 100%;
    height: 100%;
    max-width: 100%;
    max-height: 100%;
    box-sizing: border-box;
    padding: 0px;
    margin: 0px;
    outline: none;
    z-index: 100;
    user-select: none;
    touch-action: none;
    overscroll-behavior: none;
    background-color: var(--tl-background);
    cursor: inherit;
    box-sizing: border-box;
    color: var(--tl-foreground);
    -webkit-user-select: none;
    -webkit-user-drag: none;
  }

  .tl-overlay {
    background: none;
    fill: transparent;
    position: absolute;
    width: 100%;
    height: 100%;
    touch-action: none;
    pointer-events: none;
  }

  .tl-snap-line {
    stroke: var(--tl-accent);
    stroke-width: calc(1px * var(--tl-scale));
  }

  .tl-snap-point {
    stroke: var(--tl-accent);
    stroke-width: calc(1px * var(--tl-scale));
  }

  .tl-canvas {
    position: absolute;
    width: 100%;
    height: 100%;
    touch-action: none;
    pointer-events: all;
    overflow: clip;
    outline: none;
  }

  .tl-layer {
    position: absolute;
    top: 0px;
    left: 0px;
    height: 0px;
    width: 0px;
    contain: layout style size;
  }

  .tl-absolute {
    position: absolute;
    top: 0px;
    left: 0px;
    transform-origin: center center;
    contain: layout style size;
  }

  .tl-positioned {
    position: absolute;
    transform-origin: center center;
    pointer-events: none;
    display: flex;
    align-items: center;
    justify-content: center;
    contain: layout style size;
  }

  .tl-positioned-svg {
    width: 100%;
    height: 100%;
    overflow: hidden;
    contain: layout style size;
    pointer-events: none;
  }

  .tl-positioned-div {
    position: relative;
    width: 100%;
    height: 100%;
    padding: var(--tl-padding);
    contain: layout style size;
  }

  .tl-positioned-inner {
    position: relative;
    width: 100%;
    height: 100%;
  }

  .tl-counter-scaled {
    transform: scale(var(--tl-scale));
  }

  .tl-dashed {
    stroke-dasharray: calc(2px * var(--tl-scale)), calc(2px * var(--tl-scale));
  }

  .tl-transparent {
    fill: transparent;
    stroke: transparent;
  }

  .tl-corner-handle {
    stroke: var(--tl-selectStroke);
    fill: var(--tl-background);
    stroke-width: calc(1.5px * var(--tl-scale));
  }

  .tl-rotate-handle {
    stroke: var(--tl-selectStroke);
    fill: var(--tl-background);
    stroke-width: calc(1.5px * var(--tl-scale));
  }

  .tl-user {
    left: -4px;
    top: -4px;
    height: 8px;
    width: 8px;
    border-radius: 100%;
    pointer-events: none;
  }

  .tl-indicator {
    fill: transparent;
    stroke-width: calc(1.5px * var(--tl-scale));
    pointer-events: none;
  }

  .tl-indicator-container {
    transform-origin: 0 0;
    fill: transparent;
    stroke-width: calc(1.5px * var(--tl-scale));
    pointer-events: none;
  }

  .tl-user-indicator-bounds {
    border-style: solid;
    border-width: calc(1px * var(--tl-scale));
  }

  .tl-selected {
    stroke: var(--tl-selectStroke);
  }

  .tl-hovered {
    stroke: var(--tl-selectStroke);
  }

  .tl-clone-target {
    pointer-events: all;
  }

  .tl-clone-target:hover .tl-clone-button {
    opacity: 1;
  }

  .tl-clone-button-target {
    cursor: pointer;
    pointer-events: all;
  }

  .tl-clone-button-target:hover .tl-clone-button {
    fill: var(--tl-selectStroke);
  }

  .tl-clone-button {
    opacity: 0;
    r: calc(8px * var(--tl-scale));
    stroke-width: calc(1.5px * var(--tl-scale));
    stroke: var(--tl-selectStroke);
    fill: var(--tl-background);
  }

  .tl-bounds {
    pointer-events: none;
    contain: layout style size;
  }

  .tl-bounds-bg {
    stroke: none;
    fill: var(--tl-selectFill);
    pointer-events: all;
    contain: layout style size;
  }

  .tl-bounds-fg {
    fill: transparent;
    stroke: var(--tl-selectStroke);
    stroke-width: calc(1.5px * var(--tl-scale));
  }

  .tl-brush {
    fill: var(--tl-brushFill);
    stroke: var(--tl-brushStroke);
    stroke-width: calc(1px * var(--tl-scale));
    pointer-events: none;
  }

  .tl-dot {
    fill: var(--tl-background);
    stroke: var(--tl-foreground);
    stroke-width: 2px;
  }

  .tl-handle {
    fill: var(--tl-background);
    stroke: var(--tl-selectStroke);
    stroke-width: 1.5px;
    pointer-events: none;
  }

  .tl-handle-bg {
    fill: transparent;
    stroke: none;
    r: calc(16px / max(1, var(--tl-zoom)));
    pointer-events: all;
    cursor: grab;
  }

  .tl-handle-bg:active {
    pointer-events: all;
    fill: none;
  }

  .tl-handle-bg:hover {
    cursor: grab;
    fill: var(--tl-selectFill);
  }

  .tl-binding-indicator {
    fill: transparent;
    stroke: var(--tl-binding);
  }

  .tl-centered {
    display: grid;
    place-content: center;
    place-items: center;
  }

  .tl-centered > * {
    grid-column: 1;
    grid-row: 1;
  }

  .tl-centered-g {
    transform: translate(var(--tl-padding), var(--tl-padding));
  }

  .tl-current-parent > *[data-shy='true'] {
    opacity: 1;
  }

  .tl-binding {
    fill: none;
    stroke: var(--tl-selectStroke);
    stroke-width: calc(2px * var(--tl-scale));
  }

  .tl-counter-scaled-positioned {
    position: absolute;
    top: 0;
    left: 0;
    pointer-events: none;
    padding: 0;
    contain: layout style size;
  }

  .tl-fade-in {
    opacity: 1;
    transition-timing-function: ease-in-out;
    transition-property: opacity;
    transition-duration: 0.12s;
    transition-delay: 0;
  }

  .tl-fade-out {
    opacity: 0;
    transition-timing-function: ease-out;
    transition-property: opacity;
    transition-duration: 0.12s;
    transition-delay: 0;
  }

  .tl-counter-scaled-positioned > .tl-positioned-div {
    user-select: none;
    padding: 64px;
  }

  .tl-context-bar > * {
    grid-column: 1;
    grid-row: 1;
  }

  .tl-bounds-detail {
    padding: 2px 3px;
    border-radius: 1px;
    white-space: nowrap;
    width: fit-content;
    text-align: center;
    font-size: 12px;
    font-weight: 500;
    background-color: var(--tl-selectStroke);
    color: var(--tl-background);
  }

  .tl-grid-canvas {
    position: absolute;
    touch-action: none;
    pointer-events: none;
    user-select: none;
  }

  .tl-grid {
    position: absolute;
    width: 100%;
    height: 100%;
    touch-action: none;
    pointer-events: none;
    user-select: none;
  }

  .tl-grid-dot {
    fill: var(--tl-grid);
  }

  .tl-html-canvas {
    position: absolute;
    top: 0px;
    left: 0px;
    width: 100%;
    height: 100%;
    zindex: 20000;
    pointer-events: none;
    border: 2px solid red;
  }

  .tl-direction-indicator {
    z-index: 100000;
    position: absolute;
    top: 0px;
    left: 0px;
    fill: var(--tl-selectStroke);
  }
`,sv=vb(V(22)),ny=vb(V(22)),Dv={},Ik={toVector(b,g){void 0===b&&(b=g);return Array.isArray(b)?b:[b,b]},add(b,g){return[b[0]+g[0],b[1]+g[1]]},sub(b,g){return[b[0]-g[0],b[1]-g[1]]},addTo(b,g){b[0]+=g[0];b[1]+=g[1]},subTo(b,g){b[0]-=g[0];b[1]-=g[1]}},uy={pointer:{start:"down",change:"move",end:"up"},mouse:{start:"down",change:"move",end:"up"},touch:{start:"start",change:"move",end:"end"},gesture:{start:"start",change:"change",end:"end"}},kD=["enter","leave"],lD=["gotpointercapture","lostpointercapture"],
wy=class{constructor(b,g,m){this.ctrl=b;this.args=g;this.key=m;this.state||(this.state={},this.computeValues([0,0]),this.computeInitial(),this.init&&this.init(),this.reset())}get state(){return this.ctrl.state[this.key]}set state(b){this.ctrl.state[this.key]=b}get shared(){return this.ctrl.state.shared}get eventStore(){return this.ctrl.gestureEventStores[this.key]}get timeoutStore(){return this.ctrl.gestureTimeoutStores[this.key]}get config(){return this.ctrl.config[this.key]}get sharedConfig(){return this.ctrl.config.shared}get handler(){return this.ctrl.handlers[this.key]}reset(){const {state:b,
shared:g,ingKey:m,args:I}=this;g[m]=b._active=b.active=b._blocked=b._force=!1;b._step=[!1,!1];b.intentional=!1;b._movement=[0,0];b._distance=[0,0];b._direction=[0,0];b._delta=[0,0];b._bounds=[[-Infinity,Infinity],[-Infinity,Infinity]];b.args=I;b.axis=void 0;b.memo=void 0;b.elapsedTime=0;b.direction=[0,0];b.distance=[0,0];b.overflow=[0,0];b._movementBound=[!1,!1];b.velocity=[0,0];b.movement=[0,0];b.delta=[0,0];b.timeStamp=0}start(b){const g=this.state,m=this.config;g._active||(this.reset(),this.computeInitial(),
g._active=!0,g.target=b.target,g.currentTarget=b.currentTarget,g.lastOffset=m.from?Nh(m.from,g):g.offset,g.offset=g.lastOffset);g.startTime=g.timeStamp=b.timeStamp}computeValues(b){const g=this.state;g._values=b;g.values=this.config.transform(b)}computeInitial(){const b=this.state;b._initial=b._values;b.initial=b.values}compute(b){const {state:g,config:m,shared:I}=this;g.args=this.args;var W=0;if(b){g.event=b;m.preventDefault&&b.cancelable&&g.event.preventDefault();g.type=b.type;I.touches=this.ctrl.pointerIds.size||
this.ctrl.touchIds.size;I.locked=!!document.pointerLockElement;W=Object;var ia=W.assign,sa={};"buttons"in b&&(sa.buttons=b.buttons);if("shiftKey"in b){const {shiftKey:Qc,altKey:Uc,metaKey:Vd,ctrlKey:ae}=b;Object.assign(sa,{shiftKey:Qc,altKey:Uc,metaKey:Vd,ctrlKey:ae})}ia.call(W,I,sa);I.down=I.pressed=1===I.buttons%2||0<I.touches;W=b.timeStamp-g.timeStamp;g.timeStamp=b.timeStamp;g.elapsedTime=g.timeStamp-g.startTime}g._active&&(ia=g._delta.map(Math.abs),Ik.addTo(g._distance,ia));this.axisIntent&&this.axisIntent(b);
const [La,Va]=g._movement,[$a,lb]=m.threshold,{_step:ub,values:Rb}=g;m.hasCustomTransform?(!1===ub[0]&&(ub[0]=Math.abs(La)>=$a&&Rb[0]),!1===ub[1]&&(ub[1]=Math.abs(Va)>=lb&&Rb[1])):(!1===ub[0]&&(ub[0]=Math.abs(La)>=$a&&Math.sign(La)*$a),!1===ub[1]&&(ub[1]=Math.abs(Va)>=lb&&Math.sign(Va)*lb));g.intentional=!1!==ub[0]||!1!==ub[1];if(g.intentional){ia=[0,0];if(m.hasCustomTransform){const [Qc,Uc]=Rb;ia[0]=!1!==ub[0]?Qc-ub[0]:0;ia[1]=!1!==ub[1]?Uc-ub[1]:0}else ia[0]=!1!==ub[0]?La-ub[0]:0,ia[1]=!1!==ub[1]?
Va-ub[1]:0;this.restrictToAxis&&!g._blocked&&this.restrictToAxis(ia);sa=g.offset;var ec=g._active&&!g._blocked||g.active;ec&&(g.first=g._active&&!g.active,g.last=!g._active&&g.active,g.active=I[this.ingKey]=g._active,b&&(g.first&&("bounds"in m&&(g._bounds=Nh(m.bounds,g)),this.setup&&this.setup()),g.movement=ia,this.computeOffset()));var [Vb,rc]=g.offset,[[mc,Wb],[tc,Hc]]=g._bounds;g.overflow=[Vb<mc?-1:Vb>Wb?1:0,rc<tc?-1:rc>Hc?1:0];g._movementBound[0]=g.overflow[0]?!1===g._movementBound[0]?g._movement[0]:
g._movementBound[0]:!1;g._movementBound[1]=g.overflow[1]?!1===g._movementBound[1]?g._movement[1]:g._movementBound[1]:!1;g.offset=Fh(g._bounds,g.offset,g._active?m.rubberband||[0,0]:[0,0]);g.delta=Ik.sub(g.offset,sa);this.computeMovement();ec&&(!g.last||32<W)&&(g.delta=Ik.sub(g.offset,sa),b=g.delta.map(Math.abs),Ik.addTo(g.distance,b),g.direction=g.delta.map(Math.sign),g._direction=g._delta.map(Math.sign),!g.first&&0<W&&(g.velocity=[b[0]/W,b[1]/W]))}}emit(){const b=this.state;var g=this.shared;const m=
this.config;b._active||this.clean();if(!b._blocked&&b.intentional||b._force||m.triggerAllEvents)g=this.handler(Bg(Bg(Bg({},g),b),{},{[this.aliasKey]:b.values})),void 0!==g&&(b.memo=g)}clean(){this.eventStore.clean();this.timeoutStore.clean()}},Ks=class extends wy{constructor(...b){super(...b);Xg(this,"aliasKey","xy")}reset(){super.reset();this.state.axis=void 0}init(){this.state.offset=[0,0];this.state.lastOffset=[0,0]}computeOffset(){this.state.offset=Ik.add(this.state.lastOffset,this.state.movement)}computeMovement(){this.state.movement=
Ik.sub(this.state.offset,this.state.lastOffset)}axisIntent(b){const g=this.state,m=this.config;!g.axis&&b&&(b="object"===typeof m.axisThreshold?m.axisThreshold[Mh(b)]:m.axisThreshold,g.axis=Yi(g._movement,b));g._blocked=(m.lockDirection||!!m.axis)&&!g.axis||!!m.axis&&m.axis!==g.axis}restrictToAxis(b){if(this.config.axis||this.config.lockDirection)switch(this.state.axis){case "x":b[1]=0;break;case "y":b[0]=0}}},mD=b=>b,xy={enabled(b=!0){return b},eventOptions(b,g,m){return Bg(Bg({},m.shared.eventOptions),
b)},preventDefault(b=!1){return b},triggerAllEvents(b=!1){return b},rubberband(b=0){switch(b){case !0:return[.15,.15];case !1:return[0,0];default:return Ik.toVector(b)}},from(b){if("function"===typeof b)return b;if(null!=b)return Ik.toVector(b)},transform(b,g,m){b=b||m.shared.transform;this.hasCustomTransform=!!b;return b||mD},threshold(b){return Ik.toVector(b,0)}},Lq=Bg(Bg({},xy),{},{axis(b,g,{axis:m}){this.lockDirection="lock"===m;if(!this.lockDirection)return m},axisThreshold(b=0){return b},bounds(b=
{}){if("function"===typeof b)return ia=>Lq.bounds(b(ia));if("current"in b)return()=>b.current;if("function"===typeof HTMLElement&&b instanceof HTMLElement)return b;const {left:g=-Infinity,right:m=Infinity,top:I=-Infinity,bottom:W=Infinity}=b;return[[g,m],[I,W]]}}),yy={ArrowRight:(b=1)=>[10*b,0],ArrowLeft:(b=1)=>[-10*b,0],ArrowUp:(b=1)=>[0,-10*b],ArrowDown:(b=1)=>[0,10*b]},nD=class extends Ks{constructor(...b){super(...b);Xg(this,"ingKey","dragging")}reset(){super.reset();const b=this.state;b._pointerId=
void 0;b._pointerActive=!1;b._keyboardActive=!1;b._preventScroll=!1;b._delayed=!1;b.swipe=[0,0];b.tap=!1;b.canceled=!1;b.cancel=this.cancel.bind(this)}setup(){const b=this.state;if(b._bounds instanceof HTMLElement){const g=b._bounds.getBoundingClientRect(),m=b.currentTarget.getBoundingClientRect();b._bounds=Lq.bounds({left:g.left-m.left+b.offset[0],right:g.right-m.right+b.offset[0],top:g.top-m.top+b.offset[1],bottom:g.bottom-m.bottom+b.offset[1]})}}cancel(){const b=this.state;b.canceled||(b.canceled=
!0,b._active=!1,setTimeout(()=>{this.compute();this.emit()},0))}setActive(){this.state._active=this.state._pointerActive||this.state._keyboardActive}clean(){this.pointerClean();this.state._pointerActive=!1;this.state._keyboardActive=!1;super.clean()}pointerDown(b){const g=this.config,m=this.state;if(null==b.buttons||(Array.isArray(g.pointerButtons)?g.pointerButtons.includes(b.buttons):-1===g.pointerButtons||g.pointerButtons===b.buttons)){var I=this.ctrl.setEventIds(b);g.pointerCapture&&b.target.setPointerCapture(b.pointerId);
I&&1<I.size&&m._pointerActive||(this.start(b),this.setupPointer(b),m._pointerId=Rj(b),m._pointerActive=!0,this.computeValues(fi(b)),this.computeInitial(),g.preventScrollAxis&&"mouse"!==Mh(b)?(m._active=!1,this.setupScrollPrevention(b)):0<g.delay?(this.setupDelayTrigger(b),g.triggerAllEvents&&(this.compute(b),this.emit())):this.startPointerDrag(b))}}startPointerDrag(b){const g=this.state;g._active=!0;g._preventScroll=!0;g._delayed=!1;this.compute(b);this.emit()}pointerMove(b){const g=this.state,m=
this.config;if(g._pointerActive&&(g.type!==b.type||b.timeStamp!==g.timeStamp)){var I=Rj(b);if(void 0===g._pointerId||I===g._pointerId)I=fi(b),document.pointerLockElement===b.target?g._delta=[b.movementX,b.movementY]:(g._delta=Ik.sub(I,g._values),this.computeValues(I)),Ik.addTo(g._movement,g._delta),this.compute(b),g._delayed&&g.intentional?(this.timeoutStore.remove("dragDelay"),g.active=!1,this.startPointerDrag(b)):m.preventScrollAxis&&!g._preventScroll?g.axis&&(g.axis===m.preventScrollAxis||"xy"===
m.preventScrollAxis?(g._active=!1,this.clean()):(this.timeoutStore.remove("startPointerDrag"),this.startPointerDrag(b))):this.emit()}}pointerUp(b){this.ctrl.setEventIds(b);try{this.config.pointerCapture&&b.target.hasPointerCapture(b.pointerId)&&b.target.releasePointerCapture(b.pointerId)}catch(sa){}const g=this.state,m=this.config;if(g._active&&g._pointerActive){var I=Rj(b);if(void 0===g._pointerId||I===g._pointerId){this.state._pointerActive=!1;this.setActive();this.compute(b);var [W,ia]=g._distance;
g.tap=W<=m.tapsThreshold&&ia<=m.tapsThreshold;if(g.tap&&m.filterTaps)g._force=!0;else{const [sa,La]=g.direction,[Va,$a]=g.velocity,[lb,ub]=g.movement,[Rb,ec]=m.swipe.velocity,[Vb,rc]=m.swipe.distance;g.elapsedTime<m.swipe.duration&&(Math.abs(Va)>Rb&&Math.abs(lb)>Vb&&(g.swipe[0]=sa),Math.abs($a)>ec&&Math.abs(ub)>rc&&(g.swipe[1]=La))}this.emit()}}}pointerClick(b){!this.state.tap&&0<b.detail&&(b.preventDefault(),b.stopPropagation())}setupPointer(b){const g=this.config,m=g.device;g.pointerLock&&b.currentTarget.requestPointerLock();
g.pointerCapture||(this.eventStore.add(this.sharedConfig.window,m,"change",this.pointerMove.bind(this)),this.eventStore.add(this.sharedConfig.window,m,"end",this.pointerUp.bind(this)),this.eventStore.add(this.sharedConfig.window,m,"cancel",this.pointerUp.bind(this)))}pointerClean(){this.config.pointerLock&&document.pointerLockElement===this.state.currentTarget&&document.exitPointerLock()}preventScroll(b){this.state._preventScroll&&b.cancelable&&b.preventDefault()}setupScrollPrevention(b){this.state._preventScroll=
!1;"persist"in b&&"function"===typeof b.persist&&b.persist();const g=this.eventStore.add(this.sharedConfig.window,"touch","change",this.preventScroll.bind(this),{passive:!1});this.eventStore.add(this.sharedConfig.window,"touch","end",g);this.eventStore.add(this.sharedConfig.window,"touch","cancel",g);this.timeoutStore.add("startPointerDrag",this.startPointerDrag.bind(this),this.config.preventScrollDelay,b)}setupDelayTrigger(b){this.state._delayed=!0;this.timeoutStore.add("dragDelay",()=>{this.state._step=
[0,0];this.startPointerDrag(b)},this.config.delay)}keyDown(b){const g=yy[b.key];if(g){const m=this.state,I=b.shiftKey?10:b.altKey?.1:1;this.start(b);m._delta=g(I);m._keyboardActive=!0;Ik.addTo(m._movement,m._delta);this.compute(b);this.emit()}}keyUp(b){b.key in yy&&(this.state._keyboardActive=!1,this.setActive(),this.compute(b),this.emit())}bind(b){const g=this.config.device;b(g,"start",this.pointerDown.bind(this));this.config.pointerCapture&&(b(g,"change",this.pointerMove.bind(this)),b(g,"end",this.pointerUp.bind(this)),
b(g,"cancel",this.pointerUp.bind(this)),b("lostPointerCapture","",this.pointerUp.bind(this)));this.config.keys&&(b("key","down",this.keyDown.bind(this)),b("key","up",this.keyUp.bind(this)));this.config.filterTaps&&b("click","",this.pointerClick.bind(this),{capture:!0,passive:!1})}},Mq="undefined"!==typeof window&&window.document&&window.document.createElement;try{var zy="constructor"in GestureEvent}catch(b){zy=!1}var oD=zy,Js=Mq&&"ontouchstart"in window||Mq&&1<window.navigator.maxTouchPoints,Ay=Mq&&
"ontouchstart"in window||Mq&&1<window.navigator.maxTouchPoints,vy=Mq&&"onpointerdown"in window,jD=Mq&&"exitPointerLock"in window.document,ty={mouse:0,touch:0,pen:8},fD=Bg(Bg({},Lq),{},{device(b,g,{pointer:{touch:m=!1,lock:I=!1,mouse:W=!1}={}}){this.pointerLock=I&&jD;return Js&&m?"touch":this.pointerLock?"mouse":vy&&!W?"pointer":Js?"touch":"mouse"},preventScrollAxis(b,g,{preventScroll:m}){this.preventScrollDelay="number"===typeof m?m:m||void 0===m&&b?250:void 0;if(Ay&&!1!==m)return b?b:void 0!==m?
"y":void 0},pointerCapture(b,g,{pointer:{capture:m=!0,buttons:I=1,keys:W=!0}={}}){this.pointerButtons=I;this.keys=W;return!this.pointerLock&&"pointer"===this.device&&m},threshold(b,g,{filterTaps:m=!1,tapsThreshold:I=3,axis:W}){b=Ik.toVector(b,m?I:W?1:0);this.filterTaps=m;this.tapsThreshold=I;return b},swipe({velocity:b=.5,distance:g=50,duration:m=250}={}){return{velocity:this.transform(Ik.toVector(b)),distance:this.transform(Ik.toVector(g)),duration:m}},delay(b=0){switch(b){case !0:return 180;case !1:return 0;
default:return b}},axisThreshold(b){return b?Bg(Bg({},ty),b):ty}}),gD=class extends wy{constructor(...b){super(...b);Xg(this,"ingKey","pinching");Xg(this,"aliasKey","da")}init(){this.state.offset=[1,0];this.state.lastOffset=[1,0];this.state._pointerEvents=new Map}reset(){super.reset();const b=this.state;b._touchIds=[];b.canceled=!1;b.cancel=this.cancel.bind(this);b.turns=0}computeOffset(){const {type:b,movement:g,lastOffset:m}=this.state;this.state.offset="wheel"===b?Ik.add(g,m):[(1+g[0])*m[0],g[1]+
m[1]]}computeMovement(){const {offset:b,lastOffset:g}=this.state;this.state.movement=[b[0]/g[0],b[1]-g[1]]}axisIntent(){const b=this.state,[g,m]=b._movement;if(!b.axis){const I=30*Math.abs(g)-Math.abs(m);0>I?b.axis="angle":0<I&&(b.axis="scale")}}restrictToAxis(b){this.config.lockDirection&&("scale"===this.state.axis?b[1]=0:"angle"===this.state.axis&&(b[0]=0))}cancel(){const b=this.state;b.canceled||setTimeout(()=>{b.canceled=!0;b._active=!1;this.compute();this.emit()},0)}touchStart(b){this.ctrl.setEventIds(b);
var g=this.state;const m=this.ctrl.touchIds;g._active&&g._touchIds.every(I=>m.has(I))||2>m.size||(this.start(b),g._touchIds=Array.from(m).slice(0,2),g=Em(b,g._touchIds),this.pinchStart(b,g))}pointerStart(b){if(null==b.buttons||1===b.buttons%2){this.ctrl.setEventIds(b);b.target.setPointerCapture(b.pointerId);var g=this.state,m=g._pointerEvents,I=this.ctrl.pointerIds;g._active&&Array.from(m.keys()).every(W=>I.has(W))||(2>m.size&&m.set(b.pointerId,b),2>g._pointerEvents.size||(this.start(b),g=wj(...Array.from(m.values())),
this.pinchStart(b,g)))}}pinchStart(b,g){this.state.origin=g.origin;this.computeValues([g.distance,g.angle]);this.computeInitial();this.compute(b);this.emit()}touchMove(b){if(this.state._active){var g=Em(b,this.state._touchIds);this.pinchMove(b,g)}}pointerMove(b){var g=this.state._pointerEvents;g.has(b.pointerId)&&g.set(b.pointerId,b);this.state._active&&(g=wj(...Array.from(g.values())),this.pinchMove(b,g))}pinchMove(b,g){const m=this.state,I=g.angle-m._values[1];let W=0;270<Math.abs(I)&&(W+=Math.sign(I));
this.computeValues([g.distance,g.angle-360*W]);m.origin=g.origin;m.turns=W;m._movement=[m._values[0]/m._initial[0]-1,m._values[1]-m._initial[1]];this.compute(b);this.emit()}touchEnd(b){this.ctrl.setEventIds(b);this.state._active&&this.state._touchIds.some(g=>!this.ctrl.touchIds.has(g))&&(this.state._active=!1,this.compute(b),this.emit())}pointerEnd(b){const g=this.state;this.ctrl.setEventIds(b);try{b.target.releasePointerCapture(b.pointerId)}catch(m){}g._pointerEvents.has(b.pointerId)&&g._pointerEvents.delete(b.pointerId);
g._active&&2>g._pointerEvents.size&&(g._active=!1,this.compute(b),this.emit())}gestureStart(b){b.cancelable&&b.preventDefault();const g=this.state;g._active||(this.start(b),this.computeValues([b.scale,b.rotation]),g.origin=[b.clientX,b.clientY],this.compute(b),this.emit())}gestureMove(b){b.cancelable&&b.preventDefault();if(this.state._active){var g=this.state;this.computeValues([b.scale,b.rotation]);g.origin=[b.clientX,b.clientY];var m=g._movement;g._movement=[b.scale-1,b.rotation];g._delta=Ik.sub(g._movement,
m);this.compute(b);this.emit()}}gestureEnd(b){this.state._active&&(this.state._active=!1,this.compute(b),this.emit())}wheel(b){const g=this.config.modifierKey;if(!g||b[g])this.state._active?this.wheelChange(b):this.wheelStart(b),this.timeoutStore.add("wheelEnd",this.wheelEnd.bind(this))}wheelStart(b){this.start(b);this.wheelChange(b)}wheelChange(b){"uv"in b||b.cancelable&&b.preventDefault();const g=this.state;g._delta=[-Sj(b)[1]/100*g.offset[0],0];Ik.addTo(g._movement,g._delta);mi(g);this.state.origin=
[b.clientX,b.clientY];this.compute(b);this.emit()}wheelEnd(){this.state._active&&(this.state._active=!1,this.compute(),this.emit())}bind(b){const g=this.config.device;g&&(b(g,"start",this[g+"Start"].bind(this)),b(g,"change",this[g+"Move"].bind(this)),b(g,"end",this[g+"End"].bind(this)),b(g,"cancel",this[g+"End"].bind(this)));this.config.pinchOnWheel&&b("wheel","",this.wheel.bind(this),{passive:!1})}},hD=Bg(Bg({},xy),{},{device(b,g,{shared:m,pointer:{touch:I=!1}={}}){if(m.target&&!Js&&oD)return"gesture";
if(Js&&I)return"touch";if(Ay){if(vy)return"pointer";if(Js)return"touch"}},bounds(b,g,{scaleBounds:m={},angleBounds:I={}}){const W=sa=>{sa=Nh(m,sa);sa=Object.assign({},{min:-Infinity,max:Infinity},sa||{});return[sa.min,sa.max]},ia=sa=>{sa=Nh(I,sa);sa=Object.assign({},{min:-Infinity,max:Infinity},sa||{});return[sa.min,sa.max]};return"function"!==typeof m&&"function"!==typeof I?[W(),ia()]:sa=>[W(sa),ia(sa)]},threshold(b,g,m){this.lockDirection="lock"===m.axis;return Ik.toVector(b,this.lockDirection?
[.1,3]:0)},modifierKey(b){return void 0===b?"ctrlKey":b},pinchOnWheel(b=!0){return b}}),dD=class extends Ks{constructor(...b){super(...b);Xg(this,"ingKey","moving")}move(b){this.config.mouseOnly&&"mouse"!==b.pointerType||(this.state._active?this.moveChange(b):this.moveStart(b),this.timeoutStore.add("moveEnd",this.moveEnd.bind(this)))}moveStart(b){this.start(b);this.computeValues(fi(b));this.compute(b);this.computeInitial();this.emit()}moveChange(b){if(this.state._active){var g=fi(b),m=this.state;
m._delta=Ik.sub(g,m._values);Ik.addTo(m._movement,m._delta);this.computeValues(g);this.compute(b);this.emit()}}moveEnd(b){this.state._active&&(this.state._active=!1,this.compute(b),this.emit())}bind(b){b("pointer","change",this.move.bind(this));b("pointer","leave",this.moveEnd.bind(this))}},eD=Bg(Bg({},Lq),{},{mouseOnly:(b=!0)=>b}),bD=class extends Ks{constructor(...b){super(...b);Xg(this,"ingKey","scrolling")}scroll(b){this.state._active||this.start(b);this.scrollChange(b);this.timeoutStore.add("scrollEnd",
this.scrollEnd.bind(this))}scrollChange(b){b.cancelable&&b.preventDefault();const g=this.state;var m,I;const {scrollX:W,scrollY:ia,scrollLeft:sa,scrollTop:La}=b.currentTarget;var Va=[null!==(m=null!==W&&void 0!==W?W:sa)&&void 0!==m?m:0,null!==(I=null!==ia&&void 0!==ia?ia:La)&&void 0!==I?I:0];g._delta=Ik.sub(Va,g._values);Ik.addTo(g._movement,g._delta);this.computeValues(Va);this.compute(b);this.emit()}scrollEnd(){this.state._active&&(this.state._active=!1,this.compute(),this.emit())}bind(b){b("scroll",
"",this.scroll.bind(this))}},cD=Lq,YC=class extends Ks{constructor(...b){super(...b);Xg(this,"ingKey","wheeling")}wheel(b){this.state._active||this.start(b);this.wheelChange(b);this.timeoutStore.add("wheelEnd",this.wheelEnd.bind(this))}wheelChange(b){const g=this.state;g._delta=Sj(b);Ik.addTo(g._movement,g._delta);mi(g);this.compute(b);this.emit()}wheelEnd(){this.state._active&&(this.state._active=!1,this.compute(),this.emit())}bind(b){b("wheel","",this.wheel.bind(this))}},ZC=Lq,$C=class extends Ks{constructor(...b){super(...b);
Xg(this,"ingKey","hovering")}enter(b){this.config.mouseOnly&&"mouse"!==b.pointerType||(this.start(b),this.computeValues(fi(b)),this.compute(b),this.emit())}leave(b){if(!this.config.mouseOnly||"mouse"===b.pointerType){var g=this.state;if(g._active){g._active=!1;var m=fi(b);g._movement=g._delta=Ik.sub(m,g._values);this.computeValues(m);this.compute(b);g.delta=g.movement;this.emit()}}}bind(b){b("pointer","enter",this.enter.bind(this));b("pointer","leave",this.leave.bind(this))}},aD=Bg(Bg({},Lq),{},{mouseOnly:(b=
!0)=>b}),zv=new Map,yv=new Map,WC={key:"drag",engine:nD,resolver:fD},XC={key:"hover",engine:$C,resolver:aD},VC={key:"move",engine:dD,resolver:eD},ip={key:"pinch",engine:gD,resolver:hD},zo={key:"scroll",engine:bD,resolver:cD},iD={key:"wheel",engine:YC,resolver:ZC},xv=vb(V(22)),UC={target(b){if(b)return()=>"current"in b?b.current:b},enabled(b=!0){return b},window(b=Mq?window:void 0){return b},eventOptions({passive:b=!0,capture:g=!1}={}){return{passive:b,capture:g}},transform(b){return b}},ED=["target",
"eventOptions","window","enabled","transform"],Qy=class{constructor(b,g){Xg(this,"_listeners",new Set);this._ctrl=b;this._gestureKey=g}add(b,g,m,I,W){const ia=this._listeners,sa=Di(g,m),La=Bg(Bg({},this._gestureKey?this._ctrl.config[this._gestureKey].eventOptions:{}),W);b.addEventListener(sa,I,La);const Va=()=>{b.removeEventListener(sa,I,La);ia.delete(Va)};ia.add(Va);return Va}clean(){this._listeners.forEach(b=>b());this._listeners.clear()}},ry=class{constructor(){Xg(this,"_timeouts",new Map)}add(b,
g,m=140,...I){this.remove(b);this._timeouts.set(b,window.setTimeout(g,m,...I))}remove(b){(b=this._timeouts.get(b))&&window.clearTimeout(b)}clean(){this._timeouts.forEach(b=>void window.clearTimeout(b));this._timeouts.clear()}},sy=class{constructor(b){Xg(this,"gestures",new Set);Xg(this,"_targetEventStore",new Qy(this));Xg(this,"gestureEventStores",{});Xg(this,"gestureTimeoutStores",{});Xg(this,"handlers",{});Xg(this,"config",{});Xg(this,"pointerIds",new Set);Xg(this,"touchIds",new Set);Xg(this,"state",
{shared:{shiftKey:!1,metaKey:!1,ctrlKey:!1,altKey:!1}});b.drag&&Ag(this,"drag");b.wheel&&Ag(this,"wheel");b.scroll&&Ag(this,"scroll");b.move&&Ag(this,"move");b.pinch&&Ag(this,"pinch");b.hover&&Ag(this,"hover")}setEventIds(b){if("touches"in b)return this.touchIds=new Set(Fl(b));if("pointerId"in b)return"pointerup"===b.type||"pointercancel"===b.type?this.pointerIds.delete(b.pointerId):"pointerdown"===b.type&&this.pointerIds.add(b.pointerId),this.pointerIds}applyHandlers(b,g){this.handlers=b;this.nativeHandlers=
g}applyConfig(b,g){this.config=fj(b,g,this.config)}clean(){this._targetEventStore.clean();for(const b of this.gestures)this.gestureEventStores[b].clean(),this.gestureTimeoutStores[b].clean()}effect(){this.config.shared.target&&this.bind();return()=>this._targetEventStore.clean()}bind(...b){var g=this.config.shared;const m={};let I;if(g.target&&(I=g.target(),!I))return;if(g.enabled){for(const W of this.gestures){const ia=this.config[W],sa=qy(m,ia.eventOptions,!!I);ia.enabled&&(new (zv.get(W))(this,
b,W)).bind(sa)}g=qy(m,g.eventOptions,!!I);for(const W in this.nativeHandlers)g(W,"",ia=>this.nativeHandlers[W](Bg(Bg({},this.state.shared),{},{event:ia,args:b})),void 0,!0)}for(const W in m)m[W]=Oh(...m[W]);if(!I)return m;for(const W in m){const {device:ia,capture:sa,passive:La}=Lh(W);this._targetEventStore.add(I,ia,"",m[W],{capture:sa,passive:La})}}},qy=(b,g,m)=>(I,W,ia,sa={},La=!1)=>{var Va,$a;const lb=null!==(Va=sa.capture)&&void 0!==Va?Va:g.capture;sa=null!==($a=sa.passive)&&void 0!==$a?$a:g.passive;
I=La?I:zk(I,W,lb);m&&sa&&(I+="Passive");b[I]=b[I]||[];b[I].push(ia)},Av=/^on(Drag|Wheel|Scroll|Move|Pinch|Hover)/,Kq=vb(V(22)),Bv=vb(V(22)),Ry=vb(V(22)),Jy=vb(V(22)),FD=vb(V(22)),GD=vb(V(22)),HD=vb(V(22)),ID=vb(V(22)),JD={none:(b,g)=>"none",["default"]:(b,g)=>"default",pointer:(b,g)=>"pointer",crosshair:(b,g)=>"crosshair",move:(b,g)=>"move",wait:(b,g)=>"wait",progress:(b,g)=>"progress",grab:(b,g)=>qj('\x3cpath d\x3d"m13.5557 17.5742c-.098-.375-.196-.847-.406-1.552-.167-.557-.342-.859-.47-1.233-.155-.455-.303-.721-.496-1.181-.139-.329-.364-1.048-.457-1.44-.119-.509.033-.924.244-1.206.253-.339.962-.49 1.357-.351.371.13.744.512.916.788.288.46.357.632.717 1.542.393.992.564 1.918.611 2.231l.085.452c-.001-.04-.043-1.122-.044-1.162-.035-1.029-.06-1.823-.038-2.939.002-.126.064-.587.084-.715.078-.5.305-.8.673-.979.412-.201.926-.215 1.401-.017.423.173.626.55.687 1.022.014.109.094.987.093 1.107-.013 1.025.006 1.641.015 2.174.004.231.003 1.625.017 1.469.061-.656.094-3.189.344-3.942.144-.433.405-.746.794-.929.431-.203 1.113-.07 1.404.243.285.305.446.692.482 1.153.032.405-.019.897-.02 1.245 0 .867-.021 1.324-.037 2.121-.001.038-.015.298.023.182.094-.28.188-.542.266-.745.049-.125.241-.614.359-.859.114-.234.211-.369.415-.688.2-.313.415-.448.668-.561.54-.235 1.109.112 1.301.591.086.215.009.713-.028 1.105-.061.647-.254 1.306-.352 1.648-.128.447-.274 1.235-.34 1.601-.072.394-.234 1.382-.359 1.82-.086.301-.371.978-.652 1.384 0 0-1.074 1.25-1.192 1.812-.117.563-.078.567-.101.965-.024.399.121.923.121.923s-.802.104-1.234.034c-.391-.062-.875-.841-1-1.078-.172-.328-.539-.265-.682-.023-.225.383-.709 1.07-1.051 1.113-.668.084-2.054.03-3.139.02 0 0 .185-1.011-.227-1.358-.305-.26-.83-.784-1.144-1.06l-.832-.921c-.284-.36-.629-1.093-1.243-1.985-.348-.504-1.027-1.085-1.284-1.579-.223-.425-.331-.954-.19-1.325.225-.594.675-.897 1.362-.832.519.05.848.206 1.238.537.225.19.573.534.75.748.163.195.203.276.377.509.23.307.302.459.214.121" fill\x3d"%23fff"/\x3e\x3cg stroke\x3d"%23000" stroke-linecap\x3d"round" stroke-width\x3d".75"\x3e\x3cpath d\x3d"m13.5557 17.5742c-.098-.375-.196-.847-.406-1.552-.167-.557-.342-.859-.47-1.233-.155-.455-.303-.721-.496-1.181-.139-.329-.364-1.048-.457-1.44-.119-.509.033-.924.244-1.206.253-.339.962-.49 1.357-.351.371.13.744.512.916.788.288.46.357.632.717 1.542.393.992.564 1.918.611 2.231l.085.452c-.001-.04-.043-1.122-.044-1.162-.035-1.029-.06-1.823-.038-2.939.002-.126.064-.587.084-.715.078-.5.305-.8.673-.979.412-.201.926-.215 1.401-.017.423.173.626.55.687 1.022.014.109.094.987.093 1.107-.013 1.025.006 1.641.015 2.174.004.231.003 1.625.017 1.469.061-.656.094-3.189.344-3.942.144-.433.405-.746.794-.929.431-.203 1.113-.07 1.404.243.285.305.446.692.482 1.153.032.405-.019.897-.02 1.245 0 .867-.021 1.324-.037 2.121-.001.038-.015.298.023.182.094-.28.188-.542.266-.745.049-.125.241-.614.359-.859.114-.234.211-.369.415-.688.2-.313.415-.448.668-.561.54-.235 1.109.112 1.301.591.086.215.009.713-.028 1.105-.061.647-.254 1.306-.352 1.648-.128.447-.274 1.235-.34 1.601-.072.394-.234 1.382-.359 1.82-.086.301-.371.978-.652 1.384 0 0-1.074 1.25-1.192 1.812-.117.563-.078.567-.101.965-.024.399.121.923.121.923s-.802.104-1.234.034c-.391-.062-.875-.841-1-1.078-.172-.328-.539-.265-.682-.023-.225.383-.709 1.07-1.051 1.113-.668.084-2.054.03-3.139.02 0 0 .185-1.011-.227-1.358-.305-.26-.83-.784-1.144-1.06l-.832-.921c-.284-.36-.629-1.093-1.243-1.985-.348-.504-1.027-1.085-1.284-1.579-.223-.425-.331-.954-.19-1.325.225-.594.675-.897 1.362-.832.519.05.848.206 1.238.537.225.19.573.534.75.748.163.195.203.276.377.509.23.307.302.459.214.121" stroke-linejoin\x3d"round"/\x3e\x3cpath d\x3d"m20.5664 21.7344v-3.459"/\x3e\x3cpath d\x3d"m18.5508 21.7461-.016-3.473"/\x3e\x3cpath d\x3d"m16.5547 18.3047.021 3.426"/\x3e\x3c/g\x3e',
b,g),grabbing:(b,g)=>qj("\x3cpath d\x3d'm13.5732 12.0361c.48-.178 1.427-.069 1.677.473.213.462.396 1.241.406 1.075.024-.369-.024-1.167.137-1.584.117-.304.347-.59.686-.691.285-.086.62-.116.916-.055.313.064.642.287.765.499.362.623.368 1.899.385 1.831.064-.272.07-1.229.283-1.584.141-.235.497-.445.687-.479.294-.052.656-.068.964-.008.249.049.586.344.677.487.219.344.342 1.316.379 1.658.016.141.074-.393.293-.736.406-.639 1.844-.763 1.898.639.026.654.02.624.02 1.064 0 .516-.012.828-.04 1.202-.03.399-.116 1.304-.241 1.742-.086.301-.371.978-.653 1.384 0 0-1.074 1.25-1.191 1.812-.117.563-.078.567-.102.965-.023.399.121.923.121.923s-.801.104-1.234.034c-.391-.062-.875-.84-1-1.078-.172-.328-.539-.265-.682-.023-.224.383-.709 1.07-1.05 1.113-.669.084-2.055.03-3.14.02 0 0 .185-1.011-.227-1.358-.305-.26-.83-.784-1.144-1.06l-.832-.921c-.283-.36-1.002-.929-1.243-1.985-.213-.936-.192-1.395.037-1.77.232-.381.67-.589.854-.625.208-.042.692-.039.875.062.223.123.313.159.488.391.23.307.312.456.213.121-.076-.262-.322-.595-.434-.97-.109-.361-.401-.943-.38-1.526.008-.221.103-.771.832-1.042' fill\x3d'%23fff'/\x3e\x3cg stroke\x3d'%23000' stroke-width\x3d'.75'\x3e\x3cpath d\x3d'm13.5732 12.0361c.48-.178 1.427-.069 1.677.473.213.462.396 1.241.406 1.075.024-.369-.024-1.167.137-1.584.117-.304.347-.59.686-.691.285-.086.62-.116.916-.055.313.064.642.287.765.499.362.623.368 1.899.385 1.831.064-.272.07-1.229.283-1.584.141-.235.497-.445.687-.479.294-.052.656-.068.964-.008.249.049.586.344.677.487.219.344.342 1.316.379 1.658.016.141.074-.393.293-.736.406-.639 1.844-.763 1.898.639.026.654.02.624.02 1.064 0 .516-.012.828-.04 1.202-.03.399-.116 1.304-.241 1.742-.086.301-.371.978-.653 1.384 0 0-1.074 1.25-1.191 1.812-.117.563-.078.567-.102.965-.023.399.121.923.121.923s-.801.104-1.234.034c-.391-.062-.875-.84-1-1.078-.172-.328-.539-.265-.682-.023-.224.383-.709 1.07-1.05 1.113-.669.084-2.055.03-3.14.02 0 0 .185-1.011-.227-1.358-.305-.26-.83-.784-1.144-1.06l-.832-.921c-.283-.36-1.002-.929-1.243-1.985-.213-.936-.192-1.395.037-1.77.232-.381.67-.589.854-.625.208-.042.692-.039.875.062.223.123.313.159.488.391.23.307.312.456.213.121-.076-.262-.322-.595-.434-.97-.109-.361-.401-.943-.38-1.526.008-.221.103-.771.832-1.042z' stroke-linejoin\x3d'round'/\x3e\x3cpath d\x3d'm20.5664 19.7344v-3.459' stroke-linecap\x3d'round'/\x3e\x3cpath d\x3d'm18.5508 19.7461-.016-3.473' stroke-linecap\x3d'round'/\x3e\x3cpath d\x3d'm16.5547 16.3047.021 3.426' stroke-linecap\x3d'round'/\x3e\x3c/g\x3e",
b,g),text:(b,g)=>qj("\x3cpath d\x3d'm6.94 2v-1c-1.35866267-.08246172-2.66601117.53165299-3.47 1.63-.80398883-1.09834701-2.11133733-1.71246172-3.47-1.63v1c1.30781678-.16635468 2.55544738.59885876 3 1.84v5.1h-1v1h1v4.16c-.4476345 1.2386337-1.69302129 2.002471-3 1.84v1c1.35687108.0731933 2.6600216-.5389494 3.47-1.63.8099784 1.0910506 2.11312892 1.7031933 3.47 1.63v-1c-1.28590589.133063-2.49760499-.6252793-2.94-1.84v-4.18h1v-1h-1v-5.08c.43943906-1.21710975 1.65323743-1.97676587 2.94-1.84z' transform\x3d'translate(14 9)'/\x3e",
b,g),["resize-edge"]:(b,g)=>qj("\x3cpath d\x3d'm9 17.9907v.005l5.997 5.996.001-3.999h1.999 2.02v4l5.98-6.001-5.98-5.999.001 4.019-2.021.002h-2l.001-4.022zm1.411.003 3.587-3.588-.001 2.587h3.5 2.521v-2.585l3.565 3.586-3.564 3.585-.001-2.585h-2.521l-3.499-.001-.001 2.586z' fill\x3d'%23fff'/\x3e\x3cpath d\x3d'm17.4971 18.9932h2.521v2.586l3.565-3.586-3.565-3.585v2.605h-2.521-3.5v-2.607l-3.586 3.587 3.586 3.586v-2.587z' fill\x3d'%23000'/\x3e",b,g),["resize-corner"]:(b,g)=>qj("\x3cpath d\x3d'm19.7432 17.0869-4.072 4.068 2.829 2.828-8.473-.013-.013-8.47 2.841 2.842 4.075-4.068 1.414-1.415-2.844-2.842h8.486v8.484l-2.83-2.827z' fill\x3d'%23fff'/\x3e\x3cpath d\x3d'm18.6826 16.7334-4.427 4.424 1.828 1.828-5.056-.016-.014-5.054 1.842 1.841 4.428-4.422 2.474-2.475-1.844-1.843h5.073v5.071l-1.83-1.828z' fill\x3d'%23000'/\x3e",
b,g),["ew-resize"]:(b,g)=>qj("\x3cpath d\x3d'm9 17.9907v.005l5.997 5.996.001-3.999h1.999 2.02v4l5.98-6.001-5.98-5.999.001 4.019-2.021.002h-2l.001-4.022zm1.411.003 3.587-3.588-.001 2.587h3.5 2.521v-2.585l3.565 3.586-3.564 3.585-.001-2.585h-2.521l-3.499-.001-.001 2.586z' fill\x3d'%23fff'/\x3e\x3cpath d\x3d'm17.4971 18.9932h2.521v2.586l3.565-3.586-3.565-3.585v2.605h-2.521-3.5v-2.607l-3.586 3.587 3.586 3.586v-2.587z' fill\x3d'%23000'/\x3e",b,g),["ns-resize"]:(b,g)=>qj("\x3cpath d\x3d'm9 17.9907v.005l5.997 5.996.001-3.999h1.999 2.02v4l5.98-6.001-5.98-5.999.001 4.019-2.021.002h-2l.001-4.022zm1.411.003 3.587-3.588-.001 2.587h3.5 2.521v-2.585l3.565 3.586-3.564 3.585-.001-2.585h-2.521l-3.499-.001-.001 2.586z' fill\x3d'%23fff'/\x3e\x3cpath d\x3d'm17.4971 18.9932h2.521v2.586l3.565-3.586-3.565-3.585v2.605h-2.521-3.5v-2.607l-3.586 3.587 3.586 3.586v-2.587z' fill\x3d'%23000'/\x3e",
b+90,g),["nesw-resize"]:(b,g)=>qj("\x3cpath d\x3d'm19.7432 17.0869-4.072 4.068 2.829 2.828-8.473-.013-.013-8.47 2.841 2.842 4.075-4.068 1.414-1.415-2.844-2.842h8.486v8.484l-2.83-2.827z' fill\x3d'%23fff'/\x3e\x3cpath d\x3d'm18.6826 16.7334-4.427 4.424 1.828 1.828-5.056-.016-.014-5.054 1.842 1.841 4.428-4.422 2.474-2.475-1.844-1.843h5.073v5.071l-1.83-1.828z' fill\x3d'%23000'/\x3e",b,g),["nwse-resize"]:(b,g)=>qj("\x3cpath d\x3d'm19.7432 17.0869-4.072 4.068 2.829 2.828-8.473-.013-.013-8.47 2.841 2.842 4.075-4.068 1.414-1.415-2.844-2.842h8.486v8.484l-2.83-2.827z' fill\x3d'%23fff'/\x3e\x3cpath d\x3d'm18.6826 16.7334-4.427 4.424 1.828 1.828-5.056-.016-.014-5.054 1.842 1.841 4.428-4.422 2.474-2.475-1.844-1.843h5.073v5.071l-1.83-1.828z' fill\x3d'%23000'/\x3e",
b+90,g),rotate:(b,g)=>qj('\x3cg\x3e\x3cpath d\x3d"M22.4789 9.45728L25.9935 12.9942L22.4789 16.5283V14.1032C18.126 14.1502 14.6071 17.6737 14.5675 22.0283H17.05L13.513 25.543L9.97889 22.0283H12.5674C12.6071 16.5691 17.0214 12.1503 22.4789 12.1031L22.4789 9.45728Z" fill\x3d"black"/\x3e\x3cpath fill-rule\x3d"evenodd" clip-rule\x3d"evenodd" d\x3d"M21.4789 7.03223L27.4035 12.9945L21.4789 18.9521V15.1868C18.4798 15.6549 16.1113 18.0273 15.649 21.0284H19.475L13.5128 26.953L7.55519 21.0284H11.6189C12.1243 15.8155 16.2679 11.6677 21.4789 11.1559L21.4789 7.03223ZM22.4789 12.1031C17.0214 12.1503 12.6071 16.5691 12.5674 22.0284H9.97889L13.513 25.543L17.05 22.0284H14.5675C14.5705 21.6896 14.5947 21.3558 14.6386 21.0284C15.1157 17.4741 17.9266 14.6592 21.4789 14.1761C21.8063 14.1316 22.1401 14.1069 22.4789 14.1032V16.5284L25.9935 12.9942L22.4789 9.45729L22.4789 12.1031Z" fill\x3d"white"/\x3e\x3c/g\x3e',
b+45,g),["nwse-rotate"]:(b,g)=>qj('\x3cg\x3e\x3cpath d\x3d"M22.4789 9.45728L25.9935 12.9942L22.4789 16.5283V14.1032C18.126 14.1502 14.6071 17.6737 14.5675 22.0283H17.05L13.513 25.543L9.97889 22.0283H12.5674C12.6071 16.5691 17.0214 12.1503 22.4789 12.1031L22.4789 9.45728Z" fill\x3d"black"/\x3e\x3cpath fill-rule\x3d"evenodd" clip-rule\x3d"evenodd" d\x3d"M21.4789 7.03223L27.4035 12.9945L21.4789 18.9521V15.1868C18.4798 15.6549 16.1113 18.0273 15.649 21.0284H19.475L13.5128 26.953L7.55519 21.0284H11.6189C12.1243 15.8155 16.2679 11.6677 21.4789 11.1559L21.4789 7.03223ZM22.4789 12.1031C17.0214 12.1503 12.6071 16.5691 12.5674 22.0284H9.97889L13.513 25.543L17.05 22.0284H14.5675C14.5705 21.6896 14.5947 21.3558 14.6386 21.0284C15.1157 17.4741 17.9266 14.6592 21.4789 14.1761C21.8063 14.1316 22.1401 14.1069 22.4789 14.1032V16.5284L25.9935 12.9942L22.4789 9.45729L22.4789 12.1031Z" fill\x3d"white"/\x3e\x3c/g\x3e',
b,g),["nesw-rotate"]:(b,g)=>qj('\x3cg\x3e\x3cpath d\x3d"M22.4789 9.45728L25.9935 12.9942L22.4789 16.5283V14.1032C18.126 14.1502 14.6071 17.6737 14.5675 22.0283H17.05L13.513 25.543L9.97889 22.0283H12.5674C12.6071 16.5691 17.0214 12.1503 22.4789 12.1031L22.4789 9.45728Z" fill\x3d"black"/\x3e\x3cpath fill-rule\x3d"evenodd" clip-rule\x3d"evenodd" d\x3d"M21.4789 7.03223L27.4035 12.9945L21.4789 18.9521V15.1868C18.4798 15.6549 16.1113 18.0273 15.649 21.0284H19.475L13.5128 26.953L7.55519 21.0284H11.6189C12.1243 15.8155 16.2679 11.6677 21.4789 11.1559L21.4789 7.03223ZM22.4789 12.1031C17.0214 12.1503 12.6071 16.5691 12.5674 22.0284H9.97889L13.513 25.543L17.05 22.0284H14.5675C14.5705 21.6896 14.5947 21.3558 14.6386 21.0284C15.1157 17.4741 17.9266 14.6592 21.4789 14.1761C21.8063 14.1316 22.1401 14.1069 22.4789 14.1032V16.5284L25.9935 12.9942L22.4789 9.45729L22.4789 12.1031Z" fill\x3d"white"/\x3e\x3c/g\x3e',
b+90,g),["senw-rotate"]:(b,g)=>qj('\x3cg\x3e\x3cpath d\x3d"M22.4789 9.45728L25.9935 12.9942L22.4789 16.5283V14.1032C18.126 14.1502 14.6071 17.6737 14.5675 22.0283H17.05L13.513 25.543L9.97889 22.0283H12.5674C12.6071 16.5691 17.0214 12.1503 22.4789 12.1031L22.4789 9.45728Z" fill\x3d"black"/\x3e\x3cpath fill-rule\x3d"evenodd" clip-rule\x3d"evenodd" d\x3d"M21.4789 7.03223L27.4035 12.9945L21.4789 18.9521V15.1868C18.4798 15.6549 16.1113 18.0273 15.649 21.0284H19.475L13.5128 26.953L7.55519 21.0284H11.6189C12.1243 15.8155 16.2679 11.6677 21.4789 11.1559L21.4789 7.03223ZM22.4789 12.1031C17.0214 12.1503 12.6071 16.5691 12.5674 22.0284H9.97889L13.513 25.543L17.05 22.0284H14.5675C14.5705 21.6896 14.5947 21.3558 14.6386 21.0284C15.1157 17.4741 17.9266 14.6592 21.4789 14.1761C21.8063 14.1316 22.1401 14.1069 22.4789 14.1032V16.5284L25.9935 12.9942L22.4789 9.45729L22.4789 12.1031Z" fill\x3d"white"/\x3e\x3c/g\x3e',
b+180,g),["swne-rotate"]:(b,g)=>qj('\x3cg\x3e\x3cpath d\x3d"M22.4789 9.45728L25.9935 12.9942L22.4789 16.5283V14.1032C18.126 14.1502 14.6071 17.6737 14.5675 22.0283H17.05L13.513 25.543L9.97889 22.0283H12.5674C12.6071 16.5691 17.0214 12.1503 22.4789 12.1031L22.4789 9.45728Z" fill\x3d"black"/\x3e\x3cpath fill-rule\x3d"evenodd" clip-rule\x3d"evenodd" d\x3d"M21.4789 7.03223L27.4035 12.9945L21.4789 18.9521V15.1868C18.4798 15.6549 16.1113 18.0273 15.649 21.0284H19.475L13.5128 26.953L7.55519 21.0284H11.6189C12.1243 15.8155 16.2679 11.6677 21.4789 11.1559L21.4789 7.03223ZM22.4789 12.1031C17.0214 12.1503 12.6071 16.5691 12.5674 22.0284H9.97889L13.513 25.543L17.05 22.0284H14.5675C14.5705 21.6896 14.5947 21.3558 14.6386 21.0284C15.1157 17.4741 17.9266 14.6592 21.4789 14.1761C21.8063 14.1316 22.1401 14.1069 22.4789 14.1032V16.5284L25.9935 12.9942L22.4789 9.45729L22.4789 12.1031Z" fill\x3d"white"/\x3e\x3c/g\x3e',
b+270,g)},KD=vb(V(22));vb(V(22));var Sy=V(22),Ty=vb(V(22));if(!V(22).useState)throw Error("mobx-react-lite requires React with Hooks support");if(!pg)throw Error("mobx-react-lite@3 requires mobx at least version 6 to be available");var LD=V(31),Ls=vb(V(22)),Uy="undefined"===typeof FinalizationRegistry?void 0:FinalizationRegistry,MD=1E4,vD=function(b){var g="function"===typeof Symbol&&Symbol.iterator,m=g&&b[g],I=0;if(m)return m.call(b);if(b&&"number"===typeof b.length)return{next:function(){b&&I>=
b.length&&(b=void 0);return{value:b&&b[I++],done:!b}}};throw new TypeError(g?"Object is not iterable.":"Symbol.iterator is not defined.");},Iy=Uy?rg(Uy):bm(),wD=Iy.addReactionToTrack,tD=Iy.recordReactionAsCommitted,Hy=function(b,g){var m="function"===typeof Symbol&&b[Symbol.iterator];if(!m)return b;b=m.call(b);var I,W=[];try{for(;(void 0===g||0<g--)&&!(I=b.next()).done;)W.push(I.value)}catch(sa){var ia={error:sa}}finally{try{I&&!I.done&&(m=b["return"])&&m.call(b)}finally{if(ia)throw ia.error;}}return W},
uD=function(){return function(){}}(),Br=V(22),Ey="function"===typeof Symbol&&Symbol.for,Fy=Ey?Symbol.for("react.forward_ref"):"function"===typeof Br.forwardRef&&(0,Br.forwardRef)(function(b){return null}).$$typeof,Gy=Ey?Symbol.for("react.memo"):"function"===typeof Br.memo&&(0,Br.memo)(function(b){return null}).$$typeof,qD={$$typeof:!0,render:!0,compare:!0,type:!0,displayName:!0};Mi.displayName="Observer";V(22);V(22);V(22);(function(b){b||=Tj;Me({reactionScheduler:b})})(LD.unstable_batchedUpdates);
var rD=vb(V(22));ob=V(586);var ao=rD.forwardRef(function(b,g){var {children:m,opacity:I,centered:W,className:ia=""}=b,sa=Ya(b,["children","opacity","centered","className"]);return(0,ob.jsx)(Mi,{children:()=>(0,ob.jsx)("div",{ref:g,className:`tl-positioned-div ${ia}`,style:I?{opacity:I}:void 0,draggable:!1,children:(0,ob.jsx)("div",Ga(re({className:`tl-positioned-inner ${W?"tl-centered":""}`},sa),{children:m}))})})}),sD=vb(V(22));ob=V(586);var bo=sD.forwardRef(function(b,g){var {id:m,className:I="",
style:W,children:ia}=b,sa=Ya(b,["id","className","style","children"]);return(0,ob.jsx)(Mi,{children:()=>(0,ob.jsx)("svg",{ref:g,style:W,className:`tl-positioned-svg ${I}`,children:(0,ob.jsx)("g",Ga(re({id:m,className:"tl-centered-g"},sa),{children:ia}))})})}),Ms=vb(V(22)),Vy=vb(V(22)),Kt=vb(V(22));ob=V(586);var Lp=nf(function(b){var {id:g,bounds:m,zIndex:I,rotation:W=0,className:ia="",children:sa}=b;b=Ya(b,"id bounds zIndex rotation className children".split(" "));const La=Kt.useRef(null);Kt.useLayoutEffect(()=>
{La.current.style.transform=`translate(
        calc(${m.minX}px - var(--tl-padding)),
        calc(${m.minY}px - var(--tl-padding)))
        rotate(${W+(m.rotation||0)}rad)`},[m.minX,m.minY,W,m.rotation]);Kt.useLayoutEffect(()=>{const Va=La.current;Va.style.width=`calc(${Math.floor(m.width)}px + (var(--tl-padding) * 2))`;Va.style.height=`calc(${Math.floor(m.height)}px + (var(--tl-padding) * 2))`},[m.width,m.height]);Kt.useLayoutEffect(()=>{const Va=La.current;void 0!==I&&(Va.style.zIndex=I.toString())},[I]);return(0,ob.jsx)("div",Ga(re({id:g,ref:La,className:`tl-positioned ${ia}`,"aria-label":"container"},b),{children:sa}))}),
ND=vb(V(22));ob=V(586);var OD=nf(function({shapes:b,hidden:g,bounds:m,rotation:I=0}){const {components:{ContextBar:W},viewport:{bounds:ia,camera:{point:[sa,La],zoom:Va}}}=Ki(),$a=ND.useRef(null);var lb=We.getRotatedBounds(m,I);lb=We.multiplyBounds(lb,Va);ok($a,m,I,10005);if(!W)throw Error("Expected a ContextBar component.");const ub=We.translateBounds(lb,[sa*Va,La*Va]);return(0,ob.jsx)("div",{ref:$a,className:"tl-counter-scaled-positioned","aria-label":"context-bar-container",children:(0,ob.jsx)(W,
{hidden:g,shapes:b,bounds:m,offsets:{left:ub.minX,right:ia.width-ub.maxX,top:ub.minY,bottom:ia.height-ub.maxY,width:ub.width,height:ub.height},scaledBounds:lb,rotation:I})})}),Wy=vb(V(22));ob=V(586);var Xy=nf(function({children:b}){const g=Wy.useRef(null),{viewport:m}=Ki(),I=g.current,{zoom:W,point:ia}=m.camera;Wy.useEffect(()=>{I&&(I.style.transform=`scale(${W}) translate3d(${ia[0]}px, ${ia[1]}px, 0)`)},[W,ia,I]);return(0,ob.jsx)("div",{ref:g,className:"tl-absolute tl-layer",children:b})});ob=V(586);
var Yy=nf(function({shape:b,isHovered:g=!1,isSelected:m=!1,isBinding:I=!1,isEditing:W=!1,meta:ia}){const {bounds:sa,props:{scale:La,rotation:Va=0},ReactIndicator:$a}=b;return(0,ob.jsx)(Lp,{"data-type":"Indicator",bounds:sa,rotation:Va,scale:La,zIndex:W?1E3:1E4,children:(0,ob.jsx)(bo,{children:(0,ob.jsx)("g",{className:`tl-indicator-container ${m?"tl-selected":"tl-hovered"}`,children:(0,ob.jsx)($a,{isEditing:W,isBinding:I,isHovered:g,isSelected:m,isErasing:!1,meta:ia})})})})}),Dy=vb(V(22));ob=V(586);
var PD=nf(function({bounds:b,shape:g}){const {viewport:{camera:{zoom:m}},components:{QuickLinks:I}}=Ki();var W=sg();const ia=ek(g);if(!I)throw Error("Expected a QuickLinks component.");W=50>b.height*m||!W.selectedShapesArray.includes(g);return(0,ob.jsx)(Lp,{bounds:b,className:"tl-quick-links-container",children:(0,ob.jsx)(ao,{children:(0,ob.jsx)("span",Ga(re({style:{position:"absolute",top:"100%",pointerEvents:"all",transformOrigin:"left top",paddingTop:"8px",transform:"scale(var(--tl-scale))",minWidth:"320px"}},
ia),{onPointerDown:sa=>sa.stopPropagation(),children:(0,ob.jsx)(I,{className:"tl-backlinks-count "+(W?"tl-backlinks-count-rounded":""),id:g.id,shape:g})}))})})});ob=V(586);var QD=nf(function({bounds:b,shape:g}){const {viewport:{camera:{zoom:m}},components:{BacklinksCount:I}}=Ki();var W=sg();if(!I)throw Error("Expected a BacklinksCount component.");const ia=sa=>sa.stopPropagation();W=50>b.height*m||!W.selectedShapesArray.includes(g)||g.hideSelection;return(0,ob.jsx)(Lp,{bounds:b,className:"tl-backlinks-count-container",
children:(0,ob.jsx)(ao,{children:(0,ob.jsx)("span",{style:{position:"absolute",left:"100%",pointerEvents:"all",transformOrigin:"left top",transform:"translateY(6px) scale(var(--tl-scale))"},onPointerDown:ia,onWheelCapture:ia,title:"Shape Backlinks",children:(0,ob.jsx)(I,{className:"tl-backlinks-count "+(W?"tl-backlinks-count-rounded":""),id:g.id,shape:g})})})})}),RD=vb(V(22));ob=V(586);var SD=nf(function({bounds:b,hidden:g,shapes:m,rotation:I=0,detail:W="size"}){const {components:{SelectionDetail:ia},
viewport:{camera:{zoom:sa}}}=Ki(),La=RD.useRef(null),Va=We.multiplyBounds(b,sa);ok(La,b,I,10003);if(!ia)throw Error("Expected a SelectionDetail component.");return(0,ob.jsx)("div",{ref:La,className:`tl-counter-scaled-positioned ${g?"tl-fade-out":""}`,"aria-label":"bounds-detail-container",children:(0,ob.jsx)(ia,{shapes:m,bounds:b,scaledBounds:Va,zoom:sa,rotation:I,detail:W})})});ob=V(586);var TD=nf(function({shape:b,isHovered:g=!1,isSelected:m=!1,isBinding:I=!1,isErasing:W=!1,isEditing:ia=!1,onEditingEnd:sa,
asset:La,meta:Va,zIndex:$a}){const {bounds:lb,props:{rotation:ub,scale:Rb},ReactComponent:ec}=b,Vb=ek(b);return(0,ob.jsx)(Lp,{"data-shape-id":b.id,zIndex:$a,"data-type":"Shape",bounds:lb,rotation:ub,scale:Rb,children:(0,ob.jsx)(ec,{meta:Va,isEditing:ia,isBinding:I,isHovered:g,isSelected:m,isErasing:W,events:Vb,asset:La,onEditingEnd:sa})})});ob=V(586);var Zy=[[-1,.15,64],[.05,.375,16],[.15,1,4],[.7,2.5,1]],UD=nf(function({size:b}){const {viewport:{camera:{point:g,zoom:m}}}=Ki();return(0,ob.jsxs)("svg",
{className:"tl-grid",version:"1.1",xmlns:"http://www.w3.org/2000/svg",children:[(0,ob.jsx)("defs",{children:Zy.map(([I,W,ia],sa)=>{ia=ia*b*m;var La=g[0]*m,Va=g[1]*m;La=0<La?La%ia:ia+La%ia;Va=0<Va?Va%ia:ia+Va%ia;I=Cl(m,[I,W],[0,1]);return(0,ob.jsx)("pattern",{id:`grid-${sa}`,width:ia,height:ia,patternUnits:"userSpaceOnUse",children:!(2<I||.1>I)&&(0,ob.jsx)("circle",{className:"tl-grid-dot",cx:La,cy:Va,r:1.5,opacity:Math.max(0,Math.min(I,1))})},`grid-pattern-${sa}`)})}),Zy.map((I,W)=>(0,ob.jsx)("rect",
{width:"100%",height:"100%",fill:`url(#grid-${W})`},`grid-rect-${W}`))]})}),$y=nf(function({size:b}){return(0,ob.jsx)(UD,{size:b})});ob=V(586);var az=nf(function({bounds:b}){const g=lk("background");return(0,ob.jsx)(bo,Ga(re({},g),{children:(0,ob.jsx)("rect",{className:"tl-bounds-bg",width:Math.max(1,b.width),height:Math.max(1,b.height),pointerEvents:"all",rx:8,ry:8})}))});V(22);ob=V(586);var bz=nf(function({scaledBounds:b,shapes:g,detail:m="size",rotation:I=0}){var W;const ia=1===g.length?I:null!=
(W=b.rotation)?W:0;return(0,ob.jsx)(ao,{centered:!0,children:(0,ob.jsx)("div",{className:"tl-bounds-detail",style:{transform:ia<Gm||ia>3*Gm?`rotate(${ia}rad) translateY(${b.height/2+24}px)`:`rotate(${Math.PI+ia}rad) translateY(${b.height/2+32}px)`,padding:"2px 3px",borderRadius:"1px"},children:1===g.length&&"line"===g[0].type?`${Yd.dist(g[0].props.handles.start.point,g[0].props.handles.end.point).toFixed()}`:"size"===m?`${b.width.toFixed()} \xD7 ${b.height.toFixed()}`:`\u2220${Si.radiansToDegrees(Si.clampRadians(I)).toFixed()}\xB0`})})});
ob=V(586);var xD={top_left_corner:"tl-cursor-nwse",top_right_corner:"tl-cursor-nesw",bottom_right_corner:"tl-cursor-nwse",bottom_left_corner:"tl-cursor-nesw"},Lt=nf(function({cx:b,cy:g,size:m,targetSize:I,corner:W,isHidden:ia}){const sa=lk(W);return(0,ob.jsxs)("g",Ga(re({opacity:ia?0:1},sa),{children:[(0,ob.jsx)("rect",{className:"tl-transparent "+(ia?"":xD[W]),"aria-label":`${W} target`,x:b-1.25*I,y:g-1.25*I,width:2.5*I,height:2.5*I,pointerEvents:ia?"none":"all"}),(0,ob.jsx)("rect",{className:"tl-corner-handle",
"aria-label":`${W} handle`,x:b-m/2,y:g-m/2,width:m,height:m,pointerEvents:"none"})]}))});ob=V(586);var BD={top_edge:"tl-cursor-ns",right_edge:"tl-cursor-ew",bottom_edge:"tl-cursor-ns",left_edge:"tl-cursor-ew"},Mt=nf(function({x:b,y:g,width:m,height:I,targetSize:W,edge:ia,disabled:sa,isHidden:La}){const Va=lk(ia);return(0,ob.jsx)("rect",re({pointerEvents:La||sa?"none":"all",className:"tl-transparent tl-edge-handle "+(La?"":BD[ia]),"aria-label":`${ia} target`,opacity:La?0:1,x:b-W,y:g-W,width:Math.max(1,
m+2*W),height:Math.max(1,I+2*W)},Va))});V(22);ob=V(586);nf(function({cx:b,cy:g,size:m,targetSize:I,isHidden:W}){const ia=lk("rotate");return(0,ob.jsxs)("g",Ga(re({opacity:W?0:1},ia),{children:[(0,ob.jsx)("circle",{className:"tl-transparent ","aria-label":"rotate target",cx:b,cy:g,r:I,pointerEvents:W?"none":"all"}),(0,ob.jsx)("circle",{className:"tl-rotate-handle","aria-label":"rotate handle",cx:b,cy:g,r:m/2,pointerEvents:"none"})]}))});V(22);ob=V(586);var Nt=nf(function({cx:b,cy:g,targetSize:m,corner:I,
isHidden:W}){const ia=lk(I);return(0,ob.jsx)("g",Ga(re({opacity:W?0:1},ia),{children:(0,ob.jsx)("rect",{className:"tl-transparent","aria-label":`${I} target`,x:b-2.5*m,y:g-2.5*m,width:3*m,height:3*m,pointerEvents:W?"none":"all"})}))});ob=V(586);var Ky=nf(function({bounds:b,showResizeHandles:g,showRotateHandles:m,shapes:I}){var W,ia,sa=sg();let {width:La,height:Va}=b;var $a=sa.viewport.camera.zoom;b=8/$a;$a=6/$a;I=1===I.length?I[0].canResize:[!0,!0];sa=null!=(ia=null==(W=sa.editingShape)?void 0:W.props.borderRadius)?
ia:0;return(0,ob.jsxs)(bo,{children:[(0,ob.jsx)("rect",{className:"tl-bounds-fg",width:Math.max(La,1),height:Math.max(Va,1),rx:sa,ry:sa,pointerEvents:"none"}),(0,ob.jsx)(Mt,{x:2*$a,y:0,width:La-4*$a,height:0,targetSize:$a,edge:"top_edge",disabled:!I[1],isHidden:!g}),(0,ob.jsx)(Mt,{x:La,y:2*$a,width:0,height:Va-4*$a,targetSize:$a,edge:"right_edge",disabled:!I[0],isHidden:!g}),(0,ob.jsx)(Mt,{x:2*$a,y:Va,width:La-4*$a,height:0,targetSize:$a,edge:"bottom_edge",disabled:!I[1],isHidden:!g}),(0,ob.jsx)(Mt,
{x:0,y:2*$a,width:0,height:Va-4*$a,targetSize:$a,edge:"left_edge",disabled:!I[0],isHidden:!g}),(0,ob.jsx)(Nt,{cx:0,cy:0,targetSize:$a,corner:"top_left_resize_corner",isHidden:!m}),(0,ob.jsx)(Nt,{cx:La+2*$a,cy:0,targetSize:$a,corner:"top_right_resize_corner",isHidden:!m}),(0,ob.jsx)(Nt,{cx:La+2*$a,cy:Va+2*$a,targetSize:$a,corner:"bottom_right_resize_corner",isHidden:!m}),(0,ob.jsx)(Nt,{cx:0,cy:Va+2*$a,targetSize:$a,corner:"bottom_left_resize_corner",isHidden:!m}),(null==I?void 0:I.every(lb=>lb))&&
(0,ob.jsxs)(ob.Fragment,{children:[(0,ob.jsx)(Lt,{cx:0,cy:0,size:b,targetSize:$a,corner:"top_left_corner",isHidden:!g}),(0,ob.jsx)(Lt,{cx:La,cy:0,size:b,targetSize:$a,corner:"top_right_corner",isHidden:!g}),(0,ob.jsx)(Lt,{cx:La,cy:Va,size:b,targetSize:$a,corner:"bottom_right_corner",isHidden:!g}),(0,ob.jsx)(Lt,{cx:0,cy:Va,size:b,targetSize:$a,corner:"bottom_left_corner",isHidden:!g})]})]})});ob=V(586);var Ny=nf(function({bounds:b}){return(0,ob.jsx)(Lp,{bounds:b,zIndex:10001,children:(0,ob.jsx)(bo,
{children:(0,ob.jsx)("rect",{className:"tl-brush",x:0,y:0,width:b.width,height:b.height})})})});ob=V(586);nf(function(){return(0,ob.jsx)(ob.Fragment,{})});ob=V(586);var My=nf(function({shape:b,handle:g,id:m}){b=nl(b,m);const [I,W]=g.point;return(0,ob.jsxs)("g",Ga(re({className:"tl-handle","aria-label":"handle"},b),{transform:`translate(${I}, ${W})`,children:[(0,ob.jsx)("circle",{className:"tl-handle-bg",pointerEvents:"all"}),(0,ob.jsx)("circle",{className:"tl-counter-scaled tl-handle",pointerEvents:"none",
r:4})]}))}),Py=vb(V(22));ob=V(586);var Cv=nf(function({direction:b}){const {viewport:{bounds:g}}=Ki(),m=Py.useRef(null);Py.useLayoutEffect(()=>{const I=m.current;if(I){var W=[g.width/2,g.height/2],ia=We.getRectangleSides([12,12],[g.width-24,g.height-24]);for(const [,[sa,La]]of ia)ia=r(W,b,sa,La),ia.didIntersect&&(ia=ia.points[0],I.style.transform=`translate(${ia[0]-6}px,${ia[1]-6}px) rotate(${Yd.toAngle(b)}rad)`)}},[b,g]);return(0,ob.jsx)("div",{ref:m,className:"tl-direction-indicator",children:(0,ob.jsx)("svg",
{height:12,width:12,children:(0,ob.jsx)("polygon",{points:"0,0 12,6 0,12"})})})});ob=V(586);var AD=nf(function({id:b,className:g,brush:m,shapes:I,assets:W,bindingShapes:ia,editingShape:sa,hoveredShape:La,hoveredGroup:Va,selectionBounds:$a,selectedShapes:lb,erasingShapes:ub,selectionDirectionHint:Rb,cursor:ec="default",cursorRotation:Vb=0,selectionRotation:rc=0,showSelection:mc=!0,showHandles:Wb=!0,showSelectionRotation:tc=!1,showResizeHandles:Hc=!0,showRotateHandles:Qc=!0,showSelectionDetail:Uc=!0,
showContextBar:Vd=!0,showGrid:ae=!0,gridSize:De=8,onEditingEnd:Oe=RC,theme:tf=Nl,children:pf}){var df;const Ie=Ms.useRef(null),{viewport:Bd,components:fd,meta:jd}=Ki(),ld=sg(),Gd=Ms.useCallback(hf=>{ld.inputs.updateContainerOffset([hf.minX,hf.minY])},[]);Zj(tf,b);Bk(Ie);Pj(Ie,Bd,Gd);zi(Ie);pk();Ol(Ie,ec,Vb);sm(Ie);Ck(Ie);b=jg();const we=(ec=1===(null==lb?void 0:lb.length)&&lb[0])&&"handles"in ec.props?null==lb?void 0:lb[0]:void 0,Fe=Ms.useMemo(()=>new Set(lb||[]),[lb]),qf=Ms.useMemo(()=>new Set(ub||
[]),[ub]);ec=1===(null==lb?void 0:lb.length)?lb[0]:void 0;Va=[...(new Set([Va,La]))].filter(Lg);return(0,ob.jsxs)("div",{ref:Ie,className:`tl-container ${null!=g?g:""}`,children:[(0,ob.jsxs)("div",Ga(re({tabIndex:-1,className:"tl-absolute tl-canvas"},b),{children:[ae&&fd.Grid&&(0,ob.jsx)(fd.Grid,{size:De}),(0,ob.jsxs)(Xy,{children:[fd.SelectionBackground&&lb&&$a&&mc&&(0,ob.jsx)(Lp,{"data-type":"SelectionBackground",bounds:$a,zIndex:2,children:(0,ob.jsx)(fd.SelectionBackground,{shapes:lb,bounds:$a,
showResizeHandles:Hc,showRotateHandles:Qc})}),I&&I.map((hf,gf)=>(0,ob.jsx)(TD,{shape:hf,asset:W&&hf.props.assetId?W[hf.props.assetId]:void 0,isEditing:hf===sa,isHovered:hf===La,isBinding:null==ia?void 0:ia.includes(hf),isSelected:Fe.has(hf),isErasing:qf.has(hf),meta:jd,zIndex:1E3+gf,onEditingEnd:Oe},"shape_"+hf.id)),!ld.isIn("select.pinching")&&(null==lb?void 0:lb.map(hf=>(0,ob.jsx)(Yy,{shape:hf,isEditing:hf===sa,isHovered:!1,isBinding:!1,isSelected:!0},"selected_indicator_"+hf.id))),Va.map(hf=>hf!==
sa&&(0,ob.jsx)(Yy,{shape:hf},"hovered_indicator_"+hf.id)),ec&&fd.BacklinksCount&&(0,ob.jsx)(QD,{hidden:!1,bounds:ec.bounds,shape:ec}),La&&La!==ec&&fd.QuickLinks&&(0,ob.jsx)(PD,{hidden:!1,bounds:La.bounds,shape:La}),m&&fd.Brush&&(0,ob.jsx)(fd.Brush,{bounds:m}),lb&&$a&&(0,ob.jsxs)(ob.Fragment,{children:[mc&&fd.SelectionForeground&&(0,ob.jsx)(Lp,{"data-type":"SelectionForeground",bounds:$a,zIndex:sa&&lb.includes(sa)?1002:10002,children:(0,ob.jsx)(fd.SelectionForeground,{shapes:lb,bounds:$a,showResizeHandles:Hc,
showRotateHandles:Qc})}),Wb&&we&&fd.Handle&&(0,ob.jsx)(Lp,{"data-type":"onlySelectedShapeWithHandles",bounds:$a,zIndex:10003,children:(0,ob.jsx)(bo,{children:Object.entries(null!=(df=we.props.handles)?df:{}).map(([hf,gf])=>Ms.createElement(fd.Handle,{key:`${gf.id}_handle_${gf.id}`,shape:we,handle:gf,id:hf}))})}),lb&&fd.SelectionDetail&&(0,ob.jsx)(SD,{shapes:lb,bounds:$a,detail:tc?"rotation":"size",hidden:!Uc,rotation:rc},"detail"+lb.map(hf=>hf.id).join(""))]})]}),Rb&&$a&&lb&&(0,ob.jsx)(Cv,{direction:Rb,
bounds:$a,shapes:lb}),(0,ob.jsx)("div",{id:"tl-dev-tools-canvas-anchor"})]})),(0,ob.jsx)(Xy,{children:lb&&$a&&(0,ob.jsx)(ob.Fragment,{children:lb&&fd.ContextBar&&(0,ob.jsx)(OD,{shapes:lb,hidden:!Vd,bounds:ec?ec.bounds:$a,rotation:ec?ec.props.rotation:0},"context"+lb.map(hf=>hf.id).join(""))})}),pf]})}),Oy=vb(V(22)),Ly=vb(V(22));ob=V(586);nf(function({children:b}){const g=Ly.useRef(null),{viewport:m}=Ki();Ly.useEffect(()=>Od(()=>{const I=g.current;if(I){var {zoom:W,point:ia}=m.camera;I.style.transform=
`scale(${W}) translateX(${ia[0]}px) translateY(${ia[1]}px)`}}),[]);return(0,ob.jsx)("svg",{className:"tl-absolute tl-overlay",pointerEvents:"none",children:(0,ob.jsx)("g",{ref:g,pointerEvents:"none",children:b})})});ob=V(586);var zD=nf(function(b){const g=pj(b),m=Qj(b.id);en(g,b);hj(g,b);return(0,ob.jsx)(m.Provider,{value:g,children:b.children})});ob=V(586);var yD=nf(function({id:b="noid",viewport:g,inputs:m,callbacks:I=Nl,meta:W=Nl,components:ia=Nl,children:sa}){const [La,Va]=Oy.useState(()=>{const {Brush:lb,
ContextBar:ub,DirectionIndicator:Rb,Grid:ec,Handle:Vb,SelectionBackground:rc,SelectionDetail:mc,SelectionForeground:Wb}=ia,tc=Ya(ia,"Brush ContextBar DirectionIndicator Grid Handle SelectionBackground SelectionDetail SelectionForeground".split(" "));return{id:b,viewport:g,inputs:m,callbacks:I,meta:W,components:Ga(re({},tc),{Brush:null===lb?void 0:Ny,ContextBar:ub,DirectionIndicator:null===Rb?void 0:Cv,Grid:null===ec?void 0:$y,Handle:null===Vb?void 0:My,SelectionBackground:null===rc?void 0:az,SelectionDetail:null===
mc?void 0:bz,SelectionForeground:null===Wb?void 0:Ky})}});Oy.useLayoutEffect(()=>{const {Brush:lb,ContextBar:ub,DirectionIndicator:Rb,Grid:ec,Handle:Vb,SelectionBackground:rc,SelectionDetail:mc,SelectionForeground:Wb}=ia,tc=Ya(ia,"Brush ContextBar DirectionIndicator Grid Handle SelectionBackground SelectionDetail SelectionForeground".split(" "));return Od(()=>{Va({id:b,viewport:g,inputs:m,callbacks:I,meta:W,components:Ga(re({},tc),{Brush:null===lb?void 0:Ny,ContextBar:ub,DirectionIndicator:null===
Rb?void 0:Cv,Grid:null===ec?void 0:$y,Handle:null===Vb?void 0:My,SelectionBackground:null===rc?void 0:az,SelectionDetail:null===mc?void 0:bz,SelectionForeground:null===Wb?void 0:Ky})})})},[]);const $a=Cj(b);return(0,ob.jsx)($a.Provider,{value:La,children:sa})});ob=V(586);ob=V(586);var VD=nf(function(b){const g=sg();return(0,ob.jsx)(dm,re({viewport:g.viewport,inputs:g.inputs,callbacks:g._events,brush:g.brush,editingShape:g.editingShape,hoveredShape:g.hoveredShape,hoveredGroup:g.hoveredGroup,bindingShapes:g.bindingShapes,
selectionDirectionHint:g.selectionDirectionHint,selectionBounds:g.selectionBounds,selectedShapes:g.selectedShapesArray,erasingShapes:g.erasingShapesArray,shapes:g.shapes,assets:g.assets,showGrid:g.settings.showGrid,showSelection:g.showSelection,showSelectionRotation:g.showSelectionRotation,showResizeHandles:g.showResizeHandles,showRotateHandles:g.showRotateHandles,showSelectionDetail:g.showSelectionDetail,showContextBar:g.showContextBar,cursor:g.cursors.cursor,cursorRotation:g.cursors.rotation,selectionRotation:g.selectionRotation,
onEditingEnd:g.clearEditingState},b))});ob=V(586);var Dr=vb(V(22)),Ot=vb(V(22));ob=V(586);var WD="add-link block-search block connector group internal-link link-to-block link-to-page link-to-whiteboard move-to-sidebar-right object-compact object-expanded open-as-page page-search page references-hide references-show select-cursor text ungroup whiteboard-element whiteboard".split(" "),Ih=b=>{var {name:g,className:m}=b;b=Ya(b,["name","className"]);const I=WD.includes(g)?"tie tie-":"ti ti-";return(0,ob.jsx)("i",
re({className:[I+g,m].join(" ")},b))},gh=V(22),XD=V(22),Oq=V(22),vn=V(22),Ev=V(22),YD=V(31),Jm=V(22),Pq=(0,Jm.forwardRef)((b,g)=>{var {children:m}=b;b=Ya(b,["children"]);const I=Jm.Children.toArray(m),W=I.find(Lk);if(W){const ia=W.props.children;m=I.map(sa=>sa===W?1<Jm.Children.count(ia)?Jm.Children.only(null):(0,Jm.isValidElement)(ia)?ia.props.children:null:sa);return(0,Jm.createElement)(Fv,se({},b,{ref:g}),(0,Jm.isValidElement)(ia)?(0,Jm.cloneElement)(ia,void 0,m):null)}return(0,Jm.createElement)(Fv,
se({},b,{ref:g}),m)});Pq.displayName="Slot";var Fv=(0,Jm.forwardRef)((b,g)=>{const {children:m}=b;b=Ya(b,["children"]);return(0,Jm.isValidElement)(m)?(0,Jm.cloneElement)(m,Ga(re({},mg(b,m.props)),{ref:Zi(g,m.ref)})):1<Jm.Children.count(m)?Jm.Children.only(null):null});Fv.displayName="SlotClone";var cz=({children:b})=>(0,Jm.createElement)(Jm.Fragment,null,b),tj="a button div h2 h3 img label li nav ol p span svg ul".split(" ").reduce((b,g)=>{const m=(0,Ev.forwardRef)((I,W)=>{var {asChild:ia}=I;I=Ya(I,
["asChild"]);ia=ia?Pq:g;(0,Ev.useEffect)(()=>{window[Symbol.for("radix-ui")]=!0},[]);return(0,Ev.createElement)(ia,se({},I,{ref:W}))});m.displayName=`Primitive.${g}`;return Ga(re({},b),{[g]:m})},{}),Gv=V(22),ZD=V(22),dz,$D=(0,vn.createContext)({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Pt=(0,vn.forwardRef)((b,g)=>{var m;const {disableOutsidePointerEvents:I=!1,onEscapeKeyDown:W,onPointerDownOutside:ia,onFocusOutside:sa,onInteractOutside:La,onDismiss:Va}=b,$a=
Ya(b,"disableOutsidePointerEvents onEscapeKeyDown onPointerDownOutside onFocusOutside onInteractOutside onDismiss".split(" ")),lb=(0,vn.useContext)($D),[ub,Rb]=(0,vn.useState)(null),ec=null!==(m=null===ub||void 0===ub?void 0:ub.ownerDocument)&&void 0!==m?m:null===globalThis||void 0===globalThis?void 0:globalThis.document,[,Vb]=(0,vn.useState)({});g=bh(g,Hc=>Rb(Hc));m=Array.from(lb.layers);var [rc]=[...lb.layersWithOutsidePointerEventsDisabled].slice(-1);rc=m.indexOf(rc);const mc=ub?m.indexOf(ub):
-1;m=0<lb.layersWithOutsidePointerEventsDisabled.size;const Wb=mc>=rc;rc=rk(Hc=>{const Qc=Hc.target,Uc=[...lb.branches].some(Vd=>Vd.contains(Qc));Wb&&!Uc&&(null===ia||void 0===ia||ia(Hc),null===La||void 0===La||La(Hc),Hc.defaultPrevented||null===Va||void 0===Va||Va())},ec);const tc=Dj(Hc=>{const Qc=Hc.target;[...lb.branches].some(Uc=>Uc.contains(Qc))||(null===sa||void 0===sa||sa(Hc),null===La||void 0===La||La(Hc),Hc.defaultPrevented||null===Va||void 0===Va||Va())},ec);If(Hc=>{mc===lb.layers.size-
1&&(null===W||void 0===W||W(Hc),!Hc.defaultPrevented&&Va&&(Hc.preventDefault(),Va()))},ec);(0,vn.useEffect)(()=>{if(ub)return I&&(0===lb.layersWithOutsidePointerEventsDisabled.size&&(dz=ec.body.style.pointerEvents,ec.body.style.pointerEvents="none"),lb.layersWithOutsidePointerEventsDisabled.add(ub)),lb.layers.add(ub),ll(),()=>{I&&1===lb.layersWithOutsidePointerEventsDisabled.size&&(ec.body.style.pointerEvents=dz)}},[ub,ec,I,lb]);(0,vn.useEffect)(()=>()=>{ub&&(lb.layers.delete(ub),lb.layersWithOutsidePointerEventsDisabled.delete(ub),
ll())},[ub,lb]);(0,vn.useEffect)(()=>{const Hc=()=>Vb({});document.addEventListener("dismissableLayer.update",Hc);return()=>document.removeEventListener("dismissableLayer.update",Hc)},[]);return(0,vn.createElement)(tj.div,se({},$a,{ref:g,style:re({pointerEvents:m?Wb?"auto":"none":void 0},b.style),onFocusCapture:Zf(b.onFocusCapture,tc.onFocusCapture),onBlurCapture:Zf(b.onBlurCapture,tc.onBlurCapture),onPointerDownCapture:Zf(b.onPointerDownCapture,rc.onPointerDownCapture)}))}),ez=vb(V(22)),aE=V(22),
wn=(null===globalThis||void 0===globalThis?0:globalThis.document)?aE.useLayoutEffect:()=>{},bE=ez["useId".toString()]||(()=>{}),cE=0,Wl=V(22),dE=(b,g,m)=>td(void 0,null,function*(){const {placement:I="bottom",strategy:W="absolute",middleware:ia=[],platform:sa}=m,La=yield null==sa.isRTL?void 0:sa.isRTL(g);let Va=yield sa.getElementRects({reference:b,floating:g,strategy:W}),{x:$a,y:lb}=sk(Va,I,La),ub=I,Rb={},ec=0;for(let Vb=0;Vb<ia.length;Vb++){const {name:rc,fn:mc}=ia[Vb],{x:Wb,y:tc,data:Hc,reset:Qc}=
yield mc({x:$a,y:lb,initialPlacement:I,placement:ub,strategy:W,middlewareData:Rb,rects:Va,platform:sa,elements:{reference:b,floating:g}});$a=null!=Wb?Wb:$a;lb=null!=tc?tc:lb;Rb=Ga(re({},Rb),{[rc]:re(re({},Rb[rc]),Hc)});Qc&&50>=ec&&(ec++,"object"==typeof Qc&&(Qc.placement&&(ub=Qc.placement),Qc.rects&&(Va=!0===Qc.rects?yield sa.getElementRects({reference:b,floating:g,strategy:W}):Qc.rects),{x:$a,y:lb}=sk(Va,ub,La)),Vb=-1)}return{x:$a,y:lb,placement:ub,strategy:W,middlewareData:Rb}}),Hv=Math.min,Iv=
Math.max,fz=b=>({name:"arrow",options:b,fn(g){return td(this,null,function*(){const {element:m,padding:I=0}=null!=b?b:{},{x:W,y:ia,placement:sa,rects:La,platform:Va}=g;if(null==m)return{};const $a=al(I),lb={x:W,y:ia},ub=Ui(sa),Rb=sa.split("-")[1],ec=$k(ub);var Vb=yield Va.getDimensions(m);const rc="y"===ub?"top":"left",mc="y"===ub?"bottom":"right";var Wb=La.reference[ec]+La.reference[ub]-lb[ub]-La.floating[ec];const tc=lb[ub]-La.reference[ub];var Hc=yield null==Va.getOffsetParent?void 0:Va.getOffsetParent(m);
let Qc=Hc?"y"===ub?Hc.clientHeight||0:Hc.clientWidth||0:0;0===Qc&&(Qc=La.floating[ec]);Hc=$a[rc];const Uc=Qc-Vb[ec]-$a[mc];Vb=Qc/2-Vb[ec]/2+(Wb/2-tc/2);Wb=Iv(Hc,Hv(Vb,Uc));return{[ub]:lb[ub]-(0<("start"===Rb?$a[rc]:$a[mc])&&Vb!==Wb&&La.reference[ec]<=La.floating[ec]?Vb<Hc?Hc-Vb:Uc-Vb:0),data:{[ub]:Wb,centerOffset:Vb-Wb}}})}}),eE={left:"right",right:"left",bottom:"top",top:"bottom"},fE={start:"end",end:"start"},gz=["top","right","bottom","left"];gz.reduce((b,g)=>b.concat(g,g+"-start",g+"-end"),[]);
var gE=function(b){return void 0===b&&(b={}),{name:"flip",options:b,fn(g){return td(this,null,function*(){var m;const {placement:I,middlewareData:W,rects:ia,initialPlacement:sa,platform:La,elements:Va}=g;var $a=b;const {mainAxis:lb=!0,crossAxis:ub=!0,fallbackPlacements:Rb,fallbackStrategy:ec="bestFit",flipAlignment:Vb=!0}=$a;$a=Ya($a,["mainAxis","crossAxis","fallbackPlacements","fallbackStrategy","flipAlignment"]);const rc=vi(I);var mc=Rb||(rc!==sa&&Vb?function(Vd){const ae=ml(Vd);return[Mk(Vd),ae,
Mk(ae)]}(sa):[ml(sa)]);mc=[sa,...mc];const Wb=yield Fm(g,$a),tc=[];$a=(null==(m=W.flip)?void 0:m.overflows)||[];if(lb&&tc.push(Wb[rc]),ub){const {main:Vd,cross:ae}=Qm(I,ia,yield null==La.isRTL?void 0:La.isRTL(Va.floating));tc.push(Wb[Vd],Wb[ae])}if($a=[...$a,{placement:I,overflows:tc}],!tc.every(Vd=>0>=Vd)){var Hc,Qc;m=(null!=(Hc=null==(Qc=W.flip)?void 0:Qc.index)?Hc:0)+1;if(Hc=mc[m])return{data:{index:m,overflows:$a},reset:{placement:Hc}};Hc="bottom";switch(ec){case "bestFit":var Uc;(Qc=null==(Uc=
$a.map(Vd=>[Vd,Vd.overflows.filter(ae=>0<ae).reduce((ae,De)=>ae+De,0)]).sort((Vd,ae)=>Vd[1]-ae[1])[0])?void 0:Uc[0].placement)&&(Hc=Qc);break;case "initialPlacement":Hc=sa}if(I!==Hc)return{reset:{placement:Hc}}}return{}})}}},hE=function(b){b=void 0===b?{}:b;let {strategy:g="referenceHidden"}=b,m=Ya(b,["strategy"]);return{name:"hide",fn(I){return td(this,null,function*(){var {rects:W}=I;switch(g){case "referenceHidden":return W=Fj(yield Fm(I,Ga(re({},m),{elementContext:"reference"})),W.reference),
{data:{referenceHiddenOffsets:W,referenceHidden:Dk(W)}};case "escaped":return W=Fj(yield Fm(I,Ga(re({},m),{altBoundary:!0})),W.floating),{data:{escapedOffsets:W,escaped:Dk(W)}};default:return{}}})}}},iE=function(b){return void 0===b&&(b=0),{name:"offset",options:b,fn(g){return td(this,null,function*(){const {x:m,y:I}=g,W=yield function(ia,sa){return td(this,null,function*(){const {placement:La,platform:Va,elements:$a}=ia;var lb=yield null==Va.isRTL?void 0:Va.isRTL($a.floating),ub=vi(La);const Rb=
La.split("-")[1],ec="x"===Ui(La);ub=["left","top"].includes(ub)?-1:1;lb=lb&&ec?-1:1;const Vb="function"==typeof sa?sa(ia):sa;let {mainAxis:rc,crossAxis:mc,alignmentAxis:Wb}="number"==typeof Vb?{mainAxis:Vb,crossAxis:0,alignmentAxis:null}:re({mainAxis:0,crossAxis:0,alignmentAxis:null},Vb);return Rb&&"number"==typeof Wb&&(mc="end"===Rb?-1*Wb:Wb),ec?{x:mc*lb,y:rc*ub}:{x:rc*ub,y:mc*lb}})}(g,b);return{x:m+W.x,y:I+W.y,data:W}})}}},jE=function(b){return void 0===b&&(b={}),{name:"shift",options:b,fn(g){return td(this,
null,function*(){const {x:m,y:I,placement:W}=g;var ia=b;const {mainAxis:sa=!0,crossAxis:La=!1,limiter:Va={fn:ec=>{let {x:Vb,y:rc}=ec;return{x:Vb,y:rc}}}}=ia;var $a=Ya(ia,["mainAxis","crossAxis","limiter"]);ia={x:m,y:I};$a=yield Fm(g,$a);const lb=Ui(vi(W)),ub="x"===lb?"y":"x";let Rb=ia[lb];ia=ia[ub];sa&&(Rb=Iv(Rb+$a["y"===lb?"top":"left"],Hv(Rb,Rb-$a["y"===lb?"bottom":"right"])));La&&(ia=Iv(ia+$a["y"===ub?"top":"left"],Hv(ia,ia-$a["y"===ub?"bottom":"right"])));ia=Va.fn(Ga(re({},g),{[lb]:Rb,[ub]:ia}));
return Ga(re({},ia),{data:{x:ia.x-m,y:ia.y-I}})})}}},kE=function(b){return void 0===b&&(b={}),{options:b,fn(g){const {x:m,y:I,placement:W,rects:ia,middlewareData:sa}=g,{offset:La=0,mainAxis:Va=!0,crossAxis:$a=!0}=b;var lb={x:m,y:I};g=Ui(W);const ub="x"===g?"y":"x";let Rb=lb[g];lb=lb[ub];var ec="function"==typeof La?La(Ga(re({},ia),{placement:W})):La;ec="number"==typeof ec?{mainAxis:ec,crossAxis:0}:re({mainAxis:0,crossAxis:0},ec);if(Va){var Vb="y"===g?"height":"width",rc=ia.reference[g]-ia.floating[Vb]+
ec.mainAxis;Vb=ia.reference[g]+ia.reference[Vb]-ec.mainAxis;Rb<rc?Rb=rc:Rb>Vb&&(Rb=Vb)}if($a){var mc,Wb,tc,Hc;const Qc="y"===g?"width":"height";rc=["top","left"].includes(vi(W));Vb=ia.reference[ub]-ia.floating[Qc]+(rc&&null!=(mc=null==(Wb=sa.offset)?void 0:Wb[ub])?mc:0)+(rc?0:ec.crossAxis);mc=ia.reference[ub]+ia.reference[Qc]+(rc?0:null!=(tc=null==(Hc=sa.offset)?void 0:Hc[ub])?tc:0)-(rc?ec.crossAxis:0);lb<Vb?lb=Vb:lb>mc&&(lb=mc)}return{[g]:Rb,[ub]:lb}}}},hz=Math.min,Ns=Math.max,Qt=Math.round,lE={getClippingRect:function(b){let {element:g,
boundary:m,rootBoundary:I,strategy:W}=b;b=[...("clippingAncestors"===m?Eg(g):[].concat(m)),I];b=b.reduce((ia,sa)=>{sa=ih(g,sa,W);return ia.top=Ns(sa.top,ia.top),ia.right=hz(sa.right,ia.right),ia.bottom=hz(sa.bottom,ia.bottom),ia.left=Ns(sa.left,ia.left),ia},ih(g,b[0],W));return{width:b.right-b.left,height:b.bottom-b.top,x:b.left,y:b.top}},convertOffsetParentRelativeRectToViewportRelativeRect:function(b){let {rect:g,offsetParent:m,strategy:I}=b;var W=Hj(m);const ia=rj(m);if(m===ia)return g;b={scrollLeft:0,
scrollTop:0};var sa=0,La=0;(W||!W&&"fixed"!==I)&&(("body"!==Gj(m)||yj(ia))&&(b=gm(m)),Hj(m))&&(W=sj(m,!0),sa=W.x+m.clientLeft,La=W.y+m.clientTop);return Ga(re({},g),{x:g.x-b.scrollLeft+sa,y:g.y-b.scrollTop+La})},isElement:Vj,getDimensions:uk,getOffsetParent:gj,getDocumentElement:rj,getElementRects:b=>{let {reference:g,floating:m,strategy:I}=b;b=gj(m);var W=Hj(b);const ia=rj(b);var sa;if(sa=W)sa=sj(b),sa=Qt(sa.width)!==b.offsetWidth||Qt(sa.height)!==b.offsetHeight;sa=sj(g,sa,"fixed"===I);let La={scrollLeft:0,
scrollTop:0};var Va=0,$a=0;if(W||!W&&"fixed"!==I)(("body"!==Gj(b)||yj(ia))&&(La=gm(b)),Hj(b))?(W=sj(b,!0),Va=W.x+b.clientLeft,$a=W.y+b.clientTop):ia&&(Va=qk(ia));return{reference:{x:sa.left+La.scrollLeft-Va,y:sa.top+La.scrollTop-$a,width:sa.width,height:sa.height},floating:Ga(re({},uk(m)),{x:0,y:0})}},getClientRects:b=>Array.from(b.getClientRects()),isRTL:b=>"rtl"===Ok(b).direction},mE=(b,g,m)=>dE(b,g,re({platform:lE},m)),Ln=vb(V(22),1),iz=V(22),nE=vb(V(31),1),Jv="undefined"!==typeof document?iz.useLayoutEffect:
iz.useEffect,oE=b=>{const {element:g,padding:m}=b;return{name:"arrow",options:b,fn(I){if(Object.prototype.hasOwnProperty.call(g,"current")){if(null!=g.current)return fz({element:g.current,padding:m}).fn(I)}else if(g)return fz({element:g,padding:m}).fn(I);return{}}}},Kv=V(22),pE=(0,Kv.forwardRef)((b,g)=>{const {children:m,width:I=10,height:W=5}=b,ia=Ya(b,["children","width","height"]);return(0,Kv.createElement)(tj.svg,se({},ia,{ref:g,width:I,height:W,viewBox:"0 0 30 10",preserveAspectRatio:"none"}),
b.asChild?m:(0,Kv.createElement)("polygon",{points:"0,0 30,0 15,10"}))}),qE=V(22),[Lv,Er]=og("Popper"),[rE,jz]=Lv("Popper"),Mv=(0,Wl.forwardRef)((b,g)=>{const {__scopePopper:m,virtualRef:I}=b;b=Ya(b,["__scopePopper","virtualRef"]);const W=jz("PopperAnchor",m),ia=(0,Wl.useRef)(null);g=bh(g,ia);(0,Wl.useEffect)(()=>{W.onAnchorChange((null===I||void 0===I?void 0:I.current)||ia.current)});return I?null:(0,Wl.createElement)(tj.div,se({},b,{ref:g}))}),[kz,lz]=Lv("PopperContent"),[mz,sE]=Lv("PopperContent",
{hasParent:!1,positionUpdateFns:new Set}),Nv=(0,Wl.forwardRef)((b,g)=>{var m,I,W,ia,sa,La,Va,$a;const {__scopePopper:lb,side:ub="bottom",sideOffset:Rb=0,align:ec="center",alignOffset:Vb=0,arrowPadding:rc=0,collisionBoundary:mc=[],collisionPadding:Wb=0,sticky:tc="partial",hideWhenDetached:Hc=!1,avoidCollisions:Qc=!0}=b;b=Ya(b,"__scopePopper side sideOffset align alignOffset arrowPadding collisionBoundary collisionPadding sticky hideWhenDetached avoidCollisions".split(" "));const Uc=jz("PopperContent",
lb),[Vd,ae]=(0,Wl.useState)(null);g=bh(g,Vr=>ae(Vr));const [De,Oe]=(0,Wl.useState)(null);var tf=Oi(De),pf=null!==(m=null===tf||void 0===tf?void 0:tf.width)&&void 0!==m?m:0;m=null!==(I=null===tf||void 0===tf?void 0:tf.height)&&void 0!==I?I:0;I=ub+("center"!==ec?"-"+ec:"");tf="number"===typeof Wb?Wb:re({top:0,right:0,bottom:0,left:0},Wb);const df=Array.isArray(mc)?mc:[mc],Ie=0<df.length;tf={padding:tf,boundary:df.filter(Jg),altBoundary:Ie};const {reference:Bd,floating:fd,strategy:jd,x:ld,y:Gd,placement:we,
middlewareData:Fe,update:qf}=ug({strategy:"fixed",placement:I,whileElementsMounted:Xj,middleware:[iE({mainAxis:Rb+m,alignmentAxis:Vb}),Qc?jE(re({mainAxis:!0,crossAxis:!1,limiter:"partial"===tc?kE():void 0},tf)):void 0,De?oE({element:De,padding:rc}):void 0,Qc?gE(re({},tf)):void 0,uE({arrowWidth:pf,arrowHeight:m}),Hc?hE({strategy:"referenceHidden"}):void 0].filter(Sf)});wn(()=>{Bd(Uc.anchor)},[Bd,Uc.anchor]);const hf=null!==ld&&null!==Gd,[gf,Ug]=jj(we);pf=null===(W=Fe.arrow)||void 0===W?void 0:W.x;
W=null===(ia=Fe.arrow)||void 0===ia?void 0:ia.y;ia=0!==(null===(sa=Fe.arrow)||void 0===sa?void 0:sa.centerOffset);const [Gg,qi]=(0,Wl.useState)();wn(()=>{Vd&&qi(window.getComputedStyle(Vd).zIndex)},[Vd]);const {hasParent:Jk,positionUpdateFns:Tk}=sE("PopperContent",lb),Do=!Jk;(0,Wl.useLayoutEffect)(()=>{if(!Do)return Tk.add(qf),()=>{Tk.delete(qf)}},[Do,Tk,qf]);(0,Wl.useLayoutEffect)(()=>{Do&&hf&&Array.from(Tk).reverse().forEach(Vr=>requestAnimationFrame(Vr))},[Do,hf,Tk]);sa=Ga(re({"data-side":gf,"data-align":Ug},
b),{ref:g,style:Ga(re({},b.style),{animation:hf?void 0:"none",opacity:null!==(La=Fe.hide)&&void 0!==La&&La.referenceHidden?0:void 0})});return(0,Wl.createElement)("div",{ref:fd,"data-radix-popper-content-wrapper":"",style:{position:jd,left:0,top:0,transform:hf?`translate3d(${Math.round(ld)}px, ${Math.round(Gd)}px, 0)`:"translate3d(0, -200%, 0)",minWidth:"max-content",zIndex:Gg,["--radix-popper-transform-origin"]:[null===(Va=Fe.transformOrigin)||void 0===Va?void 0:Va.x,null===($a=Fe.transformOrigin)||
void 0===$a?void 0:$a.y].join(" ")}},(0,Wl.createElement)(kz,{scope:lb,placedSide:gf,onArrowChange:Oe,arrowX:pf,arrowY:W,shouldHideArrow:ia},Do?(0,Wl.createElement)(mz,{scope:lb,hasParent:!0,positionUpdateFns:Tk},(0,Wl.createElement)(tj.div,sa)):(0,Wl.createElement)(tj.div,sa)))}),tE={top:"bottom",right:"left",bottom:"top",left:"right"},nz=(0,Wl.forwardRef)(function(b,g){var {__scopePopper:m}=b;b=Ya(b,["__scopePopper"]);m=lz("PopperArrow",m);return(0,Wl.createElement)("span",{ref:m.onArrowChange,
style:{position:"absolute",left:m.arrowX,top:m.arrowY,[tE[m.placedSide]]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[m.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[m.placedSide],visibility:m.shouldHideArrow?"hidden":void 0}},(0,Wl.createElement)(pE,se({},b,{ref:g,style:Ga(re({},b.style),{display:"block"})})))}),uE=b=>({name:"transformOrigin",
options:b,fn(g){var m,I,W,ia,sa;const {placement:La,rects:Va,middlewareData:$a}=g,lb=(g=0!==(null===(m=$a.arrow)||void 0===m?void 0:m.centerOffset))?0:b.arrowWidth;m=g?0:b.arrowHeight;const [ub,Rb]=jj(La),ec={start:"0%",center:"50%",end:"100%"}[Rb],Vb=(null!==(I=null===(W=$a.arrow)||void 0===W?void 0:W.x)&&void 0!==I?I:0)+lb/2;I=(null!==(ia=null===(sa=$a.arrow)||void 0===sa?void 0:sa.y)&&void 0!==ia?ia:0)+m/2;sa=ia="";"bottom"===ub?(ia=g?ec:`${Vb}px`,sa=`${-m}px`):"top"===ub?(ia=g?ec:`${Vb}px`,sa=
`${Va.floating.height+m}px`):"right"===ub?(ia=`${-m}px`,sa=g?ec:`${I}px`):"left"===ub&&(ia=`${Va.floating.width+m}px`,sa=g?ec:`${I}px`);return{data:{x:ia,y:sa}}}}),Ov=b=>{const {__scopePopper:g,children:m}=b,[I,W]=(0,Wl.useState)(null);return(0,Wl.createElement)(rE,{scope:g,anchor:I,onAnchorChange:W},m)},oz=V(22),vE=vb(V(31)),pz=(0,oz.forwardRef)((b,g)=>{var m;const {container:I=null===globalThis||void 0===globalThis?void 0:null===(m=globalThis.document)||void 0===m?void 0:m.body}=b;b=Ya(b,["container"]);
return I?vE.default.createPortal((0,oz.createElement)(tj.div,se({},b,{ref:g})),I):null}),jp=V(22),wE=V(31),Os=b=>{const {present:g,children:m}=b;b=nh(g);const I="function"===typeof m?m({present:b.isPresent}):jp.Children.only(m),W=bh(b.ref,I.ref);return"function"===typeof m||b.isPresent?(0,jp.cloneElement)(I,{ref:W}):null};Os.displayName="Presence";var Rt=V(22),qz=V(22),rz=(0,qz.forwardRef)((b,g)=>(0,qz.createElement)(tj.span,se({},b,{ref:g,style:re({position:"absolute",border:0,width:1,height:1,padding:0,
margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"},b.style)}))),[St]=og("Tooltip",[Er]),Tt=Er(),[xE,Pv]=St("TooltipProvider"),[yE,Ps]=St("Tooltip"),zE=(0,gh.forwardRef)((b,g)=>{var {__scopeTooltip:m}=b;const I=Ya(b,["__scopeTooltip"]),W=Ps("TooltipTrigger",m),ia=Pv("TooltipTrigger",m);m=Tt(m);const sa=(0,gh.useRef)(null);g=bh(g,sa,W.onTriggerChange);const La=(0,gh.useRef)(!1),Va=(0,gh.useRef)(!1),$a=(0,gh.useCallback)(()=>La.current=!1,[]);(0,gh.useEffect)(()=>
()=>document.removeEventListener("pointerup",$a),[$a]);return(0,gh.createElement)(Mv,se({asChild:!0},m),(0,gh.createElement)(tj.button,se({"aria-describedby":W.open?W.contentId:void 0,"data-state":W.stateAttribute},I,{ref:g,onPointerMove:Zf(b.onPointerMove,lb=>{"touch"===lb.pointerType||Va.current||ia.isPointerInTransitRef.current||(W.onTriggerEnter(),Va.current=!0)}),onPointerLeave:Zf(b.onPointerLeave,()=>{W.onTriggerLeave();Va.current=!1}),onPointerDown:Zf(b.onPointerDown,()=>{La.current=!0;document.addEventListener("pointerup",
$a,{once:!0})}),onFocus:Zf(b.onFocus,()=>{if(!La.current)W.onOpen()}),onBlur:Zf(b.onBlur,W.onClose),onClick:Zf(b.onClick,W.onClose)})))}),[AE,BE]=St("TooltipPortal",{forceMount:void 0}),CE=(0,gh.forwardRef)((b,g)=>{var m=BE("TooltipContent",b.__scopeTooltip);const {forceMount:I=m.forceMount,side:W="top"}=b;m=Ya(b,["forceMount","side"]);b=Ps("TooltipContent",b.__scopeTooltip);return(0,gh.createElement)(Os,{present:I||b.open},b.disableHoverableContent?(0,gh.createElement)(sz,se({side:W},m,{ref:g})):
(0,gh.createElement)(DE,se({side:W},m,{ref:g})))}),DE=(0,gh.forwardRef)((b,g)=>{const m=Ps("TooltipContent",b.__scopeTooltip),I=Pv("TooltipContent",b.__scopeTooltip),W=(0,gh.useRef)(null);g=bh(g,W);const [ia,sa]=(0,gh.useState)(null),{trigger:La,onClose:Va}=m,$a=W.current,{onPointerInTransitChange:lb}=I,ub=(0,gh.useCallback)(()=>{sa(null);lb(!1)},[lb]),Rb=(0,gh.useCallback)((ec,Vb)=>{const rc=Ai({x:ec.clientX,y:ec.clientY},ec.currentTarget.getBoundingClientRect()),mc="right"===rc||"bottom"===rc?-5:
5;ec="right"===rc||"left"===rc?{x:ec.clientX+mc,y:ec.clientY}:{x:ec.clientX,y:ec.clientY+mc};Vb=Vb.getBoundingClientRect();const {top:Wb,right:tc,bottom:Hc,left:Qc}=Vb;Vb=Qi([ec,{x:Qc,y:Wb},{x:tc,y:Wb},{x:tc,y:Hc},{x:Qc,y:Hc}]);sa(Vb);lb(!0)},[lb]);(0,gh.useEffect)(()=>()=>ub(),[ub]);(0,gh.useEffect)(()=>{if(La&&$a){const ec=rc=>Rb(rc,$a),Vb=rc=>Rb(rc,La);La.addEventListener("pointerleave",ec);$a.addEventListener("pointerleave",Vb);return()=>{La.removeEventListener("pointerleave",ec);$a.removeEventListener("pointerleave",
Vb)}}},[La,$a,Rb,ub]);(0,gh.useEffect)(()=>{if(ia){const ec=Vb=>{var rc=Vb.target;Vb={x:Vb.clientX,y:Vb.clientY};rc=(null===La||void 0===La?void 0:La.contains(rc))||(null===$a||void 0===$a?void 0:$a.contains(rc));const {x:mc,y:Wb}=Vb;Vb=!1;for(let tc=0,Hc=ia.length-1;tc<ia.length;Hc=tc++){const Qc=ia[tc].x,Uc=ia[tc].y,Vd=ia[Hc].x,ae=ia[Hc].y;Uc>Wb!==ae>Wb&&mc<(Vd-Qc)*(Wb-Uc)/(ae-Uc)+Qc&&(Vb=!Vb)}Vb=!Vb;rc?ub():Vb&&(ub(),Va())};document.addEventListener("pointermove",ec);return()=>document.removeEventListener("pointermove",
ec)}},[La,$a,ia,Va,ub]);return(0,gh.createElement)(sz,se({},b,{ref:g}))}),[EE,FE]=St("Tooltip",{isInside:!1}),sz=(0,gh.forwardRef)((b,g)=>{const {__scopeTooltip:m,children:I,"aria-label":W,onEscapeKeyDown:ia,onPointerDownOutside:sa}=b;b=Ya(b,["__scopeTooltip","children","aria-label","onEscapeKeyDown","onPointerDownOutside"]);const La=Ps("TooltipContent",m),Va=Tt(m),{onClose:$a}=La;(0,gh.useEffect)(()=>{document.addEventListener("tooltip.open",$a);return()=>document.removeEventListener("tooltip.open",
$a)},[$a]);(0,gh.useEffect)(()=>{if(La.trigger){const lb=ub=>{ub=ub.target;null!==ub&&void 0!==ub&&ub.contains(La.trigger)&&$a()};window.addEventListener("scroll",lb,{capture:!0});return()=>window.removeEventListener("scroll",lb,{capture:!0})}},[La.trigger,$a]);return(0,gh.createElement)(Pt,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:ia,onPointerDownOutside:sa,onFocusOutside:lb=>lb.preventDefault(),onDismiss:$a},(0,gh.createElement)(Nv,se({"data-state":La.stateAttribute},Va,b,{ref:g,
style:Ga(re({},b.style),{["--radix-tooltip-content-transform-origin"]:"var(--radix-popper-transform-origin)"})}),(0,gh.createElement)(cz,null,I),(0,gh.createElement)(EE,{scope:m,isInside:!0},(0,gh.createElement)(rz,{id:La.contentId,role:"tooltip"},W||I))))}),GE=(0,gh.forwardRef)((b,g)=>{const {__scopeTooltip:m}=b;b=Ya(b,["__scopeTooltip"]);const I=Tt(m);return FE("TooltipArrow",m).isInside?null:(0,gh.createElement)(nz,se({},I,b,{ref:g}))}),HE=b=>{const {__scopeTooltip:g,delayDuration:m=700,skipDelayDuration:I=
300,disableHoverableContent:W=!1,children:ia}=b,[sa,La]=(0,gh.useState)(!0),Va=(0,gh.useRef)(!1),$a=(0,gh.useRef)(0);(0,gh.useEffect)(()=>{const lb=$a.current;return()=>window.clearTimeout(lb)},[]);return(0,gh.createElement)(xE,{scope:g,isOpenDelayed:sa,delayDuration:m,onOpen:(0,gh.useCallback)(()=>{window.clearTimeout($a.current);La(!1)},[]),onClose:(0,gh.useCallback)(()=>{window.clearTimeout($a.current);$a.current=window.setTimeout(()=>La(!0),I)},[I]),isPointerInTransitRef:Va,onPointerInTransitChange:(0,gh.useCallback)(lb=>
{Va.current=lb},[]),disableHoverableContent:W},ia)},IE=b=>{const {__scopeTooltip:g,children:m,open:I,defaultOpen:W=!1,onOpenChange:ia,disableHoverableContent:sa,delayDuration:La}=b,Va=Pv("Tooltip",b.__scopeTooltip);b=Tt(g);const [$a,lb]=(0,gh.useState)(null),ub=pl(),Rb=(0,gh.useRef)(0),ec=null!==sa&&void 0!==sa?sa:Va.disableHoverableContent,Vb=null!==La&&void 0!==La?La:Va.delayDuration,rc=(0,gh.useRef)(!1),[mc=!1,Wb]=Rg({prop:I,defaultProp:W,onChange:Vd=>{if(Vd)Va.onOpen(),document.dispatchEvent(new CustomEvent("tooltip.open"));
else Va.onClose();null===ia||void 0===ia||ia(Vd)}}),tc=(0,gh.useMemo)(()=>mc?rc.current?"delayed-open":"instant-open":"closed",[mc]),Hc=(0,gh.useCallback)(()=>{window.clearTimeout(Rb.current);rc.current=!1;Wb(!0)},[Wb]),Qc=(0,gh.useCallback)(()=>{window.clearTimeout(Rb.current);Wb(!1)},[Wb]),Uc=(0,gh.useCallback)(()=>{window.clearTimeout(Rb.current);Rb.current=window.setTimeout(()=>{rc.current=!0;Wb(!0)},Vb)},[Vb,Wb]);(0,gh.useEffect)(()=>()=>window.clearTimeout(Rb.current),[]);return(0,gh.createElement)(Ov,
b,(0,gh.createElement)(yE,{scope:g,contentId:ub,open:mc,stateAttribute:tc,trigger:$a,onTriggerChange:lb,onTriggerEnter:(0,gh.useCallback)(()=>{Va.isOpenDelayed?Uc():Hc()},[Va.isOpenDelayed,Uc,Hc]),onTriggerLeave:(0,gh.useCallback)(()=>{ec?Qc():window.clearTimeout(Rb.current)},[Qc,ec]),onOpen:Hc,onClose:Qc,disableHoverableContent:ec},m))},JE=zE,KE=b=>{const {__scopeTooltip:g,forceMount:m,children:I,container:W}=b;b=Ps("TooltipPortal",g);return(0,gh.createElement)(AE,{scope:g,forceMount:m},(0,gh.createElement)(Os,
{present:m||b.open},(0,gh.createElement)(pz,{asChild:!0,container:W},I)))},LE=CE,ME=GE;ob=V(586);ob=V(586);var tz=vb(V(22));ob=V(586);var uz=({active:b,style:g,icon:m,otherIcon:I,onClick:W})=>{const [ia,sa]=tz.default.useState(!1);tz.default.useEffect(()=>{sa(!0);const La=setTimeout(()=>{sa(!1)},500);return()=>clearTimeout(La)},[b]);return(0,ob.jsx)("button",{"data-active":b,"data-recently-changed":ia,style:g,className:"tl-circle-button",onPointerDown:W,children:(0,ob.jsxs)("div",{className:"tl-circle-button-icons-wrapper",
"data-icons-count":I?2:1,children:[I&&(0,ob.jsx)(Ih,{name:I}),(0,ob.jsx)(Ih,{name:m})]})})},eo=V(22),Tg=V(22),Uo=vb(V(22)),vz=V(22),NE=(0,vz.createContext)(void 0),OE=V(22),Qv=0,Mp=V(22),wz={bubbles:!1,cancelable:!0},Rv=(0,Mp.forwardRef)((b,g)=>{const {loop:m=!1,trapped:I=!1,onMountAutoFocus:W,onUnmountAutoFocus:ia}=b;b=Ya(b,["loop","trapped","onMountAutoFocus","onUnmountAutoFocus"]);const [sa,La]=(0,Mp.useState)(null),Va=ij(W),$a=ij(ia),lb=(0,Mp.useRef)(null);g=bh(g,ec=>La(ec));const ub=(0,Mp.useRef)({paused:!1,
pause(){this.paused=!0},resume(){this.paused=!1}}).current;(0,Mp.useEffect)(()=>{if(I){let ec=function(rc){!ub.paused&&sa&&(rc=rc.target,sa.contains(rc)?lb.current=rc:$b(lb.current,{select:!0}))},Vb=function(rc){!ub.paused&&sa&&(sa.contains(rc.relatedTarget)||$b(lb.current,{select:!0}))};document.addEventListener("focusin",ec);document.addEventListener("focusout",Vb);return()=>{document.removeEventListener("focusin",ec);document.removeEventListener("focusout",Vb)}}},[I,sa,ub.paused]);(0,Mp.useEffect)(()=>
{if(sa){xz.add(ub);const ec=document.activeElement;if(!sa.contains(ec)){const Vb=new CustomEvent("focusScope.autoFocusOnMount",wz);sa.addEventListener("focusScope.autoFocusOnMount",Va);sa.dispatchEvent(Vb);Vb.defaultPrevented||(zb(Oc(Pb(sa)),{select:!0}),document.activeElement===ec&&$b(sa))}return()=>{sa.removeEventListener("focusScope.autoFocusOnMount",Va);setTimeout(()=>{const Vb=new CustomEvent("focusScope.autoFocusOnUnmount",wz);sa.addEventListener("focusScope.autoFocusOnUnmount",$a);sa.dispatchEvent(Vb);
Vb.defaultPrevented||$b(null!==ec&&void 0!==ec?ec:document.body,{select:!0});sa.removeEventListener("focusScope.autoFocusOnUnmount",$a);xz.remove(ub)},0)}}},[sa,Va,$a,ub]);const Rb=(0,Mp.useCallback)(ec=>{if((m||I)&&!ub.paused){var Vb=document.activeElement;if("Tab"===ec.key&&!ec.altKey&&!ec.ctrlKey&&!ec.metaKey&&Vb){const mc=ec.currentTarget;var rc=mc;const Wb=Pb(rc),tc=sb(Wb,rc);rc=sb(Wb.reverse(),rc);const [Hc,Qc]=[tc,rc];Hc&&Qc?ec.shiftKey||Vb!==Qc?ec.shiftKey&&Vb===Hc&&(ec.preventDefault(),m&&
$b(Qc,{select:!0})):(ec.preventDefault(),m&&$b(Hc,{select:!0})):Vb===mc&&ec.preventDefault()}}},[m,I,ub.paused]);return(0,Mp.createElement)(tj.div,se({tabIndex:-1},b,{ref:g,onKeyDown:Rb}))}),xz=function(){let b=[];return{add(g){const m=b[0];g===m||null!==m&&void 0!==m&&m.pause();b=Bc(b,g);b.unshift(g)},remove(g){var m;b=Bc(b,g);null===(m=b[0])||void 0===m||m.resume()}}}(),Xl=V(22),PE={bubbles:!1,cancelable:!0},[Sv,yz,QE]=ja("RovingFocusGroup"),[RE,Ut]=og("RovingFocusGroup",[QE]),[SE,TE]=RE("RovingFocusGroup"),
zz=(0,Xl.forwardRef)((b,g)=>(0,Xl.createElement)(Sv.Provider,{scope:b.__scopeRovingFocusGroup},(0,Xl.createElement)(Sv.Slot,{scope:b.__scopeRovingFocusGroup},(0,Xl.createElement)(UE,se({},b,{ref:g}))))),UE=(0,Xl.forwardRef)((b,g)=>{const {__scopeRovingFocusGroup:m,orientation:I,loop:W=!1,dir:ia,currentTabStopId:sa,defaultCurrentTabStopId:La,onCurrentTabStopIdChange:Va,onEntryFocus:$a}=b,lb=Ya(b,"__scopeRovingFocusGroup orientation loop dir currentTabStopId defaultCurrentTabStopId onCurrentTabStopIdChange onEntryFocus".split(" ")),
ub=(0,Xl.useRef)(null);g=bh(g,ub);const Rb=Fb(ia),[ec=null,Vb]=Rg({prop:sa,defaultProp:La,onChange:Va}),[rc,mc]=(0,Xl.useState)(!1),Wb=ij($a),tc=yz(m),Hc=(0,Xl.useRef)(!1),[Qc,Uc]=(0,Xl.useState)(0);(0,Xl.useEffect)(()=>{const Vd=ub.current;if(Vd)return Vd.addEventListener("rovingFocusGroup.onEntryFocus",Wb),()=>Vd.removeEventListener("rovingFocusGroup.onEntryFocus",Wb)},[Wb]);return(0,Xl.createElement)(SE,{scope:m,orientation:I,dir:Rb,loop:W,currentTabStopId:ec,onItemFocus:(0,Xl.useCallback)(Vd=>
Vb(Vd),[Vb]),onItemShiftTab:(0,Xl.useCallback)(()=>mc(!0),[]),onFocusableItemAdd:(0,Xl.useCallback)(()=>Uc(Vd=>Vd+1),[]),onFocusableItemRemove:(0,Xl.useCallback)(()=>Uc(Vd=>Vd-1),[])},(0,Xl.createElement)(tj.div,se({tabIndex:rc||0===Qc?-1:0,"data-orientation":I},lb,{ref:g,style:re({outline:"none"},b.style),onMouseDown:Zf(b.onMouseDown,()=>{Hc.current=!0}),onFocus:Zf(b.onFocus,Vd=>{var ae=!Hc.current;if(Vd.target===Vd.currentTarget&&ae&&!rc&&(ae=new CustomEvent("rovingFocusGroup.onEntryFocus",PE),
Vd.currentTarget.dispatchEvent(ae),!ae.defaultPrevented)){Vd=tc().filter(Oe=>Oe.focusable);ae=Vd.find(Oe=>Oe.active);const De=Vd.find(Oe=>Oe.id===ec);Vd=[ae,De,...Vd].filter(Boolean).map(Oe=>Oe.ref.current);xd(Vd)}Hc.current=!1}),onBlur:Zf(b.onBlur,()=>mc(!1))})))}),Az=(0,Xl.forwardRef)((b,g)=>{const {__scopeRovingFocusGroup:m,focusable:I=!0,active:W=!1}=b,ia=Ya(b,["__scopeRovingFocusGroup","focusable","active"]),sa=pl(),La=TE("RovingFocusGroupItem",m),Va=La.currentTabStopId===sa,$a=yz(m),{onFocusableItemAdd:lb,
onFocusableItemRemove:ub}=La;(0,Xl.useEffect)(()=>{if(I)return lb(),()=>ub()},[I,lb,ub]);return(0,Xl.createElement)(Sv.ItemSlot,{scope:m,id:sa,focusable:I,active:W},(0,Xl.createElement)(tj.span,se({tabIndex:Va?0:-1,"data-orientation":La.orientation},ia,{ref:g,onMouseDown:Zf(b.onMouseDown,Rb=>{if(I)La.onItemFocus(sa);else Rb.preventDefault()}),onFocus:Zf(b.onFocus,()=>La.onItemFocus(sa)),onKeyDown:Zf(b.onKeyDown,Rb=>{if("Tab"===Rb.key&&Rb.shiftKey)La.onItemShiftTab();else if(Rb.target===Rb.currentTarget){var ec=
Sc(Rb,La.orientation,La.dir);if(void 0!==ec){Rb.preventDefault();let Vb=$a().filter(rc=>rc.focusable).map(rc=>rc.ref.current);if("last"===ec)Vb.reverse();else if("prev"===ec||"next"===ec)"prev"===ec&&Vb.reverse(),Rb=Vb.indexOf(Rb.currentTarget),Vb=La.loop?Rd(Vb,Rb+1):Vb.slice(Rb+1);setTimeout(()=>xd(Vb))}}})})))}),VE={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"},WE=function(b){return"undefined"===typeof document?null:(Array.isArray(b)?
b[0]:b).ownerDocument.body},Fr=new WeakMap,Vt=new WeakMap,Wt={},Tv=0,Uv=function(b,g,m){void 0===g&&(g=WE(b));void 0===m&&(m="data-aria-hidden");var I=Array.isArray(b)?b:[b];Wt[m]||(Wt[m]=new WeakMap);var W=Wt[m],ia=[],sa=new Set,La=function($a){$a&&!sa.has($a)&&(sa.add($a),La($a.parentNode))};I.forEach(La);var Va=function($a){!$a||0<=I.indexOf($a)||Array.prototype.forEach.call($a.children,function(lb){if(sa.has(lb))Va(lb);else{var ub=lb.getAttribute("aria-hidden");ub=null!==ub&&"false"!==ub;var Rb=
(Fr.get(lb)||0)+1,ec=(W.get(lb)||0)+1;Fr.set(lb,Rb);W.set(lb,ec);ia.push(lb);1===Rb&&ub&&Vt.set(lb,!0);1===ec&&lb.setAttribute(m,"true");ub||lb.setAttribute("aria-hidden","true")}})};Va(g);sa.clear();Tv++;return function(){ia.forEach(function($a){var lb=Fr.get($a)-1,ub=W.get($a)-1;Fr.set($a,lb);W.set($a,ub);lb||(Vt.has($a)||$a.removeAttribute("aria-hidden"),Vt.delete($a));ub||$a.removeAttribute(m)});Tv--;Tv||(Fr=new WeakMap,Fr=new WeakMap,Vt=new WeakMap,Wt={})}},XE=vb(Xa(),1),{__assign:Np,__rest:Bz,
__spreadArray:YE}=XE.default,Cz=vb(V(22)),kp=vb(V(22)),ZE=V(22),$E=vb(V(22)),Dz=function(b){var g=b.sideCar;b=Bz(b,["sideCar"]);if(!g)throw Error("Sidecar: please provide `sideCar` property to import the right car");g=g.read();if(!g)throw Error("Sidecar medium not found");return $E.createElement(g,Np({},b))};Dz.isSideCarExport=!0;var Ez=function(b){void 0===b&&(b={});var g=ye(null);g.options=Np({async:!0,ssr:!1},b);return g}(),Vv=function(){},Xt=kp.forwardRef(function(b,g){var m=kp.useRef(null),I=
kp.useState({onScrollCapture:Vv,onWheelCapture:Vv,onTouchMoveCapture:Vv}),W=I[0];I=I[1];var ia=b.forwardProps,sa=b.children,La=b.className,Va=b.removeScrollBar,$a=b.enabled,lb=b.shards,ub=b.sideCar,Rb=b.noIsolation,ec=b.inert,Vb=b.allowPinchZoom,rc=b.as;rc=void 0===rc?"div":rc;b=Bz(b,"forwardProps children className removeScrollBar enabled shards sideCar noIsolation inert allowPinchZoom as".split(" "));g=Dd([m,g]);W=Np(Np({},b),W);return kp.createElement(kp.Fragment,null,$a&&kp.createElement(ub,{sideCar:Ez,
removeScrollBar:Va,shards:lb,noIsolation:Rb,inert:ec,setCallbacks:I,allowPinchZoom:!!Vb,lockRef:m}),ia?kp.cloneElement(kp.Children.only(sa),Np(Np({},W),{ref:g})):kp.createElement(rc,Np({},W,{className:La,ref:g}),sa))});Xt.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Xt.classNames={fullWidth:"width-before-scroll-bar",zeroRight:"right-scroll-bar-position"};var mm=vb(V(22)),Fz=vb(V(22)),aF=vb(V(22)),bF=function(){var b=0,g=null;return{add:function(m){if(0==b){if(document){var I=document.createElement("style");
I.type="text/css";var W="undefined"!==typeof __webpack_nonce__?__webpack_nonce__:void 0;W&&I.setAttribute("nonce",W)}else I=null;if(g=I)I=g,I.styleSheet?I.styleSheet.cssText=m:I.appendChild(document.createTextNode(m)),m=g,(document.head||document.getElementsByTagName("head")[0]).appendChild(m)}b++},remove:function(){b--;!b&&g&&(g.parentNode&&g.parentNode.removeChild(g),g=null)}}},cF=function(){var b=bF();return function(g,m){aF.useEffect(function(){b.add(g);return function(){b.remove()}},[g&&m])}},
Gz=function(){var b=cF();return function(g){b(g.styles,g.dynamic);return null}},dF={left:0,top:0,right:0,gap:0},eF=Gz(),fF=function(b,g,m,I){var W=b.left,ia=b.top,sa=b.right;b=b.gap;void 0===m&&(m="margin");return"\n  .".concat("with-scroll-bars-hidden"," {\n   overflow: hidden ").concat(I,";\n   padding-right: ").concat(b,"px ").concat(I,";\n  }\n  body {\n    overflow: hidden ").concat(I,";\n    overscroll-behavior: contain;\n    ").concat([g&&"position: relative ".concat(I,";"),"margin"===m&&"\n    padding-left: ".concat(W,
"px;\n    padding-top: ").concat(ia,"px;\n    padding-right: ").concat(sa,"px;\n    margin-left:0;\n    margin-top:0;\n    margin-right: ").concat(b,"px ").concat(I,";\n    "),"padding"===m&&"padding-right: ".concat(b,"px ").concat(I,";")].filter(Boolean).join(""),"\n  }\n  \n  .").concat("right-scroll-bar-position"," {\n    right: ").concat(b,"px ").concat(I,";\n  }\n  \n  .").concat("width-before-scroll-bar"," {\n    margin-right: ").concat(b,"px ").concat(I,";\n  }\n  \n  .").concat("right-scroll-bar-position",
" .").concat("right-scroll-bar-position"," {\n    right: 0 ").concat(I,";\n  }\n  \n  .").concat("width-before-scroll-bar"," .").concat("width-before-scroll-bar"," {\n    margin-right: 0 ").concat(I,";\n  }\n  \n  body {\n    ").concat("--removed-body-scroll-bar-size",": ").concat(b,"px;\n  }\n")},gF=function(b){var g=b.noRelative,m=b.noImportant;b=b.gapMode;var I=void 0===b?"margin":b;b=Fz.useMemo(function(){var W=I;void 0===W&&(W="margin");if("undefined"===typeof window)W=dF;else{var ia=window.getComputedStyle(document.body),
sa=ia["padding"===W?"paddingTop":"marginTop"],La=ia["padding"===W?"paddingRight":"marginRight"];W=[parseInt(ia["padding"===W?"paddingLeft":"marginLeft"]||"",10)||0,parseInt(sa||"",10)||0,parseInt(La||"",10)||0];W={left:W[0],top:W[1],right:W[2],gap:Math.max(0,window.innerWidth-document.documentElement.clientWidth+W[2]-W[0])}}return W},[I]);return Fz.createElement(eF,{styles:fF(b,!g,I,m?"":"!important")})},Wv=!1;if("undefined"!==typeof window)try{var Yt=Object.defineProperty({},"passive",{get:function(){return Wv=
!0}});window.addEventListener("test",Yt,Yt);window.removeEventListener("test",Yt,Yt)}catch(b){Wv=!1}var Gr=Wv?{passive:!1}:!1,Hz=function(b,g){var m=window.getComputedStyle(b);return"hidden"!==m[g]&&!(m.overflowY===m.overflowX&&"TEXTAREA"!==b.tagName&&"visible"===m[g])},Iz=function(b,g){do{"undefined"!==typeof ShadowRoot&&g instanceof ShadowRoot&&(g=g.host);if(Jz(b,g)){var m=Kz(b,g);if(m[1]>m[2])return!0}g=g.parentNode}while(g&&g!==document.body);return!1},Jz=function(b,g){return"v"===b?Hz(g,"overflowY"):
Hz(g,"overflowX")},Kz=function(b,g){return"v"===b?[g.scrollTop,g.scrollHeight,g.clientHeight]:[g.scrollLeft,g.scrollWidth,g.clientWidth]},Zt=function(b){return"changedTouches"in b?[b.changedTouches[0].clientX,b.changedTouches[0].clientY]:[0,0]},Lz=function(b){return b&&"current"in b?b.current:b},hF=function(b){return"\n  .block-interactivity-".concat(b," {pointer-events: none;}\n  .allow-interactivity-").concat(b," {pointer-events: all;}\n")},iF=0,Hr=[];Ez.useMedium(function(b){var g=mm.useRef([]),
m=mm.useRef([0,0]),I=mm.useRef(),W=mm.useState(iF++)[0],ia=mm.useState(function(){return Gz()})[0],sa=mm.useRef(b);mm.useEffect(function(){sa.current=b},[b]);mm.useEffect(function(){if(b.inert){document.body.classList.add("block-interactivity-".concat(W));var Vb=YE([b.lockRef.current],(b.shards||[]).map(Lz),!0).filter(Boolean);Vb.forEach(function(rc){return rc.classList.add("allow-interactivity-".concat(W))});return function(){document.body.classList.remove("block-interactivity-".concat(W));Vb.forEach(function(rc){return rc.classList.remove("allow-interactivity-".concat(W))})}}},
[b.inert,b.lockRef.current,b.shards]);var La=mm.useCallback(function(Vb,rc){if("touches"in Vb&&2===Vb.touches.length)return!sa.current.allowPinchZoom;var mc=Zt(Vb),Wb=m.current,tc="deltaX"in Vb?Vb.deltaX:Wb[0]-mc[0];Wb="deltaY"in Vb?Vb.deltaY:Wb[1]-mc[1];var Hc=Vb.target,Qc=Math.abs(tc)>Math.abs(Wb)?"h":"v";if("touches"in Vb&&"h"===Qc&&"range"===Hc.type)return!1;var Uc=Iz(Qc,Hc);if(!Uc)return!0;Uc?mc=Qc:(mc="v"===Qc?"h":"v",Uc=Iz(Qc,Hc));if(!Uc)return!1;!I.current&&"changedTouches"in Vb&&(tc||Wb)&&
(I.current=mc);if(!mc)return!0;mc=I.current||mc;Wb="h"===mc?tc:Wb;tc=window.getComputedStyle(rc).direction;tc="h"===mc&&"rtl"===tc?-1:1;Qc=tc*Wb;Vb=Vb.target;Wb=rc.contains(Vb);Hc=!1;Qc=0<Qc;var Vd=Uc=0;do{var ae=Kz(mc,Vb),De=ae[0];ae=ae[1]-ae[2]-tc*De;(De||ae)&&Jz(mc,Vb)&&(Uc+=ae,Vd+=De);Vb=Vb.parentNode}while(!Wb&&Vb!==document.body||Wb&&(rc.contains(Vb)||rc===Vb));Qc&&0===Uc?Hc=!0:Qc||0!==Vd||(Hc=!0);return Hc},[]),Va=mm.useCallback(function(Vb){if(Hr.length&&Hr[Hr.length-1]===ia){var rc="deltaY"in
Vb?[Vb.deltaX,Vb.deltaY]:Zt(Vb),mc=g.current.filter(function(Wb){var tc;if(tc=Wb.name===Vb.type&&Wb.target===Vb.target)Wb=Wb.delta,tc=Wb[0]===rc[0]&&Wb[1]===rc[1];return tc})[0];mc&&mc.should?Vb.cancelable&&Vb.preventDefault():mc||(mc=(sa.current.shards||[]).map(Lz).filter(Boolean).filter(function(Wb){return Wb.contains(Vb.target)}),(0<mc.length?La(Vb,mc[0]):!sa.current.noIsolation)&&Vb.cancelable&&Vb.preventDefault())}},[]),$a=mm.useCallback(function(Vb,rc,mc,Wb){var tc={name:Vb,delta:rc,target:mc,
should:Wb};g.current.push(tc);setTimeout(function(){g.current=g.current.filter(function(Hc){return Hc!==tc})},1)},[]),lb=mm.useCallback(function(Vb){m.current=Zt(Vb);I.current=void 0},[]),ub=mm.useCallback(function(Vb){$a(Vb.type,[Vb.deltaX,Vb.deltaY],Vb.target,La(Vb,b.lockRef.current))},[]),Rb=mm.useCallback(function(Vb){$a(Vb.type,Zt(Vb),Vb.target,La(Vb,b.lockRef.current))},[]);mm.useEffect(function(){Hr.push(ia);b.setCallbacks({onScrollCapture:ub,onWheelCapture:ub,onTouchMoveCapture:Rb});document.addEventListener("wheel",
Va,Gr);document.addEventListener("touchmove",Va,Gr);document.addEventListener("touchstart",lb,Gr);return function(){Hr=Hr.filter(function(Vb){return Vb!==ia});document.removeEventListener("wheel",Va,Gr);document.removeEventListener("touchmove",Va,Gr);document.removeEventListener("touchstart",lb,Gr)}},[]);var ec=b.removeScrollBar;return mm.createElement(mm.Fragment,null,b.inert?mm.createElement(ia,{styles:hF(W)}):null,ec?mm.createElement(gF,{gapMode:"margin"}):null)});var $t=Cz.forwardRef(function(b,
g){return Cz.createElement(Xt,Np({},b,{ref:g,sideCar:Dz}))});$t.classNames=Xt.classNames;var Xv=["Enter"," "],Mz=["ArrowUp","PageDown","End"],jF=["ArrowDown","PageUp","Home",...Mz];[...Xv];[...Xv];var [Yv,kF,lF]=ja("Menu"),[Qq,au]=og("Menu",[lF,Er,Ut]),Zv=Er(),Nz=Ut(),[mF,bu]=Qq("Menu"),[nF,$v]=Qq("Menu"),Oz=(0,Tg.forwardRef)((b,g)=>{var {__scopeMenu:m}=b;b=Ya(b,["__scopeMenu"]);m=Zv(m);return(0,Tg.createElement)(Mv,se({},m,b,{ref:g}))}),[,oF]=Qq("MenuPortal",{forceMount:void 0}),[pF,Pz]=Qq("MenuContent"),
Op=(0,Tg.forwardRef)((b,g)=>{var m=oF("MenuContent",b.__scopeMenu);({forceMount:m=m.forceMount}=b);const I=Ya(b,["forceMount"]),W=bu("MenuContent",b.__scopeMenu),ia=$v("MenuContent",b.__scopeMenu);return(0,Tg.createElement)(Yv.Provider,{scope:b.__scopeMenu},(0,Tg.createElement)(Os,{present:m||W.open},(0,Tg.createElement)(Yv.Slot,{scope:b.__scopeMenu},ia.modal?(0,Tg.createElement)(qF,se({},I,{ref:g})):(0,Tg.createElement)(rF,se({},I,{ref:g})))))}),qF=(0,Tg.forwardRef)((b,g)=>{const m=bu("MenuContent",
b.__scopeMenu),I=(0,Tg.useRef)(null);g=bh(g,I);(0,Tg.useEffect)(()=>{const W=I.current;if(W)return Uv(W)},[]);return(0,Tg.createElement)(Qz,se({},b,{ref:g,trapFocus:m.open,disableOutsidePointerEvents:m.open,disableOutsideScroll:!0,onFocusOutside:Zf(b.onFocusOutside,W=>W.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>m.onOpenChange(!1)}))}),rF=(0,Tg.forwardRef)((b,g)=>{const m=bu("MenuContent",b.__scopeMenu);return(0,Tg.createElement)(Qz,se({},b,{ref:g,trapFocus:!1,disableOutsidePointerEvents:!1,
disableOutsideScroll:!1,onDismiss:()=>m.onOpenChange(!1)}))}),Qz=(0,Tg.forwardRef)((b,g)=>{const {__scopeMenu:m,loop:I=!1,trapFocus:W,onOpenAutoFocus:ia,onCloseAutoFocus:sa,disableOutsidePointerEvents:La,onEscapeKeyDown:Va,onPointerDownOutside:$a,onFocusOutside:lb,onInteractOutside:ub,onDismiss:Rb,disableOutsideScroll:ec}=b,Vb=Ya(b,"__scopeMenu loop trapFocus onOpenAutoFocus onCloseAutoFocus disableOutsidePointerEvents onEscapeKeyDown onPointerDownOutside onFocusOutside onInteractOutside onDismiss disableOutsideScroll".split(" ")),
rc=bu("MenuContent",m),mc=$v("MenuContent",m),Wb=Zv(m),tc=Nz(m),Hc=kF(m),[Qc,Uc]=(0,Tg.useState)(null),Vd=(0,Tg.useRef)(null);g=bh(g,Vd,rc.onContentChange);const ae=(0,Tg.useRef)(0),De=(0,Tg.useRef)(""),Oe=(0,Tg.useRef)(0),tf=(0,Tg.useRef)(null),pf=(0,Tg.useRef)("right"),df=(0,Tg.useRef)(0),Ie=ec?$t:Tg.Fragment,Bd=ec?{as:Pq,allowPinchZoom:!0}:void 0,fd=ld=>{var Gd,we;ld=De.current+ld;const Fe=Hc().filter(Gg=>!Gg.disabled),qf=document.activeElement,hf=null===(Gd=Fe.find(Gg=>Gg.ref.current===qf))||
void 0===Gd?void 0:Gd.textValue;Gd=Fe.map(Gg=>Gg.textValue);const gf=$e(Gd,ld,hf),Ug=null===(we=Fe.find(Gg=>Gg.textValue===gf))||void 0===we?void 0:we.ref.current;(function Jk(qi){De.current=qi;window.clearTimeout(ae.current);""!==qi&&(ae.current=window.setTimeout(()=>Jk(""),1E3))})(ld);Ug&&setTimeout(()=>Ug.focus())};(0,Tg.useEffect)(()=>()=>window.clearTimeout(ae.current),[]);Tb();const jd=(0,Tg.useCallback)(ld=>{var Gd,we,Fe;if(Fe=pf.current===(null===(Gd=tf.current)||void 0===Gd?void 0:Gd.side)){if(Gd=
null===(we=tf.current)||void 0===we?void 0:we.area){const {x:qf,y:hf}={x:ld.clientX,y:ld.clientY};ld=!1;for(let gf=0,Ug=Gd.length-1;gf<Gd.length;Ug=gf++){we=Gd[gf].x;Fe=Gd[gf].y;const Gg=Gd[Ug].x,qi=Gd[Ug].y;Fe>hf!==qi>hf&&qf<(Gg-we)*(hf-Fe)/(qi-Fe)+we&&(ld=!ld)}Gd=ld}else Gd=!1;Fe=Gd}return Fe},[]);return(0,Tg.createElement)(pF,{scope:m,searchRef:De,onItemEnter:(0,Tg.useCallback)(ld=>{jd(ld)&&ld.preventDefault()},[jd]),onItemLeave:(0,Tg.useCallback)(ld=>{var Gd;jd(ld)||(null===(Gd=Vd.current)||void 0===
Gd||Gd.focus(),Uc(null))},[jd]),onTriggerLeave:(0,Tg.useCallback)(ld=>{jd(ld)&&ld.preventDefault()},[jd]),pointerGraceTimerRef:Oe,onPointerGraceIntentChange:(0,Tg.useCallback)(ld=>{tf.current=ld},[])},(0,Tg.createElement)(Ie,Bd,(0,Tg.createElement)(Rv,{asChild:!0,trapped:W,onMountAutoFocus:Zf(ia,ld=>{var Gd;ld.preventDefault();null===(Gd=Vd.current)||void 0===Gd||Gd.focus()}),onUnmountAutoFocus:sa},(0,Tg.createElement)(Pt,{asChild:!0,disableOutsidePointerEvents:La,onEscapeKeyDown:Va,onPointerDownOutside:$a,
onFocusOutside:lb,onInteractOutside:ub,onDismiss:Rb},(0,Tg.createElement)(zz,se({asChild:!0},tc,{dir:mc.dir,orientation:"vertical",loop:I,currentTabStopId:Qc,onCurrentTabStopIdChange:Uc,onEntryFocus:ld=>{mc.isUsingKeyboardRef.current||ld.preventDefault()}}),(0,Tg.createElement)(Nv,se({role:"menu","aria-orientation":"vertical","data-state":rc.open?"open":"closed","data-radix-menu-content":"",dir:mc.dir},Wb,Vb,{ref:g,style:re({outline:"none"},Vb.style),onKeyDown:Zf(Vb.onKeyDown,ld=>{var Gd=ld.target.closest("[data-radix-menu-content]")===
ld.currentTarget;const we=ld.ctrlKey||ld.altKey||ld.metaKey,Fe=1===ld.key.length;Gd&&("Tab"===ld.key&&ld.preventDefault(),!we&&Fe&&fd(ld.key));ld.target===Vd.current&&jF.includes(ld.key)&&(ld.preventDefault(),Gd=Hc().filter(qf=>!qf.disabled).map(qf=>qf.ref.current),Mz.includes(ld.key)&&Gd.reverse(),Tf(Gd))}),onBlur:Zf(b.onBlur,ld=>{ld.currentTarget.contains(ld.target)||(window.clearTimeout(ae.current),De.current="")}),onPointerMove:Zf(b.onPointerMove,Pe(ld=>{const Gd=df.current!==ld.clientX;ld.currentTarget.contains(ld.target)&&
Gd&&(pf.current=ld.clientX>df.current?"right":"left",df.current=ld.clientX)}))})))))))}),Rz=(0,Tg.forwardRef)((b,g)=>{const {disabled:m=!1,onSelect:I}=b,W=Ya(b,["disabled","onSelect"]),ia=(0,Tg.useRef)(null),sa=$v("MenuItem",b.__scopeMenu),La=Pz("MenuItem",b.__scopeMenu);g=bh(g,ia);const Va=(0,Tg.useRef)(!1);return(0,Tg.createElement)(sF,se({},W,{ref:g,disabled:m,onClick:Zf(b.onClick,()=>{const $a=ia.current;if(!m&&$a){const lb=new CustomEvent("menu.itemSelect",{bubbles:!0,cancelable:!0});$a.addEventListener("menu.itemSelect",
ub=>null===I||void 0===I?void 0:I(ub),{once:!0});Ti($a,lb);if(lb.defaultPrevented)Va.current=!1;else sa.onClose()}}),onPointerDown:$a=>{var lb;null===(lb=b.onPointerDown)||void 0===lb||lb.call(b,$a);Va.current=!0},onPointerUp:Zf(b.onPointerUp,$a=>{var lb;Va.current||null===(lb=$a.currentTarget)||void 0===lb||lb.click()}),onKeyDown:Zf(b.onKeyDown,$a=>{const lb=""!==La.searchRef.current;m||lb&&" "===$a.key||!Xv.includes($a.key)||($a.currentTarget.click(),$a.preventDefault())})}))}),sF=(0,Tg.forwardRef)((b,
g)=>{const {__scopeMenu:m,disabled:I=!1,textValue:W}=b,ia=Ya(b,["__scopeMenu","disabled","textValue"]),sa=Pz("MenuItem",m),La=Nz(m),Va=(0,Tg.useRef)(null);g=bh(g,Va);const [$a,lb]=(0,Tg.useState)(!1),[ub,Rb]=(0,Tg.useState)("");(0,Tg.useEffect)(()=>{const ec=Va.current;if(ec){var Vb;Rb((null!==(Vb=ec.textContent)&&void 0!==Vb?Vb:"").trim())}},[ia.children]);return(0,Tg.createElement)(Yv.ItemSlot,{scope:m,disabled:I,textValue:null!==W&&void 0!==W?W:ub},(0,Tg.createElement)(Az,se({asChild:!0},La,{focusable:!I}),
(0,Tg.createElement)(tj.div,se({role:"menuitem","data-highlighted":$a?"":void 0,"aria-disabled":I||void 0,"data-disabled":I?"":void 0},ia,{ref:g,onPointerMove:Zf(b.onPointerMove,Pe(ec=>{if(I)sa.onItemLeave(ec);else sa.onItemEnter(ec),ec.defaultPrevented||ec.currentTarget.focus()})),onPointerLeave:Zf(b.onPointerLeave,Pe(ec=>sa.onItemLeave(ec))),onFocus:Zf(b.onFocus,()=>lb(!0)),onBlur:Zf(b.onBlur,()=>lb(!1))}))))});Qq("MenuRadioGroup",{value:void 0,onValueChange:()=>{}});Qq("MenuItemIndicator",{checked:!1});
var tF=(0,Tg.forwardRef)((b,g)=>{b=Ya(b,["__scopeMenu"]);return(0,Tg.createElement)(tj.div,se({role:"separator","aria-orientation":"horizontal"},b,{ref:g}))});Qq("MenuSub");var Sz=b=>{const {__scopeMenu:g,open:m=!1,children:I,dir:W,onOpenChange:ia,modal:sa=!0}=b;b=Zv(g);const [La,Va]=(0,Tg.useState)(null),$a=(0,Tg.useRef)(!1),lb=ij(ia),ub=Fb(W);(0,Tg.useEffect)(()=>{const Rb=()=>{$a.current=!0;document.addEventListener("pointerdown",ec,{capture:!0,once:!0});document.addEventListener("pointermove",
ec,{capture:!0,once:!0})},ec=()=>$a.current=!1;document.addEventListener("keydown",Rb,{capture:!0});return()=>{document.removeEventListener("keydown",Rb,{capture:!0});document.removeEventListener("pointerdown",ec,{capture:!0});document.removeEventListener("pointermove",ec,{capture:!0})}},[]);return(0,Tg.createElement)(Ov,b,(0,Tg.createElement)(mF,{scope:g,open:m,onOpenChange:lb,content:La,onContentChange:Va},(0,Tg.createElement)(nF,{scope:g,onClose:(0,Tg.useCallback)(()=>lb(!1),[lb]),isUsingKeyboardRef:$a,
dir:ub,modal:sa},I)))},[uF]=og("DropdownMenu",[au]),cu=au(),[vF,Tz]=uF("DropdownMenu"),wF=(0,eo.forwardRef)((b,g)=>{const {__scopeDropdownMenu:m,disabled:I=!1}=b,W=Ya(b,["__scopeDropdownMenu","disabled"]),ia=Tz("DropdownMenuTrigger",m),sa=cu(m);return(0,eo.createElement)(Oz,se({asChild:!0},sa),(0,eo.createElement)(tj.button,se({type:"button",id:ia.triggerId,"aria-haspopup":"menu","aria-expanded":ia.open,"aria-controls":ia.open?ia.contentId:void 0,"data-state":ia.open?"open":"closed","data-disabled":I?
"":void 0,disabled:I},W,{ref:Zi(g,ia.triggerRef),onPointerDown:Zf(b.onPointerDown,La=>{I||0!==La.button||!1!==La.ctrlKey||(ia.onOpenToggle(),ia.open||La.preventDefault())}),onKeyDown:Zf(b.onKeyDown,La=>{if(!I){if(["Enter"," "].includes(La.key))ia.onOpenToggle();if("ArrowDown"===La.key)ia.onOpenChange(!0);["Enter"," ","ArrowDown"].includes(La.key)&&La.preventDefault()}})})))}),xF=(0,eo.forwardRef)((b,g)=>{var {__scopeDropdownMenu:m}=b;const I=Ya(b,["__scopeDropdownMenu"]),W=Tz("DropdownMenuContent",
m);m=cu(m);const ia=(0,eo.useRef)(!1);return(0,eo.createElement)(Op,se({id:W.contentId,"aria-labelledby":W.triggerId},m,I,{ref:g,onCloseAutoFocus:Zf(b.onCloseAutoFocus,sa=>{var La;ia.current||null===(La=W.triggerRef.current)||void 0===La||La.focus();ia.current=!1;sa.preventDefault()}),onInteractOutside:Zf(b.onInteractOutside,sa=>{sa=sa.detail.originalEvent;const La=0===sa.button&&!0===sa.ctrlKey;sa=2===sa.button||La;if(!W.modal||sa)ia.current=!0}),style:Ga(re({},b.style),{["--radix-dropdown-menu-content-transform-origin"]:"var(--radix-popper-transform-origin)"})}))}),
Qs=(0,eo.forwardRef)((b,g)=>{var {__scopeDropdownMenu:m}=b;b=Ya(b,["__scopeDropdownMenu"]);m=cu(m);return(0,eo.createElement)(Rz,se({},m,b,{ref:g}))}),yF=b=>{const {__scopeDropdownMenu:g,children:m,dir:I,open:W,defaultOpen:ia,onOpenChange:sa,modal:La=!0}=b;b=cu(g);const Va=(0,eo.useRef)(null),[$a=!1,lb]=Rg({prop:W,defaultProp:ia,onChange:sa});return(0,eo.createElement)(vF,{scope:g,triggerId:pl(),triggerRef:Va,contentId:pl(),open:$a,onOpenChange:lb,onOpenToggle:(0,eo.useCallback)(()=>lb(ub=>!ub),[lb]),
modal:La},(0,eo.createElement)(Sz,se({},b,{open:$a,onOpenChange:lb,dir:I,modal:La}),m))};ob=V(586);var zF=nf(function(){const b=sg(),g=m=>{m.preventDefault()};return(0,ob.jsxs)(yF,{children:[(0,ob.jsx)(wF,{className:"tl-button text-sm px-2 important",id:"tl-zoom",children:(100*b.viewport.camera.zoom).toFixed(0)+"%"}),(0,ob.jsxs)(xF,{onCloseAutoFocus:m=>m.preventDefault(),className:"tl-menu",id:"zoomPopup",sideOffset:12,children:[(0,ob.jsxs)(Qs,{className:"tl-menu-item",onSelect:g,onClick:b.api.zoomToFit,
children:["Zoom to drawing",(0,ob.jsx)("div",{className:"tl-menu-right-slot",children:(0,ob.jsxs)("span",{className:"keyboard-shortcut",children:[(0,ob.jsx)("code",{children:"⇧"})," ",(0,ob.jsx)("code",{children:"1"})]})})]}),(0,ob.jsxs)(Qs,{className:"tl-menu-item",onSelect:g,onClick:b.api.zoomToSelection,disabled:0===b.selectedShapesArray.length,children:["Zoom to fit selection",(0,ob.jsx)("div",{className:"tl-menu-right-slot",children:(0,ob.jsxs)("span",{className:"keyboard-shortcut",children:[(0,ob.jsx)("code",
{children:yo})," ",(0,ob.jsx)("code",{children:"⇧"})," ",(0,ob.jsx)("code",{children:"1"})]})})]}),(0,ob.jsxs)(Qs,{className:"tl-menu-item",onSelect:g,onClick:b.api.zoomIn,children:["Zoom in",(0,ob.jsx)("div",{className:"tl-menu-right-slot",children:(0,ob.jsxs)("span",{className:"keyboard-shortcut",children:[(0,ob.jsx)("code",{children:yo})," ",(0,ob.jsx)("code",{children:"+"})]})})]}),(0,ob.jsxs)(Qs,{className:"tl-menu-item",onSelect:g,onClick:b.api.zoomOut,children:["Zoom out",(0,ob.jsx)("div",
{className:"tl-menu-right-slot",children:(0,ob.jsxs)("span",{className:"keyboard-shortcut",children:[(0,ob.jsx)("code",{children:yo})," ",(0,ob.jsx)("code",{children:"-"})]})})]}),(0,ob.jsxs)(Qs,{className:"tl-menu-item",onSelect:g,onClick:b.api.resetZoom,children:["Reset zoom",(0,ob.jsx)("div",{className:"tl-menu-right-slot",children:(0,ob.jsxs)("span",{className:"keyboard-shortcut",children:[(0,ob.jsx)("code",{children:"⇧"})," ",(0,ob.jsx)("code",{children:"0"})]})})]})]})]})}),Uz=V(22),Vz=["horizontal",
"vertical"],Rq=(0,Uz.forwardRef)((b,g)=>{const {decorative:m,orientation:I="horizontal"}=b;b=Ya(b,["decorative","orientation"]);const W=Vz.includes(I)?I:"horizontal";return(0,Uz.createElement)(tj.div,se({"data-orientation":W},m?{role:"none"}:{"aria-orientation":"vertical"===W?W:void 0,role:"separator"},b,{ref:g}))});Rq.propTypes={orientation(b,g,m){b=b[g];g=String(b);return b&&!Vz.includes(b)?Error(`Invalid prop \`orientation\` of value \`${g}\` supplied to \`${m}\`, expected one of:
  - horizontal
  - vertical

Defaulting to \`${"horizontal"}\`.`):null}};ob=V(586);var AF=nf(function(){const b=sg(),g=Ot.useCallback(()=>{b.api.undo()},[b]),m=Ot.useCallback(()=>{b.api.redo()},[b]),I=Ot.useCallback(()=>{b.api.zoomIn()},[b]),W=Ot.useCallback(()=>{b.api.zoomOut()},[b]);return(0,ob.jsxs)("div",{className:"tl-action-bar",children:[(0,ob.jsxs)("div",{className:"tl-toolbar tl-history-bar",children:[(0,ob.jsx)(dc,{tooltip:"Undo",onClick:g,children:(0,ob.jsx)(Ih,{name:"arrow-back-up"})}),(0,ob.jsx)(dc,{tooltip:"Redo",
onClick:m,children:(0,ob.jsx)(Ih,{name:"arrow-forward-up"})})]}),(0,ob.jsxs)("div",{className:"tl-toolbar tl-zoom-bar",children:[(0,ob.jsx)(dc,{tooltip:"Zoom in",onClick:I,id:"tl-zoom-in",children:(0,ob.jsx)(Ih,{name:"plus"})}),(0,ob.jsx)(dc,{tooltip:"Zoom out",onClick:W,id:"tl-zoom-out",children:(0,ob.jsx)(Ih,{name:"minus"})}),(0,ob.jsx)(Rq,{className:"tl-toolbar-separator",orientation:"vertical"}),(0,ob.jsx)(zF,{})]})]})}),Sq=vb(V(22)),aw=vb(V(31));ob=V(586);var du=b=>`[${b.map(g=>{var m;return null!=
(m=null==g?void 0:g.toFixed(2))?m:"-"}).join(", ")}]`,BF=nf(function(){const b=sg(),g=Sq.default.useRef(),[,m]=Sq.default.useState(0);Sq.default.useEffect(()=>{g.current=document.createElement("div");g.current.style.display="contents";document.body.append(g.current);m(I=>I+1);return()=>{var I;null==(I=g.current)?void 0:I.remove()}},[]);Sq.default.useEffect(()=>{requestAnimationFrame(()=>{var I,W;null==(W=null==(I=g.current)?void 0:I.querySelector(`[data-item-index="${b.history.pointer}"]`))?void 0:
W.scrollIntoView()})},[b.history.pointer]);return g.current?aw.default.createPortal((0,ob.jsx)("div",{className:"fixed z-[1000] left-4 max-w-[400px] top-4 overflow-scroll bg-gray-200 flex gap-2 p-2",children:b.history.stack.map((I,W)=>(0,ob.jsx)("div",{"data-item-index":W,style:{background:b.history.pointer===W?"pink":"grey"},onClick:()=>b.history.setPointer(W),className:"flex items-center rounded-lg px-2 h-[32px] whitespace-nowrap",children:I.pages[0].nonce},W))}),g.current):null});nf(()=>{var b;
const {viewport:{bounds:g,camera:{point:m,zoom:I}},inputs:W}=Ki(),ia=Sq.default.useRef(),sa=Sq.default.useRef();Sq.default.useEffect(()=>{var Va=document.getElementById("tl-dev-tools-canvas-anchor");ia.current=Va;Va=document.getElementById("tl-statusbar-anchor");sa.current=Va},[]);var La=[["Z",null!=(b=null==I?void 0:I.toFixed(2))?b:"null"],["MP",du(W.currentPoint)],["MS",du(W.currentScreenPoint)],["VP",du(m)],["VBR",du([g.maxX,g.maxY])]].map(Va=>Va.join("")).join("|");b=ia.current?aw.default.createPortal((0,ob.jsx)("svg",
{className:"tl-renderer-dev-tools tl-grid",children:(0,ob.jsx)("circle",{cx:m[0]*I,cy:m[1]*I,r:"4",fill:"red"})}),ia.current):null;La=sa.current?aw.default.createPortal((0,ob.jsx)("div",{style:{flex:1,display:"flex",alignItems:"center"},children:La}),sa.current):null;return(0,ob.jsxs)(ob.Fragment,{children:[b,La,(0,ob.jsx)(BF,{})]})});var CF=vb(V(22)),DF=vb(V(22));ob=V(586);var Vo=nf(b=>{var {id:g,icon:m,tooltip:I}=b;b=Ya(b,["id","icon","tooltip"]);var W;const ia=sg(),sa=DF.useCallback(Va=>{(Va=Va.currentTarget.dataset.tool)&&
ia.selectTool(Va)},[ia]),La=(null==(W=[...ia.Tools,kr,lr])?void 0:W.find(Va=>Va.id===g)).shortcut;W=La?(0,ob.jsxs)(ob.Fragment,{children:[I,(0,ob.jsx)("span",{className:"ml-2 keyboard-shortcut",children:La.map((Va,$a)=>(0,ob.jsx)("code",{children:Va.toUpperCase()},$a)).reduce((Va,$a)=>[Va," | ",$a])})]}):I;return(0,ob.jsx)(dc,Ga(re({},b),{tooltipSide:"left",tooltip:W,"data-tool":g,"data-selected":g===ia.selectedTool.id,onClick:sa,children:"string"===typeof m?(0,ob.jsx)(Ih,{name:m}):m}))}),Wz=vb(V(22)),
Jj=V(22),[Xz]=og("Popover",[Er]),eu=Er(),[EF,Rs]=Xz("Popover"),Yz=(0,Jj.forwardRef)((b,g)=>{var {__scopePopover:m}=b;const I=Ya(b,["__scopePopover"]),W=Rs("PopoverTrigger",m);m=eu(m);g=bh(g,W.triggerRef);b=(0,Jj.createElement)(tj.button,se({type:"button","aria-haspopup":"dialog","aria-expanded":W.open,"aria-controls":W.contentId,"data-state":W.open?"open":"closed"},I,{ref:g,onClick:Zf(b.onClick,W.onOpenToggle)}));return W.hasCustomAnchor?b:(0,Jj.createElement)(Mv,se({asChild:!0},m),b)}),[,FF]=Xz("PopoverPortal",
{forceMount:void 0}),Zz=(0,Jj.forwardRef)((b,g)=>{var m=FF("PopoverContent",b.__scopePopover);({forceMount:m=m.forceMount}=b);const I=Ya(b,["forceMount"]);b=Rs("PopoverContent",b.__scopePopover);return(0,Jj.createElement)(Os,{present:m||b.open},b.modal?(0,Jj.createElement)(GF,se({},I,{ref:g})):(0,Jj.createElement)(HF,se({},I,{ref:g})))}),GF=(0,Jj.forwardRef)((b,g)=>{const m=Rs("PopoverContent",b.__scopePopover),I=(0,Jj.useRef)(null);g=bh(g,I);const W=(0,Jj.useRef)(!1);(0,Jj.useEffect)(()=>{const ia=
I.current;if(ia)return Uv(ia)},[]);return(0,Jj.createElement)($t,{as:Pq,allowPinchZoom:!0},(0,Jj.createElement)($z,se({},b,{ref:g,trapFocus:m.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Zf(b.onCloseAutoFocus,ia=>{var sa;ia.preventDefault();W.current||null===(sa=m.triggerRef.current)||void 0===sa||sa.focus()}),onPointerDownOutside:Zf(b.onPointerDownOutside,ia=>{ia=ia.detail.originalEvent;const sa=0===ia.button&&!0===ia.ctrlKey;W.current=2===ia.button||sa},{checkForDefaultPrevented:!1}),onFocusOutside:Zf(b.onFocusOutside,
ia=>ia.preventDefault(),{checkForDefaultPrevented:!1})})))}),HF=(0,Jj.forwardRef)((b,g)=>{const m=Rs("PopoverContent",b.__scopePopover),I=(0,Jj.useRef)(!1);return(0,Jj.createElement)($z,se({},b,{ref:g,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:W=>{var ia;null===(ia=b.onCloseAutoFocus)||void 0===ia||ia.call(b,W);if(!W.defaultPrevented){var sa;I.current||null===(sa=m.triggerRef.current)||void 0===sa||sa.focus();W.preventDefault()}I.current=!1},onInteractOutside:W=>{var ia,sa;null===
(ia=b.onInteractOutside)||void 0===ia||ia.call(b,W);W.defaultPrevented||(I.current=!0);ia=W.target;(null===(sa=m.triggerRef.current)||void 0===sa?0:sa.contains(ia))&&W.preventDefault()}}))}),$z=(0,Jj.forwardRef)((b,g)=>{const {__scopePopover:m,trapFocus:I,onOpenAutoFocus:W,onCloseAutoFocus:ia,disableOutsidePointerEvents:sa,onEscapeKeyDown:La,onPointerDownOutside:Va,onFocusOutside:$a,onInteractOutside:lb}=b;b=Ya(b,"__scopePopover trapFocus onOpenAutoFocus onCloseAutoFocus disableOutsidePointerEvents onEscapeKeyDown onPointerDownOutside onFocusOutside onInteractOutside".split(" "));
const ub=Rs("PopoverContent",m),Rb=eu(m);Tb();return(0,Jj.createElement)(Rv,{asChild:!0,loop:!0,trapped:I,onMountAutoFocus:W,onUnmountAutoFocus:ia},(0,Jj.createElement)(Pt,{asChild:!0,disableOutsidePointerEvents:sa,onInteractOutside:lb,onEscapeKeyDown:La,onPointerDownOutside:Va,onFocusOutside:$a,onDismiss:()=>ub.onOpenChange(!1)},(0,Jj.createElement)(Nv,se({"data-state":ub.open?"open":"closed",role:"dialog",id:ub.contentId},Rb,b,{ref:g,style:Ga(re({},b.style),{["--radix-popover-content-transform-origin"]:"var(--radix-popper-transform-origin)"})}))))}),
aA=(0,Jj.forwardRef)((b,g)=>{var {__scopePopover:m}=b;b=Ya(b,["__scopePopover"]);m=eu(m);return(0,Jj.createElement)(nz,se({},m,b,{ref:g}))}),bA=b=>{const {__scopePopover:g,children:m,open:I,defaultOpen:W,onOpenChange:ia,modal:sa=!1}=b;b=eu(g);const La=(0,Jj.useRef)(null),[Va,$a]=(0,Jj.useState)(!1),[lb=!1,ub]=Rg({prop:I,defaultProp:W,onChange:ia});return(0,Jj.createElement)(Ov,b,(0,Jj.createElement)(EF,{scope:g,contentId:pl(),triggerRef:La,open:lb,onOpenChange:ub,onOpenToggle:(0,Jj.useCallback)(()=>
ub(Rb=>!Rb),[ub]),hasCustomAnchor:Va,onCustomAnchorAdd:(0,Jj.useCallback)(()=>$a(!0),[]),onCustomAnchorRemove:(0,Jj.useCallback)(()=>$a(!1),[]),modal:sa},m))};ob=V(586);var IF=nf(function(){const b=[{id:"box",icon:"square",tooltip:"Rectangle"},{id:"ellipse",icon:"circle",tooltip:"Circle"},{id:"polygon",icon:"triangle",tooltip:"Triangle"}],g=sg(),[m,I]=Wz.useState(()=>{var W;return(null!=(W=b.find(ia=>ia.id===g.selectedTool.id))?W:b[0]).id});Wz.useEffect(()=>{I(W=>{var ia,sa;return null!=(sa=null==
(ia=b.find(La=>La.id===g.selectedTool.id))?void 0:ia.id)?sa:W})},[g.selectedTool.id]);return(0,ob.jsxs)(bA,{children:[(0,ob.jsx)(Yz,{asChild:!0,children:(0,ob.jsxs)("div",{className:"tl-geometry-tools-pane-anchor",children:[(0,ob.jsx)(Vo,re({},b.find(W=>W.id===m))),(0,ob.jsx)(Ih,{"data-selected":b.some(W=>W.id===g.selectedTool.id),className:"tl-popover-indicator",name:"chevron-down-left"})]})}),(0,ob.jsxs)(Zz,{className:"tl-popover-content",side:"left",sideOffset:15,children:[(0,ob.jsx)("div",{className:"tl-toolbar tl-geometry-toolbar",
children:b.map(W=>(0,ob.jsx)(Vo,re({},W),W.id))}),(0,ob.jsx)(aA,{className:"tl-popover-arrow"})]})]})}),pi=V(22),cA=V(22),dA=["PageUp","PageDown"],eA=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],fA={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},[bw,JF,KF]=ja("Slider"),[gA]=og("Slider",[KF]),[LF,fu]=gA("Slider"),MF=(0,pi.forwardRef)((b,
g)=>{function m(df){const Ie=gg(Oe,df);ia(df,Ie)}function I(df){ia(df,Vd.current)}function W(){Oe[Vd.current]!==pf.current[Vd.current]&&mc(Oe)}function ia(df,Ie,{commit:Bd}={commit:!1}){const fd=(String($a).split(".")[1]||"").length;df=lh(Math.round((df-La)/$a)*$a+La,fd);const jd=Re(df,[La,Va]);tf((ld=[])=>{const Gd=Rf(ld,jd,Ie);var we=Rb*$a;if(0<we){const Fe=Pg(Gd);we=Math.min(...Fe)>=we}else we=!0;return we?(Vd.current=Gd.indexOf(jd),(we=String(Gd)!==String(ld))&&Bd&&mc(Gd),we?Gd:ld):ld})}const {name:sa,
min:La=0,max:Va=100,step:$a=1,orientation:lb="horizontal",disabled:ub=!1,minStepsBetweenThumbs:Rb=0,defaultValue:ec=[La],value:Vb,onValueChange:rc=()=>{},onValueCommit:mc=()=>{},inverted:Wb=!1}=b,tc=Ya(b,"name min max step orientation disabled minStepsBetweenThumbs defaultValue value onValueChange onValueCommit inverted".split(" ")),[Hc,Qc]=(0,pi.useState)(null);g=bh(g,df=>Qc(df));const Uc=(0,pi.useRef)(new Set),Vd=(0,pi.useRef)(0);var ae="horizontal"===lb;const De=Hc?!!Hc.closest("form"):!0;ae=ae?
NF:OF;const [Oe=[],tf]=Rg({prop:Vb,defaultProp:ec,onChange:df=>{var Ie;null===(Ie=[...Uc.current][Vd.current])||void 0===Ie||Ie.focus();rc(df)}}),pf=(0,pi.useRef)(Oe);return(0,pi.createElement)(LF,{scope:b.__scopeSlider,disabled:ub,min:La,max:Va,valueIndexToChangeRef:Vd,thumbs:Uc.current,values:Oe,orientation:lb},(0,pi.createElement)(bw.Provider,{scope:b.__scopeSlider},(0,pi.createElement)(bw.Slot,{scope:b.__scopeSlider},(0,pi.createElement)(ae,se({"aria-disabled":ub,"data-disabled":ub?"":void 0},
tc,{ref:g,onPointerDown:Zf(tc.onPointerDown,()=>{ub||(pf.current=Oe)}),min:La,max:Va,inverted:Wb,onSlideStart:ub?void 0:m,onSlideMove:ub?void 0:I,onSlideEnd:ub?void 0:W,onHomeKeyDown:()=>!ub&&ia(La,0,{commit:!0}),onEndKeyDown:()=>!ub&&ia(Va,Oe.length-1,{commit:!0}),onStepKeyDown:({event:df,direction:Ie})=>{if(!ub){df=dA.includes(df.key)||df.shiftKey&&eA.includes(df.key);const Bd=Vd.current;ia(Oe[Bd]+$a*(df?10:1)*Ie,Bd,{commit:!0})}}})))),De&&Oe.map((df,Ie)=>(0,pi.createElement)(TF,{key:Ie,name:sa?
sa+(1<Oe.length?"[]":""):void 0,value:df})))}),[hA,iA]=gA("Slider",{startEdge:"left",endEdge:"right",size:"width",direction:1}),NF=(0,pi.forwardRef)((b,g)=>{function m(tc){const Hc=Vb.current||Rb.getBoundingClientRect(),Qc=Mg([0,Hc.width],Wb?[I,W]:[W,I]);Vb.current=Hc;return Qc(tc-Hc.left)}const {min:I,max:W,dir:ia,inverted:sa,onSlideStart:La,onSlideMove:Va,onSlideEnd:$a,onStepKeyDown:lb}=b,ub=Ya(b,"min max dir inverted onSlideStart onSlideMove onSlideEnd onStepKeyDown".split(" ")),[Rb,ec]=(0,pi.useState)(null);
g=bh(g,tc=>ec(tc));const Vb=(0,pi.useRef)(),rc=Fb(ia),mc="ltr"===rc,Wb=mc&&!sa||!mc&&sa;return(0,pi.createElement)(hA,{scope:b.__scopeSlider,startEdge:Wb?"left":"right",endEdge:Wb?"right":"left",direction:Wb?1:-1,size:"width"},(0,pi.createElement)(jA,se({dir:rc,"data-orientation":"horizontal"},ub,{ref:g,style:Ga(re({},ub.style),{["--radix-slider-thumb-transform"]:"translateX(-50%)"}),onSlideStart:tc=>{tc=m(tc.clientX);null===La||void 0===La||La(tc)},onSlideMove:tc=>{tc=m(tc.clientX);null===Va||void 0===
Va||Va(tc)},onSlideEnd:()=>{Vb.current=void 0;null===$a||void 0===$a||$a()},onStepKeyDown:tc=>{const Hc=fA[Wb?"from-left":"from-right"].includes(tc.key);null===lb||void 0===lb||lb({event:tc,direction:Hc?-1:1})}})))}),OF=(0,pi.forwardRef)((b,g)=>{function m(Vb){const rc=Rb.current||ub.current.getBoundingClientRect(),mc=Mg([0,rc.height],ec?[W,I]:[I,W]);Rb.current=rc;return mc(Vb-rc.top)}const {min:I,max:W,inverted:ia,onSlideStart:sa,onSlideMove:La,onSlideEnd:Va,onStepKeyDown:$a}=b,lb=Ya(b,"min max inverted onSlideStart onSlideMove onSlideEnd onStepKeyDown".split(" ")),
ub=(0,pi.useRef)(null);g=bh(g,ub);const Rb=(0,pi.useRef)(),ec=!ia;return(0,pi.createElement)(hA,{scope:b.__scopeSlider,startEdge:ec?"bottom":"top",endEdge:ec?"top":"bottom",size:"height",direction:ec?1:-1},(0,pi.createElement)(jA,se({"data-orientation":"vertical"},lb,{ref:g,style:Ga(re({},lb.style),{["--radix-slider-thumb-transform"]:"translateY(50%)"}),onSlideStart:Vb=>{Vb=m(Vb.clientY);null===sa||void 0===sa||sa(Vb)},onSlideMove:Vb=>{Vb=m(Vb.clientY);null===La||void 0===La||La(Vb)},onSlideEnd:()=>
{Rb.current=void 0;null===Va||void 0===Va||Va()},onStepKeyDown:Vb=>{const rc=fA[ec?"from-bottom":"from-top"].includes(Vb.key);null===$a||void 0===$a||$a({event:Vb,direction:rc?-1:1})}})))}),jA=(0,pi.forwardRef)((b,g)=>{const {__scopeSlider:m,onSlideStart:I,onSlideMove:W,onSlideEnd:ia,onHomeKeyDown:sa,onEndKeyDown:La,onStepKeyDown:Va}=b,$a=Ya(b,"__scopeSlider onSlideStart onSlideMove onSlideEnd onHomeKeyDown onEndKeyDown onStepKeyDown".split(" ")),lb=fu("Slider",m);return(0,pi.createElement)(tj.span,
se({},$a,{ref:g,onKeyDown:Zf(b.onKeyDown,ub=>{"Home"===ub.key?(sa(ub),ub.preventDefault()):"End"===ub.key?(La(ub),ub.preventDefault()):dA.concat(eA).includes(ub.key)&&(Va(ub),ub.preventDefault())}),onPointerDown:Zf(b.onPointerDown,ub=>{const Rb=ub.target;Rb.setPointerCapture(ub.pointerId);ub.preventDefault();lb.thumbs.has(Rb)?Rb.focus():I(ub)}),onPointerMove:Zf(b.onPointerMove,ub=>{ub.target.hasPointerCapture(ub.pointerId)&&W(ub)}),onPointerUp:Zf(b.onPointerUp,ub=>{const Rb=ub.target;Rb.hasPointerCapture(ub.pointerId)&&
(Rb.releasePointerCapture(ub.pointerId),ia(ub))})}))}),PF=(0,pi.forwardRef)((b,g)=>{var {__scopeSlider:m}=b;b=Ya(b,["__scopeSlider"]);m=fu("SliderTrack",m);return(0,pi.createElement)(tj.span,se({"data-disabled":m.disabled?"":void 0,"data-orientation":m.orientation},b,{ref:g}))}),QF=(0,pi.forwardRef)((b,g)=>{var {__scopeSlider:m}=b;const I=Ya(b,["__scopeSlider"]),W=fu("SliderRange",m);m=iA("SliderRange",m);var ia=(0,pi.useRef)(null);g=bh(g,ia);var sa=W.values.length;ia=W.values.map(La=>Ni(La,W.min,
W.max));sa=1<sa?Math.min(...ia):0;ia=100-Math.max(...ia);return(0,pi.createElement)(tj.span,se({"data-orientation":W.orientation,"data-disabled":W.disabled?"":void 0},I,{ref:g,style:Ga(re({},b.style),{[m.startEdge]:sa+"%",[m.endEdge]:ia+"%"})}))}),RF=(0,pi.forwardRef)((b,g)=>{const m=JF(b.__scopeSlider),[I,W]=(0,pi.useState)(null);g=bh(g,sa=>W(sa));const ia=(0,pi.useMemo)(()=>I?m().findIndex(sa=>sa.ref.current===I):-1,[m,I]);return(0,pi.createElement)(SF,se({},b,{ref:g,index:ia}))}),SF=(0,pi.forwardRef)((b,
g)=>{const {__scopeSlider:m,index:I}=b,W=Ya(b,["__scopeSlider","index"]),ia=fu("SliderThumb",m),sa=iA("SliderThumb",m),[La,Va]=(0,pi.useState)(null);g=bh(g,ec=>Va(ec));var $a=Oi(La);const lb=ia.values[I],ub=void 0===lb?0:Ni(lb,ia.min,ia.max),Rb=Pf(I,ia.values.length);$a=($a=null===$a||void 0===$a?void 0:$a[sa.size])?mh($a,ub,sa.direction):0;(0,pi.useEffect)(()=>{if(La)return ia.thumbs.add(La),()=>{ia.thumbs.delete(La)}},[La,ia.thumbs]);return(0,pi.createElement)("span",{style:{transform:"var(--radix-slider-thumb-transform)",
position:"absolute",[sa.startEdge]:`calc(${ub}% + ${$a}px)`}},(0,pi.createElement)(bw.ItemSlot,{scope:b.__scopeSlider},(0,pi.createElement)(tj.span,se({role:"slider","aria-label":b["aria-label"]||Rb,"aria-valuemin":ia.min,"aria-valuenow":lb,"aria-valuemax":ia.max,"aria-orientation":ia.orientation,"data-orientation":ia.orientation,"data-disabled":ia.disabled?"":void 0,tabIndex:ia.disabled?void 0:0},W,{ref:g,style:void 0===lb?{display:"none"}:b.style,onFocus:Zf(b.onFocus,()=>{ia.valueIndexToChangeRef.current=
I})}))))}),TF=b=>{const {value:g}=b;b=Ya(b,["value"]);const m=(0,pi.useRef)(null),I=ng(g);(0,pi.useEffect)(()=>{const W=m.current,ia=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"value").set;if(I!==g&&ia){const sa=new Event("input",{bubbles:!0});ia.call(W,g);W.dispatchEvent(sa)}},[I,g]);return(0,pi.createElement)("input",se({style:{display:"none"}},b,{ref:m,defaultValue:g}))},UF=MF,VF=PF,WF=QF,XF=RF,gu=vb(V(22));ob=V(586);var kA=nf(b=>{var {side:g,align:m,alignOffset:I,label:W,
arrow:ia,children:sa,border:La}=b;b=Ya(b,"side align alignOffset label arrow children border".split(" "));const Va=gu.useRef(null),[$a,lb]=gu.useState(!1),{viewport:{bounds:ub,camera:{point:Rb,zoom:ec}}}=sg(),[Vb,rc]=gu.useState(0);gu.useEffect(()=>{if(Va.current&&$a){var mc=Va.current.getBoundingClientRect();We.boundsContain(ub,{minX:mc.x,minY:mc.y,maxX:mc.right,maxY:mc.bottom,width:mc.width,height:mc.height})||rc(Wb=>Wb+1)}},[Rb[0],Rb[1],ec,$a]);return(0,ob.jsxs)(bA,{onOpenChange:mc=>lb(mc),children:[(0,ob.jsx)(Yz,
Ga(re({},b),{"data-border":La,className:"tl-button tl-popover-trigger-button",children:W})),(0,ob.jsxs)(Zz,{ref:Va,className:"tl-popover-content",align:m,alignOffset:I,side:g,sideOffset:15,collisionBoundary:document.querySelector(".logseq-tldraw"),children:[sa,ia&&(0,ob.jsx)(aA,{className:"tl-popover-arrow"})]},"popover-content-"+Vb)]})});ob=V(586);ob=V(586);var YF=nf(function(){const b=sg(),g=CF.useCallback(m=>{b.api.setColor(m)},[]);return(0,ob.jsx)("div",{className:"tl-primary-tools",children:(0,ob.jsxs)("div",
{className:"tl-toolbar tl-tools-floating-panel",children:[(0,ob.jsx)(Vo,{tooltip:"Select",id:"select",icon:"select-cursor"}),(0,ob.jsx)(Vo,{tooltip:"Move",id:"move",icon:b.isIn("move.panning")?"hand-grab":"hand-stop"}),(0,ob.jsx)(Rq,{className:"tl-toolbar-separator",orientation:"horizontal"}),(0,ob.jsx)(Vo,{tooltip:"Add block or page",id:"logseq-portal",icon:"circle-plus"}),(0,ob.jsx)(Vo,{tooltip:"Draw",id:"pencil",icon:"ballpen"}),(0,ob.jsx)(Vo,{tooltip:"Highlight",id:"highlighter",icon:"highlight"}),
(0,ob.jsx)(Vo,{tooltip:"Eraser",id:"erase",icon:"eraser"}),(0,ob.jsx)(Vo,{tooltip:"Connector",id:"line",icon:"connector"}),(0,ob.jsx)(Vo,{tooltip:"Text",id:"text",icon:"text"}),(0,ob.jsx)(IF,{}),(0,ob.jsx)(Rq,{className:"tl-toolbar-separator",orientation:"horizontal",style:{margin:"0 -4px"}}),(0,ob.jsx)(tg,{popoverSide:"left",color:b.settings.color,setColor:g})]})})});ob=V(586);nf(function(){const b=sg();return(0,ob.jsxs)("div",{className:"tl-statusbar",children:[b.selectedTool.id," | ",b.selectedTool.currentState.id,
(0,ob.jsx)("div",{style:{flex:1}}),(0,ob.jsx)("div",{id:"tl-statusbar-anchor",className:"flex gap-1"})]})});ob=V(586);var ZF=nf(function(){return(0,ob.jsxs)(ob.Fragment,{children:[!1,!1,(0,ob.jsx)(YF,{}),(0,ob.jsx)(AF,{})]})}),Ss=vb(V(22)),lp=vb(V(22)),$F=vb(V(22)),Af=V(22),lA=V(31),aG=[" ","Enter","ArrowUp","ArrowDown"],bG=[" ","Enter"],[hu,cw,cG]=ja("Select"),[Ts]=og("Select",[cG]),[dG,Ir]=Ts("Select"),[eG,fG]=Ts("Select"),gG=(0,Af.forwardRef)((b,g)=>{const {__scopeSelect:m,disabled:I=!1}=b;b=Ya(b,
["__scopeSelect","disabled"]);const W=Ir("SelectTrigger",m),ia=W.disabled||I;g=bh(g,W.onTriggerChange);const sa=cw(m),[La,Va,$a]=hg(lb=>{const ub=sa().filter(ec=>!ec.disabled),Rb=ub.find(ec=>ec.value===W.value);lb=$g(ub,lb,Rb);if(void 0!==lb)W.onValueChange(lb.value)});return(0,Af.createElement)(tj.button,se({type:"button",role:"combobox","aria-controls":W.contentId,"aria-expanded":W.open,"aria-required":W.required,"aria-autocomplete":"none",dir:W.dir,"data-state":W.open?"open":"closed",disabled:ia,
"data-disabled":ia?"":void 0,"data-placeholder":void 0===W.value?"":void 0},b,{ref:g,onClick:Zf(b.onClick,lb=>{lb.currentTarget.focus()}),onPointerDown:Zf(b.onPointerDown,lb=>{const ub=lb.target;ub.hasPointerCapture(lb.pointerId)&&ub.releasePointerCapture(lb.pointerId);0===lb.button&&!1===lb.ctrlKey&&(ia||(W.onOpenChange(!0),$a()),W.triggerPointerDownPosRef.current={x:Math.round(lb.pageX),y:Math.round(lb.pageY)},lb.preventDefault())}),onKeyDown:Zf(b.onKeyDown,lb=>{const ub=""!==La.current;lb.ctrlKey||
lb.altKey||lb.metaKey||1!==lb.key.length||Va(lb.key);ub&&" "===lb.key||!aG.includes(lb.key)||(ia||(W.onOpenChange(!0),$a()),lb.preventDefault())})}))}),hG=(0,Af.forwardRef)((b,g)=>{const {__scopeSelect:m,children:I,placeholder:W}=b;b=Ya(b,["__scopeSelect","className","style","children","placeholder"]);const ia=Ir("SelectValue",m),{onValueNodeHasChildrenChange:sa}=ia,La=void 0!==I;g=bh(g,ia.onValueNodeChange);wn(()=>{sa(La)},[sa,La]);return(0,Af.createElement)(tj.span,se({},b,{ref:g,style:{pointerEvents:"none"}}),
void 0===ia.value&&void 0!==W?W:I)}),iG=(0,Af.forwardRef)((b,g)=>{const {children:m}=b;b=Ya(b,["__scopeSelect","children"]);return(0,Af.createElement)(tj.span,se({"aria-hidden":!0},b,{ref:g}),m||"▼")}),jG=(0,Af.forwardRef)((b,g)=>{const m=Ir("SelectContent",b.__scopeSelect),[I,W]=(0,Af.useState)();wn(()=>{W(new DocumentFragment)},[]);return(0,Af.createElement)(Af.Fragment,null,m.open?(0,Af.createElement)(kG,se({},b,{ref:g})):I?(0,lA.createPortal)((0,Af.createElement)(mA,{scope:b.__scopeSelect},(0,Af.createElement)(hu.Slot,
{scope:b.__scopeSelect},(0,Af.createElement)("div",null,b.children))),I):null)}),[mA,Jr]=Ts("SelectContent"),kG=(0,Af.forwardRef)((b,g)=>{const {__scopeSelect:m,onCloseAutoFocus:I}=b;b=Ya(b,["__scopeSelect","onCloseAutoFocus"]);const W=Ir("SelectContent",m),[ia,sa]=(0,Af.useState)(null),[La,Va]=(0,Af.useState)(null),[$a,lb]=(0,Af.useState)(null);g=bh(g,Gd=>Va(Gd));const [ub,Rb]=(0,Af.useState)(null),[ec,Vb]=(0,Af.useState)(null),rc=cw(m),[mc,Wb]=(0,Af.useState)(!1),tc=(0,Af.useRef)(!0),Hc=(0,Af.useRef)(!1),
Qc=(0,Af.useRef)(!1);(0,Af.useEffect)(()=>{if(La)return Uv(La)},[La]);Tb();const [Uc,Vd]=(0,Af.useState)();wn(()=>{La&&Vd(window.getComputedStyle(La).zIndex)},[La]);const ae=(0,Af.useCallback)(Gd=>{const [we,...Fe]=rc().map(gf=>gf.ref.current),[qf]=Fe.slice(-1),hf=document.activeElement;for(const gf of Gd){if(gf===hf)break;null===gf||void 0===gf||gf.scrollIntoView({block:"nearest"});gf===we&&$a&&($a.scrollTop=0);gf===qf&&$a&&($a.scrollTop=$a.scrollHeight);null===gf||void 0===gf||gf.focus();if(document.activeElement!==
hf)break}},[rc,$a]),De=(0,Af.useCallback)(()=>{if(W.trigger&&W.valueNode&&ia&&La&&$a&&ub&&ec){var Gd=W.trigger.getBoundingClientRect(),we=La.getBoundingClientRect(),Fe=W.valueNode.getBoundingClientRect(),qf=ec.getBoundingClientRect();"rtl"!==W.dir?(qf=Fe.left-(qf.left-we.left),Fe=Gd.width+(Gd.left-qf),we=Re(qf,[10,window.innerWidth-10-Math.max(Fe,we.width)]),ia.style.minWidth=Fe+"px",ia.style.left=we+"px"):(qf=window.innerWidth-Fe.right-(we.right-qf.right),Fe=Gd.width+(window.innerWidth-Gd.right-
qf),we=Re(qf,[10,window.innerWidth-10-Math.max(Fe,we.width)]),ia.style.minWidth=Fe+"px",ia.style.right=we+"px");const Jk=rc();we=window.innerHeight-20;var hf=$a.scrollHeight,gf=window.getComputedStyle(La);Fe=parseInt(gf.borderTopWidth,10);var Ug=parseInt(gf.paddingTop,10);qf=parseInt(gf.borderBottomWidth,10);gf=parseInt(gf.paddingBottom,10);var Gg=Fe+Ug+hf+gf+qf;hf=Math.min(5*ub.offsetHeight,Gg);var qi=window.getComputedStyle($a);gf=parseInt(qi.paddingTop,10);qi=parseInt(qi.paddingBottom,10);const Tk=
Gd.top+Gd.height/2-10,Do=we-Tk;Gd=ub.offsetHeight/2;Ug=Fe+Ug+(ub.offsetTop+Gd);Gg-=Ug;Ug<=Tk?(Fe=ub===Jk[Jk.length-1].ref.current,ia.style.bottom="0px",ia.style.height=Ug+Math.max(Do,Gd+(Fe?qi:0)+(La.clientHeight-$a.offsetTop-$a.offsetHeight)+qf)+"px"):(qf=ub===Jk[0].ref.current,ia.style.top="0px",ia.style.height=Math.max(Tk,Fe+$a.offsetTop+(qf?gf:0)+Gd)+Gg+"px",$a.scrollTop=Ug-Tk+$a.offsetTop);ia.style.margin="10px 0";ia.style.minHeight=hf+"px";ia.style.maxHeight=we+"px";Wb(!0);requestAnimationFrame(()=>
Hc.current=!0)}},[rc,W.trigger,W.valueNode,ia,La,$a,ub,ec,W.dir]);wn(()=>De(),[De]);const Oe=(0,Af.useCallback)(()=>ae([ub,La]),[ae,ub,La]);(0,Af.useEffect)(()=>{mc&&Oe()},[mc,Oe]);const tf=(0,Af.useCallback)(Gd=>{Gd&&!0===tc.current&&(De(),Oe(),tc.current=!1)},[De,Oe]),{onOpenChange:pf,triggerPointerDownPosRef:df}=W;(0,Af.useEffect)(()=>{if(La){var Gd=0,we=0;const Fe=hf=>{var gf,Ug,Gg,qi;Gd=Math.abs(Math.round(hf.pageX)-(null!==(gf=null===(Ug=df.current)||void 0===Ug?void 0:Ug.x)&&void 0!==gf?gf:
0));we=Math.abs(Math.round(hf.pageY)-(null!==(Gg=null===(qi=df.current)||void 0===qi?void 0:qi.y)&&void 0!==Gg?Gg:0))},qf=hf=>{10>=Gd&&10>=we?hf.preventDefault():La.contains(hf.target)||pf(!1);document.removeEventListener("pointermove",Fe);df.current=null};null!==df.current&&(document.addEventListener("pointermove",Fe),document.addEventListener("pointerup",qf,{capture:!0,once:!0}));return()=>{document.removeEventListener("pointermove",Fe);document.removeEventListener("pointerup",qf,{capture:!0})}}},
[La,pf,df]);(0,Af.useEffect)(()=>{const Gd=()=>pf(!1);window.addEventListener("blur",Gd);window.addEventListener("resize",Gd);return()=>{window.removeEventListener("blur",Gd);window.removeEventListener("resize",Gd)}},[pf]);const [Ie,Bd]=hg(Gd=>{const we=rc().filter(hf=>!hf.disabled),Fe=we.find(hf=>hf.ref.current===document.activeElement),qf=$g(we,Gd,Fe);qf&&setTimeout(()=>qf.ref.current.focus())}),fd=(0,Af.useCallback)((Gd,we,Fe)=>{Fe=!Qc.current&&!Fe;if(void 0!==W.value&&W.value===we||Fe)Rb(Gd),
Fe&&(Qc.current=!0)},[W.value]),jd=(0,Af.useCallback)(()=>null===La||void 0===La?void 0:La.focus(),[La]),ld=(0,Af.useCallback)((Gd,we,Fe)=>{Fe=!Qc.current&&!Fe;(void 0!==W.value&&W.value===we||Fe)&&Vb(Gd)},[W.value]);return(0,Af.createElement)(mA,{scope:m,contentWrapper:ia,content:La,viewport:$a,onViewportChange:lb,itemRefCallback:fd,selectedItem:ub,onItemLeave:jd,itemTextRefCallback:ld,selectedItemText:ec,onScrollButtonChange:tf,isPositioned:mc,shouldExpandOnScrollRef:Hc,searchRef:Ie},(0,Af.createElement)($t,
{as:Pq,allowPinchZoom:!0},(0,Af.createElement)("div",{ref:sa,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:Uc}},(0,Af.createElement)(Rv,{asChild:!0,trapped:W.open,onMountAutoFocus:Gd=>{Gd.preventDefault()},onUnmountAutoFocus:Zf(I,Gd=>{var we;null===(we=W.trigger)||void 0===we||we.focus({preventScroll:!0});Gd.preventDefault()})},(0,Af.createElement)(Pt,se({role:"listbox",id:W.contentId,"data-state":W.open?"open":"closed",dir:W.dir,onContextMenu:Gd=>Gd.preventDefault()},b,{ref:g,
style:re({display:"flex",flexDirection:"column",boxSizing:"border-box",maxHeight:"100%",outline:"none"},b.style),disableOutsidePointerEvents:!0,onFocusOutside:Gd=>Gd.preventDefault(),onDismiss:()=>W.onOpenChange(!1),onKeyDown:Zf(b.onKeyDown,Gd=>{var we=Gd.ctrlKey||Gd.altKey||Gd.metaKey;"Tab"===Gd.key&&Gd.preventDefault();we||1!==Gd.key.length||Bd(Gd.key);if(["ArrowUp","ArrowDown","Home","End"].includes(Gd.key)){let Fe=rc().filter(qf=>!qf.disabled).map(qf=>qf.ref.current);["ArrowUp","End"].includes(Gd.key)&&
(Fe=Fe.slice().reverse());["ArrowUp","ArrowDown"].includes(Gd.key)&&(we=Fe.indexOf(Gd.target),Fe=Fe.slice(we+1));setTimeout(()=>ae(Fe));Gd.preventDefault()}})}))))))}),lG=(0,Af.forwardRef)((b,g)=>{const {__scopeSelect:m}=b;b=Ya(b,["__scopeSelect"]);const I=Jr("SelectViewport",m);g=bh(g,I.onViewportChange);const W=(0,Af.useRef)(0);return(0,Af.createElement)(Af.Fragment,null,(0,Af.createElement)("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"}}),
(0,Af.createElement)(hu.Slot,{scope:m},(0,Af.createElement)(tj.div,se({"data-radix-select-viewport":"",role:"presentation"},b,{ref:g,style:re({position:"relative",flex:1,overflow:"auto"},b.style),onScroll:Zf(b.onScroll,ia=>{ia=ia.currentTarget;const {contentWrapper:sa,shouldExpandOnScrollRef:La}=I;if(null!==La&&void 0!==La&&La.current&&sa){var Va=Math.abs(W.current-ia.scrollTop);if(0<Va){var $a=window.innerHeight-20,lb=parseFloat(sa.style.minHeight);const ub=parseFloat(sa.style.height);lb=Math.max(lb,
ub);lb<$a&&(Va=lb+Va,$a=Math.min($a,Va),Va-=$a,sa.style.height=$a+"px","0px"===sa.style.bottom&&(ia.scrollTop=0<Va?Va:0,sa.style.justifyContent="flex-end"))}}W.current=ia.scrollTop})}))))});Ts("SelectGroup");var [mG,nG]=Ts("SelectItem"),oG=(0,Af.forwardRef)((b,g)=>{const {__scopeSelect:m,value:I,disabled:W=!1,textValue:ia}=b;b=Ya(b,["__scopeSelect","value","disabled","textValue"]);const sa=Ir("SelectItem",m),La=Jr("SelectItem",m),Va=sa.value===I,[$a,lb]=(0,Af.useState)(null!==ia&&void 0!==ia?ia:""),
[ub,Rb]=(0,Af.useState)(!1);g=bh(g,rc=>{var mc;return null===(mc=La.itemRefCallback)||void 0===mc?void 0:mc.call(La,rc,I,W)});const ec=pl(),Vb=()=>{W||(sa.onValueChange(I),sa.onOpenChange(!1))};return(0,Af.createElement)(mG,{scope:m,value:I,disabled:W,textId:ec,isSelected:Va,onItemTextChange:(0,Af.useCallback)(rc=>{lb(mc=>{var Wb;return mc||(null!==(Wb=null===rc||void 0===rc?void 0:rc.textContent)&&void 0!==Wb?Wb:"").trim()})},[])},(0,Af.createElement)(hu.ItemSlot,{scope:m,value:I,disabled:W,textValue:$a},
(0,Af.createElement)(tj.div,se({role:"option","aria-labelledby":ec,"data-highlighted":ub?"":void 0,"aria-selected":Va&&ub,"data-state":Va?"checked":"unchecked","aria-disabled":W||void 0,"data-disabled":W?"":void 0,tabIndex:W?void 0:-1},b,{ref:g,onFocus:Zf(b.onFocus,()=>Rb(!0)),onBlur:Zf(b.onBlur,()=>Rb(!1)),onPointerUp:Zf(b.onPointerUp,Vb),onPointerMove:Zf(b.onPointerMove,rc=>{if(W){var mc;null===(mc=La.onItemLeave)||void 0===mc||mc.call(La)}else rc.currentTarget.focus({preventScroll:!0})}),onPointerLeave:Zf(b.onPointerLeave,
rc=>{if(rc.currentTarget===document.activeElement){var mc;null===(mc=La.onItemLeave)||void 0===mc||mc.call(La)}}),onKeyDown:Zf(b.onKeyDown,rc=>{var mc;if(""===(null===(mc=La.searchRef)||void 0===mc?void 0:mc.current)||" "!==rc.key)bG.includes(rc.key)&&Vb()," "===rc.key&&rc.preventDefault()})}))))}),pG=(0,Af.forwardRef)((b,g)=>{var {__scopeSelect:m}=b;b=Ya(b,["__scopeSelect","className","style"]);const I=Ir("SelectItemText",m),W=Jr("SelectItemText",m),ia=nG("SelectItemText",m);m=fG("SelectItemText",
m);const [sa,La]=(0,Af.useState)(null);g=bh(g,Rb=>La(Rb),ia.onItemTextChange,Rb=>{var ec;return null===(ec=W.itemTextRefCallback)||void 0===ec?void 0:ec.call(W,Rb,ia.value,ia.disabled)});const Va=null===sa||void 0===sa?void 0:sa.textContent,$a=(0,Af.useMemo)(()=>(0,Af.createElement)("option",{key:ia.value,value:ia.value,disabled:ia.disabled},Va),[ia.disabled,ia.value,Va]),{onNativeOptionAdd:lb,onNativeOptionRemove:ub}=m;wn(()=>{lb($a);return()=>ub($a)},[lb,ub,$a]);return(0,Af.createElement)(Af.Fragment,
null,(0,Af.createElement)(tj.span,se({id:ia.textId},b,{ref:g})),ia.isSelected&&I.valueNode&&!I.valueNodeHasChildren?(0,lA.createPortal)(b.children,I.valueNode):null)}),qG=(0,Af.forwardRef)((b,g)=>{const m=Jr("SelectScrollUpButton",b.__scopeSelect),[I,W]=(0,Af.useState)(!1);g=bh(g,m.onScrollButtonChange);wn(()=>{if(m.viewport&&m.isPositioned){let ia=function(){W(0<sa.scrollTop)};const sa=m.viewport;ia();sa.addEventListener("scroll",ia);return()=>sa.removeEventListener("scroll",ia)}},[m.viewport,m.isPositioned]);
return I?(0,Af.createElement)(nA,se({},b,{ref:g,onAutoScroll:()=>{const {viewport:ia,selectedItem:sa}=m;ia&&sa&&(ia.scrollTop-=sa.offsetHeight)}})):null}),rG=(0,Af.forwardRef)((b,g)=>{const m=Jr("SelectScrollDownButton",b.__scopeSelect),[I,W]=(0,Af.useState)(!1);g=bh(g,m.onScrollButtonChange);wn(()=>{if(m.viewport&&m.isPositioned){let ia=function(){W(Math.ceil(sa.scrollTop)<sa.scrollHeight-sa.clientHeight)};const sa=m.viewport;ia();sa.addEventListener("scroll",ia);return()=>sa.removeEventListener("scroll",
ia)}},[m.viewport,m.isPositioned]);return I?(0,Af.createElement)(nA,se({},b,{ref:g,onAutoScroll:()=>{const {viewport:ia,selectedItem:sa}=m;ia&&sa&&(ia.scrollTop+=sa.offsetHeight)}})):null}),nA=(0,Af.forwardRef)((b,g)=>{const {__scopeSelect:m,onAutoScroll:I}=b;b=Ya(b,["__scopeSelect","onAutoScroll"]);const W=Jr("SelectScrollButton",m),ia=(0,Af.useRef)(null),sa=cw(m),La=(0,Af.useCallback)(()=>{null!==ia.current&&(window.clearInterval(ia.current),ia.current=null)},[]);(0,Af.useEffect)(()=>()=>La(),[La]);
wn(()=>{var Va;const $a=sa().find(lb=>lb.ref.current===document.activeElement);null===$a||void 0===$a||null===(Va=$a.ref.current)||void 0===Va||Va.scrollIntoView({block:"nearest"})},[sa]);return(0,Af.createElement)(tj.div,se({"aria-hidden":!0},b,{ref:g,style:re({flexShrink:0},b.style),onPointerMove:Zf(b.onPointerMove,()=>{var Va;null===(Va=W.onItemLeave)||void 0===Va||Va.call(W);null===ia.current&&(ia.current=window.setInterval(I,50))}),onPointerLeave:Zf(b.onPointerLeave,()=>{La()})}))}),oA=(0,Af.forwardRef)((b,
g)=>{const {value:m}=b;b=Ya(b,["value"]);const I=(0,Af.useRef)(null);g=bh(g,I);const W=ng(m);(0,Af.useEffect)(()=>{const ia=I.current,sa=Object.getOwnPropertyDescriptor(window.HTMLSelectElement.prototype,"value").set;if(W!==m&&sa){const La=new Event("change",{bubbles:!0});sa.call(ia,m);ia.dispatchEvent(La)}},[W,m]);return(0,Af.createElement)(rz,{asChild:!0},(0,Af.createElement)("select",se({},b,{ref:g,defaultValue:m})))});oA.displayName="BubbleSelect";var sG=b=>{const {__scopeSelect:g,children:m,
open:I,defaultOpen:W,onOpenChange:ia,value:sa,defaultValue:La,onValueChange:Va,dir:$a,name:lb,autoComplete:ub,disabled:Rb,required:ec}=b,[Vb,rc]=(0,Af.useState)(null),[mc,Wb]=(0,Af.useState)(null),[tc,Hc]=(0,Af.useState)(!1),Qc=Fb($a),[Uc=!1,Vd]=Rg({prop:I,defaultProp:W,onChange:ia}),[ae,De]=Rg({prop:sa,defaultProp:La,onChange:Va}),Oe=(0,Af.useRef)(null),tf=Vb?!!Vb.closest("form"):!0,[pf,df]=(0,Af.useState)(new Set),Ie=Array.from(pf).map(Bd=>Bd.props.value).join(";");return(0,Af.createElement)(dG,
{required:ec,scope:g,trigger:Vb,onTriggerChange:rc,valueNode:mc,onValueNodeChange:Wb,valueNodeHasChildren:tc,onValueNodeHasChildrenChange:Hc,contentId:pl(),value:ae,onValueChange:De,open:Uc,onOpenChange:Vd,dir:Qc,triggerPointerDownPosRef:Oe,disabled:Rb},(0,Af.createElement)(hu.Provider,{scope:g},(0,Af.createElement)(eG,{scope:b.__scopeSelect,onNativeOptionAdd:(0,Af.useCallback)(Bd=>{df(fd=>(new Set(fd)).add(Bd))},[]),onNativeOptionRemove:(0,Af.useCallback)(Bd=>{df(fd=>{fd=new Set(fd);fd.delete(Bd);
return fd})},[])},m)),tf?(0,Af.createElement)(oA,{key:Ie,"aria-hidden":!0,required:ec,tabIndex:-1,name:lb,autoComplete:ub,value:ae,onChange:Bd=>De(Bd.target.value),disabled:Rb},void 0===ae?(0,Af.createElement)("option",{value:""}):null,Array.from(pf)):null)},tG=gG,uG=hG,vG=iG,wG=b=>(0,Af.createElement)(pz,se({asChild:!0},b)),xG=jG,yG=lG,zG=oG,AG=pG,BG=qG,CG=rG;ob=V(586);var DG=vb(V(22)),nn=vb(V(22)).default.createContext({}),EG=vb(V(22));ob=V(586);var pA=({id:b,showReferenceContent:g=!1})=>{var m;
const {handlers:{isWhiteboardPage:I,redirectToPage:W,sidebarAddBlock:ia,queryBlockByUUID:sa},renderers:{Breadcrumb:La,PageName:Va}}=EG.default.useContext(nn);var $a="";let lb=Wh(b)?"B":"P",ub="";if(Wh(b)){$a=sa(b);if(!$a)return(0,ob.jsx)("span",{className:"p-2",children:"Invalid reference. Did you remove it?"});ub=$a.content;$a="whiteboard-shape"===(null==(m=$a.properties)?void 0:m["ls-type"])?"link-to-whiteboard":"link-to-block"}else $a=I(b)?"link-to-whiteboard":"link-to-page";m=ub&&23<ub.length?
ub.slice(0,20)+"...":ub;return(0,ob.jsxs)("button",{className:"inline-flex gap-1 items-center w-full",onPointerDown:Rb=>{Rb.stopPropagation();Rb.shiftKey?ia(b,"B"===lb?"block":"page"):W(b)},children:[(0,ob.jsx)(Ih,{name:$a}),(0,ob.jsx)("span",{className:"pointer-events-none block-link-reference-row",children:"P"===lb?(0,ob.jsx)(Va,{pageName:b}):(0,ob.jsxs)(ob.Fragment,{children:[(0,ob.jsx)(La,{levelLimit:1,blockId:b,endSeparator:g}),g&&m]})})]})},zm=vb(V(22)),xn=V(22),FG=["children"],iu="undefined"!==
typeof document?xn.useLayoutEffect:xn.useEffect,hh=vb(V(22)),bi=V(22),GG=V(31),Us,nm,HG="undefined"!=typeof document?bi.useLayoutEffect:bi.useEffect;!function(b){b[b.DEBUG=0]="DEBUG";b[b.INFO=1]="INFO";b[b.WARN=2]="WARN";b[b.ERROR=3]="ERROR"}(nm||={});var IG=((Us={})[nm.DEBUG]="debug",Us[nm.INFO]="log",Us[nm.WARN]="warn",Us[nm.ERROR]="error",Us),Pp=th(function(){var b=sf(nm.ERROR);return{log:sf(function(g,m,I){var W;void 0===I&&(I=nm.INFO);I>=(null!=(W=("undefined"==typeof globalThis?window:globalThis).VIRTUOSO_LOG_LEVEL)?
W:b(4))&&console[IG[I]]("%creact-virtuoso: %c%s %o","color: #0253b3; font-weight: bold","color: initial",g,m)}),logLevel:b}},[],{singleton:!0}),yn=th(function(){var b=Jf(),g=Jf(),m=sf(0),I=Jf(),W=sf(0),ia=Jf(),sa=Jf(),La=sf(0),Va=sf(0),$a=sf(0),lb=sf(0),ub=Jf(),Rb=Jf(),ec=sf(!1),Vb=sf(!1);return Yf(Kd(b,Gf(function(rc){return rc.scrollTop})),g),Yf(Kd(b,Gf(function(rc){return rc.scrollHeight})),sa),Yf(g,W),{scrollContainerState:b,scrollTop:g,viewportHeight:ia,headerHeight:La,fixedHeaderHeight:Va,fixedFooterHeight:$a,
footerHeight:lb,scrollHeight:sa,smoothScrollTargetReached:I,react18ConcurrentRendering:Vb,scrollTo:ub,scrollBy:Rb,statefulScrollTop:W,deviation:m,scrollingInProgress:ec}},[],{singleton:!0}),Hi={lvl:0},dw=th(function(){return{recalcInProgress:sf(!1)}},[],{singleton:!0}),JG={offsetHeight:"height",offsetWidth:"width"},mp=th(function(b){var g=b[0].log,m=b[1].recalcInProgress;b=Jf();var I=Jf(),W=wh(I,0),ia=Jf(),sa=Jf(),La=sf(0),Va=sf([]),$a=sf(void 0),lb=sf(void 0),ub=sf(function(tc,Hc){return Qk(tc,JG[Hc])}),
Rb=sf(void 0),ec=sf(0),Vb={offsetTree:[],sizeTree:Hi,groupOffsetTree:Hi,lastIndex:0,lastOffset:0,lastSize:0,groupIndices:[]},rc=wh(Kd(b,ue(Va,g,ec),ii(Fa,Vb),ze()),Vb);Yf(Kd(Va,Ae(function(tc){return 0<tc.length}),ue(rc,ec),Gf(function(tc){var Hc=tc[0],Qc=tc[1],Uc=tc[2];tc=Hc.reduce(function(Vd,ae,De){return ui(Vd,ae,ab(ae,Qc.offsetTree,Uc)||De)},Hi);return Ve({},Qc,{groupIndices:Hc,groupOffsetTree:tc})})),rc);Yf(Kd(I,ue(rc),Ae(function(tc){return tc[0]<tc[1].lastIndex}),Gf(function(tc){var Hc=tc[1];
return[{startIndex:tc[0],endIndex:Hc.lastIndex,size:Hc.lastSize}]})),b);Yf($a,lb);var mc=wh(Kd($a,Gf(function(tc){return void 0===tc})),!0);Yf(Kd(lb,Ae(function(tc){return void 0!==tc&&rc(4).sizeTree===Hi}),Gf(function(tc){return[{startIndex:0,endIndex:0,size:tc}]})),b);Vb=uj(Kd(b,ue(rc),ii(function(tc,Hc){Hc=Hc[1];return{changed:Hc!==tc.sizes,sizes:Hc}},{changed:!1,sizes:Vb}),Gf(function(tc){return tc.changed})));di(Kd(La,ii(function(tc,Hc){return{diff:tc.prev-Hc,prev:Hc}},{diff:0,prev:0}),Gf(function(tc){return tc.diff})),
function(tc){0<tc?(m(0,!0),ia(0,tc)):0>tc&&sa(0,tc)});di(Kd(La,ue(g)),function(tc){0>tc[0]&&(0,tc[1])("`firstItemIndex` prop should not be set to less than zero. If you don't know the total count, just use a very high value",{firstItemIndex:La},nm.ERROR)});g=uj(ia);Yf(Kd(ia,ue(rc),Gf(function(tc){var Hc=tc[0];tc=tc[1];if(0<tc.groupIndices.length)throw Error("Virtuoso: prepending items does not work with groups");return Wk(tc.sizeTree).reduce(function(Qc,Uc){var Vd=Uc.k;Uc=Uc.v;return{ranges:[].concat(Qc.ranges,
[{startIndex:Qc.prevIndex,endIndex:Vd+Hc-1,size:Qc.prevSize}]),prevIndex:Vd+Hc,prevSize:Uc}},{ranges:[],prevIndex:0,prevSize:tc.lastSize}).ranges})),b);var Wb=uj(Kd(sa,ue(rc,ec),Gf(function(tc){return ab(-tc[0],tc[1].offsetTree,tc[2])})));return Yf(Kd(sa,ue(rc,ec),Gf(function(tc){var Hc=tc[0],Qc=tc[1];tc=tc[2];if(0<Qc.groupIndices.length)throw Error("Virtuoso: shifting items does not work with groups");var Uc=Wk(Qc.sizeTree).reduce(function(Vd,ae){return ui(Vd,Math.max(0,ae.k+Hc),ae.v)},Hi);return Ve({},
Qc,{sizeTree:Uc},ua(Qc.offsetTree,0,Uc,tc))})),rc),{data:Rb,totalCount:I,sizeRanges:b,groupIndices:Va,defaultItemSize:lb,fixedItemSize:$a,unshiftWith:ia,shiftWith:sa,shiftWithOffset:Wb,beforeUnshiftWith:g,firstItemIndex:La,gap:ec,sizes:rc,listRefresh:Vb,statefulTotalCount:W,trackItemSizes:mc,itemSize:ub}},Qh(Pp,dw),{singleton:!0}),KG="undefined"!=typeof document&&"scrollBehavior"in document.documentElement.style,Vs=th(function(b){function g(){mc&&(mc(),mc=null);tc&&(tc(),tc=null);Wb&&(clearTimeout(Wb),
Wb=null);La(0,!1)}var m=b[0],I=m.sizes,W=m.totalCount,ia=m.listRefresh;m=m.gap;var sa=b[1],La=sa.scrollingInProgress,Va=sa.viewportHeight,$a=sa.scrollTo,lb=sa.smoothScrollTargetReached,ub=sa.headerHeight,Rb=sa.footerHeight,ec=sa.fixedHeaderHeight;sa=sa.fixedFooterHeight;b=b[2].log;var Vb=Jf(),rc=sf(0),mc=null,Wb=null,tc=null;return Yf(Kd(Vb,ue(I,Va,W,rc,ub,Rb,b),ue(m,ec,sa),Gf(function(Hc){var Qc=Hc[0],Uc=Qc[0],Vd=Qc[1],ae=Qc[2],De=Qc[3],Oe=Qc[4],tf=Qc[5],pf=Qc[6],df=Qc[7],Ie=Hc[1];Qc=Hc[2];Hc=Hc[3];
var Bd=ac(Uc),fd=Bd.align,jd=Bd.behavior,ld=Bd.offset;--De;Bd=qb(Bd,Vd,De);tf=ab(Bd,Vd.offsetTree,Ie)+tf;"end"===fd?(tf+=Qc+Wj(Vd.sizeTree,Bd)[1]-ae+Hc,Bd===De&&(tf+=pf)):"center"===fd?tf+=(Qc+Wj(Vd.sizeTree,Bd)[1]-ae+Hc)/2:tf-=Oe;ld&&(tf+=ld);var Gd=function(Fe){g();Fe?(df("retrying to scroll to",{location:Uc},nm.DEBUG),Vb(0,Uc)):df("list did not change, scroll successful",{},nm.DEBUG)};if(g(),"smooth"===jd){var we=!1;tc=di(ia,function(Fe){we=we||Fe});mc=Ci(lb,function(){Gd(we)})}else mc=Ci(Kd(ia,
function(Fe){var qf=setTimeout(function(){Fe(!1)},150);return function(hf){hf&&(Fe(!0),clearTimeout(qf))}}),Gd);Wb=setTimeout(function(){g()},1200);La(0,!0);return df("scrolling from index to",{index:Bd,top:tf,behavior:jd},nm.DEBUG),{top:tf,behavior:jd}})),$a),{scrollToIndex:Vb,topListHeight:rc}},Qh(mp,yn,Pp),{singleton:!0}),LG={atBottom:!1,notAtBottomBecause:"NOT_SHOWING_LAST_ITEM",state:{offsetBottom:0,scrollTop:0,viewportHeight:0,scrollHeight:0}},Ws=th(function(b){var g=b[0],m=g.scrollContainerState;
b=g.scrollTop;var I=g.viewportHeight,W=g.headerHeight,ia=g.footerHeight,sa=g.scrollBy;g=sf(!1);var La=sf(!0),Va=Jf(),$a=Jf(),lb=sf(4),ub=sf(0),Rb=wh(Kd(ri(Kd(de(b),sh(1),Kg(!0)),Kd(de(b),sh(1),Kg(!1),He(100))),ze()),!1),ec=wh(Kd(ri(Kd(sa,Kg(!0)),Kd(sa,Kg(!1),He(200))),ze()),!1);Yf(Kd(xi(de(b),de(ub)),Gf(function(Vb){return Vb[0]<=Vb[1]}),ze()),La);Yf(Kd(La,gk(50)),$a);I=uj(Kd(xi(m,de(I),de(W),de(ia),de(lb)),ii(function(Vb,rc){var mc,Wb,tc=rc[0],Hc=tc.scrollTop;tc=tc.scrollHeight;var Qc=rc[1],Uc={viewportHeight:Qc,
scrollTop:Hc,scrollHeight:tc};return Hc+Qc-tc>-rc[4]?(Hc>Vb.state.scrollTop?(mc="SCROLLED_DOWN",Wb=Vb.state.scrollTop-Hc):(mc="SIZE_DECREASED",Wb=Vb.state.scrollTop-Hc||Vb.scrollTopDelta),{atBottom:!0,state:Uc,atBottomBecause:mc,scrollTopDelta:Wb}):{atBottom:!1,notAtBottomBecause:Uc.scrollHeight>Vb.state.scrollHeight?"SIZE_INCREASED":Qc<Vb.state.viewportHeight?"VIEWPORT_HEIGHT_DECREASING":Hc<Vb.state.scrollTop?"SCROLLING_UPWARDS":"NOT_FULLY_SCROLLED_TO_LAST_ITEM_BOTTOM",state:Uc}},LG),ze(function(Vb,
rc){return Vb&&Vb.atBottom===rc.atBottom})));W=wh(Kd(m,ii(function(Vb,rc){var mc=rc.scrollTop,Wb=rc.scrollHeight;rc=rc.viewportHeight;return 1.01>Math.abs(Vb.scrollHeight-Wb)?{scrollTop:mc,scrollHeight:Wb,jump:0,changed:!1}:Vb.scrollTop!==mc&&1>Wb-(mc+rc)?{scrollHeight:Wb,scrollTop:mc,jump:Vb.scrollTop-mc,changed:!0}:{scrollHeight:Wb,scrollTop:mc,jump:0,changed:!0}},{scrollHeight:0,jump:0,scrollTop:0,changed:!1}),Ae(function(Vb){return Vb.changed}),Gf(function(Vb){return Vb.jump})),0);Yf(Kd(I,Gf(function(Vb){return Vb.atBottom})),
g);Yf(Kd(g,gk(50)),Va);ia=sf("down");Yf(Kd(m,Gf(function(Vb){return Vb.scrollTop}),ze(),ii(function(Vb,rc){return ec(4)?{direction:Vb.direction,prevScrollTop:rc}:{direction:rc<Vb.prevScrollTop?"up":"down",prevScrollTop:rc}},{direction:"down",prevScrollTop:0}),Gf(function(Vb){return Vb.direction})),ia);Yf(Kd(m,gk(50),Kg("none")),ia);m=sf(0);return Yf(Kd(Rb,Ae(function(Vb){return!Vb}),Kg(0)),m),Yf(Kd(b,gk(100),ue(Rb),Ae(function(Vb){return!!Vb[1]}),ii(function(Vb,rc){return[Vb[1],rc[0]]},[0,0]),Gf(function(Vb){return Vb[1]-
Vb[0]})),m),{isScrolling:Rb,isAtTop:La,isAtBottom:g,atBottomState:I,atTopStateChange:$a,atBottomStateChange:Va,scrollDirection:ia,atBottomThreshold:lb,atTopThreshold:ub,scrollVelocity:m,lastJumpDueToItemResize:W}},Qh(yn)),Tq=th(function(b){var g=b[0].log;b=sf(!1);var m=uj(Kd(b,Ae(function(I){return I}),ze()));return di(b,function(I){I&&g(4)("props updated",{},nm.DEBUG)}),{propsReady:b,didMount:m}},Qh(Pp),{singleton:!0}),ew=th(function(b){var g=b[0],m=g.sizes,I=g.listRefresh;g=g.defaultItemSize;var W=
b[1].scrollTop,ia=b[2].scrollToIndex;b=b[3].didMount;var sa=sf(!0),La=sf(0);return Yf(Kd(b,ue(La),Ae(function(Va){return!!Va[1]}),Kg(!1)),sa),di(Kd(xi(I,b),ue(sa,m,g),Ae(function(Va){var $a=Va[1],lb=Va[3];return Va[0][1]&&(Va[2].sizeTree!==Hi||void 0!==lb)&&!$a}),ue(La)),function(Va){var $a=Va[1];setTimeout(function(){Ci(W,function(){sa(0,!0)});ia(0,$a)})}),{scrolledToInitialItem:sa,initialTopMostItemIndex:La}},Qh(mp,yn,Vs,Tq),{singleton:!0}),MG=th(function(b){function g(rc){Va(0,{index:"LAST",align:"end",
behavior:rc})}function m(rc){var mc=Ci(La,function(Wb){!rc||Wb.atBottom||"SIZE_INCREASED"!==Wb.notAtBottomBecause||Vb||(ub(4)("scrolling to bottom due to increased size",{},nm.DEBUG),g("auto"))});setTimeout(mc,100)}var I=b[0],W=I.totalCount,ia=I.listRefresh,sa=b[1];I=sa.isAtBottom;var La=sa.atBottomState,Va=b[2].scrollToIndex;sa=b[3].scrolledToInitialItem;var $a=b[4],lb=$a.propsReady;$a=$a.didMount;var ub=b[5].log;b=b[6].scrollingInProgress;var Rb=sf(!1),ec=Jf(),Vb=null;return di(Kd(xi(Kd(de(W),sh(1)),
$a),ue(de(Rb),I,sa,b),Gf(function(rc){var mc=rc[0],Wb=mc[0];mc=mc[1]&&rc[3];var tc="auto";mc&&(tc=rc[1],rc=rc[2]||rc[4],tc="function"==typeof tc?Ac(tc(rc)):rc&&Ac(tc),mc=mc&&!!tc);return{totalCount:Wb,shouldFollow:mc,followOutputBehavior:tc}}),Ae(function(rc){return rc.shouldFollow})),function(rc){var mc=rc.totalCount,Wb=rc.followOutputBehavior;Vb&&(Vb(),Vb=null);Vb=Ci(ia,function(){ub(4)("following output to ",{totalCount:mc},nm.DEBUG);g(Wb);Vb=null})}),di(Kd(xi(de(Rb),W,lb),Ae(function(rc){return rc[0]&&
rc[2]}),ii(function(rc,mc){mc=mc[1];return{refreshed:rc.value===mc,value:mc}},{refreshed:!1,value:0}),Ae(function(rc){return rc.refreshed}),ue(Rb,W)),function(rc){m(!1!==rc[1])}),di(ec,function(){m(!1!==Rb(4))}),di(xi(de(Rb),La),function(rc){var mc=rc[1];rc[0]&&!mc.atBottom&&"VIEWPORT_HEIGHT_DECREASING"===mc.notAtBottomBecause&&g("auto")}),{followOutput:Rb,autoscrollToBottom:ec}},Qh(mp,Ws,Vs,ew,Tq,Pp,yn)),qA=th(function(b){var g=b[0],m=g.totalCount,I=g.groupIndices;g=g.sizes;var W=b[1];b=W.scrollTop;
W=W.headerHeight;var ia=Jf(),sa=Jf(),La=uj(Kd(ia,Gf(Cc)));return Yf(Kd(La,Gf(function(Va){return Va.totalCount})),m),Yf(Kd(La,Gf(function(Va){return Va.groupIndices})),I),Yf(Kd(xi(b,g,W),Ae(function(Va){return Va[1].groupOffsetTree!==Hi}),Gf(function(Va){return Wj(Va[1].groupOffsetTree,Math.max(Va[0]-Va[2],0),"v")[0]}),ze(),Gf(function(Va){return[Va]})),sa),{groupCounts:ia,topItemsIndexes:sa}},Qh(mp,yn)),fw=th(function(b){var g=b[0];b=g.scrollTop;var m=g.viewportHeight,I=g.deviation,W=g.headerHeight,
ia=g.fixedHeaderHeight;g=Jf();var sa=sf(0),La=sf(0),Va=sf(0);b=wh(Kd(xi(de(b),de(m),de(W),de(g,Id),de(Va),de(sa),de(ia),de(I),de(La)),Gf(function($a){var lb=$a[0],ub=$a[1],Rb=$a[2],ec=$a[3],Vb=ec[0];ec=ec[1];var rc=$a[4],mc=$a[6],Wb=$a[7],tc=$a[8],Hc=lb-Wb;$a=$a[5]+mc;var Qc=Math.max(Rb-Hc,0),Uc="none",Vd="number"==typeof tc?tc:tc.top||0;tc="number"==typeof tc?tc:tc.bottom||0;return Vb-=Wb,ec+=Rb+mc,Vb+(Rb+mc)>lb+$a-Vd&&(Uc="up"),ec-Wb<lb-Qc+ub+tc&&(Uc="down"),"none"!==Uc?[Math.max(Hc-Rb-rd(rc,"top",
Uc)-Vd,0),Hc-Qc-mc+ub+rd(rc,"bottom",Uc)+tc]:null}),Ae(function($a){return null!=$a}),ze(Id)),[0,0]);return{listBoundary:g,overscan:Va,topListHeight:sa,increaseViewportBy:La,visibleRange:b}},Qh(yn),{singleton:!0}),rA={items:[],topItems:[],offsetTop:0,offsetBottom:0,top:0,bottom:0,topListHeight:0,totalCount:0,firstItemIndex:0},Kr=th(function(b){var g=b[0],m=g.sizes,I=g.totalCount,W=g.data,ia=g.firstItemIndex,sa=g.gap,La=b[1],Va=b[2],$a=Va.visibleRange;g=Va.listBoundary;Va=Va.topListHeight;var lb=b[3],
ub=lb.scrolledToInitialItem,Rb=lb.initialTopMostItemIndex;lb=b[4].topListHeight;var ec=b[5],Vb=b[6].didMount,rc=b[7].recalcInProgress;b=sf([]);var mc=Jf();Yf(La.topItemsIndexes,b);m=wh(Kd(xi(Vb,rc,de($a,Id),de(I),de(m),de(Rb),ub,de(b),de(ia),de(sa),W),Ae(function(Wb){return Wb[0]&&!Wb[1]}),Gf(function(Wb){var tc=Wb[2],Hc=tc[0],Qc=tc[1];tc=Wb[3];var Uc=Wb[5],Vd=Wb[6],ae=Wb[7],De=Wb[8],Oe=Wb[9],tf=Wb[10];Wb=Wb[4];var pf=Wb.sizeTree,df=Wb.offsetTree;if(0===tc||0===Hc&&0===Qc)return Ve({},rA,{totalCount:tc});
if(pf===Hi)return yf(function(hf,gf,Ug){return gf.groupOffsetTree!==Hi?(hf=tb(hf,gf),[{index:Wj(gf.groupOffsetTree,hf)[0],size:0,offset:0},{index:hf,size:0,offset:0,data:Ug&&Ug[0]}]):[{index:hf,size:0,offset:0,data:Ug&&Ug[0]}]}("number"==typeof Uc?Uc:"LAST"===Uc.index?tc-1:Uc.index,Wb,tf),[],tc,Oe,Wb,De);Uc=[];if(0<ae.length){var Ie,Bd=ae[0],fd=ae[ae.length-1],jd=0;for(pf=Bf(vm(pf,Bd,fd));!(Ie=pf()).done;){var ld=Ie.value;Ie=ld.value;var Gd=Math.min(ld.end,fd);for(ld=Math.max(ld.start,Bd);ld<=Gd;ld++)Uc.push({index:ld,
size:Ie,offset:jd,data:tf&&tf[ld]}),jd+=Ie}}if(!Vd)return yf([],Uc,tc,Oe,Wb,De);var we=0<ae.length?ae[ae.length-1]+1:0,Fe=function(hf,gf,Ug,Gg){return void 0===Gg&&(Gg=0),0<Gg&&(gf=Math.max(gf,hf[wm(hf,Gg,y)].offset)),Aj((Jk=Ug,Do=wm(qi=hf,gf,Tk=U),Vr=wm(qi,Jk,Tk,Do),qi.slice(Do,Vr+1)),xa);var qi,Jk,Tk,Do,Vr}(df,Hc,Qc,we);if(0===Fe.length)return null;var qf=tc-1;return yf(Mj([],function(hf){for(var gf,Ug=Bf(Fe);!(gf=Ug()).done;){var Gg=gf.value,qi=Gg.value;gf=qi.offset;var Jk=Gg.start,Tk=qi.size;
qi.offset<Hc&&(qi=(Jk+=Math.floor((Hc-qi.offset+Oe)/(Tk+Oe)))-Gg.start,gf+=qi*Tk+qi*Oe);Jk<we&&(gf+=(we-Jk)*Tk,Jk=we);for(Gg=Math.min(Gg.end,qf);Jk<=Gg&&!(gf>=Qc);Jk++)hf.push({index:Jk,size:Tk,offset:gf,data:tf&&tf[Jk]}),gf+=Tk+Oe}}),Uc,tc,Oe,Wb,De)}),Ae(function(Wb){return null!==Wb}),ze()),rA);return Yf(Kd(W,Ae(function(Wb){return void 0!==Wb}),Gf(function(Wb){return Wb.length})),I),Yf(Kd(m,Gf(function(Wb){return Wb.topListHeight})),lb),Yf(lb,Va),Yf(Kd(m,Gf(function(Wb){return[Wb.top,Wb.bottom]})),
g),Yf(Kd(m,Gf(function(Wb){return Wb.items})),mc),Ve({listState:m,topItemsIndexes:b,endReached:uj(Kd(m,Ae(function(Wb){return 0<Wb.items.length}),ue(I,W),Ae(function(Wb){var tc=Wb[0].items;return tc[tc.length-1].originalIndex===Wb[1]-1}),Gf(function(Wb){return[Wb[1]-1,Wb[2]]}),ze(Id),Gf(function(Wb){return Wb[0]}))),startReached:uj(Kd(m,gk(200),Ae(function(Wb){var tc=Wb.items;return 0<tc.length&&tc[0].originalIndex===Wb.topItems.length}),Gf(function(Wb){return Wb.items[0].index}),ze())),rangeChanged:uj(Kd(m,
Ae(function(Wb){return 0<Wb.items.length}),Gf(function(Wb){Wb=Wb.items;for(var tc=0,Hc=Wb.length-1;"group"===Wb[tc].type&&tc<Hc;)tc++;for(;"group"===Wb[Hc].type&&Hc>tc;)Hc--;return{startIndex:Wb[tc].index,endIndex:Wb[Hc].index}}),ze(Pd))),itemsRendered:mc},ec)},Qh(mp,qA,fw,ew,Vs,Ws,Tq,dw),{singleton:!0}),NG=th(function(b){var g=b[0],m=g.sizes,I=g.firstItemIndex,W=g.data;g=g.gap;var ia=b[1].listState;b=b[2].didMount;var sa=sf(0);return Yf(Kd(b,ue(sa),Ae(function(La){return 0!==La[1]}),ue(m,I,g,W),
Gf(function(La){var Va=La[0][1],$a=La[1],lb=La[2],ub=La[3];La=La[4];var Rb=void 0===La?[]:La;La=0;if(0<$a.groupIndices.length)for(var ec,Vb=Bf($a.groupIndices);!((ec=Vb()).done||ec.value-La>=Va);)La++;Va+=La;return yf(Array.from({length:Va}).map(function(rc,mc){return{index:mc,size:0,offset:0,data:Rb[mc]}}),[],Va,ub,$a,lb)})),ia),{initialItemCount:sa}},Qh(mp,Kr,Tq),{singleton:!0}),sA=th(function(b){b=b[0].scrollVelocity;var g=sf(!1),m=Jf(),I=sf(!1);return Yf(Kd(b,ue(I,g,m),Ae(function(W){return!!W[1]}),
Gf(function(W){var ia=W[0],sa=W[1],La=W[2];W=W[3];var Va=sa.enter;if(La){if((0,sa.exit)(ia,W))return!1}else if(Va(ia,W))return!0;return La}),ze()),g),di(Kd(xi(g,b,m),ue(I)),function(W){var ia=W[0];W=W[1];return ia[0]&&W&&W.change&&W.change(ia[1],ia[2])}),{isSeeking:g,scrollSeekConfiguration:I,scrollVelocity:b,scrollSeekRangeChanged:m}},Qh(Ws),{singleton:!0}),OG=th(function(b){b=b[0].topItemsIndexes;var g=sf(0);return Yf(Kd(g,Ae(function(m){return 0<m}),Gf(function(m){return Array.from({length:m}).map(function(I,
W){return W})})),b),{topItemCount:g}},Qh(Kr)),gw=th(function(b){var g=b[0],m=g.footerHeight,I=g.headerHeight,W=g.fixedHeaderHeight;g=g.fixedFooterHeight;var ia=b[1].listState;b=Jf();m=wh(Kd(xi(m,g,I,W,ia),Gf(function(sa){var La=sa[4];return sa[0]+sa[1]+sa[2]+sa[3]+La.offsetBottom+La.bottom})),0);return Yf(de(m),b),{totalListHeight:m,totalListHeightChanged:b}},Qh(yn,Kr),{singleton:!0}),PG=Fg(function(){return/iP(ad|hone|od).+Version\/[\d.]+.*Safari/i.test(navigator.userAgent)}),QG=th(function(b){function g(mc){0<
mc?(I(0,{top:-mc,behavior:"auto"}),ia(0,0)):(ia(0,0),I(0,{top:-mc,behavior:"auto"}))}var m=b[0],I=m.scrollBy,W=m.scrollTop,ia=m.deviation,sa=m.scrollingInProgress,La=b[1];m=La.isScrolling;var Va=La.isAtBottom,$a=La.scrollDirection,lb=b[3],ub=lb.beforeUnshiftWith,Rb=lb.shiftWithOffset,ec=lb.sizes;lb=lb.gap;var Vb=b[4].log,rc=b[5].recalcInProgress;b=uj(Kd(b[2].listState,ue(La.lastJumpDueToItemResize),ii(function(mc,Wb){var tc=mc[1],Hc=Wb[0],Qc=Hc.items,Uc=Hc.totalCount;Hc=Hc.bottom+Hc.offsetBottom;
var Vd=0;return mc[2]===Uc&&0<tc.length&&0<Qc.length&&(0===Qc[0].originalIndex&&0===tc[0].originalIndex||0!=(Vd=Hc-mc[3])&&(Vd+=Wb[1])),[Vd,Qc,Uc,Hc]},[0,[],0,0]),Ae(function(mc){return 0!==mc[0]}),ue(W,$a,sa,Va,Vb),Ae(function(mc){return!mc[3]&&0!==mc[1]&&"up"===mc[2]}),Gf(function(mc){var Wb=mc[0][0];return(0,mc[5])("Upward scrolling compensation",{amount:Wb},nm.DEBUG),Wb})));return di(Kd(b,ue(ia,m)),function(mc){var Wb=mc[0],tc=mc[1];mc[2]&&PG()?ia(0,tc-Wb):g(-Wb)}),di(Kd(xi(wh(m,!1),ia,rc),Ae(function(mc){return!mc[0]&&
!mc[2]&&0!==mc[1]}),Gf(function(mc){return mc[1]}),gk(1)),g),Yf(Kd(Rb,Gf(function(mc){return{top:-mc}})),I),di(Kd(ub,ue(ec,lb),Gf(function(mc){var Wb=mc[0];return Wb*mc[1].lastSize+Wb*mc[2]})),function(mc){ia(0,mc);requestAnimationFrame(function(){Lm(I,{top:mc});requestAnimationFrame(function(){ia(0,0);rc(0,!1)})})}),{deviation:ia}},Qh(yn,Ws,Kr,mp,Pp,dw)),RG=th(function(b){var g=b[0].totalListHeight,m=b[1].didMount,I=b[2].scrollTo;b=sf(0);return di(Kd(m,ue(b),Ae(function(W){return 0!==W[1]}),Gf(function(W){return{top:W[1]}})),
function(W){Ci(Kd(g,Ae(function(ia){return 0!==ia})),function(){setTimeout(function(){I(0,W)})})}),{initialScrollTop:b}},Qh(gw,Tq,yn),{singleton:!0}),SG=th(function(b){var g=b[0].viewportHeight;b=b[1].totalListHeight;var m=sf(!1);return{alignToBottom:m,paddingTopAddition:wh(Kd(xi(m,g,b),Ae(function(I){return I[0]}),Gf(function(I){return Math.max(0,I[1]-I[2])}),ze()),0)}},Qh(yn,gw),{singleton:!0}),tA=th(function(b){var g=b[0];b=g.scrollTo;g=g.scrollContainerState;var m=Jf(),I=Jf(),W=Jf(),ia=sf(!1),
sa=sf(void 0);return Yf(Kd(xi(m,I),Gf(function(La){var Va=La[0];return{scrollTop:Math.max(0,Va.scrollTop-La[1].offsetTop),scrollHeight:Va.scrollHeight,viewportHeight:Va.viewportHeight}})),g),Yf(Kd(b,ue(I),Gf(function(La){var Va=La[0];return Ve({},Va,{top:Va.top+La[1].offsetTop})})),W),{useWindowScroll:ia,customScrollParent:sa,windowScrollContainerState:m,windowViewportRect:I,windowScrollTo:W}},Qh(yn)),TG=["done","behavior","align"],uA=th(function(b){var g=b[0],m=g.sizes,I=g.totalCount;g=g.gap;var W=
b[1],ia=W.scrollTop,sa=W.viewportHeight,La=W.headerHeight,Va=W.fixedHeaderHeight,$a=W.fixedFooterHeight,lb=W.scrollingInProgress;b=b[2].scrollToIndex;W=Jf();return Yf(Kd(W,ue(m,sa,I,La,Va,$a,ia),ue(g),Gf(function(ub){var Rb=ub[0],ec=Rb[0],Vb=Rb[1],rc=Rb[2],mc=Rb[3],Wb=Rb[4],tc=Rb[5],Hc=Rb[6];Rb=Rb[7];var Qc=ub[1];ub=ec.done;var Uc=ec.behavior,Vd=ec.align,ae=Ml(ec,TG),De=null;ec=qb(ec,Vb,mc-1);Wb=ab(ec,Vb.offsetTree,Qc)+Wb+tc;return Wb<Rb+tc?De=Ve({},ae,{behavior:Uc,align:null!=Vd?Vd:"start"}):Wb+
Wj(Vb.sizeTree,ec)[1]>Rb+rc-Hc&&(De=Ve({},ae,{behavior:Uc,align:null!=Vd?Vd:"end"})),De?ub&&Ci(Kd(lb,sh(1),Ae(function(Oe){return!1===Oe})),ub):ub&&ub(),De}),Ae(function(ub){return null!==ub})),b),{scrollIntoView:W}},Qh(mp,yn,Vs,Kr,Pp),{singleton:!0}),UG=["listState","topItemsIndexes"],VG=th(function(b){return Ve({},b[0],b[1],b[2],b[3],b[4],b[5],b[6],b[7],b[8])},Qh(fw,NG,Tq,sA,gw,RG,SG,tA,uA)),vA=th(function(b){var g=b[0],m=g.totalCount,I=g.sizeRanges,W=g.fixedItemSize,ia=g.defaultItemSize,sa=g.trackItemSizes,
La=g.itemSize,Va=g.data,$a=g.firstItemIndex,lb=g.groupIndices,ub=g.statefulTotalCount;g=g.gap;var Rb=b[1],ec=Rb.initialTopMostItemIndex;Rb=Rb.scrolledToInitialItem;var Vb=b[2],rc=b[3],mc=b[4],Wb=mc.listState,tc=mc.topItemsIndexes;mc=Ml(mc,UG);var Hc=b[5].scrollToIndex,Qc=b[7].topItemCount,Uc=b[8].groupCounts,Vd=b[9];b=b[10];return Yf(mc.rangeChanged,Vd.scrollSeekRangeChanged),Yf(Kd(Vd.windowViewportRect,Gf(function(ae){return ae.visibleHeight})),Vb.viewportHeight),Ve({totalCount:m,data:Va,firstItemIndex:$a,
sizeRanges:I,initialTopMostItemIndex:ec,scrolledToInitialItem:Rb,topItemsIndexes:tc,topItemCount:Qc,groupCounts:Uc,fixedItemHeight:W,defaultItemHeight:ia,gap:g},rc,{statefulTotalCount:ub,listState:Wb,scrollToIndex:Hc,trackItemSizes:sa,itemSize:La,groupIndices:lb},mc,Vd,Vb,b)},Qh(mp,ew,yn,MG,Kr,Vs,QG,OG,qA,VG,Pp)),wA=Fg(function(){if("undefined"==typeof document)return"sticky";var b=document.createElement("div");return b.style.position="-webkit-sticky","-webkit-sticky"===b.style.position?"-webkit-sticky":
"sticky"}),ju=hh.createContext(void 0),xA=hh.createContext(void 0),WG=["placeholder"],XG=["style","children"],YG=["style","children"],ZG=th(function(){var b=sf(function(Va){return"Item "+Va}),g=sf(null),m=sf(function(Va){return"Group "+Va}),I=sf({}),W=sf(kg),ia=sf("div"),sa=sf(ag),La=function(Va,$a){return void 0===$a&&($a=null),wh(Kd(I,Gf(function(lb){return lb[Va]}),ze()),$a)};return{context:g,itemContent:b,groupContent:m,components:I,computeItemKey:W,headerFooterTag:ia,scrollerRef:sa,FooterComponent:La("Footer"),
HeaderComponent:La("Header"),TopItemListComponent:La("TopItemList"),ListComponent:La("List","div"),ItemComponent:La("Item","div"),GroupComponent:La("Group","div"),ScrollerComponent:La("Scroller","div"),EmptyPlaceholder:La("EmptyPlaceholder"),ScrollSeekPlaceholder:La("ScrollSeekPlaceholder")}}),$G=th(function(b){function g(W,ia,sa){Yf(Kd(W,ue(I.components),Gf(function(La){var Va,$a=La[0];La=La[1];return console.warn("react-virtuoso: "+sa+" property is deprecated. Pass components."+ia+" instead."),
Ve({},La,((Va={})[ia]=$a,Va))})),I.components)}var m=b[0],I=b[1];b={item:Vg(I.itemContent,"Rename the %citem%c prop to %citemContent."),group:Vg(I.groupContent,"Rename the %cgroup%c prop to %cgroupContent."),topItems:Vg(m.topItemCount,"Rename the %ctopItems%c prop to %ctopItemCount."),itemHeight:Vg(m.fixedItemHeight,"Rename the %citemHeight%c prop to %cfixedItemHeight."),scrollingStateChange:Vg(m.isScrolling,"Rename the %cscrollingStateChange%c prop to %cisScrolling."),adjustForPrependedItems:Jf(),
maxHeightCacheSize:Jf(),footer:Jf(),header:Jf(),HeaderContainer:Jf(),FooterContainer:Jf(),ItemContainer:Jf(),ScrollContainer:Jf(),GroupContainer:Jf(),ListContainer:Jf(),emptyComponent:Jf(),scrollSeek:Jf()};return di(b.adjustForPrependedItems,function(){console.warn("react-virtuoso: adjustForPrependedItems is no longer supported. Use the firstItemIndex property instead - https://virtuoso.dev/prepend-items.","color: red;","color: inherit;","color: blue;")}),di(b.maxHeightCacheSize,function(){console.warn("react-virtuoso: maxHeightCacheSize is no longer necessary. Setting it has no effect - remove it from your code.")}),
di(b.HeaderContainer,function(){console.warn("react-virtuoso: HeaderContainer is deprecated. Use headerFooterTag if you want to change the wrapper of the header component and pass components.Header to change its contents.")}),di(b.FooterContainer,function(){console.warn("react-virtuoso: FooterContainer is deprecated. Use headerFooterTag if you want to change the wrapper of the footer component and pass components.Footer to change its contents.")}),di(b.scrollSeek,function(W){var ia=W.placeholder;
W=Ml(W,WG);console.warn("react-virtuoso: scrollSeek property is deprecated. Pass scrollSeekConfiguration and specify the placeholder in components.ScrollSeekPlaceholder instead.");ia=Ve({},(0,I.components)(4),{ScrollSeekPlaceholder:ia});(0,I.components)(0,ia);(0,m.scrollSeekConfiguration)(0,W)}),g(b.footer,"Footer","footer"),g(b.header,"Header","header"),g(b.ItemContainer,"Item","ItemContainer"),g(b.ListContainer,"List","ListContainer"),g(b.ScrollContainer,"Scroller","ScrollContainer"),g(b.emptyComponent,
"EmptyPlaceholder","emptyComponent"),g(b.GroupContainer,"Group","GroupContainer"),Ve({},m,I,b)},Qh(vA,ZG)),aH=function(b){return hh.createElement("div",{style:{height:b.height}})},bH={position:wA(),zIndex:1,overflowAnchor:"none"},cH={overflowAnchor:"none"},yA=hh.memo(function(b){b=b.showTopList;b=void 0!==b&&b;var g=cj("listState"),m=fo("sizeRanges"),I=cj("useWindowScroll"),W=cj("customScrollParent"),ia=fo("windowScrollContainerState"),sa=fo("scrollContainerState");I=W||I?ia:sa;var La=cj("itemContent"),
Va=cj("context"),$a=cj("groupContent");ia=cj("trackItemSizes");sa=cj("itemSize");var lb=cj("log"),ub=fo("gap");m=ji(m,sa,ia,b?ag:I,lb,ub,W).callbackRef;W=hh.useState(0);var Rb=W[0],ec=W[1];hw("deviation",function(Qc){Rb!==Qc&&ec(Qc)});W=cj("EmptyPlaceholder");var Vb=cj("ScrollSeekPlaceholder")||aH;I=cj("ListComponent");var rc=cj("ItemComponent"),mc=cj("GroupComponent"),Wb=cj("computeItemKey"),tc=cj("isSeeking"),Hc=0<cj("groupIndices").length;ia=cj("paddingTopAddition");ia=b?{}:{boxSizing:"border-box",
paddingTop:g.offsetTop+ia,paddingBottom:g.offsetBottom,marginTop:Rb};return!b&&0===g.totalCount&&W?(0,bi.createElement)(W,Ig(W,Va)):(0,bi.createElement)(I,Ve({},Ig(I,Va),{ref:m,style:ia,"data-test-id":b?"virtuoso-top-item-list":"virtuoso-item-list"}),(b?g.topItems:g.items).map(function(Qc){var Uc=Qc.originalIndex,Vd=Wb(Uc+g.firstItemIndex,Qc.data,Va);return tc?(0,bi.createElement)(Vb,Ve({},Ig(Vb,Va),{key:Vd,index:Qc.index,height:Qc.size,type:Qc.type||"item"},"group"===Qc.type?{}:{groupIndex:Qc.groupIndex})):
"group"===Qc.type?(0,bi.createElement)(mc,Ve({},Ig(mc,Va),{key:Vd,"data-index":Uc,"data-known-size":Qc.size,"data-item-index":Qc.index,style:bH}),$a(Qc.index)):(0,bi.createElement)(rc,Ve({},Ig(rc,Va),{key:Vd,"data-index":Uc,"data-known-size":Qc.size,"data-item-index":Qc.index,"data-item-group-index":Qc.groupIndex,style:cH}),Hc?La(Qc.index,Qc.groupIndex,Qc.data,Va):La(Qc.index,Qc.data,Va))}))}),dH={height:"100%",outline:"none",overflowY:"auto",position:"relative",WebkitOverflowScrolling:"touch"},Lr=
{width:"100%",height:"100%",position:"absolute",top:0},eH={width:"100%",position:wA(),top:0},fH=hh.memo(function(){var b=cj("HeaderComponent"),g=fo("headerHeight"),m=cj("headerFooterTag"),I=ch(function(ia){return g(Qk(ia,"height"))}),W=cj("context");return b?(0,bi.createElement)(m,{ref:I},(0,bi.createElement)(b,Ig(b,W))):null}),gH=hh.memo(function(){var b=cj("FooterComponent"),g=fo("footerHeight"),m=cj("headerFooterTag"),I=ch(function(ia){return g(Qk(ia,"height"))}),W=cj("context");return b?(0,bi.createElement)(m,
{ref:I},(0,bi.createElement)(b,Ig(b,W))):null}),hH=function(b){b=b.children;var g=(0,bi.useContext)(ju),m=fo("viewportHeight"),I=fo("fixedItemHeight"),W=ch(kh(m,function(ia){return Qk(ia,"height")}));return hh.useEffect(function(){g&&(m(g.viewportHeight),I(g.itemHeight))},[g,m,I]),hh.createElement("div",{style:Lr,ref:W,"data-viewport-type":"element"},b)},iH=function(b){b=b.children;var g=(0,bi.useContext)(ju),m=fo("windowViewportRect"),I=fo("fixedItemHeight"),W=cj("customScrollParent");W=kj(m,W);
return hh.useEffect(function(){g&&(I(g.itemHeight),m({offsetTop:0,visibleHeight:g.viewportHeight,visibleWidth:100}))},[g,m,I]),hh.createElement("div",{ref:W,style:Lr,"data-viewport-type":"window"},b)},jH=function(b){b=b.children;var g=cj("TopItemListComponent"),m=cj("headerHeight");m=Ve({},eH,{marginTop:m+"px"});var I=cj("context");return(0,bi.createElement)(g||"div",{style:m,context:I},b)},ku=yl($G,{required:{},optional:{context:"context",followOutput:"followOutput",firstItemIndex:"firstItemIndex",
itemContent:"itemContent",groupContent:"groupContent",overscan:"overscan",increaseViewportBy:"increaseViewportBy",totalCount:"totalCount",topItemCount:"topItemCount",initialTopMostItemIndex:"initialTopMostItemIndex",components:"components",groupCounts:"groupCounts",atBottomThreshold:"atBottomThreshold",atTopThreshold:"atTopThreshold",computeItemKey:"computeItemKey",defaultItemHeight:"defaultItemHeight",fixedItemHeight:"fixedItemHeight",itemSize:"itemSize",scrollSeekConfiguration:"scrollSeekConfiguration",
headerFooterTag:"headerFooterTag",data:"data",initialItemCount:"initialItemCount",initialScrollTop:"initialScrollTop",alignToBottom:"alignToBottom",useWindowScroll:"useWindowScroll",customScrollParent:"customScrollParent",scrollerRef:"scrollerRef",logLevel:"logLevel",react18ConcurrentRendering:"react18ConcurrentRendering",item:"item",group:"group",topItems:"topItems",itemHeight:"itemHeight",scrollingStateChange:"scrollingStateChange",maxHeightCacheSize:"maxHeightCacheSize",footer:"footer",header:"header",
ItemContainer:"ItemContainer",ScrollContainer:"ScrollContainer",ListContainer:"ListContainer",GroupContainer:"GroupContainer",emptyComponent:"emptyComponent",HeaderContainer:"HeaderContainer",FooterContainer:"FooterContainer",scrollSeek:"scrollSeek"},methods:{scrollToIndex:"scrollToIndex",scrollIntoView:"scrollIntoView",scrollTo:"scrollTo",scrollBy:"scrollBy",adjustForPrependedItems:"adjustForPrependedItems",autoscrollToBottom:"autoscrollToBottom"},events:{isScrolling:"isScrolling",endReached:"endReached",
startReached:"startReached",rangeChanged:"rangeChanged",atBottomStateChange:"atBottomStateChange",atTopStateChange:"atTopStateChange",totalListHeightChanged:"totalListHeightChanged",itemsRendered:"itemsRendered",groupIndices:"groupIndices"}},hh.memo(function(b){var g=cj("useWindowScroll"),m=0<cj("topItemsIndexes").length,I=cj("customScrollParent"),W=I||g?iH:hH;return hh.createElement(I||g?mH:lH,Ve({},b),hh.createElement(W,null,hh.createElement(fH,null),hh.createElement(yA,null),hh.createElement(gH,
null)),m&&hh.createElement(jH,null,hh.createElement(yA,{showTopList:!0})))})),kH=ku.Component,fo=ku.usePublisher,cj=ku.useEmitterValue,hw=ku.useEmitter,lH=ki({usePublisher:fo,useEmitterValue:cj,useEmitter:hw}),mH=Ph({usePublisher:fo,useEmitterValue:cj,useEmitter:hw}),zA={items:[],offsetBottom:0,offsetTop:0,top:0,bottom:0,itemHeight:0,itemWidth:0},nH={items:[{index:0}],offsetBottom:0,offsetTop:0,top:0,bottom:0,itemHeight:0,itemWidth:0},AA=Math.round,BA=Math.ceil,lu=Math.floor,iw=Math.min,Mr=Math.max,
oH=th(function(b){var g=b[0],m=g.overscan,I=g.visibleRange,W=g.listBoundary,ia=b[1];g=ia.scrollTop;var sa=ia.viewportHeight,La=ia.scrollBy,Va=ia.scrollTo,$a=ia.smoothScrollTargetReached,lb=ia.scrollContainerState,ub=ia.footerHeight;ia=ia.headerHeight;var Rb=b[2],ec=b[3],Vb=b[4],rc=Vb.propsReady,mc=Vb.didMount,Wb=b[5];Vb=Wb.windowViewportRect;var tc=Wb.windowScrollTo,Hc=Wb.useWindowScroll,Qc=Wb.customScrollParent;Wb=Wb.windowScrollContainerState;b=b[6];var Uc=sf(0),Vd=sf(0),ae=sf(zA),De=sf({height:0,
width:0}),Oe=sf({height:0,width:0}),tf=Jf(),pf=Jf(),df=sf(0),Ie=sf(void 0),Bd=sf({row:0,column:0});Yf(Kd(xi(mc,Vd,Ie),Ae(function(fd){return 0!==fd[1]}),Gf(function(fd){return{items:bg(0,fd[1]-1,fd[2]),top:0,bottom:0,offsetBottom:0,offsetTop:0,itemHeight:0,itemWidth:0}})),ae);Yf(Kd(xi(de(Uc),I,de(Bd,Nf),de(Oe,function(fd,jd){return fd&&fd.width===jd.width&&fd.height===jd.height}),Ie),ue(De),Gf(function(fd){var jd=fd[0],ld=jd[0],Gd=jd[1],we=Gd[0],Fe=Gd[1],qf=jd[2],hf=jd[3],gf=jd[4],Ug=fd[1];fd=qf.row;
var Gg=qf.column;jd=hf.height;Gd=hf.width;var qi=Ug.width;if(0===ld||0===qi)return zA;if(0===Gd)return Ve({},nH,{items:bg(0,0,gf)});Gg=Mr(1,lu((qi+Gg)/(Gd+Gg)));we=Gg*lu((we+fd)/(jd+fd));Fe=Gg*BA((Fe+fd)/(jd+fd))-1;Fe=iw(ld-1,Mr(Fe,Gg-1));we=bg(iw(Fe,Mr(0,we)),Fe,gf);hf=Bh(Ug,qf,hf,we);qf=hf.top;hf=hf.bottom;ld=BA(ld/Gg);return{items:we,offsetTop:qf,offsetBottom:ld*jd+(ld-1)*fd-hf,top:qf,bottom:hf,itemHeight:jd,itemWidth:Gd}})),ae);Yf(Kd(Ie,Ae(function(fd){return void 0!==fd}),Gf(function(fd){return fd.length})),
Uc);Yf(Kd(De,Gf(function(fd){return fd.height})),sa);Yf(Kd(xi(De,Oe,ae,Bd),Gf(function(fd){fd=Bh(fd[0],fd[3],fd[1],fd[2].items);return[fd.top,fd.bottom]}),ze(Id)),W);I=uj(Kd(de(ae),Ae(function(fd){return 0<fd.items.length}),ue(Uc),Ae(function(fd){var jd=fd[0].items;return jd[jd.length-1].index===fd[1]-1}),Gf(function(fd){return fd[1]-1}),ze()));W=uj(Kd(de(ae),Ae(function(fd){fd=fd.items;return 0<fd.length&&0===fd[0].index}),Kg(0),ze()));sa=uj(Kd(de(ae),Ae(function(fd){return 0<fd.items.length}),Gf(function(fd){fd=
fd.items;return{startIndex:fd[0].index,endIndex:fd[fd.length-1].index}}),ze(Pd)));Yf(sa,ec.scrollSeekRangeChanged);Yf(Kd(tf,ue(De,Oe,Uc,Bd),Gf(function(fd){var jd=fd[1],ld=fd[2],Gd=fd[3],we=fd[4],Fe=ac(fd[0]);fd=Fe.align;var qf=Fe.behavior,hf=Fe.offset;Fe=Fe.index;"LAST"===Fe&&(Fe=Gd-1);Gd=dh(jd,we,ld,Mr(0,Fe,iw(Gd-1,Fe)));return"end"===fd?Gd=AA(Gd-jd.height+ld.height):"center"===fd&&(Gd=AA(Gd-jd.height/2+ld.height/2)),hf&&(Gd+=hf),{top:Gd,behavior:qf}})),Va);mc=wh(Kd(ae,Gf(function(fd){return fd.offsetBottom+
fd.bottom})),0);return Yf(Kd(Vb,Gf(function(fd){return{width:fd.visibleWidth,height:fd.visibleHeight}})),De),Ve({data:Ie,totalCount:Uc,viewportDimensions:De,itemDimensions:Oe,scrollTop:g,scrollHeight:pf,overscan:m,scrollBy:La,scrollTo:Va,scrollToIndex:tf,smoothScrollTargetReached:$a,windowViewportRect:Vb,windowScrollTo:tc,useWindowScroll:Hc,customScrollParent:Qc,windowScrollContainerState:Wb,deviation:df,scrollContainerState:lb,footerHeight:ub,headerHeight:ia,initialItemCount:Vd,gap:Bd},ec,{gridState:ae,
totalListHeight:mc},Rb,{startReached:W,endReached:I,rangeChanged:sa,propsReady:rc},b)},Qh(fw,yn,Ws,sA,Tq,tA,Pp)),pH=["placeholder"],qH=th(function(){var b=sf(function($a){return"Item "+$a}),g=sf({}),m=sf(null),I=sf("virtuoso-grid-item"),W=sf("virtuoso-grid-list"),ia=sf(kg),sa=sf("div"),La=sf(ag),Va=function($a,lb){return void 0===lb&&(lb=null),wh(Kd(g,Gf(function(ub){return ub[$a]}),ze()),lb)};return{context:m,itemContent:b,components:g,computeItemKey:ia,itemClassName:I,listClassName:W,headerFooterTag:sa,
scrollerRef:La,FooterComponent:Va("Footer"),HeaderComponent:Va("Header"),ListComponent:Va("List","div"),ItemComponent:Va("Item","div"),ScrollerComponent:Va("Scroller","div"),ScrollSeekPlaceholder:Va("ScrollSeekPlaceholder","div")}}),rH=th(function(b){function g(W,ia,sa){Yf(Kd(W,ue(I.components),Gf(function(La){var Va,$a=La[0];La=La[1];return console.warn("react-virtuoso: "+sa+" property is deprecated. Pass components."+ia+" instead."),Ve({},La,((Va={})[ia]=$a,Va))})),I.components)}var m=b[0],I=b[1];
b={item:Vg(I.itemContent,"Rename the %citem%c prop to %citemContent."),ItemContainer:Jf(),ScrollContainer:Jf(),ListContainer:Jf(),emptyComponent:Jf(),scrollSeek:Jf()};return di(b.scrollSeek,function(W){var ia=W.placeholder;W=Ml(W,pH);console.warn("react-virtuoso: scrollSeek property is deprecated. Pass scrollSeekConfiguration and specify the placeholder in components.ScrollSeekPlaceholder instead.");ia=Ve({},(0,I.components)(4),{ScrollSeekPlaceholder:ia});(0,I.components)(0,ia);(0,m.scrollSeekConfiguration)(0,
W)}),g(b.ItemContainer,"Item","ItemContainer"),g(b.ListContainer,"List","ListContainer"),g(b.ScrollContainer,"Scroller","ScrollContainer"),Ve({},m,I,b)},Qh(oH,qH)),sH=hh.memo(function(){var b=sl("gridState"),g=sl("listClassName"),m=sl("itemClassName"),I=sl("itemContent"),W=sl("computeItemKey"),ia=sl("isSeeking"),sa=Ao("scrollHeight"),La=sl("ItemComponent"),Va=sl("ListComponent"),$a=sl("ScrollSeekPlaceholder"),lb=sl("context"),ub=Ao("itemDimensions"),Rb=Ao("gap"),ec=sl("log"),Vb=ch(function(rc){sa(rc.parentElement.parentElement.scrollHeight);
var mc=rc.firstChild;mc&&ub(mc.getBoundingClientRect());Rb({row:lj("row-gap",getComputedStyle(rc).rowGap,ec),column:lj("column-gap",getComputedStyle(rc).columnGap,ec)})});return(0,bi.createElement)(Va,Ve({ref:Vb,className:g},Ig(Va,lb),{style:{paddingTop:b.offsetTop,paddingBottom:b.offsetBottom}}),b.items.map(function(rc){var mc=W(rc.index,rc.data,lb);return ia?(0,bi.createElement)($a,Ve({key:mc},Ig($a,lb),{index:rc.index,height:b.itemHeight,width:b.itemWidth})):(0,bi.createElement)(La,Ve({},Ig(La,
lb),{className:m,"data-index":rc.index,key:mc}),I(rc.index,rc.data,lb))}))}),tH=hh.memo(function(){var b=sl("HeaderComponent"),g=Ao("headerHeight"),m=sl("headerFooterTag"),I=ch(function(ia){return g(Qk(ia,"height"))}),W=sl("context");return b?(0,bi.createElement)(m,{ref:I},(0,bi.createElement)(b,Ig(b,W))):null}),uH=hh.memo(function(){var b=sl("FooterComponent"),g=Ao("footerHeight"),m=sl("headerFooterTag"),I=ch(function(ia){return g(Qk(ia,"height"))}),W=sl("context");return b?(0,bi.createElement)(m,
{ref:I},(0,bi.createElement)(b,Ig(b,W))):null}),vH=function(b){b=b.children;var g=(0,bi.useContext)(xA),m=Ao("itemDimensions"),I=Ao("viewportDimensions"),W=ch(function(ia){I(ia.getBoundingClientRect())});return hh.useEffect(function(){g&&(I({height:g.viewportHeight,width:g.viewportWidth}),m({height:g.itemHeight,width:g.itemWidth}))},[g,I,m]),hh.createElement("div",{style:Lr,ref:W},b)},wH=function(b){b=b.children;var g=(0,bi.useContext)(xA),m=Ao("windowViewportRect"),I=Ao("itemDimensions"),W=sl("customScrollParent");
W=kj(m,W);return hh.useEffect(function(){g&&(I({height:g.itemHeight,width:g.itemWidth}),m({offsetTop:0,visibleHeight:g.viewportHeight,visibleWidth:g.viewportWidth}))},[g,m,I]),hh.createElement("div",{ref:W,style:Lr},b)},jw=yl(rH,{optional:{context:"context",totalCount:"totalCount",overscan:"overscan",itemContent:"itemContent",components:"components",computeItemKey:"computeItemKey",data:"data",initialItemCount:"initialItemCount",scrollSeekConfiguration:"scrollSeekConfiguration",headerFooterTag:"headerFooterTag",
listClassName:"listClassName",itemClassName:"itemClassName",useWindowScroll:"useWindowScroll",customScrollParent:"customScrollParent",scrollerRef:"scrollerRef",item:"item",ItemContainer:"ItemContainer",ScrollContainer:"ScrollContainer",ListContainer:"ListContainer",scrollSeek:"scrollSeek"},methods:{scrollTo:"scrollTo",scrollBy:"scrollBy",scrollToIndex:"scrollToIndex"},events:{isScrolling:"isScrolling",endReached:"endReached",startReached:"startReached",rangeChanged:"rangeChanged",atBottomStateChange:"atBottomStateChange",
atTopStateChange:"atTopStateChange"}},hh.memo(function(b){b=Ve({},b);var g=sl("useWindowScroll"),m=sl("customScrollParent"),I=m||g?wH:vH;return hh.createElement(m||g?yH:xH,Ve({},b),hh.createElement(I,null,hh.createElement(tH,null),hh.createElement(sH,null),hh.createElement(uH,null)))})),Ao=jw.usePublisher,sl=jw.useEmitterValue,CA=jw.useEmitter,xH=ki({usePublisher:Ao,useEmitterValue:sl,useEmitter:CA}),yH=Ph({usePublisher:Ao,useEmitterValue:sl,useEmitter:CA}),zH=th(function(){var b=sf(function(Va){return hh.createElement("td",
null,"Item $",Va)}),g=sf(null),m=sf(null),I=sf(null),W=sf({}),ia=sf(kg),sa=sf(ag),La=function(Va,$a){return void 0===$a&&($a=null),wh(Kd(W,Gf(function(lb){return lb[Va]}),ze()),$a)};return{context:g,itemContent:b,fixedHeaderContent:m,fixedFooterContent:I,components:W,computeItemKey:ia,scrollerRef:sa,TableComponent:La("Table","table"),TableHeadComponent:La("TableHead","thead"),TableFooterComponent:La("TableFoot","tfoot"),TableBodyComponent:La("TableBody","tbody"),TableRowComponent:La("TableRow","tr"),
ScrollerComponent:La("Scroller","div"),EmptyPlaceholder:La("EmptyPlaceholder"),ScrollSeekPlaceholder:La("ScrollSeekPlaceholder"),FillerRow:La("FillerRow")}}),AH=th(function(b){return Ve({},b[0],b[1])},Qh(vA,zH)),BH=function(b){return hh.createElement("tr",null,hh.createElement("td",{style:{height:b.height}}))},CH=function(b){return hh.createElement("tr",null,hh.createElement("td",{style:{height:b.height,padding:0,border:0}}))},DH=hh.memo(function(){var b=Kj("listState"),g=Bo("sizeRanges"),m=Kj("useWindowScroll"),
I=Kj("customScrollParent"),W=Bo("windowScrollContainerState"),ia=Bo("scrollContainerState");m=I||m?W:ia;var sa=Kj("itemContent");W=Kj("trackItemSizes");I=ji(g,Kj("itemSize"),W,m,Kj("log"),void 0,I);g=I.callbackRef;var La=I.ref;I=hh.useState(0);var Va=I[0],$a=I[1];lw("deviation",function(Wb){Va!==Wb&&(La.current.style.marginTop=Wb+"px",$a(Wb))});W=Kj("EmptyPlaceholder");var lb=Kj("ScrollSeekPlaceholder")||BH;m=Kj("FillerRow")||CH;I=Kj("TableBodyComponent");var ub=Kj("TableRowComponent"),Rb=Kj("computeItemKey"),
ec=Kj("isSeeking");ia=Kj("paddingTopAddition");var Vb=Kj("firstItemIndex"),rc=Kj("statefulTotalCount"),mc=Kj("context");if(0===rc&&W)return(0,bi.createElement)(W,Ig(W,mc));W=b.offsetTop+ia+Va;ia=b.offsetBottom;W=0<W?hh.createElement(m,{height:W,key:"padding-top"}):null;m=0<ia?hh.createElement(m,{height:ia,key:"padding-bottom"}):null;b=b.items.map(function(Wb){var tc=Wb.originalIndex,Hc=Rb(tc+Vb,Wb.data,mc);return ec?(0,bi.createElement)(lb,Ve({},Ig(lb,mc),{key:Hc,index:Wb.index,height:Wb.size,type:Wb.type||
"item"})):(0,bi.createElement)(ub,Ve({},Ig(ub,mc),{key:Hc,"data-index":tc,"data-known-size":Wb.size,"data-item-index":Wb.index,style:{overflowAnchor:"none"}}),sa(Wb.index,Wb.data,mc))});return(0,bi.createElement)(I,Ve({ref:g,"data-test-id":"virtuoso-item-list"},Ig(I,mc)),[W].concat(b,[m]))}),EH=function(b){b=b.children;var g=(0,bi.useContext)(ju),m=Bo("viewportHeight"),I=Bo("fixedItemHeight"),W=ch(kh(m,function(ia){return Qk(ia,"height")}));return hh.useEffect(function(){g&&(m(g.viewportHeight),I(g.itemHeight))},
[g,m,I]),hh.createElement("div",{style:Lr,ref:W,"data-viewport-type":"element"},b)},FH=function(b){b=b.children;var g=(0,bi.useContext)(ju),m=Bo("windowViewportRect"),I=Bo("fixedItemHeight"),W=Kj("customScrollParent");W=kj(m,W);return hh.useEffect(function(){g&&(I(g.itemHeight),m({offsetTop:0,visibleHeight:g.viewportHeight,visibleWidth:100}))},[g,m,I]),hh.createElement("div",{ref:W,style:Lr,"data-viewport-type":"window"},b)},kw=yl(AH,{required:{},optional:{context:"context",followOutput:"followOutput",
firstItemIndex:"firstItemIndex",itemContent:"itemContent",fixedHeaderContent:"fixedHeaderContent",fixedFooterContent:"fixedFooterContent",overscan:"overscan",increaseViewportBy:"increaseViewportBy",totalCount:"totalCount",topItemCount:"topItemCount",initialTopMostItemIndex:"initialTopMostItemIndex",components:"components",groupCounts:"groupCounts",atBottomThreshold:"atBottomThreshold",atTopThreshold:"atTopThreshold",computeItemKey:"computeItemKey",defaultItemHeight:"defaultItemHeight",fixedItemHeight:"fixedItemHeight",
itemSize:"itemSize",scrollSeekConfiguration:"scrollSeekConfiguration",data:"data",initialItemCount:"initialItemCount",initialScrollTop:"initialScrollTop",alignToBottom:"alignToBottom",useWindowScroll:"useWindowScroll",customScrollParent:"customScrollParent",scrollerRef:"scrollerRef",logLevel:"logLevel",react18ConcurrentRendering:"react18ConcurrentRendering"},methods:{scrollToIndex:"scrollToIndex",scrollIntoView:"scrollIntoView",scrollTo:"scrollTo",scrollBy:"scrollBy"},events:{isScrolling:"isScrolling",
endReached:"endReached",startReached:"startReached",rangeChanged:"rangeChanged",atBottomStateChange:"atBottomStateChange",atTopStateChange:"atTopStateChange",totalListHeightChanged:"totalListHeightChanged",itemsRendered:"itemsRendered",groupIndices:"groupIndices"}},hh.memo(function(b){var g=Kj("useWindowScroll"),m=Kj("customScrollParent"),I=Bo("fixedHeaderHeight"),W=Bo("fixedFooterHeight"),ia=Kj("fixedHeaderContent"),sa=Kj("fixedFooterContent"),La=Kj("context");I=ch(kh(I,function(ub){return Qk(ub,
"height")}));var Va=ch(kh(W,function(ub){return Qk(ub,"height")}));W=m||g?HH:GH;g=m||g?FH:EH;m=Kj("TableComponent");var $a=Kj("TableHeadComponent"),lb=Kj("TableFooterComponent");ia=ia?hh.createElement($a,Ve({key:"TableHead",style:{zIndex:1,position:"sticky",top:0},ref:I},Ig($a,La)),ia()):null;sa=sa?hh.createElement(lb,Ve({key:"TableFoot",style:{zIndex:1,position:"sticky",bottom:0},ref:Va},Ig(lb,La)),sa()):null;return hh.createElement(W,Ve({},b),hh.createElement(g,null,hh.createElement(m,Ve({style:{borderSpacing:0}},
Ig(m,La)),[ia,hh.createElement(DH,{key:"TableBody"}),sa])))})),Bo=kw.usePublisher,Kj=kw.useEmitterValue,lw=kw.useEmitter,GH=ki({usePublisher:Bo,useEmitterValue:Kj,useEmitter:lw}),HH=Ph({usePublisher:Bo,useEmitterValue:Kj,useEmitter:lw}),DA=vb(V(22));ob=V(586);var Co=vb(V(22)),Mn=class{static insertTextFirefox(b,g){b.setRangeText(g,b.selectionStart||0,b.selectionEnd||0,"end");b.dispatchEvent(new InputEvent("input",{data:g,inputType:"insertText",isComposing:!1}))}static insert(b,g){const m=b.ownerDocument,
I=m.activeElement;I!==b&&b.focus();m.execCommand("insertText",!1,g)||Mn.insertTextFirefox(b,g);I===m.body?b.blur():I instanceof HTMLElement&&I!==b&&I.focus()}static set(b,g){b.select();Mn.insert(b,g)}static getSelection(b){const {selectionStart:g,selectionEnd:m}=b;return b.value.slice(g?g:void 0,m?m:void 0)}static wrapSelection(b,g,m){const {selectionStart:I,selectionEnd:W}=b,ia=Mn.getSelection(b);Mn.insert(b,g+ia+(null!=m?m:g));b.selectionStart=(I||0)+g.length;b.selectionEnd=(W||0)+g.length}static replace(b,
g,m){let I=0;b.value.replace(g,(...W)=>{const ia=I+W[W.length-2],sa=W[0].length;b.selectionStart=ia;b.selectionEnd=ia+sa;W="string"===typeof m?m:m(...W);Mn.insert(b,W);b.selectionStart=ia;I+=W.length-sa;return W})}static findLineEnd(b,g){const m=b.lastIndexOf("\n",g-1)+1;return"\t"!==b.charAt(m)?g:m+1}static indent(b){var g;const {selectionStart:m,selectionEnd:I,value:W}=b;var ia=W.slice(m,I);if((ia=null==(g=/\n/g.exec(ia))?void 0:g.length)&&0<ia){g=W.lastIndexOf("\n",m-1)+1;var sa=b.value.slice(g,
I-1);ia=sa.replace(/^|\n/g,"$\x26  ");sa=ia.length-sa.length;b.setSelectionRange(g,I-1);Mn.insert(b,ia);b.setSelectionRange(m+1,I+sa)}else Mn.insert(b,"  ")}static unindent(b){const {selectionStart:g,selectionEnd:m,value:I}=b;var W=I.lastIndexOf("\n",g-1)+1;const ia=Mn.findLineEnd(I,m);var sa=b.value.slice(W,ia);const La=sa.replace(/(^|\n)(\t| {1,2})/g,"$1");sa=sa.length-La.length;b.setSelectionRange(W,ia);Mn.insert(b,La);W=(W=/\t| {1,2}/.exec(I.slice(W,g)))?W[0].length:0;b.setSelectionRange(g-W,
Math.max(g-W,m-sa))}};ob=V(586);var mu=b=>b.stopPropagation(),nu=Co.memo(function({font:b,text:g,color:m,fontStyle:I,fontSize:W,fontWeight:ia,offsetX:sa=0,offsetY:La=0,scale:Va=1,isEditing:$a=!1,pointerEvents:lb=!1,onBlur:ub,onChange:Rb}){const ec=Co.useRef(null),Vb=Co.useRef(!1),rc=Co.useCallback(Uc=>{Rb(Cr.normalizeText(Uc.currentTarget.value))},[Rb]),mc=Co.useCallback(Uc=>{if("Escape"!==Uc.key)if("Tab"===Uc.key&&0===g.length)Uc.preventDefault();else{if("Meta"!==Uc.key&&!Uc.metaKey)Uc.stopPropagation();
else if("z"===Uc.key&&Uc.metaKey){Uc.shiftKey?document.execCommand("redo",!1):document.execCommand("undo",!1);Uc.stopPropagation();Uc.preventDefault();return}"Tab"===Uc.key&&(Uc.preventDefault(),Uc.shiftKey?Mn.unindent(Uc.currentTarget):Mn.indent(Uc.currentTarget),null==Rb?void 0:Rb(Cr.normalizeText(Uc.currentTarget.value)))}},[Rb]),Wb=Co.useCallback(Uc=>{$a&&(Uc.currentTarget.setSelectionRange(0,0),null==ub?void 0:ub())},[ub]),tc=Co.useCallback(Uc=>{$a&&Vb.current&&document.activeElement===Uc.currentTarget&&
Uc.currentTarget.select()},[$a]),Hc=Co.useCallback(Uc=>{$a&&Uc.stopPropagation()},[$a]);Co.useEffect(()=>{$a&&requestAnimationFrame(()=>{Vb.current=!0;const Uc=ec.current;Uc&&(Uc.focus(),Uc.select())})},[$a,ub]);const Qc=Co.useRef(null);Co.useLayoutEffect(()=>{const Uc=Qc.current;if(Uc){var Vd=oj(g,{fontFamily:"var(--ls-font-family)",fontSize:W,lineHeight:1,fontWeight:ia},4);Uc.style.transform=`scale(${Va}, ${Va}) translate(${sa}px, ${La}px)`;Uc.style.width=Vd[0]+1+"px";Uc.style.height=Vd[1]+1+"px"}},
[g,ia,W,La,sa,Va]);return(0,ob.jsx)("div",{className:"tl-text-label-wrapper",children:(0,ob.jsxs)("div",{className:"tl-text-label-inner-wrapper",ref:Qc,style:{font:b,fontStyle:I,fontSize:W,fontWeight:ia,color:m,pointerEvents:lb?"all":"none",userSelect:$a?"text":"none"},children:[$a?(0,ob.jsx)("textarea",{ref:ec,style:{font:b,color:m,fontStyle:I,fontSize:W,fontWeight:ia},className:"tl-text-label-textarea",name:"text",tabIndex:-1,autoComplete:"false",autoCapitalize:"false",autoCorrect:"false",autoSave:"false",
autoFocus:!0,placeholder:"",spellCheck:"true",wrap:"off",dir:"auto",datatype:"wysiwyg",defaultValue:g,color:m,onFocus:tc,onChange:rc,onKeyDown:mc,onBlur:Wb,onPointerDown:Hc,onContextMenu:mu,onCopy:mu,onPaste:mu,onCut:mu}):g,"​"]})})});ob=V(586);var IH={xs:10,sm:16,md:20,lg:32,xl:48,xxl:60},Nr=class extends hn{constructor(){super(...arguments);Qa(this,"canEdit",!0);Qa(this,"ReactComponent",nf(({events:b,isErasing:g,isBinding:m,isSelected:I,isEditing:W,onEditingEnd:ia})=>{const {props:{size:[sa,La],
stroke:Va,fill:$a,noFill:lb,strokeWidth:ub,strokeType:Rb,borderRadius:ec,opacity:Vb,label:rc,italic:mc,fontWeight:Wb,fontSize:tc}}=this;var Hc=rc||W?oj(rc,{fontFamily:"var(--ls-font-family)",fontSize:tc,lineHeight:1,fontWeight:Wb},4):[0,0];const Qc=Yd.mul(this.props.size,.5);Hc=Math.max(.5,Math.min(1,sa/Hc[0],La/Hc[1]));const Uc=this.getBounds(),Vd=DA.useMemo(()=>Yd.sub(Qc,Yd.toFixed([Uc.width/2,Uc.height/2])),[Uc,Hc,Qc]),ae=DA.useCallback(De=>{var Oe;null==(Oe=this.update)?void 0:Oe.call(this,{label:De})},
[rc]);return(0,ob.jsxs)("div",Ga(re({},b),{style:{width:"100%",height:"100%",overflow:"hidden"},children:[(0,ob.jsx)(nu,{font:"20px / 1 var(--ls-font-family)",text:rc,color:zf(Va,"text"),offsetX:Vd[0],offsetY:Vd[1],fontSize:tc,scale:Hc,isEditing:W,onChange:ae,onBlur:ia,fontStyle:mc?"italic":"normal",fontWeight:Wb,pointerEvents:!!rc}),(0,ob.jsxs)(bo,{opacity:g?.2:Vb,children:[m&&(0,ob.jsx)(zj,{mode:"svg",strokeWidth:ub,size:[sa,La]}),(0,ob.jsx)("rect",{className:I||!lb?"tl-hitarea-fill":"tl-hitarea-stroke",
x:ub/2,y:ub/2,rx:ec,ry:ec,width:Math.max(.01,sa-ub),height:Math.max(.01,La-ub),pointerEvents:"all"}),(0,ob.jsx)("rect",{x:ub/2,y:ub/2,rx:ec,ry:ec,width:Math.max(.01,sa-ub),height:Math.max(.01,La-ub),strokeWidth:ub,stroke:zf(Va,"stroke"),strokeDasharray:"dashed"===Rb?"8 2":void 0,fill:lb?"none":zf($a,"background")})]})]}))}));Qa(this,"setScaleLevel",b=>td(this,null,function*(){this.update({scaleLevel:b,fontSize:IH[null!=b?b:"md"]});this.onResetBounds()}));Qa(this,"ReactIndicator",nf(()=>{const {props:{size:[b,
g],borderRadius:m}}=this;return(0,ob.jsx)("g",{children:(0,ob.jsx)("rect",{width:b,height:g,rx:m,ry:m,fill:"transparent"})})}));Qa(this,"validateProps",b=>{void 0!==b.size&&(b.size[0]=Math.max(b.size[0],1),b.size[1]=Math.max(b.size[1],1));void 0!==b.borderRadius&&(b.borderRadius=Math.max(0,b.borderRadius));return Ch(this,b)})}get scaleLevel(){var b;return null!=(b=this.props.scaleLevel)?b:"md"}};Qa(Nr,"id","box");Qa(Nr,"defaultProps",{id:"box",parentId:"page",type:"box",point:[0,0],size:[100,100],
borderRadius:2,stroke:"",fill:"",noFill:!1,fontWeight:400,fontSize:20,italic:!1,strokeType:"line",strokeWidth:2,opacity:1,label:""});Lb([yg],Nr.prototype,"scaleLevel",1);Lb([cf],Nr.prototype,"setScaleLevel",2);var EA=vb(V(22));ob=V(586);var JH={xs:10,sm:16,md:20,lg:32,xl:48,xxl:60},Or=class extends nv{constructor(){super(...arguments);Qa(this,"canEdit",!0);Qa(this,"ReactComponent",nf(({isSelected:b,isErasing:g,events:m,isEditing:I,onEditingEnd:W})=>{const {size:[ia,sa],stroke:La,fill:Va,noFill:$a,
strokeWidth:lb,strokeType:ub,opacity:Rb,label:ec,italic:Vb,fontWeight:rc,fontSize:mc}=this.props;var Wb=ec||I?oj(ec,{fontFamily:"var(--ls-font-family)",fontSize:mc,lineHeight:1,fontWeight:rc},4):[0,0];const tc=Yd.mul(this.props.size,.5);Wb=Math.max(.5,Math.min(1,ia/Wb[0],sa/Wb[1]));const Hc=this.getBounds(),Qc=EA.useMemo(()=>Yd.sub(tc,Yd.toFixed([Hc.width/2,Hc.height/2])),[Hc,Wb,tc]),Uc=EA.useCallback(Vd=>{var ae;null==(ae=this.update)?void 0:ae.call(this,{label:Vd})},[ec]);return(0,ob.jsxs)("div",
Ga(re({},m),{style:{width:"100%",height:"100%",overflow:"hidden"},children:[(0,ob.jsx)(nu,{font:"18px / 1 var(--ls-font-family)",text:ec,color:zf(La,"text"),offsetX:Qc[0],offsetY:Qc[1],scale:Wb,isEditing:I,onChange:Uc,onBlur:W,fontStyle:Vb?"italic":"normal",fontSize:mc,fontWeight:rc,pointerEvents:!!ec}),(0,ob.jsxs)(bo,Ga(re({},m),{opacity:g?.2:Rb,children:[(0,ob.jsx)("ellipse",{className:b||!$a?"tl-hitarea-fill":"tl-hitarea-stroke",cx:ia/2,cy:sa/2,rx:Math.max(.01,(ia-lb)/2),ry:Math.max(.01,(sa-lb)/
2)}),(0,ob.jsx)("ellipse",{cx:ia/2,cy:sa/2,rx:Math.max(.01,(ia-lb)/2),ry:Math.max(.01,(sa-lb)/2),strokeWidth:lb,stroke:zf(La,"stroke"),strokeDasharray:"dashed"===ub?"8 2":void 0,fill:$a?"none":zf(Va,"background")})]}))]}))}));Qa(this,"setScaleLevel",b=>td(this,null,function*(){this.update({scaleLevel:b,fontSize:JH[null!=b?b:"md"]});this.onResetBounds()}));Qa(this,"ReactIndicator",nf(()=>{const {size:[b,g]}=this.props;return(0,ob.jsx)("g",{children:(0,ob.jsx)("ellipse",{cx:b/2,cy:g/2,rx:b/2,ry:g/2,
strokeWidth:2,fill:"transparent"})})}));Qa(this,"validateProps",b=>{void 0!==b.size&&(b.size[0]=Math.max(b.size[0],1),b.size[1]=Math.max(b.size[1],1));return Ch(this,b)})}get scaleLevel(){var b;return null!=(b=this.props.scaleLevel)?b:"md"}getShapeSVGJsx(b){const {size:[g,m],stroke:I,fill:W,noFill:ia,strokeWidth:sa,strokeType:La,opacity:Va}=this.props;return(0,ob.jsxs)("g",{opacity:Va,children:[(0,ob.jsx)("ellipse",{className:ia?"tl-hitarea-stroke":"tl-hitarea-fill",cx:g/2,cy:m/2,rx:Math.max(.01,
(g-sa)/2),ry:Math.max(.01,(m-sa)/2)}),(0,ob.jsx)("ellipse",{cx:g/2,cy:m/2,rx:Math.max(.01,(g-sa)/2),ry:Math.max(.01,(m-sa)/2),strokeWidth:sa,stroke:zf(I,"stroke"),strokeDasharray:"dashed"===La?"8 2":void 0,fill:ia?"none":zf(W,"background")})]})}};Qa(Or,"id","ellipse");Qa(Or,"defaultProps",{id:"ellipse",parentId:"page",type:"ellipse",point:[0,0],size:[100,100],stroke:"",fill:"",noFill:!1,fontWeight:400,fontSize:20,italic:!1,strokeType:"line",strokeWidth:2,opacity:1,label:""});Lb([yg],Or.prototype,
"scaleLevel",1);Lb([cf],Or.prototype,"setScaleLevel",2);ob=V(586);var mw=class extends Ft{constructor(){super(...arguments);Qa(this,"ReactComponent",nf(({events:b})=>{const g=this.getBounds(),m=sg(),I=m.selectedShapesArray.some(ia=>m.shapesInGroups([this]).includes(ia)),W=this.ReactIndicator;return(0,ob.jsxs)(bo,Ga(re({},b),{children:[(0,ob.jsx)("rect",{className:"tl-hitarea-fill",x:1,y:1,width:Math.max(.01,g.width-2),height:Math.max(.01,g.height-2),pointerEvents:"all"}),I&&(0,ob.jsx)("g",{stroke:"var(--color-selectedFill)",
children:(0,ob.jsx)(W,{})})]}))}));Qa(this,"ReactIndicator",nf(()=>{const b=this.getBounds();return(0,ob.jsx)("rect",{strokeDasharray:"8 2",x:-8,y:-8,rx:4,ry:4,width:b.width+16,height:b.height+16,fill:"transparent"})}))}};Qa(mw,"id","group");Qa(mw,"defaultProps",{id:"group",type:"group",parentId:"page",point:[0,0],size:[0,0],children:[]});ob=V(586);var KH={xs:1,sm:1.6,md:2,lg:3.2,xl:4.8,xxl:6},Uq=class extends nr{constructor(b={}){super(b);Qa(this,"ReactComponent",nf(({events:g,isErasing:m})=>{const {pointsPath:I,
props:{stroke:W,strokeWidth:ia,opacity:sa}}=this;return(0,ob.jsx)(bo,Ga(re({},g),{opacity:m?.2:1,children:(0,ob.jsx)("path",{d:I,strokeWidth:16*ia,stroke:zf(W,"stroke"),fill:"none",pointerEvents:"all",strokeLinejoin:"round",strokeLinecap:"round",opacity:sa})}))}));Qa(this,"setScaleLevel",g=>td(this,null,function*(){this.update({scaleLevel:g,strokeWidth:KH[null!=g?g:"md"]});this.onResetBounds()}));Qa(this,"ReactIndicator",nf(()=>{const {pointsPath:g}=this;return(0,ob.jsx)("path",{d:g,fill:"none"})}));
Qa(this,"validateProps",g=>{g=Ch(this,g);void 0!==g.strokeWidth&&(g.strokeWidth=Math.max(g.strokeWidth,1));return g});pg(this)}get pointsPath(){const {points:b}=this.props;return rq.getCurvedPathForPoints(b)}get scaleLevel(){var b;return null!=(b=this.props.scaleLevel)?b:"md"}getShapeSVGJsx(){const {pointsPath:b,props:{stroke:g,strokeWidth:m,opacity:I}}=this;return(0,ob.jsx)("path",{d:b,strokeWidth:16*m,stroke:zf(g,"stroke"),fill:"none",pointerEvents:"all",strokeLinejoin:"round",strokeLinecap:"round",
opacity:I})}};Qa(Uq,"id","highlighter");Qa(Uq,"defaultProps",{id:"highlighter",parentId:"page",type:"highlighter",point:[0,0],points:[],isComplete:!1,stroke:"",fill:"",noFill:!0,strokeType:"line",strokeWidth:2,opacity:.5});Lb([yg],Uq.prototype,"pointsPath",1);Lb([yg],Uq.prototype,"scaleLevel",1);Lb([cf],Uq.prototype,"setScaleLevel",2);var nw=vb(V(22));ob=V(586);var ow={xs:.5,sm:.8,md:1,lg:1.5,xl:2,xxl:3},Qp=class extends hn{constructor(){super(...arguments);Qa(this,"canChangeAspectRatio",!0);Qa(this,
"canFlip",!1);Qa(this,"canEdit",!0);Qa(this,"htmlAnchorRef",nw.createRef());Qa(this,"setScaleLevel",b=>td(this,null,function*(){var g;const m=Yd.mul(this.props.size,ow[null!=b?b:"md"]/ow[null!=(g=this.props.scaleLevel)?g:"md"]);this.update({scaleLevel:b});yield Oj();this.update({size:m})}));Qa(this,"onResetBounds",b=>{var g;if(this.htmlAnchorRef.current){const m=this.htmlAnchorRef.current.getBoundingClientRect(),[I,W]=Yd.div([m.width,m.height],null!=(g=null==b?void 0:b.zoom)?g:1);this.update({size:[Math.max(Math.min(I||
400,1400),10),Math.max(Math.min(W||400,1400),10)]})}return this});Qa(this,"ReactComponent",nf(({events:b,isErasing:g,isEditing:m})=>{const {props:{html:I,scaleLevel:W}}=this,ia=gl(),sa=sg(),La=sa.selectedIds.has(this.id),Va=ia||La&&!m||"select"!==sa.selectedTool.id,$a=nw.useCallback(ub=>{Va||ub.stopPropagation()},[Va]),lb=ow[null!=W?W:"md"];nw.useEffect(()=>{0===this.props.size[1]&&(this.onResetBounds({zoom:sa.viewport.camera.zoom}),sa.persist(!0))},[]);return(0,ob.jsx)(ao,Ga(re({style:{overflow:"hidden",
pointerEvents:"all",opacity:g?.2:1}},b),{children:(0,ob.jsx)("div",{onWheelCapture:$a,onPointerDown:$a,onPointerUp:$a,className:"tl-html-container",style:{pointerEvents:ia||!m&&!La?"none":"all",overflow:m?"auto":"hidden",width:`calc(100% / ${lb})`,height:`calc(100% / ${lb})`,transform:`scale(${lb})`},children:(0,ob.jsx)("div",{ref:this.htmlAnchorRef,className:"tl-html-anchor",dangerouslySetInnerHTML:{__html:I.trim()}})})}))}));Qa(this,"ReactIndicator",nf(()=>{const {props:{size:[b,g]}}=this;return(0,ob.jsx)("rect",
{width:b,height:g,fill:"transparent"})}));Qa(this,"validateProps",b=>{void 0!==b.size&&(b.size[0]=Math.max(b.size[0],1),b.size[1]=Math.max(b.size[1],1));return Ch(this,b)})}get scaleLevel(){var b;return null!=(b=this.props.scaleLevel)?b:"md"}};Qa(Qp,"id","html");Qa(Qp,"defaultProps",{id:"html",type:"html",parentId:"page",point:[0,0],size:[600,0],html:""});Lb([yg],Qp.prototype,"scaleLevel",1);Lb([cf],Qp.prototype,"setScaleLevel",2);var FA=vb(V(22));ob=V(586);var Vq=class extends hn{constructor(){super(...arguments);
Qa(this,"frameRef",FA.createRef());Qa(this,"canEdit",!0);Qa(this,"onIFrameSourceChange",b=>{this.update({url:b})});Qa(this,"reload",()=>{var b,g;this.frameRef.current&&(this.frameRef.current.src=null==(g=null==(b=this.frameRef)?void 0:b.current)?void 0:g.src)});Qa(this,"ReactComponent",nf(({events:b,isErasing:g,isEditing:m})=>{FA.useRef(null);return(0,ob.jsx)(ao,Ga(re({style:{overflow:"hidden",pointerEvents:"all",opacity:g?.2:1}},b),{children:(0,ob.jsx)("div",{className:"tl-iframe-container",style:{pointerEvents:m?
"all":"none",userSelect:"none"},children:this.props.url&&(0,ob.jsx)("div",{style:{overflow:"hidden",position:"relative",height:"100%"},children:(0,ob.jsx)("iframe",{ref:this.frameRef,className:"absolute inset-0 w-full h-full m-0",width:"100%",height:"100%",src:`${this.props.url}`,frameBorder:"0",sandbox:"allow-scripts allow-same-origin"})})})}))}));Qa(this,"ReactIndicator",nf(()=>{const {props:{size:[b,g]}}=this;return(0,ob.jsx)("rect",{width:b,height:g,fill:"transparent",rx:8,ry:8})}))}};Qa(Vq,"id",
"iframe");Qa(Vq,"defaultProps",{id:"iframe",type:"iframe",parentId:"page",point:[0,0],size:[853,480],url:""});Lb([cf],Vq.prototype,"onIFrameSourceChange",2);Lb([cf],Vq.prototype,"reload",2);var LH=vb(V(22));ob=V(586);var ou=class extends ov{constructor(){super(...arguments);Qa(this,"ReactComponent",nf(({events:b,isErasing:g,isBinding:m,asset:I})=>{const {props:{opacity:W,objectFit:ia,clipping:sa,size:[La,Va]}}=this,[$a,lb,ub,Rb]=Array.isArray(sa)?sa:[sa,sa,sa,sa],{handlers:ec}=LH.useContext(nn);return(0,ob.jsxs)(ao,
Ga(re({},b),{opacity:g?.2:W,children:[m&&(0,ob.jsx)(zj,{mode:"html",strokeWidth:4,size:[La,Va]}),(0,ob.jsx)("div",{"data-asset-loaded":!!I,className:"tl-image-shape-container",children:I?(0,ob.jsx)("img",{src:ec?ec.makeAssetUrl(I.src):I.src,draggable:!1,style:{position:"relative",top:-$a,left:-Rb,width:La+(Rb-lb),height:Va+($a-ub),objectFit:ia}}):"Asset is missing"})]}))}));Qa(this,"ReactIndicator",nf(()=>{const {props:{size:[b,g]}}=this;return(0,ob.jsx)("rect",{width:b,height:g,fill:"transparent"})}))}getShapeSVGJsx({assets:b}){var g,
m;const I=this.getBounds(),{assetId:W,clipping:ia}=this.props;if(b=b.find(sa=>sa.id===W)){Array.isArray(ia);const sa=null==(m=null==(g=window.logseq)?void 0:g.api)?void 0:m.make_asset_url;return(0,ob.jsx)("image",{width:I.width,height:I.height,href:sa?sa(b.src):b.src})}return super.getShapeSVGJsx({})}};Qa(ou,"id","image");Qa(ou,"defaultProps",{id:"image1",parentId:"page",type:"image",point:[0,0],size:[100,100],opacity:1,assetId:"",clipping:0,objectFit:"fill",isAspectRatioLocked:!0});var pw=vb(V(22)),
MH=vb(V(22));ob=V(586);ob=V(586);var GA={xs:10,sm:16,md:20,lg:32,xl:48,xxl:60},NH=MH.memo(function({style:b,start:g,end:m,decorationStart:I,decorationEnd:W,scaleLevel:ia}){const sa=Yd.dist(g,m);if(2>sa)return null;const {strokeWidth:La}=b,Va=1+La*GA[null!=ia?ia:"md"]/10,$a="M"+Yd.toFixed(g)+"L"+Yd.toFixed(m);ia=Math.min(sa/3,La*GA[null!=ia?ia:"md"]);I=I?hm(g,m,ia):null;W=W?hm(m,g,ia):null;return(0,ob.jsxs)(ob.Fragment,{children:[(0,ob.jsx)("path",{className:"tl-stroke-hitarea",d:$a}),(0,ob.jsx)("path",
{d:$a,strokeWidth:Va,stroke:b.stroke,strokeLinecap:"round",strokeLinejoin:"round",strokeDasharray:"dashed"===b.strokeType?"8 4":void 0,pointerEvents:"stroke"}),I&&(0,ob.jsx)(Ek,{left:I.left,middle:g,right:I.right,stroke:b.stroke,strokeWidth:Va}),W&&(0,ob.jsx)(Ek,{left:W.left,middle:m,right:W.right,stroke:b.stroke,strokeWidth:Va})]})});ob=V(586);ob=V(586);var OH={xs:10,sm:16,md:20,lg:32,xl:48,xxl:60},Pr=class extends ys{constructor(){super(...arguments);Qa(this,"hideSelection",!0);Qa(this,"canEdit",
!0);Qa(this,"ReactComponent",nf(({events:b,isErasing:g,isEditing:m,onEditingEnd:I})=>{const {stroke:W,handles:{start:ia,end:sa},opacity:La,label:Va,italic:$a,fontWeight:lb,fontSize:ub,id:Rb}=this.props,ec=Va||m?oj(Va,{fontFamily:"var(--ls-font-family)",fontSize:ub,lineHeight:1,fontWeight:lb},6):[0,0],Vb=Yd.med(ia.point,sa.point);var rc=Yd.dist(ia.point,sa.point);rc=Math.max(.5,Math.min(1,Math.max(rc/(ec[1]+128),rc/(ec[0]+128))));const mc=this.getBounds(),Wb=pw.useMemo(()=>Yd.sub(Vb,Yd.toFixed([mc.width/
2,mc.height/2])),[mc,rc,Vb]),tc=pw.useCallback(Hc=>{var Qc;null==(Qc=this.update)?void 0:Qc.call(this,{label:Hc})},[Va]);return(0,ob.jsxs)("div",Ga(re({},b),{style:{width:"100%",height:"100%",overflow:"hidden"},children:[(0,ob.jsx)(nu,{font:"20px / 1 var(--ls-font-family)",text:Va,fontSize:ub,color:zf(W,"text"),offsetX:Wb[0],offsetY:Wb[1],scale:rc,isEditing:m,onChange:tc,onBlur:I,fontStyle:$a?"italic":"normal",fontWeight:lb,pointerEvents:!!Va}),(0,ob.jsxs)(bo,{opacity:g?.2:La,id:Rb+"_svg",children:[(0,ob.jsx)(jh,
{id:Rb,bounds:mc,labelSize:ec,offset:Wb,scale:rc}),(0,ob.jsx)("g",{pointerEvents:"none",mask:Va||m?`url(#${Rb}_clip)`:"",children:this.getShapeSVGJsx({preview:!1})})]})]}))}));Qa(this,"setScaleLevel",b=>td(this,null,function*(){this.update({scaleLevel:b,fontSize:OH[null!=b?b:"md"]});this.onResetBounds()}));Qa(this,"ReactIndicator",nf(({isEditing:b})=>{const {id:g,decorations:m,label:I,strokeWidth:W,fontSize:ia,fontWeight:sa,handles:{start:La,end:Va}}=this.props,$a=this.getBounds(),lb=I||b?oj(I,{fontFamily:"var(--ls-font-family)",
fontSize:ia,lineHeight:1,fontWeight:sa},6):[0,0],ub=Yd.med(La.point,Va.point);var Rb=Yd.dist(La.point,Va.point);Rb=Math.max(.5,Math.min(1,Math.max(Rb/(lb[1]+128),Rb/(lb[0]+128))));const ec=pw.useMemo(()=>Yd.sub(ub,Yd.toFixed([$a.width/2,$a.height/2])),[$a,Rb,ub]);return(0,ob.jsxs)("g",{children:[(0,ob.jsx)("path",{mask:I?`url(#${g}_clip)`:"",d:qn({strokeWidth:W},La.point,Va.point,null==m?void 0:m.start,null==m?void 0:m.end)}),I&&!b&&(0,ob.jsx)("rect",{x:$a.width/2-lb[0]/2*Rb+ec[0],y:$a.height/2-lb[1]/
2*Rb+ec[1],width:lb[0]*Rb,height:lb[1]*Rb,rx:4*Rb,ry:4*Rb,fill:"transparent"})]})}));Qa(this,"validateProps",b=>Ch(this,b))}get scaleLevel(){var b;return null!=(b=this.props.scaleLevel)?b:"md"}getShapeSVGJsx({preview:b}){const {stroke:g,fill:m,strokeWidth:I,strokeType:W,decorations:ia,label:sa,scaleLevel:La,handles:{start:Va,end:$a}}=this.props,lb=Yd.med(Va.point,$a.point);return(0,ob.jsxs)(ob.Fragment,{children:[(0,ob.jsx)(NH,{style:{stroke:zf(g,"text"),fill:m,strokeWidth:I,strokeType:W},scaleLevel:La,
start:Va.point,end:$a.point,decorationStart:null==ia?void 0:ia.start,decorationEnd:null==ia?void 0:ia.end}),b&&(0,ob.jsx)(ob.Fragment,{children:(0,ob.jsx)("text",{style:{transformOrigin:"top left"},fontFamily:"Inter",fontSize:20,transform:`translate(${lb[0]}, ${lb[1]})`,textAnchor:"middle",fill:zf(g,"text"),stroke:zf(g,"text"),children:sa})})]})}};Qa(Pr,"id","line");Qa(Pr,"defaultProps",{id:"line",parentId:"page",type:"line",point:[0,0],handles:{start:{id:"start",canBind:!0,point:[0,0]},end:{id:"end",
canBind:!0,point:[1,1]}},stroke:"",fill:"",noFill:!0,fontWeight:400,fontSize:20,italic:!1,strokeType:"line",strokeWidth:1,opacity:1,decorations:{end:"arrow"},label:""});Lb([yg],Pr.prototype,"scaleLevel",1);Lb([cf],Pr.prototype,"setScaleLevel",2);var Nn=vb(V(22));ob=V(586);var Xs={xs:.5,sm:.8,md:1,lg:1.5,xl:2,xxl:3},PH=nf(({type:b,fill:g,opacity:m,children:I})=>{g="var(--ls-secondary-background-color)"!==g?zf(g,"background"):"var(--ls-tertiary-background-color)";return(0,ob.jsxs)("div",{className:`tl-logseq-portal-header tl-logseq-portal-header-${"P"===
b?"page":"block"}`,children:[(0,ob.jsx)("div",{className:"absolute inset-0 tl-logseq-portal-header-bg",style:{opacity:m,background:"P"===b?g:`linear-gradient(0deg, transparent, ${g}`}}),(0,ob.jsx)("div",{className:"relative",children:I})]})}),tl=class extends hn{constructor(b={}){var g;super(b);Qa(this,"hideRotateHandle",!0);Qa(this,"canChangeAspectRatio",!0);Qa(this,"canFlip",!0);Qa(this,"canEdit",!0);Qa(this,"persist",null);Qa(this,"initialHeightCalculated",!0);Qa(this,"getInnerHeight",null);Qa(this,
"toggleCollapsed",()=>td(this,null,function*(){var m;const I=!this.collapsed;"B"===this.props.blockType?(this.update({compact:I}),this.canResize[1]=!I,I||(yield Oj(),this.onResetBounds()),null==(m=this.persist)?void 0:m.call(this)):(m=this.props.size[1],this.canResize[1]=!I,console.log(I,I?this.getHeaderHeight():this.props.collapsedHeight,this.getHeaderHeight(),this.props.collapsedHeight),this.update({isAutoResizing:!I,collapsed:I,size:[this.props.size[0],I?this.getHeaderHeight():this.props.collapsedHeight],
collapsedHeight:I?m:this.props.collapsedHeight}))}));Qa(this,"setScaleLevel",m=>td(this,null,function*(){var I;const W=Yd.mul(this.props.size,Xs[null!=m?m:"md"]/Xs[null!=(I=this.props.scaleLevel)?I:"md"]);this.update({scaleLevel:m});yield Oj();this.update({size:W})}));Qa(this,"onResetBounds",m=>{m=this.getAutoResizeHeight();null!==m&&1<Math.abs(m-this.props.size[1])&&(this.update({size:[this.props.size[0],m]}),this.initialHeightCalculated=!0);return this});Qa(this,"onResize",(m,I)=>{var W;const {bounds:ia,
rotation:sa,scale:[La,Va]}=I;m=[...this.scale];0>La&&(m[0]*=-1);0>Va&&(m[1]*=-1);I=ia.height;this.props.isAutoResizing&&(I=null!=(W=this.getAutoResizeHeight())?W:I);return this.update({point:[ia.minX,ia.minY],size:[Math.max(1,ia.width),Math.max(1,I)],scale:m,rotation:sa})});Qa(this,"PortalComponent",nf(({})=>{const {props:{pageId:m,fill:I,opacity:W}}=this,{renderers:ia}=Nn.useContext(nn),sa=sg(),La=Nn.useRef(null),[,Va]=this.useComponentSize(La,this.props.compact?".tl-logseq-cp-container \x3e .single-block":
".tl-logseq-cp-container \x3e .page");if(null==ia||!ia.Page)return null;const {Page:$a,Block:lb}=ia;Nn.useEffect(()=>{var ec,Vb;if(this.props.isAutoResizing){const rc=(null!=(Vb=null==(ec=this.getInnerHeight)?void 0:ec.call(this))?Vb:Va)+this.getHeaderHeight();Va&&1<Math.abs(rc-this.props.size[1])&&(this.update({size:[this.props.size[0],rc]}),sa.persist(!0))}},[Va,this.props.isAutoResizing]);const [ub,Rb]=Nn.useState(!1);Nn.useEffect(()=>{setTimeout(function(){Rb(!0)})},[]);return(0,ob.jsxs)(ob.Fragment,
{children:[(0,ob.jsx)("div",{className:"absolute inset-0 tl-logseq-cp-container-bg",style:{textRendering:.5>sa.viewport.camera.zoom?"optimizeSpeed":"auto",background:I&&"var(--ls-secondary-background-color)"!==I?`var(--ls-highlight-color-${I})`:"var(--ls-secondary-background-color)",opacity:W}}),(0,ob.jsx)("div",{ref:La,className:"relative tl-logseq-cp-container",style:{overflow:this.props.isAutoResizing?"visible":"auto"},children:(ub||!this.initialHeightCalculated)&&("B"===this.props.blockType&&
this.props.compact?(0,ob.jsx)(lb,{blockId:m}):(0,ob.jsx)($a,{pageName:m}))})]})}));Qa(this,"ReactComponent",nf(m=>{var I;const {events:W,isErasing:ia,isEditing:sa,isBinding:La}=m,{props:{opacity:Va,pageId:$a,fill:lb,scaleLevel:ub,strokeWidth:Rb,size:ec}}=this,Vb=sg(),{renderers:rc,handlers:mc}=Nn.useContext(nn);this.persist=()=>Vb.persist();const Wb=gl(),tc=Vb.selectedIds.has(this.id)&&1===Vb.selectedIds.size,Hc=Vb.isIn("logseq-portal.creating")&&!$a,Qc=(Wb||tc&&!sa||"select"!==Vb.selectedTool.id)&&
!Hc,Uc=Nn.useCallback(fd=>{Qc||fd.stopPropagation()},[Qc]),Vd=1===Vb.selectedShapesArray.length&&Vb.selectedShapesArray.some(fd=>"logseq-portal"===fd.type&&fd.props.id!==this.props.id&&$a&&fd.props.pageId===$a),ae=Xs[null!=ub?ub:"md"];Nn.useEffect(()=>this.props.collapsed&&sa?(this.update({size:[this.props.size[0],this.props.collapsedHeight]}),()=>{this.update({size:[this.props.size[0],this.getHeaderHeight()]})}):()=>{},[sa,this.props.collapsed]);Nn.useEffect(()=>{if(Hc){const fd=[Vb.viewport.bounds.width,
Vb.viewport.bounds.height],jd=Vb.viewport.getScreenPoint([this.bounds.minX,this.bounds.minY]);(jd[0]>fd[0]-400||jd[1]>fd[1]-240||1.5<Vb.viewport.camera.zoom||.5>Vb.viewport.camera.zoom)&&Vb.viewport.zoomToBounds(Ga(re({},this.bounds),{minY:this.bounds.maxY+25}))}},[Vb.viewport.bounds.height.toFixed(2)]);const De=Nn.useCallback(fd=>{this.initialHeightCalculated=!1;const jd=Wh(fd)?"B":"P";this.update({pageId:fd,size:[400,320],blockType:jd,compact:"B"===jd});Vb.selectTool("select");Vb.history.resume();
Vb.history.persist()},[]),Oe=this.PortalComponent;var tf=Nn.useMemo(()=>{var fd;if($a&&"B"===this.props.blockType)return null==(fd=null==mc?void 0:mc.queryBlockByUUID($a))?void 0:fd.content},[null==mc?void 0:mc.queryBlockByUUID,$a]);tf="B"===this.props.blockType&&"string"!==typeof tf;const pf=(!this.props.collapsed||sa)&&!tf;if(null==rc||!rc.Page)return null;const {Breadcrumb:df,PageName:Ie}=rc,Bd={width:`calc(100% / ${ae})`,height:`calc(100% / ${ae})`,opacity:ia?.2:1};1!==ae&&(Bd.transform=`scale(${ae})`);
return(0,ob.jsxs)(ao,Ga(re({style:{pointerEvents:"all"}},W),{children:[La&&(0,ob.jsx)(zj,{mode:"html",strokeWidth:Rb,size:ec}),(0,ob.jsx)("div",{"data-inner-events":!Qc,onWheelCapture:Uc,onPointerDown:Uc,onPointerUp:Uc,style:{width:"100%",height:"100%",pointerEvents:Wb||!sa&&!tc?"none":"all"},children:Hc?(0,ob.jsx)(VA,{onChange:De,onAddBlock:fd=>{setTimeout(()=>{var jd,ld,Gd;Vb.api.editShape(this);null==(Gd=null==(ld=null==(jd=window.logseq)?void 0:jd.api)?void 0:ld.edit_block)?void 0:Gd.call(ld,
fd)})},placeholder:"Create or search your graph..."}):(0,ob.jsxs)(ob.Fragment,{children:[(0,ob.jsxs)("div",{className:"tl-logseq-portal-container","data-collapsed":this.collapsed,"data-page-id":$a,"data-portal-selected":Vd,"data-editing":sa,style:Bd,children:[!this.props.compact&&!tf&&(0,ob.jsx)(PH,{type:null!=(I=this.props.blockType)?I:"P",fill:lb,opacity:Va,children:"P"===this.props.blockType?(0,ob.jsx)(Ie,{pageName:$a}):(0,ob.jsx)(df,{blockId:$a})}),tf&&(0,ob.jsx)("div",{className:"tl-target-not-found",
children:"Target not found"}),pf&&(0,ob.jsx)(Oe,re({},m))]}),(0,ob.jsx)(uz,{active:!!this.collapsed,style:{opacity:tc?1:0},icon:"B"===this.props.blockType?"block":"page",onClick:this.toggleCollapsed,otherIcon:"whiteboard-element"})]})})]}))}));Qa(this,"ReactIndicator",nf(()=>{const m=this.getBounds();return(0,ob.jsx)("rect",{width:m.width,height:m.height,fill:"transparent",rx:8,ry:8})}));Qa(this,"validateProps",m=>{var I;if(void 0!==m.size){const W=Xs[null!=(I=this.props.scaleLevel)?I:"md"];m.size[0]=
Math.max(m.size[0],60*W);m.size[1]=Math.max(m.size[1],40*W)}return Ch(this,m)});pg(this);b.collapsed&&Object.assign(this.canResize,[!0,!1]);0===(null==(g=b.size)?void 0:g[1])&&(this.initialHeightCalculated=!1)}static isPageOrBlock(b){return b?/^\(\(.*\)\)$/.test(b)&&40===b.length?"B":"P":!1}get collapsed(){return"B"===this.props.blockType?this.props.compact:this.props.collapsed}get scaleLevel(){var b;return null!=(b=this.props.scaleLevel)?b:"md"}useComponentSize(b,g=""){const [m,I]=Nn.useState([0,
0]),W=sg();Nn.useEffect(()=>{if(null==b?0:b.current){const ia=g?b.current.querySelector(g):b.current;if(ia){const sa=()=>{const {width:Va,height:$a}=ia.getBoundingClientRect(),lb=Yd.div([Va,$a],W.viewport.camera.zoom);I(lb);return lb};sa();this.getInnerHeight=()=>sa()[1];const La=new ResizeObserver(()=>{sa()});La.observe(ia);return()=>{La.disconnect()}}}return()=>{}},[b,g]);return m}getHeaderHeight(){var b;const g=Xs[null!=(b=this.props.scaleLevel)?b:"md"];return this.props.compact?0:40*g}getAutoResizeHeight(){return this.getInnerHeight?
this.getHeaderHeight()+this.getInnerHeight():null}getShapeSVGJsx({}){var b,g,m;const I=this.getBounds();return(0,ob.jsxs)(ob.Fragment,{children:[(0,ob.jsx)("rect",{fill:this.props.fill&&"var(--ls-secondary-background-color)"!==this.props.fill?`var(--ls-highlight-color-${this.props.fill})`:"var(--ls-secondary-background-color)",stroke:zf(this.props.fill,"background"),strokeWidth:null!=(b=this.props.strokeWidth)?b:2,fillOpacity:null!=(g=this.props.opacity)?g:.2,width:I.width,rx:8,ry:8,height:I.height}),
!this.props.compact&&(0,ob.jsx)("rect",{fill:this.props.fill&&"var(--ls-secondary-background-color)"!==this.props.fill?zf(this.props.fill,"background"):"var(--ls-tertiary-background-color)",fillOpacity:null!=(m=this.props.opacity)?m:.2,x:1,y:1,width:I.width-2,height:38,rx:8,ry:8}),(0,ob.jsx)("text",{style:{transformOrigin:"top left"},transform:`translate(${I.width/2}, ${10+I.height/2})`,textAnchor:"middle",fontFamily:"var(--ls-font-family)",fontSize:"32",fill:"var(--ls-secondary-text-color)",stroke:"var(--ls-secondary-text-color)",
children:"P"===this.props.blockType?this.props.pageId:""})]})}};Qa(tl,"id","logseq-portal");Qa(tl,"defaultSearchQuery","");Qa(tl,"defaultSearchFilter",null);Qa(tl,"defaultProps",{id:"logseq-portal",type:"logseq-portal",parentId:"page",point:[0,0],size:[400,50],collapsedHeight:0,stroke:"",fill:"",noFill:!1,borderRadius:8,strokeWidth:2,strokeType:"line",opacity:1,pageId:"",collapsed:!1,compact:!1,scaleLevel:"md",isAutoResizing:!0});Lb([yg],tl.prototype,"collapsed",1);Lb([cf],tl.prototype,"toggleCollapsed",
2);Lb([yg],tl.prototype,"scaleLevel",1);Lb([cf],tl.prototype,"setScaleLevel",2);var {min:Qr,PI:QH}=Math,Ys=QH+1E-4;ob=V(586);var RH={xs:1,sm:1.6,md:2,lg:3.2,xl:4.8,xxl:6},SH={easing:b=>Math.sin(b*Math.PI/2),simulatePressure:!0},TH={easing:b=>b*b,simulatePressure:!1},Wq=class extends nr{constructor(b={}){super(b);Qa(this,"ReactComponent",nf(({events:g,isErasing:m})=>{const {props:{opacity:I}}=this;return(0,ob.jsx)(bo,Ga(re({},g),{opacity:m?.2:I,children:this.getShapeSVGJsx()}))}));Qa(this,"setScaleLevel",
g=>td(this,null,function*(){this.update({scaleLevel:g,strokeWidth:RH[null!=g?g:"md"]});this.onResetBounds()}));Qa(this,"ReactIndicator",nf(()=>{const {pointsPath:g}=this;return(0,ob.jsx)("path",{d:g})}));Qa(this,"validateProps",g=>{g=Ch(this,g);void 0!==g.strokeWidth&&(g.strokeWidth=Math.max(g.strokeWidth,1));return g});pg(this)}get pointsPath(){var b=this.props;if(2>b.points.length)var g="";else g=Ga(re({size:1+1.5*b.strokeWidth,thinning:.65,streamline:.65,smoothing:.65},.5===b.points[1][2]?SH:TH),
{last:b.isComplete}),b=ko(b.points,g),g=rq.getSvgPathFromStroke(Zo(b,g));return g}get scaleLevel(){var b;return null!=(b=this.props.scaleLevel)?b:"md"}getShapeSVGJsx(){const {pointsPath:b,props:{stroke:g,strokeWidth:m,strokeType:I}}=this;return(0,ob.jsx)("path",{pointerEvents:"all",d:b,strokeWidth:m/2,strokeLinejoin:"round",strokeLinecap:"round",stroke:zf(g,"text"),fill:zf(g,"text"),strokeDasharray:"dashed"===I?"12 4":void 0})}};Qa(Wq,"id","pencil");Qa(Wq,"defaultProps",{id:"pencil",parentId:"page",
type:"pencil",point:[0,0],points:[],isComplete:!1,stroke:"",fill:"",noFill:!0,strokeType:"line",strokeWidth:2,opacity:1});Lb([yg],Wq.prototype,"pointsPath",1);Lb([yg],Wq.prototype,"scaleLevel",1);Lb([cf],Wq.prototype,"setScaleLevel",2);var HA=vb(V(22));ob=V(586);var UH={xs:10,sm:16,md:20,lg:32,xl:48,xxl:60},Rr=class extends zp{constructor(){super(...arguments);Qa(this,"canEdit",!0);Qa(this,"ReactComponent",nf(({events:b,isErasing:g,isSelected:m,isEditing:I,onEditingEnd:W})=>{const {offset:[ia,sa],
props:{stroke:La,fill:Va,noFill:$a,strokeWidth:lb,opacity:ub,strokeType:Rb,label:ec,italic:Vb,fontWeight:rc,fontSize:mc}}=this,Wb=this.getVertices(lb/2).join();var tc=ec||I?oj(ec,{fontFamily:"var(--ls-font-family)",fontSize:mc,lineHeight:1,fontWeight:rc},4):[0,0];const Hc=[this.props.size[0]/2,2*this.props.size[1]/3];tc=Math.max(.5,Math.min(1,this.props.size[0]/(2*tc[0]),this.props.size[1]/(2*tc[1])));const Qc=this.getBounds(),Uc=HA.useMemo(()=>Yd.sub(Hc,Yd.toFixed([Qc.width/2,Qc.height/2])),[Qc,
tc,Hc]),Vd=HA.useCallback(ae=>{var De;null==(De=this.update)?void 0:De.call(this,{label:ae})},[ec]);return(0,ob.jsxs)("div",Ga(re({},b),{style:{width:"100%",height:"100%",overflow:"hidden"},children:[(0,ob.jsx)(nu,{font:"20px / 1 var(--ls-font-family)",text:ec,fontSize:mc,color:zf(La,"text"),offsetX:Uc[0],offsetY:Uc[1]/tc,scale:tc,isEditing:I,onChange:Vd,onBlur:W,fontStyle:Vb?"italic":"normal",fontWeight:rc,pointerEvents:!!ec}),(0,ob.jsx)(bo,{opacity:g?.2:ub,children:(0,ob.jsxs)("g",{transform:`translate(${ia}, ${sa})`,
children:[(0,ob.jsx)("polygon",{className:m||!$a?"tl-hitarea-fill":"tl-hitarea-stroke",points:Wb}),(0,ob.jsx)("polygon",{points:Wb,stroke:zf(La,"stroke"),fill:$a?"none":zf(Va,"background"),strokeWidth:lb,rx:2,ry:2,strokeLinejoin:"round",strokeDasharray:"dashed"===Rb?"8 2":void 0})]})})]}))}));Qa(this,"setScaleLevel",b=>td(this,null,function*(){this.update({scaleLevel:b,fontSize:UH[null!=b?b:"md"]});this.onResetBounds()}));Qa(this,"ReactIndicator",nf(()=>{const {offset:[b,g],props:{strokeWidth:m}}=
this;return(0,ob.jsx)("g",{children:(0,ob.jsx)("polygon",{transform:`translate(${b}, ${g})`,points:this.getVertices(m/2).join()})})}));Qa(this,"validateProps",b=>{void 0!==b.sides&&(b.sides=Math.max(b.sides,3));return Ch(this,b)})}get scaleLevel(){var b;return null!=(b=this.props.scaleLevel)?b:"md"}getShapeSVGJsx(b){const {offset:[g,m],props:{stroke:I,fill:W,noFill:ia,strokeWidth:sa,opacity:La,strokeType:Va}}=this;b=this.getVertices(sa/2).join();return(0,ob.jsxs)("g",{transform:`translate(${g}, ${m})`,
opacity:La,children:[(0,ob.jsx)("polygon",{className:ia?"tl-hitarea-stroke":"tl-hitarea-fill",points:b}),(0,ob.jsx)("polygon",{points:b,stroke:zf(I,"stroke"),fill:ia?"none":zf(W,"background"),strokeWidth:sa,rx:2,ry:2,strokeLinejoin:"round",strokeDasharray:"dashed"===Va?"8 2":void 0})]})}};Qa(Rr,"id","polygon");Qa(Rr,"defaultProps",{id:"polygon",parentId:"page",type:"polygon",point:[0,0],size:[100,100],sides:3,ratio:1,isFlippedY:!1,stroke:"",fill:"",fontWeight:400,fontSize:20,italic:!1,noFill:!1,strokeType:"line",
strokeWidth:2,opacity:1,label:""});Lb([yg],Rr.prototype,"scaleLevel",1);Lb([cf],Rr.prototype,"setScaleLevel",2);var Wo=vb(V(22));ob=V(586);var VH={xs:10,sm:16,md:20,lg:32,xl:48,xxl:60},Sr=class extends kv{constructor(){super(...arguments);Qa(this,"ReactComponent",nf(({events:b,isErasing:g,isEditing:m,onEditingEnd:I})=>{const {props:{opacity:W,fontFamily:ia,fontSize:sa,fontWeight:La,italic:Va,lineHeight:$a,text:lb,stroke:ub,padding:Rb}}=this,ec=Wo.useRef(null),Vb=Wo.useRef(!1),rc=Wo.useRef(null),mc=
Wo.useCallback(Uc=>{const {isSizeLocked:Vd}=this.props;Uc=Cr.normalizeText(Uc.currentTarget.value);Vd?this.update({text:Uc,size:this.getAutoSizedBoundingBox({text:Uc})}):this.update({text:Uc})},[]),Wb=Wo.useCallback(Uc=>{if("Escape"!==Uc.key)if("Tab"===Uc.key&&0===lb.length)Uc.preventDefault();else{if("Meta"!==Uc.key&&!Uc.metaKey)Uc.stopPropagation();else if("z"===Uc.key&&Uc.metaKey){Uc.shiftKey?document.execCommand("redo",!1):document.execCommand("undo",!1);Uc.stopPropagation();Uc.preventDefault();
return}"Tab"===Uc.key&&(Uc.preventDefault(),Uc.shiftKey?Mn.unindent(Uc.currentTarget):Mn.indent(Uc.currentTarget),this.update({text:Cr.normalizeText(Uc.currentTarget.value)}))}},[]),tc=Wo.useCallback(Uc=>{m&&(Uc.currentTarget.setSelectionRange(0,0),null==I?void 0:I())},[I]),Hc=Wo.useCallback(Uc=>{m&&Vb.current&&document.activeElement===Uc.currentTarget&&Uc.currentTarget.select()},[m]),Qc=Wo.useCallback(Uc=>{m&&Uc.stopPropagation()},[m]);Wo.useEffect(()=>{m?requestAnimationFrame(()=>{Vb.current=!0;
const Uc=ec.current;Uc&&(Uc.focus(),Uc.select())}):null==I?void 0:I()},[m,I]);Wo.useLayoutEffect(()=>{if(0===this.props.size[0]||0===this.props.size[1])this.onResetBounds()},[]);return(0,ob.jsx)(ao,Ga(re({},b),{opacity:g?.2:W,children:(0,ob.jsx)("div",{ref:rc,className:"tl-text-shape-wrapper","data-hastext":!!lb,"data-isediting":m,style:{fontFamily:ia,fontStyle:Va?"italic":"normal",fontSize:sa,fontWeight:La,padding:Rb,lineHeight:$a,color:zf(ub,"text")},children:m?(0,ob.jsx)("textarea",{ref:ec,className:"tl-text-shape-input",
name:"text",tabIndex:-1,autoComplete:"false",autoCapitalize:"false",autoCorrect:"false",autoSave:"false",placeholder:"",spellCheck:"true",wrap:"off",dir:"auto",datatype:"wysiwyg",defaultValue:lb,onFocus:Hc,onChange:mc,onKeyDown:Wb,onBlur:tc,onPointerDown:Qc}):(0,ob.jsxs)(ob.Fragment,{children:[lb,"​"]})})}))}));Qa(this,"setScaleLevel",b=>td(this,null,function*(){this.update({scaleLevel:b,fontSize:VH[null!=b?b:"md"]});this.onResetBounds()}));Qa(this,"ReactIndicator",nf(({isEditing:b})=>{const {props:{borderRadius:g},
bounds:m}=this;return b?null:(0,ob.jsx)("rect",{width:m.width,height:m.height,rx:g,ry:g,fill:"transparent"})}));Qa(this,"validateProps",b=>Ch(this,b));Qa(this,"getBounds",()=>{const [b,g]=this.props.point,[m,I]=this.props.size;return{minX:b,minY:g,maxX:b+m,maxY:g+I,width:m,height:I}});Qa(this,"onResizeStart",({isSingle:b})=>{var g;if(!b)return this;this.scale=[...(null!=(g=this.props.scale)?g:[1,1])];return this.update({isSizeLocked:!1})});Qa(this,"onResetBounds",()=>{this.update({size:this.getAutoSizedBoundingBox(),
isSizeLocked:!0});return this})}get scaleLevel(){var b;return null!=(b=this.props.scaleLevel)?b:"md"}getAutoSizedBoundingBox(b={}){const {text:g=this.props.text,fontFamily:m=this.props.fontFamily,fontSize:I=this.props.fontSize,fontWeight:W=this.props.fontWeight,lineHeight:ia=this.props.lineHeight,padding:sa=this.props.padding}=b,[La,Va]=oj(g,{fontFamily:m,fontSize:I,lineHeight:ia,fontWeight:W},sa);return[La,Va]}getShapeSVGJsx(){var b=window.navigator.userAgent.toLowerCase();if(b.includes("webkit")&&
!b.includes("chrome"))return super.getShapeSVGJsx(null);const {props:{text:g,stroke:m,fontSize:I,fontFamily:W}}=this;b=this.getBounds();return(0,ob.jsx)("foreignObject",{width:b.width,height:b.height,children:(0,ob.jsx)("div",{style:{color:zf(m,"text"),fontSize:I,fontFamily:W,display:"contents"},children:g})})}};Qa(Sr,"id","text");Qa(Sr,"defaultProps",{id:"box",parentId:"page",type:"text",point:[0,0],size:[0,0],isSizeLocked:!0,text:"",lineHeight:1.2,fontSize:20,fontWeight:400,italic:!1,padding:4,
fontFamily:"var(--ls-font-family)",borderRadius:0,stroke:"",fill:"",noFill:!0,strokeType:"line",strokeWidth:2,opacity:1});Lb([yg],Sr.prototype,"scaleLevel",1);Lb([cf],Sr.prototype,"setScaleLevel",2);var IA=vb(V(22));ob=V(586);var pu=class extends hn{constructor(){super(...arguments);Qa(this,"canFlip",!1);Qa(this,"canEdit",!0);Qa(this,"canChangeAspectRatio",!1);Qa(this,"ReactComponent",nf(({events:b,isErasing:g,asset:m,isEditing:I})=>{const {props:{opacity:W}}=this,ia=gl();var sa=sg();const La=sa.selectedIds.has(this.id),
Va=ia||La&&!I||"select"!==sa.selectedTool.id;sa=IA.useCallback(lb=>{Va||lb.stopPropagation()},[Va]);const {handlers:$a}=IA.useContext(nn);return(0,ob.jsx)(ao,Ga(re({style:{overflow:"hidden",pointerEvents:"all",opacity:g?.2:W}},b),{children:(0,ob.jsx)("div",{onWheelCapture:sa,onPointerDown:sa,onPointerUp:sa,className:"tl-video-container",style:{pointerEvents:ia||!I&&!La?"none":"all",overflow:I?"auto":"hidden"},children:m&&(0,ob.jsx)("video",{controls:!0,src:$a?$a.makeAssetUrl(m.src):m.src})})}))}));
Qa(this,"ReactIndicator",nf(()=>{const {props:{size:[b,g]}}=this;return(0,ob.jsx)("rect",{width:b,height:g,fill:"transparent"})}))}};Qa(pu,"id","video");Qa(pu,"defaultProps",{id:"video1",parentId:"page",type:"video",point:[0,0],size:[100,100],opacity:1,assetId:"",clipping:0,isAspectRatioLocked:!0});ob=V(586);var JA=/^(?:https?:\/\/)?(?:www\.)?(?:youtu\.be\/|youtube\.com\/(?:embed\/|v\/|watch\?v=|watch\?.+&v=))((\w|-){11})(?:\S+)?$/,KA=class extends hn{constructor(){super(...arguments);Qa(this,"aspectRatio",
480/853);Qa(this,"canChangeAspectRatio",!1);Qa(this,"canFlip",!1);Qa(this,"canEdit",!0);Qa(this,"onYoutubeLinkChange",b=>{this.update({url:b,size:KA.defaultProps.size})});Qa(this,"ReactComponent",nf(({events:b,isErasing:g,isEditing:m})=>(0,ob.jsx)(ao,Ga(re({style:{overflow:"hidden",pointerEvents:"all",opacity:g?.2:1}},b),{children:(0,ob.jsx)("div",{className:"rounded-lg w-full h-full relative overflow-hidden shadow-xl",style:{pointerEvents:m?"all":"none",userSelect:"none"},children:this.embedId?(0,ob.jsx)("div",
{style:{overflow:"hidden",position:"relative",height:"100%"},children:(0,ob.jsx)("iframe",{className:"absolute inset-0 w-full h-full m-0",width:"853",height:"480",src:`https://www.youtube.com/embed/${this.embedId}`,frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0,title:"Embedded youtube"})}):(0,ob.jsx)("div",{className:"w-full h-full flex items-center justify-center p-4",style:{backgroundColor:"var(--ls-primary-background-color)"},
children:(0,ob.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 502 210.649",height:"210.65",width:"128",children:(0,ob.jsxs)("g",{children:[(0,ob.jsx)("path",{d:"M498.333 45.7s-2.91-20.443-11.846-29.447C475.157 4.44 462.452 4.38 456.627 3.687c-41.7-3-104.25-3-104.25-3h-.13s-62.555 0-104.255 3c-5.826.693-18.523.753-29.86 12.566-8.933 9.004-11.84 29.447-11.84 29.447s-2.983 24.003-2.983 48.009v22.507c0 24.006 2.983 48.013 2.983 48.013s2.907 20.44 11.84 29.446c11.337 11.817 26.23 11.44 32.86 12.677 23.84 2.28 101.315 2.983 101.315 2.983s62.62-.094 104.32-3.093c5.824-.694 18.527-.75 29.857-12.567 8.936-9.006 11.846-29.446 11.846-29.446s2.98-24.007 2.98-48.013V93.709c0-24.006-2.98-48.01-2.98-48.01",
fill:"#cd201f"}),(0,ob.jsx)("g",{children:(0,ob.jsx)("path",{d:"M187.934 169.537h-18.96V158.56c-7.19 8.24-13.284 12.4-19.927 12.4-5.826 0-9.876-2.747-11.9-7.717-1.23-3.02-2.103-7.736-2.103-14.663V68.744h18.957v81.833c.443 2.796 1.636 3.823 4.043 3.823 3.63 0 6.913-3.153 10.93-8.817V68.744h18.96v100.793zM102.109 139.597c.996 9.98-2.1 14.93-7.987 14.93s-8.98-4.95-7.98-14.93v-39.92c-1-9.98 2.093-14.657 7.98-14.657 5.89 0 8.993 4.677 7.996 14.657l-.01 39.92zm18.96-37.923c0-10.77-2.164-18.86-5.987-23.95-5.054-6.897-12.973-9.72-20.96-9.72-9.033 0-15.913 2.823-20.957 9.72-3.886 5.09-5.97 13.266-5.97 24.036l-.016 35.84c0 10.71 1.853 18.11 5.736 23.153 5.047 6.873 13.227 10.513 21.207 10.513 7.986 0 16.306-3.64 21.36-10.513 3.823-5.043 5.586-12.443 5.586-23.153v-35.926zM46.223 114.647v54.889h-19.96v-54.89S5.582 47.358 1.314 34.815H22.27L36.277 87.38l13.936-52.566H71.17l-24.947 79.833z"})}),
(0,ob.jsxs)("g",{fill:"#fff",children:[(0,ob.jsx)("path",{d:"M440.413 96.647c0-9.33 2.557-11.874 8.59-11.874 5.99 0 8.374 2.777 8.374 11.997v10.893l-16.964.02V96.647zm35.96 25.986l-.003-20.4c0-10.656-2.1-18.456-5.88-23.5-5.06-6.823-12.253-10.436-21.317-10.436-9.226 0-16.42 3.613-21.643 10.436-3.84 5.044-6.076 13.28-6.076 23.943v34.927c0 10.596 2.46 18.013 6.296 23.003 5.227 6.813 12.42 10.216 21.87 10.216 9.44 0 16.853-3.566 21.85-10.81 2.2-3.196 3.616-6.82 4.226-10.823.164-1.81.64-5.933.64-11.753v-2.827h-18.96c0 7.247.037 11.557-.133 12.54-1.033 4.834-3.623 7.25-8.07 7.25-6.203 0-8.826-4.636-8.76-13.843v-17.923h35.96zM390.513 140.597c0 9.98-2.353 13.806-7.563 13.806-2.973 0-6.4-1.53-9.423-4.553l.02-60.523c3.02-2.98 6.43-4.55 9.403-4.55 5.21 0 7.563 2.93 7.563 12.91v42.91zm2.104-72.453c-6.647 0-13.253 4.087-19.09 11.27l.02-43.603h-17.963V169.54h17.963l.027-10.05c6.036 7.47 12.62 11.333 19.043 11.333 7.193 0 12.45-3.85 14.863-11.267 1.203-4.226 1.993-10.733 1.993-19.956V99.684c0-9.447-1.21-15.907-2.416-19.917-2.41-7.466-7.247-11.623-14.44-11.623M340.618 169.537h-18.956V158.56c-7.193 8.24-13.283 12.4-19.926 12.4-5.827 0-9.877-2.747-11.9-7.717-1.234-3.02-2.107-7.736-2.107-14.663V69.744h18.96v80.833c.443 2.796 1.633 3.823 4.043 3.823 3.63 0 6.913-3.153 10.93-8.817V69.744h18.957v99.793z"}),
(0,ob.jsx)("path",{d:"M268.763 169.537h-19.956V54.77h-20.956V35.835l62.869-.024v18.96h-21.957v114.766z"})]})]})})})})}))));Qa(this,"ReactIndicator",nf(()=>{const {props:{size:[b,g]}}=this;return(0,ob.jsx)("rect",{width:b,height:g,fill:"transparent",rx:8,ry:8})}));Qa(this,"validateProps",b=>{void 0!==b.size&&(b.size[0]=Math.max(b.size[0],1),b.size[1]=Math.max(b.size[0]*this.aspectRatio,1));return Ch(this,b)})}get embedId(){var b,g;const m=this.props.url,I=m.match(JA);return null!=(g=null!=(b=null==
I?void 0:I[1])?b:m)?g:""}getShapeSVGJsx(){const b=this.getBounds(),g=this.embedId;return g?(0,ob.jsxs)("g",{children:[(0,ob.jsx)("image",{width:b.width,height:b.height,href:`https://img.youtube.com/vi/${g}/mqdefault.jpg`,className:"grayscale-[50%]"}),(0,ob.jsx)("svg",{x:b.width/4,y:b.height/4,width:b.width/2,height:b.height/2,viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,ob.jsx)("path",{d:"M4.76447 3.12199C5.63151 3.04859 6.56082 3 7.5 3C8.43918 3 9.36849 3.04859 10.2355 3.12199C11.2796 3.21037 11.9553 3.27008 12.472 3.39203C12.9425 3.50304 13.2048 3.64976 13.4306 3.88086C13.4553 3.90618 13.4902 3.94414 13.5133 3.97092C13.7126 4.20149 13.8435 4.4887 13.918 5.03283C13.9978 5.6156 14 6.37644 14 7.52493C14 8.66026 13.9978 9.41019 13.9181 9.98538C13.8439 10.5206 13.7137 10.8061 13.5125 11.0387C13.4896 11.0651 13.4541 11.1038 13.4296 11.1287C13.2009 11.3625 12.9406 11.5076 12.4818 11.6164C11.9752 11.7365 11.3143 11.7942 10.2878 11.8797C9.41948 11.9521 8.47566 12 7.5 12C6.52434 12 5.58052 11.9521 4.7122 11.8797C3.68572 11.7942 3.02477 11.7365 2.51816 11.6164C2.05936 11.5076 1.7991 11.3625 1.57037 11.1287C1.54593 11.1038 1.51035 11.0651 1.48748 11.0387C1.28628 10.8061 1.15612 10.5206 1.08193 9.98538C1.00221 9.41019 1 8.66026 1 7.52493C1 6.37644 1.00216 5.6156 1.082 5.03283C1.15654 4.4887 1.28744 4.20149 1.48666 3.97092C1.5098 3.94414 1.54468 3.90618 1.56942 3.88086C1.7952 3.64976 2.05752 3.50304 2.52796 3.39203C3.04473 3.27008 3.7204 3.21037 4.76447 3.12199ZM0 7.52493C0 5.28296 0 4.16198 0.729985 3.31713C0.766457 3.27491 0.815139 3.22194 0.854123 3.18204C1.63439 2.38339 2.64963 2.29744 4.68012 2.12555C5.56923 2.05028 6.52724 2 7.5 2C8.47276 2 9.43077 2.05028 10.3199 2.12555C12.3504 2.29744 13.3656 2.38339 14.1459 3.18204C14.1849 3.22194 14.2335 3.27491 14.27 3.31713C15 4.16198 15 5.28296 15 7.52493C15 9.74012 15 10.8477 14.2688 11.6929C14.2326 11.7348 14.1832 11.7885 14.1444 11.8281C13.3629 12.6269 12.3655 12.71 10.3709 12.8763C9.47971 12.9505 8.50782 13 7.5 13C6.49218 13 5.52028 12.9505 4.62915 12.8763C2.63446 12.71 1.63712 12.6269 0.855558 11.8281C0.816844 11.7885 0.767442 11.7348 0.731221 11.6929C0 10.8477 0 9.74012 0 7.52493ZM5.25 5.38264C5.25 5.20225 5.43522 5.08124 5.60041 5.15369L10.428 7.27105C10.6274 7.35853 10.6274 7.64147 10.428 7.72895L5.60041 9.84631C5.43522 9.91876 5.25 9.79775 5.25 9.61736V5.38264Z",
fill:"#D10014",fillRule:"evenodd",clipRule:"evenodd"})})]}):super.getShapeSVGJsx({})}},Xq=KA;Qa(Xq,"id","youtube");Qa(Xq,"defaultProps",{id:"youtube",type:"youtube",parentId:"page",point:[0,0],size:[853,480],url:""});Lb([yg],Xq.prototype,"embedId",1);Lb([cf],Xq.prototype,"onYoutubeLinkChange",2);var Tr=vb(V(22));ob=V(586);var LA=/https?:\/\/twitter.com\/[0-9a-zA-Z_]{1,20}\/status\/([0-9]*)/,MA=class extends hn{constructor(){super(...arguments);Qa(this,"canFlip",!1);Qa(this,"canEdit",!0);Qa(this,"initialHeightCalculated",
!0);Qa(this,"getInnerHeight",null);Qa(this,"onTwitterLinkChange",b=>{this.update({url:b,size:MA.defaultProps.size})});Qa(this,"ReactComponent",nf(({events:b,isErasing:g,isEditing:m})=>{const {renderers:{Tweet:I}}=Tr.useContext(nn),W=sg(),ia=Tr.useRef(null),[,sa]=this.useComponentSize(ia);Tr.useEffect(()=>{var La,Va;const $a=null!=(Va=null==(La=this.getInnerHeight)?void 0:La.call(this))?Va:sa;sa&&1<Math.abs($a-this.props.size[1])&&(this.update({size:[this.props.size[0],$a]}),W.persist(!0))},[sa]);
Tr.useEffect(()=>{this.initialHeightCalculated||setTimeout(()=>{this.onResetBounds();W.persist(!0)})},[this.initialHeightCalculated]);return(0,ob.jsx)(ao,Ga(re({style:{overflow:"hidden",pointerEvents:"all",opacity:g?.2:1}},b),{children:(0,ob.jsx)("div",{className:"rounded-xl w-full h-full relative shadow-xl",style:{pointerEvents:m?"all":"none",userSelect:"none"},children:this.embedId?(0,ob.jsx)("div",{ref:ia,children:(0,ob.jsx)(I,{tweetId:this.embedId})}):null})}))}));Qa(this,"ReactIndicator",nf(()=>
{const {props:{size:[b,g]}}=this;return(0,ob.jsx)("rect",{width:b,height:g,fill:"transparent",rx:8,ry:8})}));Qa(this,"onResetBounds",b=>{b=this.getAutoResizeHeight();null!==b&&1<Math.abs(b-this.props.size[1])&&(this.update({size:[this.props.size[0],b]}),this.initialHeightCalculated=!0);return this});Qa(this,"onResize",(b,g)=>{var m;const {bounds:I,rotation:W,scale:[ia,sa]}=g;b=[...this.scale];0>ia&&(b[0]*=-1);0>sa&&(b[1]*=-1);g=null!=(m=this.getAutoResizeHeight())?m:I.height;return this.update({point:[I.minX,
I.minY],size:[Math.max(1,I.width),Math.max(1,g)],scale:b,rotation:W})});Qa(this,"validateProps",b=>{void 0!==b.size&&(b.size[0]=Math.min(Math.max(b.size[0],300),550),b.size[1]=Math.max(b.size[1],1));return Ch(this,b)})}get embedId(){var b,g;const m=this.props.url,I=m.match(LA);return null!=(g=null!=(b=null==I?void 0:I[1])?b:m)?g:""}useComponentSize(b,g=""){const [m,I]=Tr.useState([0,0]),W=sg();Tr.useEffect(()=>{if(null==b?0:b.current){const ia=g?b.current.querySelector(g):b.current;if(ia){const sa=
()=>{const {width:Va,height:$a}=ia.getBoundingClientRect(),lb=Yd.div([Va,$a],W.viewport.camera.zoom);I(lb);return lb};sa();this.getInnerHeight=()=>sa()[1];const La=new ResizeObserver(()=>{sa()});La.observe(ia);return()=>{La.disconnect()}}}return()=>{}},[b,g]);return m}getAutoResizeHeight(){return this.getInnerHeight?this.getInnerHeight():null}getShapeSVGJsx(){const b=this.getBounds();return this.embedId?(0,ob.jsxs)("g",{children:[(0,ob.jsx)("rect",{width:b.width,height:b.height,fill:"#15202b",rx:8,
ry:8}),(0,ob.jsx)("svg",{x:b.width/4,y:b.height/4,width:b.width/2,height:b.height/2,viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,ob.jsx)("path",{d:"m13.464 4.4401c0.0091 0.13224 0.0091 0.26447 0.0091 0.39793 0 4.0664-3.0957 8.7562-8.7562 8.7562v-0.0024c-1.6721 0.0024-3.3095-0.47658-4.7172-1.3797 0.24314 0.02925 0.48751 0.04387 0.73248 0.04448 1.3857 0.0013 2.7319-0.46374 3.8221-1.3199-1.3169-0.024981-2.4717-0.8836-2.8751-2.1371 0.4613 0.08897 0.93662 0.070688 1.3894-0.053016-1.4357-0.29007-2.4686-1.5515-2.4686-3.0165v-0.039001c0.42779 0.23827 0.90676 0.37051 1.3967 0.38513-1.3522-0.90372-1.769-2.7026-0.95247-4.1091 1.5625 1.9226 3.8678 3.0914 6.3425 3.2151-0.24802-1.0689 0.090798-2.1889 0.89031-2.9403 1.2395-1.1651 3.1889-1.1054 4.3541 0.13346 0.68921-0.13589 1.3498-0.38879 1.9543-0.74711-0.22974 0.71237-0.71054 1.3175-1.3528 1.702 0.60999-0.071907 1.206-0.23522 1.7672-0.48446-0.41316 0.61913-0.93358 1.1584-1.5356 1.5942z",
fill:"#1d9bf0",fillRule:"evenodd",clipRule:"evenodd"})})]}):super.getShapeSVGJsx({})}},Ur=MA;Qa(Ur,"id","tweet");Qa(Ur,"defaultProps",{id:"tweet",type:"tweet",parentId:"page",point:[0,0],size:[331,290],url:""});Lb([yg],Ur.prototype,"embedId",1);Lb([cf],Ur.prototype,"onTwitterLinkChange",2);ob=V(586);var NA=[Nr,Or,Uq,ou,pu,Pr,Wq,Rr,Sr,Xq,Ur,Vq,Qp,tl,mw],qw=class extends bp{constructor(){super(...arguments);Qa(this,"Shape",Nr)}};Qa(qw,"id","box");Qa(qw,"shortcut",["9","r"]);var rw=class extends bp{constructor(){super(...arguments);
Qa(this,"Shape",Or)}};Qa(rw,"id","ellipse");Qa(rw,"shortcut",["o"]);var sw=class extends Et{};Qa(sw,"id","erase");Qa(sw,"shortcut",["6","e"]);var tw=class extends vs{constructor(){super(...arguments);Qa(this,"Shape",Uq);Qa(this,"simplify",!0);Qa(this,"simplifyTolerance",.618)}};Qa(tw,"id","highlighter");Qa(tw,"shortcut",["5","h"]);var uw=class extends Ct{constructor(){super(...arguments);Qa(this,"Shape",Pr)}};Qa(uw,"id","line");Qa(uw,"shortcut",["7","c"]);var vw=class extends vs{constructor(){super(...arguments);
Qa(this,"Shape",Wq);Qa(this,"simplify",!1)}};Qa(vw,"id","pencil");Qa(vw,"shortcut",["4","d"]);var OA=class extends bp{constructor(){super(...arguments);Qa(this,"Shape",Rr)}};Qa(OA,"id","polygon");var ww=class extends Dt{constructor(){super(...arguments);Qa(this,"Shape",Sr)}};Qa(ww,"id","text");Qa(ww,"shortcut",["8","t"]);var PA=class extends bp{constructor(){super(...arguments);Qa(this,"Shape",Xq)}};Qa(PA,"id","youtube");var QA=class extends wi{constructor(){super(...arguments);Qa(this,"creatingShape");
Qa(this,"offset",[0,0]);Qa(this,"onEnter",()=>{this.app.history.pause();Ld(()=>{const b=new tl({id:Of(),parentId:this.app.currentPage.id,point:Yd.sub(this.app.inputs.originPoint,this.offset),size:tl.defaultProps.size,fill:this.app.settings.color,stroke:this.app.settings.color});this.creatingShape=b;this.app.currentPage.addShapes(b);this.app.setEditingShape(b);this.app.setSelectedShapes([b])})});Qa(this,"onPointerDown",b=>{switch(b.type){case "shape":if(b.shape===this.creatingShape)break;this.app.selectTool("select");
break;case "canvas":b.order||this.app.selectTool("select")}});Qa(this,"onExit",()=>{var b;this.creatingShape&&(this.app.history.resume(),(null==(b=this.creatingShape)?0:b.props.pageId)?this.app.setSelectedShapes([this.creatingShape.id]):(this.app.deleteShapes([this.creatingShape.id]),this.app.setEditingShape()),this.creatingShape=void 0)})}};Qa(QA,"id","creating");var RA=class extends wi{constructor(){super(...arguments);Qa(this,"cursor","crosshair");Qa(this,"onPointerDown",b=>{this.tool.transition("creating")})}};
Qa(RA,"id","idle");var Zs=class extends yp{constructor(){super(...arguments);Qa(this,"Shape",tl);Qa(this,"onPinch",b=>{this.app.viewport.pinchZoom(b.point,b.delta,b.delta[2])})}};Qa(Zs,"id","logseq-portal");Qa(Zs,"shortcut",["3"]);Qa(Zs,"states",[RA,QA]);Qa(Zs,"initial","idle");var SA=class extends bp{constructor(){super(...arguments);Qa(this,"Shape",Qp)}};Qa(SA,"id","youtube");var TA=class extends bp{constructor(){super(...arguments);Qa(this,"Shape",Vq)}};Qa(TA,"id","iframe");var WH=vb(V(589));ob=
V(586);var XH=new Map(NA.map(b=>[b.id,b])),xw=class{constructor(b){Qa(this,"shapes");Qa(this,"pageId");Qa(this,"assets");b&&this.load(b)}load(b){const g=b.pages[0];this.pageId=null==g?void 0:g.id;this.assets=b.assets;this.shapes=null==g?void 0:g.shapes.map(m=>{var I=m.type;if(!I)throw Error("No shape type provided.");const W=XH.get(I);if(!W)throw Error(`Could not find shape class for ${I}`);return new W(m)}).filter(m=>"group"!==m.type)}generatePreviewJsx(b,g){var m,I;const W=[...(null!=(m=this.shapes)?
m:[]).map($a=>$a.getRotatedBounds())];(m=null==b?void 0:b.currentView)&&W.push(m);let ia=We.getCommonBounds(W);if(!ia)return null;ia=We.expandBounds(ia,16);ia=g?We.ensureRatio(ia,g):ia;const sa=$a=>[($a[0]-ia.minX).toFixed(2),($a[1]-ia.minY).toFixed(2)],[La,Va]=m?sa([m.minX,m.minY]):[0,0];return ia&&(0,ob.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg","data-common-bound-x":ia.minX.toFixed(2),"data-common-bound-y":ia.minY.toFixed(2),"data-common-bound-width":ia.width.toFixed(2),"data-common-bound-height":ia.height.toFixed(2),
viewBox:[0,0,ia.width,ia.height].join(" "),children:[(0,ob.jsx)("defs",{children:m&&(0,ob.jsxs)(ob.Fragment,{children:[(0,ob.jsx)("rect",{id:this.pageId+"-camera-rect",transform:`translate(${La}, ${Va})`,width:m.width,height:m.height}),(0,ob.jsxs)("mask",{id:this.pageId+"-camera-mask",children:[(0,ob.jsx)("rect",{width:ia.width,height:ia.height,fill:"white"}),(0,ob.jsx)("use",{href:`#${this.pageId}-camera-rect`,fill:"black"})]})]})}),(0,ob.jsx)("g",{id:this.pageId+"-preview-shapes",children:null==
(I=this.shapes)?void 0:I.map($a=>{var lb,ub;const {bounds:Rb,props:{rotation:ec}}=$a,[Vb,rc]=sa([Rb.minX,Rb.minY]),mc=+(180*((null!=ec?ec:0)+(null!=(lb=Rb.rotation)?lb:0))/Math.PI).toFixed(2),[Wb,tc]=[(Rb.width/2).toFixed(2),(Rb.height/2).toFixed(2)];return(0,ob.jsx)("g",{transform:[`translate(${Vb}, ${rc})`,`rotate(${mc}, ${Wb}, ${tc})`].join(" "),children:$a.getShapeSVGJsx({assets:null!=(ub=this.assets)?ub:[]})},$a.id)})}),(0,ob.jsx)("rect",{mask:m?`url(#${this.pageId}-camera-mask)`:"",width:ia.width,
height:ia.height,fill:"transparent"}),m&&(0,ob.jsx)("use",{id:"minimap-camera-rect","data-x":La,"data-y":Va,"data-width":m.width,"data-height":m.height,href:`#${this.pageId}-camera-rect`,fill:"transparent",stroke:"red",strokeWidth:4/b.camera.zoom})]})}exportAsSVG(b){return(b=this.generatePreviewJsx(void 0,b))?WH.default.renderToString(b):""}},YH=vb(V(22));ob=V(586);var qu=YH.forwardRef((b,g)=>{var {value:m,className:I}=b;b=Ya(b,["autoResize","value","className"]);return(0,ob.jsx)("div",{className:"tl-input"+
(I?" "+I:""),children:(0,ob.jsxs)("div",{className:"tl-input-sizer",children:[(0,ob.jsx)("div",{className:"tl-input-hidden",children:m}),(0,ob.jsx)("input",re({ref:g,value:m,className:"tl-text-input",type:"text"},b))]})})});ob=V(586);var Rp=({type:b,active:g})=>(0,ob.jsx)("span",{className:"tl-type-tag","data-active":g,children:(0,ob.jsx)("i",{className:`tie tie-${({B:"block",P:"page",WP:"whiteboard",BA:"new-block",PA:"new-page",WA:"new-whiteboard",BS:"block-search",PS:"page-search"})[b]}`})}),UA=
(b,g)=>(0,ob.jsx)("span",{children:b.split(new RegExp(`(${g.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$\x26")})`,"gi")).map((m,I)=>1===I%2?(0,ob.jsx)("mark",{className:"tl-highlighted",children:m}):m).map((m,I)=>(0,ob.jsx)(zm.default.Fragment,{children:m},I))}),ZH=(b,g)=>{const {handlers:m}=zm.default.useContext(nn),[I,W]=zm.default.useState(null),ia=Pl(b,200);zm.default.useEffect(()=>{let sa=!1;if(0<ia.length){const La={"pages?":!0,"blocks?":!0,"files?":!1};"B"===g?La["pages?"]=!1:"P"===g&&(La["blocks?"]=
!1);m.search(ia,La).then(Va=>{sa||W(Va)})}else W(null);return()=>{sa=!0}},[ia,null==m?void 0:m.search]);return I},VA=nf(({className:b,style:g,placeholder:m,onChange:I,onBlur:W,onAddBlock:ia})=>{const [sa,La]=zm.default.useState(tl.defaultSearchQuery),[Va,$a]=zm.default.useState(tl.defaultSearchFilter),lb=zm.default.useRef(null),{handlers:ub,renderers:Rb}=zm.default.useContext(nn),ec=zm.default.useCallback(De=>{var Oe;I(De);null==(Oe=lb.current)?void 0:Oe.blur();De&&(tl.defaultSearchQuery="",tl.defaultSearchFilter=
null)},[]),Vb=zm.default.useCallback(De=>{if(De=null==ub?void 0:ub.addNewBlock(De))ec(De),null==ia?void 0:ia(De);return De},[ia]),rc=zm.default.useRef(null),[mc,Wb]=zm.default.useState(0),tc=ZH(sa,Va),[Hc,Qc]=zm.default.useState("circle-plus"),[Uc,Vd]=zm.default.useState(!1);zm.default.useEffect(()=>{setTimeout(()=>{var De;null==(De=lb.current)?void 0:De.focus()})},[Va]);zm.default.useEffect(()=>{tl.defaultSearchQuery=sa;tl.defaultSearchFilter=Va},[sa,Va]);const ae=zm.default.useMemo(()=>{var De;
const Oe=[],tf=null==Rb?void 0:Rb.Breadcrumb;if(!tf||!ub)return[];ia&&Oe.push({actionIcon:"circle-plus",onChosen:()=>!!Vb(sa),element:(0,ob.jsxs)("div",{className:"tl-quick-search-option-row",children:[(0,ob.jsx)(Rp,{active:!0,type:"BA"}),0<sa.length?(0,ob.jsxs)(ob.Fragment,{children:[(0,ob.jsx)("strong",{children:"New block:"}),sa]}):(0,ob.jsx)("strong",{children:"New block"})]})});(null==(De=null==tc?void 0:tc.pages)?0:De.some(pf=>pf.toLowerCase()===sa.toLowerCase()))||!sa||Oe.push({actionIcon:"circle-plus",
onChosen:()=>{ec(sa);return!0},element:(0,ob.jsxs)("div",{className:"tl-quick-search-option-row",children:[(0,ob.jsx)(Rp,{active:!0,type:"PA"}),(0,ob.jsx)("strong",{children:"New page:"}),sa]})},{actionIcon:"circle-plus",onChosen:()=>{null==ub?void 0:ub.addNewWhiteboard(sa);ec(sa);return!0},element:(0,ob.jsxs)("div",{className:"tl-quick-search-option-row",children:[(0,ob.jsx)(Rp,{active:!0,type:"WA"}),(0,ob.jsx)("strong",{children:"New whiteboard:"}),sa]})});0===sa.length&&null===Va&&Oe.push({actionIcon:"search",
onChosen:()=>{$a("B");return!0},element:(0,ob.jsxs)("div",{className:"tl-quick-search-option-row",children:[(0,ob.jsx)(Rp,{type:"BS"}),"Search only blocks"]})},{actionIcon:"search",onChosen:()=>{$a("P");return!0},element:(0,ob.jsxs)("div",{className:"tl-quick-search-option-row",children:[(0,ob.jsx)(Rp,{type:"PS"}),"Search only pages"]})});Va&&"P"!==Va||!tc||!tc.pages||Oe.push(...tc.pages.map(pf=>({actionIcon:"search",onChosen:()=>{ec(pf);return!0},element:(0,ob.jsxs)("div",{className:"tl-quick-search-option-row",
children:[(0,ob.jsx)(Rp,{type:ub.isWhiteboardPage(pf)?"WP":"P"}),UA(pf,sa)]})})));Va&&"B"!==Va||!tc||!tc.blocks||Oe.push(...tc.blocks.filter(pf=>pf.content&&pf.uuid).map(({content:pf,uuid:df})=>{const Ie=ub.queryBlockByUUID(df);return{actionIcon:"search",onChosen:()=>{var Bd,fd,jd;return Ie?(ec(df),null==(jd=null==(fd=null==(Bd=window.logseq)?void 0:Bd.api)?void 0:fd.set_blocks_id)?void 0:jd.call(fd,[df]),!0):!1},element:Ie?(0,ob.jsxs)(ob.Fragment,{children:[(0,ob.jsxs)("div",{className:"tl-quick-search-option-row",
children:[(0,ob.jsx)(Rp,{type:"B"}),(0,ob.jsx)("div",{className:"tl-quick-search-option-breadcrumb",children:(0,ob.jsx)(tf,{blockId:df})})]}),(0,ob.jsxs)("div",{className:"tl-quick-search-option-row",children:[(0,ob.jsx)("div",{className:"tl-quick-search-option-placeholder"}),UA(pf,sa)]})]}):(0,ob.jsx)("div",{className:"tl-quick-search-option-row",children:"Cache is outdated. Please click the 'Re-index' button in the graph's dropdown menu."})}}));return Oe},[sa,Va,tc,null==Rb?void 0:Rb.Breadcrumb,
ub]);zm.default.useEffect(()=>{const De=Oe=>{var tf,pf;let df=mc;"ArrowDown"===Oe.key?df=Math.min(ae.length-1,mc+1):"ArrowUp"===Oe.key?df=Math.max(0,mc-1):"Enter"===Oe.key?(null==(tf=ae[mc])?void 0:tf.onChosen(),Oe.stopPropagation(),Oe.preventDefault()):"Backspace"===Oe.key&&0===sa.length?$a(null):"Escape"===Oe.key&&ec("");df!==mc&&(tf=ae[df],Wb(df),Qc(tf.actionIcon),Oe.stopPropagation(),Oe.preventDefault(),(Oe=null==(pf=rc.current)?void 0:pf.querySelector(".tl-quick-search-option:nth-child("+(df+
1)+")"))&&(null==Oe?void 0:Oe.scrollIntoViewIfNeeded(!1)))};document.addEventListener("keydown",De,!0);return()=>{document.removeEventListener("keydown",De,!0)}},[ae,mc,sa]);return(0,ob.jsxs)("div",{className:"tl-quick-search "+(null!=b?b:""),style:g,children:[(0,ob.jsx)(uz,{icon:Hc,onClick:()=>{var De;null==(De=ae[mc])?void 0:De.onChosen()}}),(0,ob.jsxs)("div",{className:"tl-quick-search-input-container",children:[Va&&(0,ob.jsxs)("div",{className:"tl-quick-search-input-filter",children:[(0,ob.jsx)(Rp,
{type:Va}),"B"===Va?"Search blocks":"Search pages",(0,ob.jsx)("div",{className:"tl-quick-search-input-filter-remove",onClick:()=>$a(null),children:(0,ob.jsx)(Ih,{name:"x"})})]}),(0,ob.jsx)(qu,{ref:lb,type:"text",value:sa,className:"tl-quick-search-input",placeholder:null!=m?m:"Create or search your graph...",onChange:De=>La(De.target.value),onKeyDown:De=>{"Enter"===De.key&&ec(sa);De.stopPropagation()},onFocus:()=>{Vd(!0)},onBlur:()=>{Vd(!1);null==W?void 0:W()}})]}),0<ae.length&&(0,ob.jsx)("div",{onWheelCapture:De=>
De.stopPropagation(),className:"tl-quick-search-options",ref:rc,style:{visibility:Uc?"visible":"hidden",pointerEvents:Uc?"all":"none"},children:(0,ob.jsx)(kH,{style:{height:40*Math.min(Math.max(1,ae.length),12)},totalCount:ae.length,itemContent:De=>{const {actionIcon:Oe,onChosen:tf,element:pf}=ae[De];return(0,ob.jsx)("div",{"data-focused":De===mc,className:"tl-quick-search-option",tabIndex:0,onMouseEnter:()=>{Qc(Oe);Wb(De)},onPointerDownCapture:df=>{tf()&&(df.stopPropagation(),df.preventDefault())},
children:pf},De)}})})]})});ob=V(586);var $H=nf(function(b){var {pageId:g,portalType:m,refs:I,side:W,onRefsChange:ia}=b;b=Ya(b,"pageId portalType shapeType refs side onRefsChange".split(" "));const sa=I.length+(g?1:0),La=0===I.length,Va=lb=>{lb&&!I.includes(lb)&&La&&ia([...I,lb])},$a=!(!g||!m);return(0,ob.jsx)(kA,Ga(re({},b),{side:W,align:"start",alignOffset:-6,label:(0,ob.jsx)(fc,{content:"Link",sideOffset:14,children:(0,ob.jsxs)("div",{className:"flex gap-1 relative items-center justify-center px-1",
children:[(0,ob.jsx)(Ih,{name:0<sa?"link":"add-link"}),0<sa&&(0,ob.jsx)("div",{className:"tl-shape-links-count",children:sa})]})}),children:(0,ob.jsxs)("div",{className:"color-level rounded-lg","data-show-reference-panel":$a,children:[$a&&(0,ob.jsxs)("div",{className:"tl-shape-links-reference-panel",children:[(0,ob.jsxs)("div",{className:"text-base inline-flex gap-1 items-center",children:[(0,ob.jsx)(Ih,{className:"opacity-50",name:"internal-link"}),"References"]}),(0,ob.jsx)(Oo,{type:m,id:g})]}),
(0,ob.jsxs)("div",{className:"tl-shape-links-panel color-level",children:[(0,ob.jsxs)("div",{className:"text-base inline-flex gap-1 items-center",children:[(0,ob.jsx)(Ih,{className:"opacity-50",name:"add-link"}),"Link to any page or block"]}),La&&(0,ob.jsx)(VA,{style:{width:"calc(100% - 46px)",marginLeft:"46px"},placeholder:"Start typing to search...",onChange:Va}),0<I.length&&(0,ob.jsx)("div",{className:"flex flex-col items-stretch gap-2",children:I.map((lb,ub)=>(0,ob.jsx)(Oo,{id:lb,type:Wh(lb)?
"B":"P",onRemove:()=>{ia(I.filter((Rb,ec)=>ub!==ec))},showContent:!0},lb))})]})]})}))}),Sk=vb(V(22)),WA=V(22),XA=(0,WA.forwardRef)((b,g)=>{const {pressed:m,defaultPressed:I=!1,onPressedChange:W}=b,ia=Ya(b,["pressed","defaultPressed","onPressedChange"]),[sa=!1,La]=Rg({prop:m,onChange:W,defaultProp:I});return(0,WA.createElement)(tj.button,se({type:"button","aria-pressed":sa,"data-state":sa?"on":"off","data-disabled":b.disabled?"":void 0},ia,{ref:g,onClick:Zf(b.onClick,()=>{b.disabled||La(!sa)})}))}),
aI=XA,[YA]=og("ToggleGroup",[Ut]),ZA=Ut(),bI=Sk.default.forwardRef((b,g)=>{const {type:m}=b;b=Ya(b,["type"]);if("single"===m)return Sk.default.createElement(cI,se({},b,{ref:g}));if("multiple"===m)return Sk.default.createElement(dI,se({},b,{ref:g}));throw Error("Missing prop `type` expected on `ToggleGroup`");}),[$A,aB]=YA("ToggleGroup"),cI=Sk.default.forwardRef((b,g)=>{const {value:m,defaultValue:I,onValueChange:W=()=>{}}=b,ia=Ya(b,["value","defaultValue","onValueChange"]),[sa,La]=Rg({prop:m,defaultProp:I,
onChange:W});return Sk.default.createElement($A,{scope:b.__scopeToggleGroup,type:"single",value:sa?[sa]:[],onItemActivate:La,onItemDeactivate:Sk.default.useCallback(()=>La(""),[La])},Sk.default.createElement(bB,se({},ia,{ref:g})))}),dI=Sk.default.forwardRef((b,g)=>{const {value:m,defaultValue:I,onValueChange:W=()=>{}}=b,ia=Ya(b,["value","defaultValue","onValueChange"]),[sa=[],La]=Rg({prop:m,defaultProp:I,onChange:W}),Va=Sk.default.useCallback(lb=>La((ub=[])=>[...ub,lb]),[La]),$a=Sk.default.useCallback(lb=>
La((ub=[])=>ub.filter(Rb=>Rb!==lb)),[La]);return Sk.default.createElement($A,{scope:b.__scopeToggleGroup,type:"multiple",value:sa,onItemActivate:Va,onItemDeactivate:$a},Sk.default.createElement(bB,se({},ia,{ref:g})))}),[eI,fI]=YA("ToggleGroup"),bB=Sk.default.forwardRef((b,g)=>{const {__scopeToggleGroup:m,disabled:I=!1,rovingFocus:W=!0,orientation:ia,dir:sa,loop:La=!0}=b;var Va=Ya(b,"__scopeToggleGroup disabled rovingFocus orientation dir loop".split(" "));b=ZA(m);const $a=Fb(sa);Va=re({role:"group",
dir:$a},Va);return Sk.default.createElement(eI,{scope:m,rovingFocus:W,disabled:I},W?Sk.default.createElement(zz,se({asChild:!0},b,{orientation:ia,dir:$a,loop:La}),Sk.default.createElement(tj.div,se({},Va,{ref:g}))):Sk.default.createElement(tj.div,se({},Va,{ref:g})))}),gI=Sk.default.forwardRef((b,g)=>{var m=aB("ToggleGroupItem",b.__scopeToggleGroup);const I=fI("ToggleGroupItem",b.__scopeToggleGroup),W=ZA(b.__scopeToggleGroup);m=m.value.includes(b.value);const ia=I.disabled||b.disabled;b=Ga(re({},b),
{pressed:m,disabled:ia});const sa=Sk.default.useRef(null);return I.rovingFocus?Sk.default.createElement(Az,se({asChild:!0},W,{focusable:!ia,active:m,ref:sa}),Sk.default.createElement(cB,se({},b,{ref:g}))):Sk.default.createElement(cB,se({},b,{ref:g}))}),cB=Sk.default.forwardRef((b,g)=>{const {__scopeToggleGroup:m,value:I}=b,W=Ya(b,["__scopeToggleGroup","value"]),ia=aB("ToggleGroupItem",m);b={role:"radio","aria-checked":b.pressed,"aria-pressed":void 0};return Sk.default.createElement(XA,se({},"single"===
ia.type?b:void 0,W,{ref:g,onPressedChange:sa=>{if(sa)ia.onItemActivate(I);else ia.onItemDeactivate(I)}}))}),dB=bI,eB=gI;ob=V(586);ob=V(586);ob=V(586);var fB="Edit AutoResizing Swatch NoFill StrokeType ScaleLevel TextStyle YoutubeLink TwitterLink IFrameSource LogseqPortalViewMode ArrowMode Links".split(" "),hI=["Edit","YoutubeLink","TwitterLink","IFrameSource","Links"],zn=new Map,yw={"logseq-portal":"Swatch Edit LogseqPortalViewMode ScaleLevel AutoResizing Links".split(" "),youtube:["YoutubeLink",
"Links"],tweet:["TwitterLink","Links"],iframe:["IFrameSource","Links"],box:"Edit TextStyle Swatch ScaleLevel NoFill StrokeType Links".split(" "),ellipse:"Edit TextStyle Swatch ScaleLevel NoFill StrokeType Links".split(" "),polygon:"Edit TextStyle Swatch ScaleLevel NoFill StrokeType Links".split(" "),line:"Edit TextStyle Swatch ScaleLevel ArrowMode Links".split(" "),pencil:["Swatch","Links","ScaleLevel"],highlighter:["Swatch","Links","ScaleLevel"],text:"Edit TextStyle Swatch ScaleLevel AutoResizing Links".split(" "),
html:["ScaleLevel","AutoResizing","Links"],image:["Links"],video:["Links"]};Object.entries(yw).filter(([,b])=>b.includes("NoFill")&&b.includes("Swatch")).map(([b])=>b);var iI=nf(()=>{const {handlers:{isWhiteboardPage:b,redirectToPage:g,getRedirectPageName:m,insertFirstPageBlock:I}}=lp.default.useContext(nn),W=sg(),ia=wk(W.selectedShapesArray,"Edit")[0];return(0,ob.jsx)(dc,{type:"button",tooltip:"Edit",onClick:()=>{var sa,La,Va,$a,lb,ub,Rb,ec,Vb;W.api.editShape(ia);if("logseq-portal"===ia.props.type){var rc=
ia.props.pageId;if("P"===ia.props.blockType){b(rc)&&g(rc);rc=m(ia.props.pageId);let mc=null==(Va=null==(La=null==(sa=window.logseq)?void 0:sa.api)?void 0:La.get_page_blocks_tree)?void 0:Va.call(La,rc);0===(null==mc?void 0:mc.length)&&(I(rc),mc=null==(ub=null==(lb=null==($a=window.logseq)?void 0:$a.api)?void 0:lb.get_page_blocks_tree)?void 0:ub.call(lb,rc));sa=(null==mc?void 0:mc.find(Wb=>!("propertiesOrder"in Wb)))||mc[0];rc=null==sa?void 0:sa.uuid}null==(Vb=null==(ec=null==(Rb=window.logseq)?void 0:
Rb.api)?void 0:ec.edit_block)?void 0:Vb.call(ec,rc)}},children:(0,ob.jsx)(Ih,{name:"label"in ia.props&&ia.props.label||"text"in ia.props&&ia.props.text?"forms":"text"})})}),jI=nf(()=>{const b=sg(),g=wk(b.selectedShapesArray,"AutoResizing"),m=g.every(I=>I.props.isAutoResizing);return(0,ob.jsx)(cn,{tooltip:"Auto Resize",toggle:g.every(I=>"logseq-portal"===I.props.type),className:"tl-button",pressed:m,onPressedChange:I=>{g.forEach(W=>{if("logseq-portal"===W.props.type)W.update({isAutoResizing:I});else W.onResetBounds({zoom:b.viewport.camera.zoom})});
b.persist()},children:(0,ob.jsx)(Ih,{name:"dimensions"})})}),kI=nf(()=>{const b=sg(),g=wk(b.selectedShapesArray,"LogseqPortalViewMode"),m=g.every(I=>I.collapsed);return(0,ob.jsx)(so,{title:"View Mode",options:[{value:"1",icon:"object-compact",tooltip:"Collapse"},{value:"0",icon:"object-expanded",tooltip:"Expand"}],value:m?"1":"0",onValueChange:I=>{g.forEach(W=>{W.setCollapsed("1"===I?!0:!1)});b.persist()}})}),lI=nf(()=>{var {handlers:{isMobile:b}}=lp.default.useContext(nn);const g=sg(),m=wk(g.selectedShapesArray,
"ScaleLevel"),I=1<(new Set(m.map(W=>W.scaleLevel))).size?"":m[0].scaleLevel;b=[{label:b()?"XS":"Extra Small",value:"xs"},{label:b()?"SM":"Small",value:"sm"},{label:b()?"MD":"Medium",value:"md"},{label:b()?"LG":"Large",value:"lg"},{label:b()?"XL":"Extra Large",value:"xl"},{label:b()?"XXL":"Huge",value:"xxl"}];return(0,ob.jsx)(Ri,{tooltip:"Scale level",options:b,value:I,onValueChange:W=>{m.forEach(ia=>{ia.setScaleLevel(W)});g.persist()}})}),mI=nf(()=>{const b=sg(),g=wk(b.selectedShapesArray,"IFrameSource")[0],
m=lp.default.useCallback(W=>{g.onIFrameSourceChange(W.target.value.trim().toLowerCase());b.persist()},[]),I=lp.default.useCallback(()=>{g.reload()},[]);return(0,ob.jsxs)("span",{className:"flex gap-3",children:[(0,ob.jsx)(dc,{tooltip:"Reload",type:"button",onClick:I,children:(0,ob.jsx)(Ih,{name:"refresh"})}),(0,ob.jsx)(qu,{title:"Website Url",className:"tl-iframe-src",value:`${g.props.url}`,onChange:m}),(0,ob.jsx)(dc,{tooltip:"Open website url",type:"button",onClick:()=>window.open(g.props.url),children:(0,ob.jsx)(Ih,
{name:"external-link"})})]})}),nI=nf(()=>{const b=sg(),g=wk(b.selectedShapesArray,"YoutubeLink")[0],m=lp.default.useCallback(I=>{g.onYoutubeLinkChange(I.target.value);b.persist()},[]);return(0,ob.jsxs)("span",{className:"flex gap-3",children:[(0,ob.jsx)(qu,{title:"YouTube Link",className:"tl-youtube-link",value:`${g.props.url}`,onChange:m}),(0,ob.jsx)(dc,{tooltip:"Open YouTube Link",type:"button",onClick:()=>{var I,W,ia;return null==(ia=null==(W=null==(I=window.logseq)?void 0:I.api)?void 0:W.open_external_link)?
void 0:ia.call(W,g.props.url)},children:(0,ob.jsx)(Ih,{name:"external-link"})})]})}),oI=nf(()=>{const b=sg(),g=wk(b.selectedShapesArray,"TwitterLink")[0],m=lp.default.useCallback(I=>{g.onTwitterLinkChange(I.target.value);b.persist()},[]);return(0,ob.jsxs)("span",{className:"flex gap-3",children:[(0,ob.jsx)(qu,{title:"Twitter Link",className:"tl-twitter-link",value:`${g.props.url}`,onChange:m}),(0,ob.jsx)(dc,{tooltip:"Open Twitter Link",type:"button",onClick:()=>{var I,W,ia;return null==(ia=null==
(W=null==(I=window.logseq)?void 0:I.api)?void 0:W.open_external_link)?void 0:ia.call(W,g.props.url)},children:(0,ob.jsx)(Ih,{name:"external-link"})})]})}),pI=nf(()=>{const b=sg(),g=wk(b.selectedShapesArray,"NoFill"),m=lp.default.useCallback(W=>{g.forEach(ia=>ia.update({noFill:W}));b.persist()},[]),I=g.every(W=>W.props.noFill);return(0,ob.jsx)(cn,{tooltip:"Fill",className:"tl-button",pressed:I,onPressedChange:m,children:(0,ob.jsx)(Ih,{name:I?"droplet-off":"droplet"})})}),qI=nf(()=>{const b=sg(),g=
wk(b.selectedShapesArray,"Swatch"),m=lp.default.useCallback(W=>{g.forEach(ia=>{ia.update({fill:W,stroke:W})});b.persist()},[]),I=lp.default.useCallback(W=>{g.forEach(ia=>{ia.update({opacity:W})});b.persist()},[]);return(0,ob.jsx)(tg,{popoverSide:"top",color:g[0].props.noFill?g[0].props.stroke:g[0].props.fill,opacity:g[0].props.opacity,setOpacity:I,setColor:m})}),rI=nf(()=>{const b=sg(),g=wk(b.selectedShapesArray,"StrokeType"),m=g.every(I=>"dashed"===I.props.strokeType)?"dashed":g.every(I=>"line"===
I.props.strokeType)?"line":"mixed";return(0,ob.jsx)(so,{title:"Stroke Type",options:[{value:"line",icon:"circle",tooltip:"Solid"},{value:"dashed",icon:"circle-dashed",tooltip:"Dashed"}],value:m,onValueChange:I=>{g.forEach(W=>{W.update({strokeType:I})});b.persist()}})}),sI=nf(()=>{const b=sg(),g=wk(b.selectedShapesArray,"ArrowMode");var m=g.every(W=>{var ia;return"arrow"===(null==(ia=W.props.decorations)?void 0:ia.start)});const I=g.every(W=>{var ia;return"arrow"===(null==(ia=W.props.decorations)?
void 0:ia.end)});m=[m?"start":null,I?"end":null].filter(Lg);return(0,ob.jsx)(bn,{title:"Arrow Head",options:[{value:"start",icon:"arrow-narrow-left"},{value:"end",icon:"arrow-narrow-right"}],value:m,onValueChange:W=>{g.forEach(ia=>{var sa=ia.update;var La={start:W.includes("start")?"arrow":null,end:W.includes("end")?"arrow":null};sa.call(ia,{decorations:La})});b.persist()}})}),tI=nf(()=>{const b=sg(),g=wk(b.selectedShapesArray,"TextStyle"),m=g.every(W=>500<W.props.fontWeight),I=g.every(W=>W.props.italic);
return(0,ob.jsxs)("span",{className:"flex gap-1",children:[(0,ob.jsx)(cn,{tooltip:"Bold",className:"tl-button",pressed:m,onPressedChange:W=>{g.forEach(ia=>{ia.update({fontWeight:W?700:400});ia.onResetBounds()});b.persist()},children:(0,ob.jsx)(Ih,{name:"bold"})}),(0,ob.jsx)(cn,{tooltip:"Italic",className:"tl-button",pressed:I,onPressedChange:W=>{g.forEach(ia=>{ia.update({italic:W});ia.onResetBounds()});b.persist()},children:(0,ob.jsx)(Ih,{name:"italic"})})]})}),uI=nf(()=>{var b;const g=sg(),m=g.selectedShapesArray[0];
return(0,ob.jsx)($H,{onRefsChange:I=>{m.update({refs:I});g.persist()},refs:null!=(b=m.props.refs)?b:[],shapeType:m.props.type,side:"right",pageId:"logseq-portal"===m.props.type?m.props.pageId:void 0,portalType:"logseq-portal"===m.props.type?m.props.blockType:void 0})});zn.set("Edit",iI);zn.set("AutoResizing",jI);zn.set("LogseqPortalViewMode",kI);zn.set("ScaleLevel",lI);zn.set("YoutubeLink",nI);zn.set("TwitterLink",oI);zn.set("IFrameSource",mI);zn.set("NoFill",pI);zn.set("Swatch",qI);zn.set("StrokeType",
rI);zn.set("ArrowMode",sI);zn.set("TextStyle",tI);zn.set("Links",uI);var gB=b=>{var g;return(null!=(g=yw[b])?g:[]).filter(Lg)},vI=b=>{const g=b.map(I=>I.props.type),m=new Set(0<b.length?gB(g[0]):[]);for(let I=1;I<g.length&&0<m.size;I++){const W=gB(g[I]);m.forEach(ia=>{W.includes(ia)||m.delete(ia)})}1<b.length&&hI.forEach(I=>{m.has(I)&&m.delete(I)});return Array.from(m).sort((I,W)=>fB.indexOf(I)-fB.indexOf(W)).map(I=>zn.get(I))};ob=V(586);var wI=nf(({shapes:b,offsets:g,hidden:m})=>{const I=sg(),W=
Ss.useRef(null),ia=Ss.useRef(null);Ss.useLayoutEffect(()=>{setTimeout(()=>{const La=ia.current;if(La){var {offsetWidth:Va,offsetHeight:$a}=La;W.current=[Va,$a]}})});Ss.useLayoutEffect(()=>{var La;const Va=ia.current;if(Va){var $a=null!=(La=W.current)?La:[0,0];La=0;if(116>g.top){var lb=g.height/2+40;140>g.bottom&&(lb+=g.bottom-140)}else lb=-(g.height/2+40);16>g.left+g.width/2-$a[0]/2?La+=-(g.left+g.width/2-$a[0]/2-16):16>g.right+g.width/2-$a[0]/2&&(La+=g.right+g.width/2-$a[0]/2-16);var [ub,Rb]=[La,
lb];Va.style.transform=`translateX(${ub}px) translateY(${Rb}px)`}},[g]);if(!I)return null;const sa=vI(b);return(0,ob.jsx)(ao,{centered:!0,children:0<sa.length&&(0,ob.jsx)("div",{ref:ia,className:"tl-toolbar tl-context-bar",style:{visibility:m?"hidden":"visible",pointerEvents:m?"none":"all"},children:sa.map((La,Va)=>(0,ob.jsxs)(Ss.Fragment,{children:[(0,ob.jsx)(La,{}),Va<sa.length-1&&(0,ob.jsx)(Rq,{className:"tl-toolbar-separator",orientation:"vertical"})]},Va))})})}),hB=vb(V(22)),ul=V(22),[xI]=og("ContextMenu",
[au]),$s=au(),[yI,iB]=xI("ContextMenu"),zI=(0,ul.forwardRef)((b,g)=>{const {__scopeContextMenu:m,disabled:I=!1}=b,W=Ya(b,["__scopeContextMenu","disabled"]),ia=iB("ContextMenuTrigger",m),sa=$s(m),La=(0,ul.useRef)({x:0,y:0}),Va=(0,ul.useRef)({getBoundingClientRect:()=>DOMRect.fromRect(re({width:0,height:0},La.current))}),$a=(0,ul.useRef)(0),lb=(0,ul.useCallback)(()=>window.clearTimeout($a.current),[]);(0,ul.useEffect)(()=>lb,[lb]);(0,ul.useEffect)(()=>void(I&&lb()),[I,lb]);return(0,ul.createElement)(ul.Fragment,
null,(0,ul.createElement)(Oz,se({},sa,{virtualRef:Va})),(0,ul.createElement)(tj.span,se({"data-state":ia.open?"open":"closed","data-disabled":I?"":void 0},W,{ref:g,style:re({WebkitTouchCallout:"none"},b.style),onContextMenu:I?b.onContextMenu:Zf(b.onContextMenu,ub=>{lb();La.current={x:ub.clientX,y:ub.clientY};ia.onOpenChange(!0);ub.preventDefault()}),onPointerDown:I?b.onPointerDown:Zf(b.onPointerDown,Dn(ub=>{lb();$a.current=window.setTimeout(()=>{La.current={x:ub.clientX,y:ub.clientY};ia.onOpenChange(!0)},
700)})),onPointerMove:I?b.onPointerMove:Zf(b.onPointerMove,Dn(lb)),onPointerCancel:I?b.onPointerCancel:Zf(b.onPointerCancel,Dn(lb)),onPointerUp:I?b.onPointerUp:Zf(b.onPointerUp,Dn(lb))})))}),AI=(0,ul.forwardRef)((b,g)=>{var {__scopeContextMenu:m}=b;const I=Ya(b,["__scopeContextMenu"]),W=iB("ContextMenuContent",m);m=$s(m);const ia=(0,ul.useRef)(!1);return(0,ul.createElement)(Op,se({},m,I,{ref:g,side:"right",sideOffset:2,align:"start",onCloseAutoFocus:sa=>{var La;null===(La=b.onCloseAutoFocus)||void 0===
La||La.call(b,sa);!sa.defaultPrevented&&ia.current&&sa.preventDefault();ia.current=!1},onInteractOutside:sa=>{var La;null===(La=b.onInteractOutside)||void 0===La||La.call(b,sa);sa.defaultPrevented||W.modal||(ia.current=!0)},style:Ga(re({},b.style),{["--radix-context-menu-content-transform-origin"]:"var(--radix-popper-transform-origin)"})}))}),Km=(0,ul.forwardRef)((b,g)=>{var {__scopeContextMenu:m}=b;b=Ya(b,["__scopeContextMenu"]);m=$s(m);return(0,ul.createElement)(Rz,se({},m,b,{ref:g}))}),Yq=(0,ul.forwardRef)((b,
g)=>{var {__scopeContextMenu:m}=b;b=Ya(b,["__scopeContextMenu"]);m=$s(m);return(0,ul.createElement)(tF,se({},m,b,{ref:g}))}),BI=b=>{const {__scopeContextMenu:g,children:m,onOpenChange:I,dir:W,modal:ia=!0}=b,[sa,La]=(0,ul.useState)(!1);b=$s(g);const Va=ij(I),$a=(0,ul.useCallback)(lb=>{La(lb);Va(lb)},[Va]);return(0,ul.createElement)(yI,{scope:g,open:sa,onOpenChange:$a,modal:ia},(0,ul.createElement)(Sz,se({},b,{dir:W,open:sa,onOpenChange:$a,modal:ia}),m))};ob=V(586);var CI=nf(function({children:b,collisionRef:g}){var m,
I,W,ia,sa,La,Va;const $a=sg(),lb=hB.useRef(null),ub=ec=>{ec();$a.transition("select")},Rb=hB.useMemo(()=>{var ec,Vb,rc;return(null==(rc=null==(Vb=null==(ec=null==window?void 0:window.logseq)?void 0:ec.api)?void 0:Vb.get_state_from_store)?void 0:rc.call(Vb,"ui/developer-mode?"))||!1},[]);return(0,ob.jsxs)(BI,{onOpenChange:ec=>{ec&&!$a.isIn("select.contextMenu")?$a.transition("select").selectedTool.transition("contextMenu"):!ec&&$a.isIn("select.contextMenu")&&$a.selectedTool.transition("idle")},children:[(0,ob.jsx)(zI,
{disabled:$a.editingShape&&0!==Object.keys($a.editingShape).length,children:b}),(0,ob.jsx)(AI,{className:"tl-menu tl-context-menu",ref:lb,onEscapeKeyDown:()=>$a.transition("select"),collisionBoundary:g.current,asChild:!0,tabIndex:-1,children:(0,ob.jsxs)("div",{children:[1<(null==(m=$a.selectedShapes)?void 0:m.size)&&(0,ob.jsxs)(ob.Fragment,{children:[(0,ob.jsxs)(Km,{children:[(0,ob.jsxs)("div",{className:"tl-menu-button-row pb-0",children:[(0,ob.jsx)(dc,{tooltip:"Align left",onClick:()=>ub(()=>$a.align("left")),
children:(0,ob.jsx)(Ih,{name:"layout-align-left"})}),(0,ob.jsx)(dc,{tooltip:"Align center horizontally",onClick:()=>ub(()=>$a.align("centerHorizontal")),children:(0,ob.jsx)(Ih,{name:"layout-align-center"})}),(0,ob.jsx)(dc,{tooltip:"Align right",onClick:()=>ub(()=>$a.align("right")),children:(0,ob.jsx)(Ih,{name:"layout-align-right"})}),(0,ob.jsx)(Rq,{className:"tl-toolbar-separator",orientation:"vertical"}),(0,ob.jsx)(dc,{tooltip:"Distribute horizontally",onClick:()=>ub(()=>$a.distribute("horizontal")),
children:(0,ob.jsx)(Ih,{name:"layout-distribute-vertical"})})]}),(0,ob.jsxs)("div",{className:"tl-menu-button-row pt-0",children:[(0,ob.jsx)(dc,{tooltip:"Align top",onClick:()=>ub(()=>$a.align("top")),children:(0,ob.jsx)(Ih,{name:"layout-align-top"})}),(0,ob.jsx)(dc,{tooltip:"Align center vertically",onClick:()=>ub(()=>$a.align("centerVertical")),children:(0,ob.jsx)(Ih,{name:"layout-align-middle"})}),(0,ob.jsx)(dc,{tooltip:"Align bottom",onClick:()=>ub(()=>$a.align("bottom")),children:(0,ob.jsx)(Ih,
{name:"layout-align-bottom"})}),(0,ob.jsx)(Rq,{className:"tl-toolbar-separator",orientation:"vertical"}),(0,ob.jsx)(dc,{tooltip:"Distribute vertically",onClick:()=>ub(()=>$a.distribute("vertical")),children:(0,ob.jsx)(Ih,{name:"layout-distribute-horizontal"})})]})]}),(0,ob.jsx)(Yq,{className:"menu-separator"}),(0,ob.jsxs)(Km,{className:"tl-menu-item",onClick:()=>ub($a.packIntoRectangle),children:[(0,ob.jsx)(Ih,{className:"tl-menu-icon",name:"layout-grid"}),"Pack into rectangle"]}),(0,ob.jsx)(Yq,{className:"menu-separator"})]}),
0<(null==(I=$a.selectedShapes)?void 0:I.size)&&(0,ob.jsxs)(ob.Fragment,{children:[(0,ob.jsxs)(Km,{className:"tl-menu-item",onClick:()=>ub($a.api.zoomToSelection),children:["Zoom to fit",(0,ob.jsx)("div",{className:"tl-menu-right-slot",children:(0,ob.jsxs)("span",{className:"keyboard-shortcut",children:[(0,ob.jsx)("code",{children:yo})," ",(0,ob.jsx)("code",{children:"⇧"})," ",(0,ob.jsx)("code",{children:"1"})]})})]}),(0,ob.jsx)(Yq,{className:"menu-separator"})]}),($a.selectedShapesArray.some(ec=>
"group"===ec.type||$a.getParentGroup(ec))||1<$a.selectedShapesArray.length)&&(0,ob.jsxs)(ob.Fragment,{children:[$a.selectedShapesArray.some(ec=>"group"===ec.type||$a.getParentGroup(ec))&&(0,ob.jsxs)(Km,{className:"tl-menu-item",onClick:()=>ub($a.api.unGroup),children:[(0,ob.jsx)(Ih,{className:"tl-menu-icon",name:"ungroup"}),"Ungroup",(0,ob.jsx)("div",{className:"tl-menu-right-slot",children:(0,ob.jsxs)("span",{className:"keyboard-shortcut",children:[(0,ob.jsx)("code",{children:yo})," ",(0,ob.jsx)("code",
{children:"⇧"})," ",(0,ob.jsx)("code",{children:"G"})]})})]}),1<$a.selectedShapesArray.length&&(0,ob.jsxs)(Km,{className:"tl-menu-item",onClick:()=>ub($a.api.doGroup),children:[(0,ob.jsx)(Ih,{className:"tl-menu-icon",name:"group"}),"Group",(0,ob.jsx)("div",{className:"tl-menu-right-slot",children:(0,ob.jsxs)("span",{className:"keyboard-shortcut",children:[(0,ob.jsx)("code",{children:yo})," ",(0,ob.jsx)("code",{children:"G"})]})})]}),(0,ob.jsx)(Yq,{className:"menu-separator"})]}),0<(null==(W=$a.selectedShapes)?
void 0:W.size)&&(0,ob.jsxs)(ob.Fragment,{children:[(0,ob.jsxs)(Km,{className:"tl-menu-item",onClick:()=>ub($a.cut),children:[(0,ob.jsx)(Ih,{className:"tl-menu-icon",name:"cut"}),"Cut",(0,ob.jsx)("div",{className:"tl-menu-right-slot",children:(0,ob.jsxs)("span",{className:"keyboard-shortcut",children:[(0,ob.jsx)("code",{children:yo})," ",(0,ob.jsx)("code",{children:"X"})]})})]}),(0,ob.jsxs)(Km,{className:"tl-menu-item",onClick:()=>ub($a.copy),children:[(0,ob.jsx)(Ih,{className:"tl-menu-icon",name:"copy"}),
"Copy",(0,ob.jsx)("div",{className:"tl-menu-right-slot",children:(0,ob.jsxs)("span",{className:"keyboard-shortcut",children:[(0,ob.jsx)("code",{children:yo})," ",(0,ob.jsx)("code",{children:"C"})]})})]})]}),(0,ob.jsxs)(Km,{className:"tl-menu-item",onClick:()=>ub($a.paste),children:[(0,ob.jsx)(Ih,{className:"tl-menu-icon",name:"clipboard"}),"Paste",(0,ob.jsx)("div",{className:"tl-menu-right-slot",children:(0,ob.jsxs)("span",{className:"keyboard-shortcut",children:[(0,ob.jsx)("code",{children:yo}),
" ",(0,ob.jsx)("code",{children:"V"})]})})]}),1===(null==(ia=$a.selectedShapes)?void 0:ia.size)&&(0,ob.jsxs)(Km,{className:"tl-menu-item",onClick:()=>ub(()=>$a.paste(void 0,!0)),children:["Paste as link",(0,ob.jsx)("div",{className:"tl-menu-right-slot",children:(0,ob.jsxs)("span",{className:"keyboard-shortcut",children:[(0,ob.jsx)("code",{children:yo})," ",(0,ob.jsx)("code",{children:"⇧"})," ",(0,ob.jsx)("code",{children:"V"})]})})]}),(0,ob.jsx)(Yq,{className:"menu-separator"}),(0,ob.jsxs)(Km,{className:"tl-menu-item",
onClick:()=>ub($a.api.selectAll),children:["Select all",(0,ob.jsx)("div",{className:"tl-menu-right-slot",children:(0,ob.jsxs)("span",{className:"keyboard-shortcut",children:[(0,ob.jsx)("code",{children:yo})," ",(0,ob.jsx)("code",{children:"A"})]})})]}),1<(null==(sa=$a.selectedShapes)?void 0:sa.size)&&(0,ob.jsx)(Km,{className:"tl-menu-item",onClick:()=>ub($a.api.deselectAll),children:"Deselect all"}),0<(null==(La=$a.selectedShapes)?void 0:La.size)&&(0,ob.jsxs)(ob.Fragment,{children:[(0,ob.jsxs)(Km,
{className:"tl-menu-item",onClick:()=>ub($a.api.deleteShapes),children:[(0,ob.jsx)(Ih,{className:"tl-menu-icon",name:"backspace"}),"Delete",(0,ob.jsx)("div",{className:"tl-menu-right-slot",children:(0,ob.jsx)("span",{className:"keyboard-shortcut",children:(0,ob.jsx)("code",{children:"Del"})})})]}),1<(null==(Va=$a.selectedShapes)?void 0:Va.size)&&(0,ob.jsxs)(ob.Fragment,{children:[(0,ob.jsx)(Yq,{className:"menu-separator"}),(0,ob.jsxs)(Km,{className:"tl-menu-item",onClick:()=>ub($a.flipHorizontal),
children:[(0,ob.jsx)(Ih,{className:"tl-menu-icon",name:"flip-horizontal"}),"Flip horizontally"]}),(0,ob.jsxs)(Km,{className:"tl-menu-item",onClick:()=>ub($a.flipVertical),children:[(0,ob.jsx)(Ih,{className:"tl-menu-icon",name:"flip-vertical"}),"Flip vertically"]})]}),(0,ob.jsx)(Yq,{className:"menu-separator"}),(0,ob.jsxs)(Km,{className:"tl-menu-item",onClick:()=>ub($a.bringToFront),children:["Move to front",(0,ob.jsx)("div",{className:"tl-menu-right-slot",children:(0,ob.jsxs)("span",{className:"keyboard-shortcut",
children:[(0,ob.jsx)("code",{children:"⇧"})," ",(0,ob.jsx)("code",{children:"]"})]})})]}),(0,ob.jsxs)(Km,{className:"tl-menu-item",onClick:()=>ub($a.sendToBack),children:["Move to back",(0,ob.jsx)("div",{className:"tl-menu-right-slot",children:(0,ob.jsxs)("span",{className:"keyboard-shortcut",children:[(0,ob.jsx)("code",{children:"⇧"})," ",(0,ob.jsx)("code",{children:"["})]})})]}),Rb&&(0,ob.jsx)(Km,{className:"tl-menu-item",onClick:()=>{1===$a.selectedShapesArray.length?console.log(Dc($a.selectedShapesArray[0].serialized)):
console.log($a.selectedShapesArray.map(ec=>Dc(ec.serialized)))},children:"(Dev) Print shape props"})]})]})})]})}),jB=vb(V(22));ob=V(586);var DI=nf(({shape:b})=>{const g=sg(),{handlers:m}=jB.default.useContext(nn),I=jB.default.useMemo(()=>{var W;const ia=[...(null!=(W=b.props.refs)?W:[])].map(sa=>[sa,!0]);"logseq-portal"===b.props.type&&b.props.pageId&&ia.unshift([b.props.pageId,!1]);return ia.filter(sa=>sa[0].toLowerCase()!==g.currentPage.name&&m.getBlockPageName(sa[0])!==g.currentPage.name)},[b.props.type,
b.props.parentId,b.props.refs]);return 0===I.length?null:(0,ob.jsx)("div",{className:"tl-quick-links",title:"Shape Quick Links",children:I.map(([W,ia])=>(0,ob.jsx)("div",{className:"tl-quick-links-row",children:(0,ob.jsx)(pA,{id:W,showReferenceContent:ia})},W))})}),EI=vb(V(22)),kB=vb(V(22)),FI=[".png",".svg",".jpg",".jpeg",".gif"],GI=[".mp4",".webm",".ogg"],HI=(b,g,m)=>td(void 0,[b,g,m],function*(I,{point:W,shiftKey:ia,dataTransfer:sa,fromDrop:La},Va){function $a(jd,ld){return td(this,null,function*(){const Gd=
Object.values(I.assets).find(we=>we.src===jd);return Gd?Gd:{id:Of(),type:ld?"video":"image",src:jd,size:yield vj(Va.makeAssetUrl(jd),ld)}})}function lb(jd){return td(this,null,function*(){const ld=jd.filter(Gd=>"unknown"!==jo(Gd.name)).map(Gd=>td(this,null,function*(){try{const we=yield Va.saveAsset(Gd);return yield $a(we,"video"===jo(Gd.name))}catch(we){console.error(we)}return null}));return(yield Promise.all(ld)).filter(Lg)})}function ub(jd){return[Ga(re({},Qp.defaultProps),{html:jd,point:[W[0],
W[1]]})]}function Rb(jd){return td(this,null,function*(){return En(Vb,Wb,mc,tc,rc,ae)(jd)})}function ec(){return td(this,null,function*(){const jd=yield navigator.clipboard.read(),ld=En(tc,rc,ae);return(yield Promise.all(jd.map(Gd=>ld(Gd)))).flat().filter(Lg)})}function Vb(jd){return td(this,null,function*(){var ld=Array.from(jd.files);return 0<ld.length?(tf=ld=yield lb(ld),ld.map((Gd,we)=>{const Fe=Ga(re({},"video"===Gd.type?pu.defaultProps:ou.defaultProps),{id:Of(),assetId:Gd.id,opacity:1});Gd.size&&
Object.assign(Fe,{point:[W[0]-Gd.size[0]/4+16*we,W[1]-Gd.size[1]/4+16*we],size:Yd.div(Gd.size,2)});return Fe})):null})}function rc(jd){return td(this,null,function*(){if(jd.types.includes("text/plain")&&(ia||La))return null;const ld=yield Xn(jd,"text/html");return ld?En(Hc,ub)(ld):null})}function mc(jd){return td(this,null,function*(){var ld,Gd,we,Fe,qf,hf,gf=jd.getData("block-uuid");if(gf){gf=gf.trim();const Ug=null==(we=null==(Gd=null==(ld=window.logseq)?void 0:ld.api)?void 0:Gd.get_selected_blocks)?
void 0:we.call(Gd);ld=Ug&&1<(null==Ug?void 0:Ug.length)?Ug.map(Gg=>Gg.uuid):[gf];null==(hf=null==(qf=null==(Fe=window.logseq)?void 0:Fe.api)?void 0:qf.set_blocks_id)?void 0:hf.call(qf,ld);Fe=ld.map(Gg=>Vd(`((${Gg}))`));return(yield Promise.all(Fe)).flat().filter(Lg).map((Gg,qi)=>Ga(re({},Gg),{point:[W[0]+(tl.defaultProps.size[0]+16)*qi,W[1]]}))}return null})}function Wb(jd){return td(this,null,function*(){var ld=jd.getData("page-name");return ld?(ld=ld.trim(),Vd(`[[${ld}]]`)):null})}function tc(jd){return td(this,
null,function*(){var ld=yield Xn(jd,"text/plain");return ld?(ld=ld.trim(),En(Qc,Uc,Vd)(ld)):null})}function Hc(jd){if(jd=I.api.getClonedShapesFromTldrString(decodeURIComponent(jd),W)){const {shapes:ld,assets:Gd,bindings:we}=jd;pf.push(...Gd);df.push(...we);return ld}return null}function Qc(jd){return td(this,null,function*(){try{new URL(jd);var ld=!0}catch(Gd){ld=!1}return!ld||ia||La?null:JA.test(jd)?[Ga(re({},Xq.defaultProps),{url:jd,point:[W[0],W[1]]})]:LA.test(jd)?[Ga(re({},Ur.defaultProps),{url:jd,
point:[W[0],W[1]]})]:[Ga(re({},Vq.defaultProps),{url:jd,point:[W[0],W[1]]})]})}function Uc(jd){return jd.startsWith("\x3ciframe")?[Ga(re({},Qp.defaultProps),{html:jd,point:[W[0],W[1]]})]:null}function Vd(jd){return td(this,null,function*(){if(/^\(\(.*\)\)$/.test(jd)&&40===jd.length){var ld=jd.slice(2,-2);if(Wh(ld))return[Ga(re({},tl.defaultProps),{point:[W[0],W[1]],size:[400,0],pageId:ld,fill:I.settings.color,stroke:I.settings.color,blockType:"B"})]}else if(/^\[\[.*\]\]$/.test(jd))return ld=jd.slice(2,
-2),[Ga(re({},tl.defaultProps),{point:[W[0],W[1]],size:[400,0],pageId:ld,fill:I.settings.color,stroke:I.settings.color,blockType:"P"})];return null})}function ae(jd){return td(this,null,function*(){var ld=yield Xn(jd,"text/plain");return ld&&(ld=ld.trim(),ld=null==Va?void 0:Va.addNewBlock(ld))?[Ga(re({},tl.defaultProps),{size:[400,0],point:[W[0],W[1]],pageId:ld,fill:I.settings.color,stroke:I.settings.color,blockType:"B",compact:!0})]:null})}var De,Oe;let tf=[],pf=[];const df=[];I.cursors.setCursor("progress");
let Ie=[];try{sa?Ie.push(...(null!=(De=yield Rb(sa))?De:[])):Ie.push(...(null!=(Oe=yield ec())?Oe:[]))}catch(jd){console.error(jd)}const Bd=Ie.map(jd=>Ga(re({},jd),{parentId:I.currentPageId,id:Wh(jd.id)?jd.id:Of()})),fd=null==sa?void 0:sa.types.every(jd=>"Files"===jd);I.wrapUpdate(()=>{var jd=[...tf,...pf];0<jd.length&&I.createAssets(jd);0<Bd.length&&I.createShapes(Bd);I.currentPage.updateBindings(Object.fromEntries(df.map(ld=>[ld.id,ld])));if(1===I.selectedShapesArray.length&&1===Bd.length&&!La){jd=
I.selectedShapesArray[0];const ld=I.getShapeById(Bd[0].id);I.createNewLineBinding(jd,ld)}I.setSelectedShapes(Bd.map(ld=>ld.id));I.selectedTool.transition("idle");I.cursors.setCursor("default");(La||fd)&&I.packIntoRectangle()})}),II=vb(V(22));ob=V(586);var JI=[qw,rw,OA,sw,tw,uw,vw,ww,PA,TA,SA,Zs],KI=b=>{const {renderers:g}=Dr.useContext(nn);return(0,ob.jsx)(g.BacklinksCount,Ga(re({},b),{options:{"portal?":!1}}))},LI=()=>{const b=Dr.useRef(null),g=sg(),m=Dr.useMemo(()=>({ContextBar:wI,BacklinksCount:KI,
QuickLinks:DI}),[]);return(0,ob.jsx)(CI,{collisionRef:b,children:(0,ob.jsx)("div",{ref:b,className:"logseq-tldraw logseq-tldraw-wrapper","data-tlapp":g.uuid,children:(0,ob.jsx)(VD,{components:m,children:(0,ob.jsx)(ZF,{})})})})},MI=b=>{var {onPersist:g,model:m}=b;b=Ya(b,["onPersist","model"]);const I=Pm(),W=Rl(),ia=lo(),sa=Dr.useCallback((La,Va)=>{(0,my.default)(La.serialized,m)||(null==g?void 0:g(La,Va))},[m]);return(0,ob.jsx)(zD,Ga(re({Shapes:NA,Tools:JI,onDrop:I,onPaste:W,onCanvasDBClick:ia,onPersist:sa,
model:m},b),{children:(0,ob.jsx)(LI,{})}))},NI=function(b){var {renderers:g,handlers:m}=b;b=Ya(b,["renderers","handlers"]);const I={renderers:Dr.useMemo(()=>Object.fromEntries(Object.entries(g).map(([W,ia])=>[W,Dr.memo(ia)])),[]),handlers:m};return(0,ob.jsx)(nn.Provider,{value:I,children:(0,ob.jsx)(MI,re({},b))})}};
'use strict';var Kad=function(a){return a},Lad=function(a){a=$APP.FG(a);return $APP.Am.j($APP.yM,a)},Mad=function(a){var b=$APP.iy.C($APP.NG(a));a=Lad(a);a=$APP.Nf.j(function(d){return $APP.B.j(b,$APP.iy.C($APP.PE.C(d)))},a);var c=$APP.Wg($APP.Am.j($APP.Fb,$APP.rh.j(function(d){return $APP.ay.F(d,new $APP.O(null,2,5,$APP.Q,[$APP.QE,$APP.iy],null),null)},a)));a=$APP.Am.j(function(d){d=$APP.iy.C(d);return c.C?c.C(d):c.call(null,d)},a);return $APP.x(a)?$APP.A(a):null},Nad=function(){return $APP.Zl(null,
function(){return $APP.Zl(fetch("./whiteboard/onboarding.edn"),function(a){return $APP.Zl(a.text(),function(b){return $APP.Zl($APP.Pxa(b),function(c){return $APP.Tl(c)})})})})},Oad=function(a){var b=$APP.X0a();return($APP.qd(b)||$APP.B.j(1,$APP.Wc(b))&&$APP.B.j(a,$APP.gr.C($APP.A(b))))&&$APP.Jb($APP.ay.j($APP.v($APP.AB),new $APP.O(null,1,5,$APP.Q,[$APP.S7b],null)))},Pad=function(a){return null!=a?$APP.cm($APP.Zl(null,function(){return $APP.Zl(Nad(),function(b){var c=$APP.jf(b);b=$APP.H.j(c,$APP.iH);
c=$APP.H.j(c,$APP.OE);var d=$APP.A(b);b=$APP.mk.j($APP.qx,$APP.rh.j($APP.Xhb,$APP.Nf.j($APP.yM,c)));d=$APP.Yhb(d);c=$APP.$P.C(d);d=$APP.KH.C(d);a.cloneShapesIntoCurrentPage($APP.Bi(new $APP.m(null,3,[$APP.OBb,b,$APP.$P,c,$APP.KH,d],null)));$APP.CB($APP.S7b,!0);b=$APP.gB($APP.jbc,!0);return $APP.Tl(b)})}),function(b){return console.warn("Failed to populate onboarding whiteboard",b)}):null},Sad=function(a,b){b=$APP.sq.G(b,$APP.E([new $APP.m(null,1,[$APP.tq,!0],null)]));b=$APP.jf(b);var c=$APP.H.j(b,
Qad),d=$APP.H.j(b,$APP.wJ),e=$APP.H.j(b,Rad),f=$APP.zB();return $APP.Zl(null,function(){return $APP.Zl($APP.n(d)?$APP.edb(f,a,new $APP.m(null,1,[$APP.Sw,100],null)):null,function(g){return $APP.Zl($APP.n(c)?$APP.jdb(a,10):null,function(h){return $APP.Zl($APP.n(e)?$APP.kdb(a,100):null,function(l){return $APP.Tl($APP.Bi(new $APP.m(null,3,[$APP.iH,h,$APP.OE,g,$APP.WJ,l],null)))})})})})},Tad=function(a){return $APP.Yl($APP.exb($APP.zB(),new $APP.O(null,1,5,$APP.Q,[$APP.sq.C(a)],null)),function(b){var c=
(c=$APP.x(b))?$APP.A(b):c;return $APP.n(c)?(b=$APP.D.F(c,0,null),$APP.D.F(c,1,null),c=$APP.D.F(c,2,null),$APP.gxb($APP.n(c)?c:b)):null})},fbd=function(a){return $APP.Eg([Uad,Vad,Wad,Xad,Yad,Zad,$APP.bD,$ad,abd,bbd,cbd,dbd,ebd],[function(b){return $APP.gr.C($APP.j_a($APP.zB(),$APP.ti(b)))},function(b){return $APP.OG(b,!1)},function(b){return $APP.WBb(b)},$APP.Ow,function(b){return $APP.pwb(b,new $APP.m(null,1,[$APP.kR,!1],null))},$APP.jH,Sad,Tad,Kad,function(b){var c=$APP.u,d=c.C,e=$APP.FA(),f=$APP.NG(a),
g=Mad(a);b=new $APP.m(null,6,[$APP.QE,$APP.Rg($APP.n(g)?g:f,new $APP.O(null,1,5,$APP.Q,[$APP.iy],null)),$APP.CC,e,$APP.aG,$APP.n(b)?b:"",$APP.mF,$APP.hr,$APP.zE,new $APP.m(null,1,[$APP.gr,$APP.fr.C?$APP.fr.C(a):$APP.fr.call(null,a)],null),$APP.PE,new $APP.m(null,1,[$APP.gr,a],null)],null);$APP.GE(new $APP.O(null,1,5,$APP.Q,[b],null));return d.call(c,e)},function(b,c){return $APP.zC($APP.zB(),$APP.iy.C($APP.NG(b)),$APP.sh.C(c))},function(b){var c=$APP.Xv(b)?$APP.gr.C($APP.j_a($APP.zB(),$APP.ti(b))):
null;c=$APP.n(c)?c:b;var d=$APP.HG(c),e=$APP.jH(c);return $APP.n(d)?$APP.n(e)?$APP.cM(c,new $APP.m(null,1,[$APP.bM,b],null)):$APP.aM($APP.OG(b,!1)):null},function(b){return $APP.Bi($APP.XF($APP.ti(b)))}])},ebd=new $APP.N(null,"queryBlockByUUID","queryBlockByUUID",2091812895),bbd=new $APP.N(null,"addNewBlock","addNewBlock",1426762680),Rad=new $APP.N(null,"files?","files?",-1267491104),Uad=new $APP.N(null,"getBlockPageName","getBlockPageName",-1656908032),gbd=new $APP.N(null,"renderers","renderers",
-1460292282),hbd=new $APP.N(null,"model","model",331153215),Vad=new $APP.N(null,"getRedirectPageName","getRedirectPageName",-1858136925),Xad=new $APP.N(null,"isMobile","isMobile",-2043133877),ibd=new $APP.N(null,"onMount","onMount",-876858467),Yad=new $APP.N(null,"insertFirstPageBlock","insertFirstPageBlock",-1676658548),abd=new $APP.N(null,"makeAssetUrl","makeAssetUrl",217779988),jbd=new $APP.N(null,"onPersist","onPersist",-1848738852),kbd=new $APP.N(null,"Breadcrumb","Breadcrumb",-1351298906),dbd=
new $APP.N(null,"redirectToPage","redirectToPage",87147838),Wad=new $APP.N(null,"addNewWhiteboard","addNewWhiteboard",554297706),$ad=new $APP.N(null,"saveAsset","saveAsset",-668047853),lbd=new $APP.N(null,"BacklinksCount","BacklinksCount",364670631),mbd=new $APP.N(null,"Block","Block",-1959785792),cbd=new $APP.N(null,"sidebarAddBlock","sidebarAddBlock",-1204903203),nbd=new $APP.N(null,"Page","Page",-1267059506),Qad=new $APP.N(null,"pages?","pages?",-2065014049),obd=new $APP.N(null,"PageName","PageName",
-164991013),pbd=new $APP.N(null,"Tweet","Tweet",-452258680),Zad=new $APP.N(null,"isWhiteboardPage","isWhiteboardPage",-134150579),qbd=new $APP.N(null,"BlockReference","BlockReference",-120254741);$APP.$ca("tldraw");var rbd=$APP.jm(590);var sbd,tbd;$APP.U2c={};sbd=$APP.IR($APP.wa(rbd,"App"));$APP.X2c=$APP.wa(rbd,"generateJSXFromModel");
tbd=new $APP.m(null,7,[nbd,$APP.Hr($APP.Lr,function(a){return(0,$APP.f2c)(new $APP.m(null,2,[$APP.BM,$APP.OG($APP.wa(a,"pageName"),!1),$APP.eBb,!0],null))},null,"frontend.extensions.tldraw/page-cp"),mbd,$APP.Hr($APP.Lr,function(a){a=$APP.Th($APP.wa(a,"blockId"));var b=$APP.LTa($APP.S1b);a=b.C?b.C(a):b.call(null,a);return $APP.ur(a)},null,"frontend.extensions.tldraw/block-cp"),kbd,$APP.Hr($APP.Lr,function(a){return $APP.ur($APP.SU(new $APP.m(null,1,[$APP.$Y,!0],null),$APP.zB(),$APP.Th($APP.wa(a,"blockId")),
new $APP.m(null,2,[$APP.FSb,$APP.wa(a,"endSeparator"),$APP.GSb,$APP.wa(a,"levelLimit",3)],null)))},null,"frontend.extensions.tldraw/breadcrumb"),pbd,$APP.Hr($APP.Lr,function(a){return(0,$APP.CRb)($APP.wa(a,"tweetId"))},null,"frontend.extensions.tldraw/tweet"),obd,$APP.Hr($APP.Lr,function(a){return(0,$APP.yU)(new $APP.m(null,1,[$APP.$Y,!0],null),new $APP.m(null,1,[$APP.gr,$APP.wa(a,"pageName")],null))},null,"frontend.extensions.tldraw/page-name-link"),lbd,function(a){return $APP.wf.j($APP.$2c,$APP.rh.j(function(b){return $APP.sq.G($APP.wa(a,
b),$APP.E([new $APP.m(null,1,[$APP.tq,!0],null)]))},new $APP.O(null,3,5,$APP.Q,["id","className","options"],null)))},qbd,$APP.Hr($APP.Lr,function(a){return(0,$APP.RQb)($APP.hf,$APP.wa(a,"blockId"),null)},null,"frontend.extensions.tldraw/block-reference")],null);
$APP.V2c=$APP.Hr($APP.Lr,function(a,b){function c(l){var p=$APP.wa(l,"api");return $APP.n(p)?$APP.Yl(d?Pad(p):null,function(){$APP.EUa(l,b);return h.C?h.C(l):h.call(null,l)}):null}var d=Oad(a),e=$APP.bCb(a),f=$APP.Vr(null),g=$APP.D.F(f,0,null),h=$APP.D.F(f,1,null);$APP.Wr(function(){$APP.n($APP.n(g)?b:g)&&$APP.EUa(g,b);return function(){return $APP.Dc}},new $APP.O(null,2,5,$APP.Q,[b,g],null));return $APP.n(e)?$APP.X("div",{style:{overscrollBehavior:"none"},onBlur:function(l){l=$APP.wa(l,"target").tagName;
var p=new $APP.Sg(null,new $APP.m(null,2,["INPUT",null,"TEXTAREA",null],null),null);l=p.C?p.C(l):p.call(null,l);return $APP.n(l)?$APP.BC():null},onWheel:$APP.jw,className:"draw tldraw whiteboard relative w-full h-full"},[d&&$APP.Jb(g)?$APP.X("div",{style:{zIndex:200},className:"absolute inset-0 flex items-center justify-center"},[$APP.ur($APP.TR("Loading onboarding whiteboard ..."))]):null,$APP.ur(function(){var l=new $APP.m(null,5,[gbd,tbd,$APP.ZA,fbd(a),ibd,c,jbd,function(p){return $APP.QBb(a,$APP.wa(p,
"serialized"))},hbd,e],null);return sbd.C?sbd.C(l):sbd.call(null,l)}())]):null},null,"frontend.extensions.tldraw/tldraw-app");$APP.$a.Wi();
}).call(this);